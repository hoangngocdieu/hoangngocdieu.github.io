<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="" title="[Logo]"><img src="/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::Windows::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 Hướng dẫn cách thiết lập W2K VPN server -   <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/1098.html#4618" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: phuchn71 - Translator:  - Entry Date: 26/02/2009 01:25:07" title="Author: phuchn71 - Translator:  - Entry Date: 26/02/2009 01:25:07"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody"><i>Tác giả: (Someone)</i><br/> <br/> <font color='blue'><i>Virtual Private Networks (VPN) hay gọi theo tiếng Việt là Mạng Riêng Ảo, cho phép bạn mở rộng phạm vi mạng nội bộ bằng cách sử dụng lợi thế của internet.  Kỉ thuật VPN cho phép bạn kết nối với một host nằm xa hàng ngàn dặm với mạng LAN của bạn và làm cho nó trở thành một node hay một PC nữa trong mạng LAN.  Một đặc điểm nữa của VPN là sự kết nối giữa clients và mạng ảo của bạn khá an toàn như chính bạn đang ngồi trong cùng một mạng LAN.  </i></font><br/> <br/> Các hệ điều hành Windows 2000 Server cho phép bạn thiết lập VPN server bằng cách sử dụng lợi thế có sẳn trong RRAS (Remote Routing Access Service).  Sau khi thiết lập một server thành VPN server thì các clients có thể gọi vào và truy cập những tài nguyên trong mạng nội bộ hay còn gọi là LAN như là đang kết nối trực tiếp với network đó.  <br/> <b>VPN Clients</b>  Thế nào là VPN client?  VPN clients có thể là bất kì một computer nào sử dụng hệ điều hành từ Win9x, Windows NT Workstation hay là Windows 2000 Professional.  Ngay cả server cũng có thể là VPN clients.  Cách làm việc giữa client computer và server như thế nào?  Cách đơn giản và thong dụng nhất là client computer khởi tạo một kết nối với ISP bằng giao thức PPP (Point to Point Protocol).  Sau khi kết nối theo dạng này còn được gọi là “Non-Virtual” kết nối không ảo ở tầng datalink, client có thể sử dụng giao thức PPP này một lần nữa để thiết lập một kết nối ảo với VPN server và từ đây nó có thể trở thành một node hay một máy trạm trong hệ thống LAN.  <br/> <b>Lưu ý:</b> Khi client kết nối được với VPN server, thực tế nó vẫn đang kết nối với internet.  Tuy nhiên, sau khi thiết lập được kết nối VPN với VPN server, thì client hay máy trạm sẽ tự động tìm kiếm một địa chỉ IP mà địa chỉ IP này phải trùng hay nói đúng hơn là phải cùng subnet với mạng ảo mà nó kết nối tới, sự kết nối này sẽ tạo ra một interface ảo hay là một cạd mạng ảo.  Card mạng ảo này sẽ thiết lập một gateway mặc định.   <br/> <b>Cách cài đặt VPN </b>Server  Trước khi client có thể gọi vào hoặc có thể truy cập được vào mạng của bạn, bạn cần phải cài đặt VPN server.  Trong bài này chúng ta sẽ cùng nhau tìm hiểu cách cài đặt một VPN Server như thế nào cũng như sẽ điểm qua một vài vấn đề quan trọng trong hệ thống hạ tầng của giải pháp mạng ảo VPN. <br/> Bước đầu tiên là <b>enable Routing and Remote Access Service (RRAS).  </b>Bước này thì bạn không cần phải cài đặt vì nó đã được cài đặt sẳn khi bạn cài đặt hệ điều hành Windows.  Tuy nhiên mặc dù đã được cài đặt theo windows nhưng nó chưa được enable, cho nên để có thể enable RRAS thì bạn có thể làm theo các bước sau đây: <br/>   <br/> 	1. Chọn start, chọn Programs, chọn <b>Administrative Tools</b>, chọn <b>Routing and Remote Access </b>(RRAS).  <br/> 	2. Trong <b>Routing and Remote Access console</b>, right click  tên server của bạn, và chọn <b>Enable Routing and  Remote Access</b>.  Sau khi chọn như ở trên nó cần khoảng vài giây để activate.  <br/> 	3. Sau đó RRAS Wizard sẽ khơi động. Trong phần này bạn nên chọn mục <b>Manually configured server </b>và click Next theo hình dưới đây.      <br/> 	<br/> bmuht_gpj.89092_4babe42e3fdad65315473fd1cbe6b31f/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth<br/> <br/> 4. Bạn cứ tiếp tục làm theo sự chỉ dẫn trên wizard cho tới khi bạn hoàn tất phần wizard, và cuối cùng là chọn <b>Finish</b> để hoàn tất phần enable RRAS.  <br/> 	5. Sau khi hoàn tất phần enable RRAS bạn cần phải restart service, bạn chỉ chọn Yes.  <br/> <br/> <b>Lưu ý: </b>Chúng ta không sử dụng mục <b>Virtual private network (VPN) server</b> vì có một trở ngại là khi chọn mục này, nó sẽ bảo vệ cái interface mà bạn chọn bằng cách cài bộ lọc mà chỉ cho phép hai giao thức căn bản là L2TP và PPTP được quyền truyền tải dử liệu, RRAS sẽ không truyền tải nếu nó không phải là giao thức trên, đó là lý do nên sử dụng mục <b>Manually configured server</b>.  Khi RRAS bắt đầu làm việc thì bạn sẽ thấy như tấm hình dưới đây.  <br/> <br/> [img]http:/bmuht_gpj.89092_87d24aa67d344c3169c9310c07751e6a/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth<br/> Phần <b>General Tab</b>  Right click vào server name của bạn và chọn Properties theo hình dưới đây.   <br/> <br/> [img]http://www.htmlonlbmuht_gpj.89092_2a2b844a1feee17eed02dce48c30e140/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth phần Properties trên bạn có thể chọn vào mục <b>Router</b> vì computer của bạn sẽ chịu trách nhiệm chuyển tải những yêu cầu từ VPN clients với lại mạng nội bộ LAN, đó là lý do bạn cần phải chọn vào mục router.  Phần làm việc của mục router này là route traffic trực tiếp giữa mạng LAN và những máy truy cập thông qua kết nối theo dạng demand-dial.  Nếu bạn muốn VPN theo dạng <b>gateway-to-gateway </b>VPN, bạn nên chọn mục Router và luôn cả mục <b>LAN and demand-dial routing</b>.  <br/> <b>Bạn nhớ chọn thêm mục Remote access server.</b>  Nếu bạn không chọn mục này thì VPN client không thể gọi vào được.   The <b>Server "IP" Tab</b>  Chọn vào mục IP tab như hình dưới đây.  Chọn vào mục <b>Enable IP routing</b>, mục này cho phép clients được quyền truy cập vào mạng nội bộ của bạn, nếu bạn không chọn mục này thì các clients chỉ có thể truy cập vào VPN server mà thôi.  Mục <b>Allow IP-based remote access and demand-dial  connections </b>phải được enable để các clients có thể cấp phát địa chỉ IP khi client truy cập.  Khi bạn chọn mục này có nghĩa là bạn cho phép giao thức điều khiển IP (IPCP), giao thức này được sử dụng để thiết lập kết nối theo dạng PPP.   Bước kế tiếp là bạn cần phải quyết định số IP cấp phát cho VPN clients như thế nào. Bạn có hai cách cấp phát IP <br/> 	• Dynamic Host Configuration Protocol (DHCP) IP động.  <br/> 	• Static Address Pool IP Tĩnh  <br/> <br/>  Theo kinh nghiệm thì nên chọn DHCP vì không cần phải mệt óc chia và cấp phát thế nào cho clients.  Khi DHCP server được configure với một scope địa chỉ IP cho card LAN của VPN server, thông thường by default RRAS/VPN server có khoảng 10 ports để cho phép tạo kết nối, vì vậy nó sẽ chôm khoảng 10 IP address của DHCP server và nó sẽ sử dụng một cho chính nó.  Nếu tất cả IP address đều được sử dụng hết bởi các kết nối VPN và nếu VPN server của bạn có nhiều hơn 10 ports thì nó sẽ lấy thêm 10 IP addresses nữa từ DHCP server để sơ cua cho các truy cập sau.    Cách dễ nhất để giải quyết địa chỉ IP cho client là đặt DHCP server trong cùng một subnet với VPN server interface.  Bạn có thể thiết lập DHCP Relay Agent, tuy nhiên phần này sẽ đề cập ở mục khác.  Nếu như bạn sử dụng IP tĩnh để cho phép client tạo kết nối thì phải bảo đảm rằng nó phải cùng subnet với mạng nội bộ của VPN server hay là internet interface của VPN server.  Còn không thì hơi phiền phức.  Ở phần cuối của hình dưới bạn chọn vào mục Use the following  adapter to obtain DHCP, DNS, and WINS addresses for dial-up  clients, ở đây bạn nên chọn NIC card còn lại của VPN server, vì là client khi kết nối với mạng VPN của bạn, nó cần phải nằm trong cùng mạng LAN, cho nên bạn phải chọn NIC card của RRAS server vì NIC card này sẽ chịu trách nhiệm cung cấp các thông tin về DHCP, DNS và WINS cho client.   <br/> <br/> [img]/hvabmuht_gpj.89092_3a3764400967d40f882d2944c2f408d8/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptthn xong thì click OK để tiếp tục phần configure ports như hình dưới đây. <br/> <br/> [img]/hvaonline/uplobmuht_gpj.89092_5fc5efbf17cc3b8a7053217d9d5f32de/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth/b&gt; Trong phần RRAS Console, bạn right click vào Ports, chọn Properties như hình dưới đây.      <br/> [img]/hvaonline/upload/2006/7/6bmuht_gpj.89092_68c5f782413fed4d74914c60b3bef880/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth phần Ports Properties như hình dưới đây.  Chọn VPN interface mà bạn muốn enable, ví dụ như bạn muốn enable giao thức PPTP để client có thể tạo kết nối với mạng VPN, giao thức PPTP tương đối là đơn giản nhất, cho nên bạn nên bắt đầu bằng giao thức này bằng cách chọn WAN Miniport (PPTP) sau đó nhấn vào mục Configure như hình dưới đây.   <br/> <br/>    Trong phần configure WAN Miniport (PPTP) như hình dưới, bạn nên chọn mục Remote access connections (inbound only) để clients có thể tạo kết nối với VPN server.  Mục Demand-dial routing connections (inbound and outbound) cho phép RRAS server được phép khởi tạo hoặc là chấp nhận kết nối đến và từ demand-dial routers.  Nếu bạn muốn thực hiện giải pháp gateway-to-gateway VPN solution, thì bạn nên chọn mục này, nhưng nếu bạn chỉ muốn cho phép nhận kết nối từ clients thôi thí bạn có thể disable thư mục này.   Trong hộp Phone number for this device, nhập vào địa chỉ IP của VPN server interface như hình dưới. <br/> <br/> [img]/hvaonline/upload/2006/7/6/2a42fe509bbmuht_gpj.89092_dcd9b1b5f1701996a0f7d3b905ef24a2/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:ptthbao nhiêu ports cũng được tùy theo nhu cầu của bạn, ports thì có tổng cộng khoảng 16384 ports, cho nên nếu bạn có nhu cầu nhiều hơn số lượng ports đó thì bạn phải cần thêm một VPN server. <br/> <br/> <br/>       Click OK. Nếu bạn chọn ít hơn số port mặc định thì bạn sẽ gặp lời cảnh cáo như hình dưới đây, nhưng không sao bạn cứ việc click Yes.  Sau đó click Apply trong phần Port Properties.     <br/> <br/> <br/> <br/>  Bước cuối cùng là cho phép truy cập qua Remote Access Policy. Chọn vào thư mục Remote Access Policy, bên tay phải bạn right click vào mục Allow access if dial-in permission is enable chọn properties như hình dưới. <br/> <br/> [img]/hvaonline/upload/2006/7/6/d0101d6b48b14356128dfbmuht_gpj.89092_f555c140baafd82165341b84b6d1010d/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:pttherties, chọn vào mục Grant remote access permission.  Mục này cho phép users truy cập bất cứ lúc nào miễn là khớp với điều kiện đặt ra của Policy Change the If a user matches the conditions setting to  Grant remote access permission như hình dưới sau đó.  Click Apply and then click OK.  <br/> <br/> [img]/hvaonline/upload/2006/7/6/ae8409a67a4f0c5cc9b4333db362f1e8bmuht_gpj.89092_8e1f263bd3334b9cc5c0f4a76a9048ea/6/7/6002/daolpu/enilnoavh/ten.enilnoavh.www//:pttht VPN server.  Thật ra cách thiết lập một VPN server như chúng ta vừa làm thuộc dạng đơn giản đủ để cho phép clients tạo các kết nối với VPN server.  Tuy nhiên một khi bạn đã có thể bảo đảm rằng VPN server của bạn đã làm việc một cách tốt đẹp bằng cách bạn tạo một kết nối thử nghiệm từ ngoài vào, nếu thành công thì bạn hãy bước một bước kế tiếp kỹ thuật hơn cũng như gia tăng bảo mật.  Windows 2000 RRAS Server rất mạnh và cũng là một chương trình phần mềm chẳng đơn giản chút nào.  Có rất nhiều options trong cái RRAS console này, nếu bạn biết cách phát huy hay sử dụng nó đúng thì sẽ tạo cho bạn rất nhiều thích thú.  Tốt nhất khi thiết lập bất cứ server loại nào, điều bạn nên nhớ đầu tiên là cố gắng đơn giản việc thiết lập để chắc chắn rằng những cái chúng ta vừa thiết lập đã hoạt động căn bản rồi <br/>  <br/> </div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=/hvaonline/readingRoom/item/4618.html"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>



		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/1098.html#4618" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.html" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
