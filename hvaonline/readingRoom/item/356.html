<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.hva?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="http://www.hvaonline.net" title="[Logo]"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::Networking::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 8 bước bảo vệ router cisco <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/78.hva#356" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: LeonHart - Translator:  - Entry Date: 10/02/2009 09:56:30" title="Author: LeonHart - Translator:  - Entry Date: 10/02/2009 09:56:30"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody"><b>1- Điều khiển việc truy cập đến router của bạn</b><br/> <br/> Việc đầu tiên là áp dụng vài quy tắc để hạn chế tất cả việc truy cập từ bên ngoài đến một số cổng của router. Bạn có thể khóa tất cả cổng, nhưng điều đó không cần thiết. Những lệnh bên dưới sẽ bảo vệ router của bạn chống lại vài cuộc tấn công thăm dò và, tất nhiên, sẽ hạn chế việc truy cập đến những cổng đó:<br/> <br/> <i>access-list 110 deny tcp any host $yourRouterIP eq 7<br/> access-list 110 deny tcp any host $yourRouterIP eq 9<br/> access-list 110 deny tcp any host $yourRouterIP eq 13<br/> access-list 110 deny tcp any host $yourRouterIP eq 19<br/> access-list 110 deny tcp any host $yourRouterIP eq 23<br/> access-list 110 deny tcp any host $yourRouterIP eq 79<br/> int x0/0<br/> access-group in 110</i><br/> <br/> Ở đây $yourRouterIP là IP router của bạn và x0/0 là external interface của bạn. Chúng ta sẽ dùng nó trong cả bài này.<br/> <br/> <b>2- Hạn chế việc truy cập bằng telnet</b><br/> <br/> Telnet không phải là giao thức an toàn để dùng, nhưng nếu thực sự bạn muốn dùng nó (nên dùng ssh thì tốt hơn) thì hạn chế tất cả việc truy cập đến nó (nên nhớ rằng việc truyền thông tin sẽ không được mã hóa). Cách tốt nhất để làm là dùng lệnh access-list và access-class.<br/> <br/> <i>access-list 50 permit 192.168.1.1<br/> access-list 50 deny any log<br/> line vty 0 4<br/> access-class 50 in<br/> exec-timeout 5 0</i><br/> <br/> Ở đây 192.168.1.1 là địa chỉ IP cho phép telnet đến router<br/> <br/> <b>3- Block những gói tin xấu</b><br/> <br/> Bạn không bao giờ cho phép những IP loopback/reserve từ Internet đến external interface và bạn có thể từ chối broadcast và địa chỉ multicast.<br/> <br/> <i>access-list 111 deny ip 127.0.0.0 0.255.255.255 any<br/> access-list 111 deny ip 192.168.0.0 0.0.0.255 any<br/> access-list 111 deny ip 172.16.0.0 0.0.255.255 any<br/> access-list 111 deny ip 10.0.0.0 0.255.255.255 any<br/> access-list 111 deny ip host 0.0.0.0 any<br/> access-list 111 deny ip 224.0.0.0 31.255.255.255 any<br/> access-list 111 deny icmp any any wwwect<br/> int x0/0<br/> access-group in 111</i><br/> <br/> <b>4- Hạn chế SNMP</b><br/> <br/> SNMP phải luôn luôn hạn chế, trừ khi bạn muốn mọi người lấy thông tin của mình trên mạng.<br/> <br/> <i>access-list 112 deny udp any any eq snmp<br/> access-list 112 permit ip any any<br/> interface x0/0<br/> access-group 112 in</i><br/> <br/> Và nếu bạn không định dùng SNMP thì vô hiệu hóa nó luôn:<br/> <br/> no snmp-server<br/> <br/> <b>5- Mã hóa tất cả mật khẩu</b><br/> <br/> Một điều rất quan trọng để bảo vệ tất cả mật khẩu của bạn là dùng thuật toán mạnh nhất nếu có thể. Mật khẩu từ chế độ exec được cấp quyền truy cập đến hệ thống IOS. Có thể dùng MD5, hiện giờ mạnh nhất trong Cisco IOS.<br/> <br/> enable secret $yourpassword<br/> <br/> Lệnh dùng để mã hóa tất cả mật khẩu hiện thời trong hệ thống là<br/> <br/> service password-encryption<br/> <br/> <b>6- Vô hiệu hóa tất cả những dịch vụ không dùng đến</b><br/> <br/> 6.1 – Disable Echo, Chargen và discard<br/> <br/> no service tcp-small-servers<br/> no service udp-small-servers<br/> <br/> 6.2 – Disable finger<br/> <br/> no service finger<br/> <br/> 6.3 – Disable httpd interface<br/> <br/> no ip http server<br/> <br/> 6.4 - Disable ntp (nếu không dùng)<br/> <br/> ntp disable<br/> <br/> <b>7- Thêm vài tùy chọn bảo mật</b><br/> <br/> 7.1 – Disable source routing<br/> <br/> no ip source-route<br/> <br/> 7.2 - Disable Proxy Arp<br/> <br/> no ip proxy-arp<br/> <br/> 7.3 - Disable ICMP wwwects<br/> <br/> interface s0/0 (external interface của bạn)<br/> no ip wwwects<br/> <br/> 7.4 - Disable Multicast route Caching<br/> <br/> interface s0/0 (external interface của bạn)<br/> no ip mroute-cache<br/> <br/> 7.5 - Disable CDP<br/> <br/> no cdp run<br/> <br/> 7.6 - Disable direct broadcast (protect against Smurf attacks)<br/> <br/> no ip directed-broadcast<br/> <br/> <b>8- Ghi lại mọi thứ (Log)</b><br/> <br/> Để kết thúc, bạn phải ghi lại mọi thứ trên một Log Server bên ngoài. Bạn phải theo dõi thường xuyên hệ thống và luôn phân tích file log.<br/> <br/> <i>logging trap debugging<br/> logging 192.168.1.10</i><br/> <br/> Ở đây 192.168.1.10 là ip của log server (cấu hình như một Syslog server)<br/> <br/> <b>Tóm lại</b><br/> Với những bước như trên bạn có thể bảo vệ cho router chống lại những cuộc tấn công và tăng khả năng bảo mật cho mình.<br/> Ở đây có một ví dụ, bạn có thể thấy kết quả của nmap trước và sau khi áp dụng những cách trên:<br/> <br/> <b>Trước:</b><br/> <i>bash-2.05b# nmap -O 192.168.1.1<br/> Starting nmap V. 3.00 ( www.insecure.org/nmap/ )<br/> Interesting ports on (192.168.1.1):<br/> Port State Service<br/> 7/tcp open echo<br/> 9/tcp open discard<br/> 13/tcp open daytime<br/> 19/tcp open chargen<br/> 23/tcp open telnet<br/> 79/tcp open finger<br/> 80/tcp open http<br/> Remote OS guesses: AS5200, Cisco 2501/5260/5300 terminal server IOS 11.3.6(T1),<br/> Cisco IOS 11.3 - 12.0(11)</i><br/> <br/> <b>Sau:</b><br/> <i>bash-2.05b# nmap -P0 -O 192.168.1.1<br/> Starting nmap V. 3.00 ( www.insecure.org/nmap/ )<br/> Warning: OS detection will be MUCH less reliable because we did not find at least 1<br/> open and 1 closed TCP port<br/> All 1601 scanned ports on (192.168.1.1) are: filtered<br/> Too many fingerprints match this host for me to give an accurate OS guess<br/> Nmap run completed -- 1 IP address (1 host up) scanned in 403 seconds</i><br/> </div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/356.hva"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>



		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/78.hva#356" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.hva'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
