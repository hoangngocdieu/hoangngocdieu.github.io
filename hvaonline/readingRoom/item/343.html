<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="http://www.hvaonline.net" title="[Logo]"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::Networking::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 ROUTER CONFIG <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/70.html#343" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: aTa100 - Translator:  - Entry Date: 26/02/2009 02:06:53" title="Author: aTa100 - Translator:  - Entry Date: 26/02/2009 02:06:53"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody">Tác giả: aTa100 ???<br/> <br/> Router dùng chế độ dòng lệnh để tương tác với người quản trị. Chế độ dòng lệnh này được cung cấp bởi IOS, một dạng hệ điều hành dành riêng cho router (giống như DOS). IOS của router cung cấp các mode khác nhau để config. Có 3 mode chính là:<br/> - User EXEC mode<br/> - Privileged EXEC mode<br/> - Global configuration mode ( trong mode này còn có những mode nhỏ khác)<br/> <br/> Xem hình để biết chi tiết các mode và các dấu nhắc hiển thị ở các mode<br/>  <br/> <br/> Để config router chúng ta phải vào router và vào mode Global configuration. <br/> <br/> Để có thể dễ dàng cho các bạn theo dõi, tôi sẽ đưa ra Lab để các bạn có thể thực hành luôn như. Ở trong Window chọn Start --&gt; Run gõ vào cmd (đối với Win NT/XP) hoặc command (win 9x/ME) và gõ enter. Sau đó gõ tiếp vào telnet r1r2.com và nhập vào r1r2ser , tiếp theo nhập tiếp vào cisco cho user và pass. Chúng ta đã có 2 router nối với trực tiếp thực sự để thực hành. Tuy nhiên cái này do là free nên khá chậm, các sẽ phải kiên nhẫn. Ngoài ra các bạn có thể dùng phần mềm của hãng Boson để thực hành cũng rất tốt<br/> <br/> Sau khi đăng nhập xong bạn sẽ vào mode đầu tiên trong router là mode User EXEC mode. Tiếp tục vào mode Privilegde bằng lệnh enable<br/> Router&gt;enable<br/> Router# <br/> Sau đó vào mode Global để bắt đầu config<br/> Router#configure terminal<br/> Router(config)# <br/> Vào đến mode Global rồi thì chúng ta có thể config mọi thứ. Tôi sẽ giới thiệu từ những lệnh cơ bản.<br/> <br/> - Đầu tiên là tên của Router: một router nên được đặt tên (đây là một trong những điều đầu tiên phải làm khi config router). Để đặt tên cho router bạn gõ lệnh sau:<br/> Router(config)#hostname Tokyo<br/> Tokyo(config)# <br/> Sau khi bạn gõ lệnh đó thì router sẽ chuyển dấu nhắc như dòng thứ 2. Đặt tên cho router giúp bạn có thể định vị được router nằm ở vị trí nào trong mạng của bạn, gợi cho bạn biết về vai trò của nó trong mạng.<br/> Lệnh hostname cú pháp đơn giản là: hostname <ten Router> . Xem chi tiết về các lệnh cơ bản ở đây: http://www.cisco.com/en/US/products/sw/ios...48.html#1018259<br/> <br/> - Đặt password cho router: Password được đặt nhằm mục đích ngăn cản những truy cập không đúng quyền hạn vào router. Password thường được đặt cho những đường terminal ảo (virtual terminal lines) và đường console. Password cũng cho phép truy cập vào mode privileged EXEC để có thể thay đổi những cấu hình của router.<br/> Những lệnh để sau để đặt pass cho đường console: (có thể tùy chọn nhưng đề nghị nên đặt)<br/> <br/> Router(config)#line console 0<br/> Router(config-line)#password <password><br/> Router(config-line)#login <br/> <br/> Password cũng nên đặt cho một hoặc nhiều đường terminal ảo (VTY) cho nhiều người sử dụng để họ có thể truy cập vào router bằng Telnet. Router của Cisco hỗ trợ 5 đường VTY được đánh số từ 0 đến 4. Lệnh sau để đặt pass cho VTY:<br/> <br/> Router(config)#line vty 0 4<br/> Router(config-line)#password <password><br/> Router(config-line)#login <br/> <br/> Ngoài ra để vào mode privileged EXEC cần phải đặt enable pass. Enable pass có thể đặt với tùy chọn secret, với tùy chọn này thì pass sẽ được mã hóa. xem Lệnh sau:<br/> <br/> Router(config)#enable password <password><br/> Router(config)#enable secret <password> <br/> <br/> Đôi khi pass có thể nhìn thấy ở dạng text khi xem cấu hình bằng lệnh show running-config và show startup-config . Để mở dịch vụ mã hóa pass không hiển thị dạng text khi gõ các lệnh trên dùng lệnh sau:<br/> <br/> Router(config)#service password-encryption <br/> <br/> Lệnh service password-encryption này sẽ mã hóa toàn bộ những pass được nhập vào khi bạn config router. Và lệnh enable secret <password> sử dụng thuật toán MD5 để mã hóa. Trong router thường default chế độ này là on.<br/>  <br/> <br/> <br/> - Lệnh Show: Có rất nhiều lệnh show có thể sử dụng để xem xét các thông tin trong router và để troubleshooting. Ở trong cả hai mode privileged EXEC và user EXEC mode lệnh show ? cung cấp danh sách các lệnh show có thể sử dụng. Dưới đây là một số lệnh show thường hay sử dụng:<br/> • show interfaces ? Hiển thị toàn bộ thông số trạng thái của interface (những interface này có thể là serial, ethernet...). Để xem một interface cụ thể thì gõ thêm các tên thiết bị đi kèm. Ví dụ: để xem thông số cổng serial của router gõ như sau<br/> Router#show interfaces serial 0/1<br/> • show controllers serial ? Hiển thị những thông số về phần cứng của cổng serial, dùng lệnh này ta có thể biết được cáp có được nối ở cổng này hay không, cáp là loại nào (DTE hay DCE) ...<br/> • show clock ? Xem thời gian đặt bởi router <br/> • show hosts ? Hiển thị danh sách tên host được đặt và địa chỉ của nó <br/> • show users ? Hiển thị toàn bộ những người đã kết nối tới router <br/> • show history ? Hiển thị những lệnh đã sử dụng <br/> • show flash ? Hiển thị thông tin về bộ nhới flash và những file của IOS được lưu ở đâu <br/> • show version ? Hiển thị thông tin về router và IOS đang chạy trong RAM <br/> • show ARP ? Xem bảng ARP của router <br/> • show protocol ? Xem trạng thái giao thức lớp 3 (up/down) của các interface<br/> • show startup-configuration ? Xem file cấu hình đã được lưu lại ở NVRAM <br/> • show running-configuration ? Xem file cấu hình đang chạy trong RAM <br/> <br/> - Cấu hình cổng serial: Cổng serial có thể cấu hình từ console hoặc từ đường terminal ảo. Để cấu hình cổng serial hãy theo các bước sau:<br/> <br/> - Vào mode global configuration<br/> - Vào tiếp mode interface<br/> - Đặt địa chỉ và subnet mask cho cổng<br/> - Thiết lập tốc độ clock (clock rate) nếu cống nối bằng cáp DCE. Bỏ qua bước này nếu cáp là loại cáp DTE. <br/> - Bật cổng lên<br/> <br/> Mỗi một cổng serial phải có một địa chỉ IP và subnet mask cụ thể, đặt địa chỉ IP bằng lệnh sau:<br/> <br/> Router(config)#interface serial 0/0<br/> Router(config-if)#ip address <ip address> <netmask><br/> <br/> Cổng serial đòi hỏi phải có tín hiệu clock để điều khiển thời gian để truyền thông tin. Trong mọi môi trường, thiết bị DCE như CSU sẽ cung cấp clock. Ở chế độ mặc định, router của cisco là thiết bị DTE nhưng chúng có thể cấu hình thành thiết bị DCE.<br/> <br/> Ở kết nối trực tiếp trên cổng serial như trong môi trường lab, có từ hai router trở lên thì một router phải đóng vai trò là DCE và cung cấp tín hiệu clock cho router còn lại. Tín hiệu clock được thiết lập ở những tốc độ định sẵn bằng lệnh clock rate. Những tốc độ clock có thể thiết lập (tính theo bit/giây) là: 1200, 2400, 9600, 19200, 38400, 56000, 64000, 72000, 125000, 148000, 500000, 800000, 1000000, 1300000, 2000000, or 4000000. Tuy nhiên, một số tốc độ bit có thể không thiết lập được vì phụ thuộc vào khả năng của cổng serial.<br/> <br/> Chế độ mặc định, những cổng serial ở trạng thái tắt hoặc bị cấm. Để bật hoặc cho phép những cổng này, phải dùng lệnh shutdown. Nếu cần tắt cổng đi để troubleshooting hoặc bảo dưỡng (maintenance) thì dùng lệnh shutdown.<br/> <br/> Trong môi trường lab, clockrate sẽ được sử dụng là 56000. Xem ví dụ:<br/> <br/> Router(config)#interface serial 0/0<br/> Router(config-if)#clock rate 56000<br/> Router(config-if)#no shutdown<br/> <br/> Minh họa:<br/>  <br/> <br/> Các bạn có thể tham khảo thêm ở đây: http://www.cisco.com/en/US/products/hw/mod...502.shtml#fifth<br/> <br/> - Sửa đổi cấu hình: Nếu cấu hình cần phải được sửa đổi, hãy vào mode cần thiết và nhập những lệnh cần cho sự sửa đổi này. Ví dụ, nếu cần cho phép một interface: vào mode global configuration, vào mode interface, và gõ lệnh no shutdown. <br/> <br/> Để kiểm tra những sự thay đổi này, dùng lệnh show running-config. Lệnh này hiển thị những cấu hình đang chạy trên router. Nếu những thông số cấu hình không chính xác, bạn có thể chỉnh lại theo các bước dưới đây:<br/> • Sử dụng lệnh no trước mỗi lệnh config. <br/> • Nạp lại hệ thống với file cấu hình từ NVRAM. <br/> • Copy file cấu hình từ TFTP server. <br/> • Xóa bỏ file cấu hình ban đầu với lệnh erase startup-config, sau đó khởi động lại router và vào chế độ setup. <br/> <br/> Để lưu lại những thông số cấu hình vào file cấu hình ban đầu trong NVRAM, dùng lệnh sau ở chế độ privileged EXEC:<br/> <br/> Router#copy running-config startup-config<br/> <br/> Minh họa các bước khi sửa đổi cấu hình router:<br/>  <br/> <br/> - Cấu hình cổng Ethernet: Cổng Ethernet có thể cấu hình từ cổng console hoặc từ kênh điểu khiển ảo. Cổng Ethernet yêu cầu phải có một địa chỉ IP và subnet cụ thể thì mới có thể gửi và nhận các gói tin trên mạng được. Để cấu hình cổng Ethernet bạn làm theo các bước sau:<br/> <br/> 1. Vào mode global configuration<br/> 2. Vào tiếp mode interface<br/> 3. Đặt địa chỉ và subnet mask cho cổng<br/> 4. Bật cổng lên (ở chế độ mặc định cổng luôn ở trạng thái tắt hoặc bị cấm)<br/> <br/> Các bạn có thể xem chi tiết các lệnh trong chế độ config cổng ethernet ở đây: <br/> http://www.cisco.com/en/US/products/sw/ iosswrel/ps1835/products_command_reference_ chapter09186a00800874b0.html#1017394<br/> <br/> - Thêm ghi chú cho một cấu hình: Khi cấu hình một cổng (serial hoặc ethernet) của router bạn nên thêm phần chú thích vào để có thể dễ dàng troubleshooting mạng sau này. Cái này có vẻ như mất thời gian nhưng lúc mạng bị rối thì sẽ giúp ích cho bạn rất nhiều. Để thêm ghi chú cho một cổng các bạn vào mode config của cổng và sử dụng lệnh description. Các bước cụ thể như sau:<br/> 1. Vào mode global bằng lệnh configure terminal. <br/> 2. Vào tiếp mode config cổng (ví dụ là cổng Ethernet số 0) interface ethernet 0. <br/> 3. Dùng lệnh description để thêm ghi chú vào cổng đó <br/> 4. Thoái khỏi mode config cổng và trở về mode privileged EXEC bằng tổ hợp phím ctrl-Z. <br/> 5. Lưu những thay đổi cấu hình vào NVRAM (bộ nhớ của router) bằng lệnh sau copy running-config startup-config. <br/> <br/> Đây là ví dụ ghi chú cho cổng Ethernet và Serial<br/> <br/> interface Ethernet 0<br/> description LAN Engineering, Bldg.2<br/> interface serial 0<br/> description ABC network 1, Circuit 1<br/> <br/> Xem chi tiết về lệnh description ở link sau:<br/> http://www.cisco.com/en/US/products/sw/ iosswrel/ps1835/products_command_reference_ chapter09186a008008000e.html#1017386<br/> <br/> - Đặt banner - MOTD: Banner là một thông điệp hiển thị lúc bạn đăng nhập vào thông báo cho người sử dụng biết một số thông tin ví dụ như khi nào hệ thống sẽ tạm dừng. MOTD là viết tắt của chữ message-of-the-day, mọi kết nối từ xa đến router đều sẽ nhìn thấy motd. Đặt MOTD bạn phải vào mode config và dùng lệnh banner motd và sau đó là thông báo bạn muốn gửi nằm trong 2 kí tự #. Cụ thể các bước như sau:<br/> <br/> 1. Vào mode global configuration với lệnh configure terminal. <br/> 2. Dùng lệnh banner motd # thông điệp của bạn #. để đặt motd<br/> Lưu lại cấu hình vừa đặt bằng lệnh copy running-config startup-config.<br/> <br/> - Đặt host name – tên tắt: Trong trường hợp ở router bạn muốn kiểm tra một địa chỉ ip bằng ping hoặc muốn telnet đến một địa nào đó trong mạng, bạn phải gõ đủ địa chỉ ip bằng các con số vào. Điều đó có thể dễ bị nhầm lẫn khi gõ, IOS cung cấp một lệnh cho phép bạn gán một ip với một tên bằng chữ giống như cơ chế DNS trên mạng internet – chuyển ip thành domain name.<br/> <br/> Để đặt tên host bạn dùng lệnh ip host tênhost địachỉip xem ví dụ dưới<br/>  <br/> <br/> Lệnh đầu tiên sẽ gán cho tên Auckland ip là 172.16.32.1, thay vì bạn gõ ping 172.16.32.1 thì bạn chỉ phải gõ ping Auckland<br/> <br/> Có thể đặt nhiều tên cùng một ip trên một router, những tên này chỉ có tác dụng trên router đó. Bạn có thể danh sách các host được đặt bằng lệnh ip host bằng lệnh show hosts<br/> <br/> Ở trên là một số lệnh cơ bản để có thể cấu hình một router. Hy vọng sẽ có phần nào giúp các bạn hiểu được cách cơ bản để cấu hình router.<br/> <br/> Tài liệu dựa vào phần lớn Chương 12 – Giáo trình CCNA của Cisco press.<br/> <br/> 30/04/2004 nndzung – thân tặng các member của HVA <br/> Được chỉnh sửa bởi aTa100 </div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/343.html"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>

		<tr>
			<td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
						<div class="postbody"><b>Other posts in the same group:</b></div><br />
									<div class="gen"><b>ROUTER CONFIG</b></div>
									<div class="gen"><a href="/hvaonline/readingRoom/item/344.html">ROUTER CONFIG (Phần 2)</a></div>
						</td>
					</tr>
				</table>
			</td>
		</tr>


		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/70.html#343" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
