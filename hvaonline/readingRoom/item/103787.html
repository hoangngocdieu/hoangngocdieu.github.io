<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.hva?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="http://www.hvaonline.net" title="[Logo]"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::*nix::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 [Bài viết] Mô hình Thin client - diskless với FreeBSD [2] <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/17276.hva#103787" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: FaL - Translator:  - Entry Date: 15/02/2009 23:59:49" title="Author: FaL - Translator:  - Entry Date: 15/02/2009 23:59:49"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody"><font size='+1'><font color='orange'><b>III. Thiết lập Diskless server</b></font></font><br/> Trong phần này, mỗi mục ta sẽ edit 1 file ở phía Diskless server<br/> <b><u><font color='cyan'>1. /etc/rc.conf:</font></u></b><br/> Để client có thể mount các partition từ Diskless server, bản thân Diskless server phải đóng vài trò là NFS server. Thêm những dòng sau vào <font color='green'>/etc/rc.conf</font>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>nfs_server_enable="YES"<br/> rpcbind_enable="YES"</pre><br/> 		</div><br/> <font color='orange'>rpcbind </font>quản lý liên lạc giữa NFS server và clients.<br/> <br/> <b><u><font color='cyan'>2. /etc/exports:</font></u></b><br/> Chỉ định và cấp quyền cho clients có thể mount partition:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>/Diskless -alldirs -maproot=root -network=192.168.0.0 -mask 255.255.255.0</pre><br/> 		</div><br/> <br/> Lưu ý: Mask phải ứng với mask của network, ở đây của FaL là 255.255.255.0<br/> <br/> <b><font color='cyan'><u>3. Copy vào /Diskless: </u></font></b>Đến đây /Diskless vẫn đang còn trống. Nội dung của /Diskless sẽ được cung cấp toàn bộ cho clients. Để đảm bảo client làm việc ta tiến hành copy <font color='green'>/bin</font>, <font color='green'>/boot</font>, <font color='green'>/etc</font>, <font color='green'>/lib</font>, <font color='green'>/src</font>, <font color='green'>/usr</font>, .. vào <font color='green'>/Diskless</font><br/> <br/> Sau khi thực hiện công việc copy các thư mục vào <font color='green'>/Diskless</font> ta ... tiếp tục công việc <img src="/hvaonline/images/smilies/23621f7b9ade353e3aeff9f9ee30d871.gif" border="0" alt="smilie" align="absbottom">:<br/> <br/> <br/> <b><font color='cyan'><u>4. Tạo thư mục: /Diskless/conf: </u></font></b><br/> Thư mục này sẽ chứa các file thiết lập quyền và cơ chế hoạt động ở phía client.<br/> Trong thư mục này tạo tiếp 2 thư mục: <font color='green'>/Diskless/conf/base</font> và <font color='green'>/Diskless/conf/default</font>.<br/> - <font color='green'>/Diskless/conf/base</font> sẽ chứa bản sao của root file system của Diskless server. Ở đây ta đã copy thẳng vào <font color='green'>/Diskless</font> nên chỉ cần copy /etc vào <font color='green'>/Diskless/conf/base/etc </font>là ok.<br/> -<font color='green'>/Diskless/conf/default</font> chứa những file sẽ được "đè" (thay thế) những file ở phía root file system của Diskless server. Tác dụng của những file trong thư mục này là để thiết lập cơ chế làm việc ở phía client. Những file này là <font color='green'>/etc/fstab</font>, <font color='green'>/etc/rc.conf</font>, <font color='green'>/etc/ttys</font>, <font color='green'>/etc/group</font>, <font color='green'>/etc/master.passwd</font>, <font color='green'>/etc/passwd</font>, <font color='green'>/etc/pwd.db</font>, <font color='green'>/etc/spwd.db</font>. Vì vậy trong /Diskless/conf/default ta tạo thư mục <font color='green'>/Diskless/conf/default/etc</font>, và copy tất cả những file đó vào thư mục này.<br/> <br/> <b><font color='cyan'><u>5. Chỉnh sửa các file trong: /Diskless/conf/default: </u></font></b><br/> - File <font color='green'>/etc/fstab</font> chỉ ra các mount point cho client:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>192.168.0.2:/Diskless     /         nfs      rw              0 0<br/> 192.168.0.2:/Diskless     /usr     nfs      rw              0 0<br/> 192.168.0.2:/Diskless     /home  nfs      rw              0 0<br/> md                               /tmp     mfs     -s=30m,rw  0 0 <br/> md                               /var     mfs      -s=30m,rw  0 0 <br/> proc                             /proc    procfs  rw               0 0</pre><br/> 		</div><br/> <br/> - File <font color='green'>/etc/rc.conf</font>, file này hiện đang mang trên mình config của Diskless server (như dòng nfs_server_enable="YES", và rpcbind_enable="YES"), xóa những dòng này, sau đó thêm vào những thiết lập phù hợp cho phía clients, cụ thể ở đây là:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>nfs_client_enable="YES"<br/> mountd_enable="YES"</pre><br/> 		</div><br/> <br/> - Những file chứa password của users được copy vào đây để phân biệt những user trên phía server và clients (phần này sẽ bàn sau).<br/> <br/> - File <font color='green'>/etc/ttys</font>:<br/> Trong mô hình FaL thiết lập, client sau khi thực hiện quá trình boot sẽ request xdm từ server, sau khi login xdm sẽ chạy những ứng dụng cụ thể. Bởi thế thiết lập file này sẽ bàn sau.<br/> <br/> Sau khi config xong các file này, bạn có thể xóa các file tương ứng trong <font color='green'>/Diskless/etc </font>và trong <font color='green'>/Diskless/conf/base/etc/</font>.<br/> <br/> Đến đây quá trình thiết lập để clients có thể boot và mount các partition cơ bản hoàn tất.</div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/103787.hva"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>

		<tr>
			<td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
						<div class="postbody"><b>Other posts in the same group:</b></div><br />
									<div class="gen"><a href="/hvaonline/readingRoom/item/103754.hva">[Bài viết] Mô hình Thin client - diskless với FreeBSD</a></div>
									<div class="gen"><b>[Bài viết] Mô hình Thin client - diskless với FreeBSD [2]</b></div>
									<div class="gen"><a href="/hvaonline/readingRoom/item/103790.hva">[Bài viết] Mô hình Thin client - diskless với FreeBSD [3]</a></div>
						</td>
					</tr>
				</table>
			</td>
		</tr>


		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/17276.hva#103787" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.hva'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
