<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="" title="[Logo]"><img src="/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::*nix::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 FreeBSD on usb - Phần 1 <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/12488.html#72940" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: pnco - Translator:  - Entry Date: 15/02/2009 23:55:25" title="Author: pnco - Translator:  - Entry Date: 15/02/2009 23:55:25"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody">Chào các bạn hâm mộ *nix!<br/> <br/> Nhân dịp dụ khị được vài bạn sử dụng FreeBSD nên cũng thấy vui vui <img src="/hvaonline/images/smilies/85f758dd90f8f9d2587ecc9d55b16cf3.gif" border="0" alt="smilie" align="absbottom"> Hôm nay rảnh rỗi giới thiệu với các bạn một thủ thuật nhỏ về việc cài đặt FreeBSD lên usb disk. Những lý do chính để cài đặt FreeBSD lên usb disk là:<br/> - Tính di động: Bạn xây dựng 1 hệ điều hành cùng với các ứng dụng yêu thích của mình lên 1 thiết bị và đem nó theo bất cứ nơi nào bạn đến (home, office,...)<br/> - Nâng cao bảo mật: Với việc cài đặt hệ điều hành và ứng dụng lên usb bạn có thể giải phóng hard disk của mình, dùng nó hoàn toàn chỉ trong việc lưu trữ dữ liệu và bạn có thể áp dụng các biện pháp bảo mật cho dữ liệu của mình.<br/> Khuyết điểm: Việc đọc ghi lên usb là khá chậm, tuy vậy chúng ta sẽ cải thiện bằng cách dời những phần tương tác đọc ghi nhiều vào đĩa cứng như swap, /tmp, /usr/port,... và tăng thêm RAM <img src="/hvaonline/images/smilies/575eda61e93c7ad9d05928580213fd9b.gif" border="0" alt="smilie" align="absbottom">)<br/> Hiện nay có rất nhiều distro linux được phân phối dưới dạng livecd, tuy nhiên khuyết điểm của chúng (đối với 1 số trường hợp thì nó là ưu điểm <img src="/hvaonline/images/smilies/575eda61e93c7ad9d05928580213fd9b.gif" border="0" alt="smilie" align="absbottom">)) là không thể lưu trữ. Bạn khó có thể bổ sung các ứng dụng yêu thích của mình vào các bản phân phối này. Việc cài đặt chúng lên usb thì cũng khá đơn giản tuy nhiên trong bài này tôi sẽ giới thiệu cho các bạn một cách thức khác xây dựng FreeBSD từ source giúp cho hệ điều hành và ứng dụng của bạn stable hơn.<br/> Nào bây giờ chúng ta bắt đầu thực hiện. Yêu cầu cần có là 1 đĩa cứng tạm (dùng để build FreeBSD) hoặc một phân vùng còn trống trên đĩa cứng tối thiểu cỡ 10GB (OpenOffice build từ source cần 9GB đĩa cứng trống). Bạn nên dùng đĩa cứng tạm nếu có thể, nếu không thì phải backup dữ liệu cẩn thận. <b>An toàn nhất thì nên dùng máy ảo</b>.<br/> <br/> 1. Cài đặt FreeBSD lên đĩa cứng (phần này để giới thiệu với những bạn chưa từng cài đặt FreeBSD.)<br/> - <span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"> ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/ISO-IMAGES/6.2/</span></span></span></span></span></span></span> và khởi động<br/> <br/> bmuht_gpj.746011_44380c8251cdb7e2c805e1580a7ed05a/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth<br/> <br/> - Chọn Custom -&gt; chọn Partition (3) -&gt; chọn A (Use Entire Disk) -&gt; chọn Q (Quit) (Lưu ý: Trường hợp bạn chỉ có 1 phân vùng trống trên đĩa cứng thì hãy chọn vào phân vùng trống và chọn C (Create Slice) và chọn type là 165 default).<br/> <br/> [img]http:/bmuht_gpj.746011_30012bebdae0dfba0f8a47cd99e2214c/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth/&gt; - Chọn Standard<br/> - Chọn Label (4) -&gt; chọn A (Auto Default) -&gt; chọn Q (Quit).<br/> - Chọn Distribution (5) -&gt; chọn Custom -&gt; chọn base + kernels GENERIC + src (chọn all) -&gt; OK -&gt; OK.<br/> - Chọn Media (6) là CD/DVD.<br/> - Chọn Comit (7) và hệ thống sẽ được cài đặt.<br/> - Sau khi cài đặt xong bạn sẽ được hỏi "Visit the general configuration menu for a chance to set any last option" hãy chọn Yes. Bạn sẽ được đưa vào menu sau:<br/> <br/> [img]http://www.htmlonlbmuht_gpj.746011_159c6301e0b72257994618840ca9c4c5/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptthbạn có thể tinh chỉnh các thứ như root passwd, time zone, add user, config network,... Sau khi làm xong chọn Exit 3 lần máy tính sẽ khởi động lại. Nếu không có trục trặc thì chúc mừng bạn bạn đã cài đặt FreeBSD thành công <img src="/hvaonline/images/smilies/85f758dd90f8f9d2587ecc9d55b16cf3.gif" border="0" alt="smilie" align="absbottom"><br/> <br/> 2. Cập nhật mã nguồn và tiến hành biên dịch hệ thống.<br/> - Sau khi khởi động lại vào hệ thống thì bạn cần cài đặt gói cvsup-without-gui-16.1h để cập nhật mã nguồn.<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#/usr/sbin/sysintall</pre><br/> 		</div><br/> - Chọn Configure -&gt; chọn packages -&gt; chọn FTP (nếu chọn CD/DVD thì bạn phải download ISO image thứ 2 của FreeBSD) -&gt; chọn net -&gt; chọn cvsup-without-gui-16.1h -&gt; OK -&gt; Install -&gt; OK -&gt; Exit.<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#cp /usr/share/example/cvsup/stable-supfile /etc</pre><br/> 		</div><br/> - Điều chỉnh cấu hình:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#ee /etc/stable-supfile</pre><br/> 		</div><br/> - Điều chỉnh dòng 68 lại thành *default host=cvsup.freebsd.org -&gt; ESC -&gt; leave and save. Bạn có thể tham khảo danh sách mirror các <span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"> http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/cvsup.html#CVSUP-MIRRORS</span></span></span></span></span></span></span> để lựa chọn 1 server thích hợp.<br/> - Chạy lệnh sau để update source code:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#cvsup -g -L 2 /etc/stable-supfile</pre><br/> 		</div><br/> - Trong lúc chờ đợi chuyển sang terminal thứ 2 và soạn thảo file cấu hình kernel.<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#ee /usr/src/sys/i386/conf/MYKERNEL</pre><br/> 		</div><br/> Bởi vì nội dung của file cấu hình kernel là khá nhiều nên tôi sẽ đính kèm để các bạn download về tham khảo, ngoài ra còn có 1 lưu ý ở đây. File cấu hình kernel này bao gồm tất cả các cấu hình phần cứng mà FreeBSD hỗ trợ, trừ trường hợp bạn có ý muốn sử dụng cho nhiều máy tính khác nhau còn không thì bạn hãy tìm hiểu kỹ phần cứng máy tính của mình và loại bỏ những phần không liên quan, chi tiết về các loại phần cứng được FreeBSD hỗ trợ các bạn có thể tham khảo <span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"> http://www.freebsd.org/releases/6.2R/hardware-i386.html</span></span></span></span></span></span></span>, để loại bỏ những phần không liên quan trong file cấu hình kernel thì chỉ cần đánh dấu # vào dòng cần loại bỏ.<br/> <br/> - Tạo make.conf:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#ee /etc/make.conf</pre><br/> 		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre># $FreeBSD: src/share/examples/etc/make.conf,v 1.265.2.8 2006/09/13 08:39:16 des Exp $<br/>     #<br/>     # The CPUTYPE variable controls which processor should be targeted for<br/>     # generated code. This controls processor-specific optimizations in<br/>     # certain code &#40;currently only OpenSSL&#41; as well as modifying the value<br/>     # of CFLAGS to contain the appropriate optimization directive to gcc.<br/>     # The automatic setting of CFLAGS may be overridden using the<br/>     # NO_CPU_CFLAGS variable below.<br/>     # Currently the following CPU types are recognized:<br/>     # Intel x86 architecture:<br/>     # &#40;AMD CPUs&#41; opteron athlon64 athlon-mp athlon-xp athlon-4<br/>     # athlon-tbird athlon k8 k6-3 k6-2 k6 k5<br/>     # &#40;Intel CPUs&#41; nocona pentium4&#91;m&#93; prescott pentium3&#91;m&#93; pentium-m<br/>     # pentium2 pentiumpro pentium-mmx pentium i486 i386<br/>     # &#40;Via CPUs&#41; c3 c3-2<br/>     # Alpha/AXP architecture: ev67 ev6 pca56 ev56 ev5 ev45 ev4<br/>     # AMD64 architecture: opteron, athlon64, nocona<br/>     # Intel ia64 architecture: itanium2, itanium<br/>     #<br/>     # &#40;?= allows to buildworld for a different CPUTYPE.&#41;<br/>     #<br/>     CPUTYPE=pentium4<br/>     #<br/>     CFLAGS= -O2 -pipe<br/>     COPTFLAGS= -O2 -pipe<br/>     #<br/>     INSTALL=install -C<br/>     #<br/>     NO_ATM= # do not build ATM related programs and libraries<br/>     NO_DICT= # do not build the Webster dictionary files<br/>     NO_I4B= # do not build isdn4bsd package<br/>     NO_INFO= # do not make or install info files<br/>     NO_IPFILTER= # do not build IP Filter package<br/>     NO_KERBEROS= # do not build and install Kerberos 5 &#40;KTH Heimdal&#41;<br/>     NO_MAN= # do not build manual pages<br/>     NO_NIS= # do not build NIS support and related programs.<br/>     NO_PROFILE= # Avoid compiling profiled libraries<br/>     NO_RCMDS= # do not build or install BSD r* commands &#40;rsh, etc&#41;.<br/>     NO_SENDMAIL= # do not build sendmail and related programs<br/>     NO_SHAREDOCS= # do not build the 4.4BSD legacy docs<br/>     NO_BIND= # Do not build any part of BIND<br/>     NO_BIND_DNSSEC= # Do not build dnssec-keygen, dnssec-signzone<br/>     NO_BIND_ETC= # Do not install files to /etc/namedb<br/>     NO_BIND_LIBS_LWRES= # Do not install the lwres library<br/>     NO_BIND_MTREE= # Do not run mtree to create chroot directories<br/>     NO_BIND_NAMED= # Do not build named, rndc, lwresd, etc.<br/>     NO_BIND_UTILS= # Do not build dig, host, nslookup, nsupdate<br/>     #<br/>     MAKE_IDEA=yes # IDEA &#40;128 bit symmetric encryption&#41;<br/>     #<br/>     KERNCONF=MYKERNEL</pre><br/> 		</div><br/> Lưu ý:<br/> <br/> - Dòng CPUTYPE, bạn hãy chọn đúng loại CPU của mình.<br/> - Sendmail và bind là 2 phần mềm nổi tiếng và rất lâu đời trong thế giới *nix, vì thế không có gì lạ khi nó mặc định được cài đặt trong hầu hết các phiên bản UNIX cũng như linux. Cá nhân tôi không thích dùng chúng vì thế trong file cấu hình make.conf tôi lựa chọn là không build các software này, nếu bạn thích dùng nó thì đơn giản thêm # vào các dòng tương ứng. Ngoài ra các bạn có thể tham khảo <span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"><span class="link"> http://www.freebsd.org/cgi/man.cgi?query=make.conf&apropos=0&sektion=0&manpath=FreeBSD+6.2-RELEASE&format=html</span></span></span></span></span></span></span> để biết thêm chi tiết.<br/> <br/> Phần chuẩn bị đã xong, chuyển sang terminal 1 coi source đã được update xong chưa, nếu mọi thứ đã xong hãy chạy lệnh sau để tiến hành biên dịch hệ thống:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>#cd /usr/src<br/> #make buildworld && make buildkernel</pre><br/> 		</div><br/> Trên máy Pentium4 của tôi phải mất gần 2 giờ để công việc này hoàn tất, vì vậy bạn hãy pha 1 ly cafe và bật tivi theo dõi trận Việt Nam - Iraq trong thời gian chờ đợi <img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom">)<br/> </div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=/hvaonline/readingRoom/item/72940.html"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>

		<tr>
			<td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
						<div class="postbody"><b>Other posts in the same group:</b></div><br />
									<div class="gen"><b>FreeBSD on usb - Phần 1</b></div>
									<div class="gen"><a href="/hvaonline/readingRoom/item/73937.html">FreeBSD on usb - Phần 2</a></div>
						</td>
					</tr>
				</table>
			</td>
		</tr>


		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/12488.html#72940" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.html" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
