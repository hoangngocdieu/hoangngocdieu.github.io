<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="description" content="HVA Reading Room">
<meta name="keywords" content=", reading room, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title> - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.hva?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0" align="center">
	<tr>
        <td width="100%" align="center" valign="middle">
			<a href="http://www.hvaonline.net" title="[Logo]"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" /></a>
		</td>
	</tr>

	<tr>
		<td>
<table cellspacing="0" cellpadding="0" width="80%" align="center" border="0">

		<tr height="15">
			<th colspan="2" class="thportal" align="left"><span class="readingheader">&nbsp;.::*nix::.</span></th>
		    <th class="thportal" align="center">
				<span class="readingheader">
					 Access Control List in Linux <a name="topPage" id="topPage"></a>
				</span>
			</th>
		    <th class="thportal" align="right">
				<a href="/hvaonline/posts/list/0/18151.hva#108870" target="_blank">
				<img src="/hvaonline/templates/viet/images/goright.gif" align="absbottom" border="0" alt="Go to original post" title="Go to original post"/></a> 
				<img src="/hvaonline/templates/viet/images/what.gif" align="absbottom" border="0" alt="Author: Tống Anh Quân (quanta) - Translator:  - Entry Date: 13/02/2009 16:28:38" title="Author: Tống Anh Quân (quanta) - Translator:  - Entry Date: 13/02/2009 16:28:38"/>
			</th>
		</tr>
</table>

<table cellspacing="0" cellpadding="5" width="80%" align="center" border="0">
		<tr>
		    <td align="left" colspan="2" class="readingborderBottom">
				<table cellspacing="0" cellpadding="10" width="95%" align="center" border="0">
					<tr>
						<td align="left">
							<div class="postbody"><i>(Tham khảo từ Google với từ khóa chính là tiêu đề của bài viết)</i><br/> <br/> <font color='yellow'>Bài viết cung cấp nền tảng và chức năng chính của ACLs trong hệ thống file của Linux. Bạn cũng sẽ học được cách mở rộng các khái niệm permissions truyền thống với ACLs và những thuận lợi trong việc cung cấp khái niệm này.</font><br/> <br/> <font color='cyan'><b>Thuận lợi của ACLs</b></font><br/> <br/> Thông thường 1 file trong Linux có 3 quyền: r, w, x với 3 nhóm người dùng: owner, group, other. 9 bits này được sử dụng để xác định đặc tính cho tất cả các hệ thống file trong Linux. Thêm vào đó, SUID, SGID, sticky bit có thể được dùng trong các trường hợp đặc biệt. <br/> <br/> ACLs được sử dụng trong trường hợp mà các khái niệm permission của file thông thường không có hiệu lực. Chúng cho phép gán quyền cho một người, hoặc một nhóm cá nhân thậm chí không tương ứng với owner hoặc owning group. ACLs hỗ trợ các hệ thống file ReiserFS, Ext2, Ext3, JFS, XFS.<br/> <br/> Bạn có thể thấy rõ thuận lợi của ACLs khi thay thế 1 server chạy Windows bằng 1 server chạy Linux. Một số trạm kết nối vẫn có thể chạy trên Windows ngay cả sau khi chuyển đổi. Hệ thống Linux sẽ chuyển các file và dịch vụ về clients chạy windows với Samba. Samba cũng hỗ trợ ACLs và lúc đó quyền của người dùng có thể được cấu hình trên cả Linux và Windows bằng GUI. winbindd còn có khả năng gán quyền cho user chỉ tồn tại trên Windows domain mà ko có account nào trên Linux server. Mặt khác bạn có thể chỉnh sửa ACLs với getfacl và setfacl<br/> <br/> <font color='cyan'><b>Định nghĩa</b></font><br/> <br/> POSIX sử dụng 3 lớp người dùng để gán quyền cho hệ thống file. <br/> <ul><li>Access ACL: áp dụng cho cả file và thư mục</li><li> Default ACL: chỉ áp dụng cho thư mục. Chúng xác định quyền kế thừa từ thư mục cha khi được tạo.</li><li> ACL entry: Mỗi ACL sẽ bao gồm 1 tập hợp ACL entries. Một ACL entry sẽ chứa 1 loại, 1 hạn định mà user hoặc group nó tham chiếu đến, và một tập hợp các quyền.</li></ul><br/> <font color='cyan'><b>Handing ACLs</b></font><br/> <br/> <font color='#6699CC'>Cấu trúc của ACLs entries</font><br/> <br/> Về cơ bản, ACL chia thành 2 lớp: <font color='orange'>minimum ACL</font> chỉ đơn giản gồm các quyền như hệ thống file truyền thống. <font color='orange'>Extended ACL</font> mở rộng hơn, nó chứa đựng 1 <b>mask entry</b>, và có thể bao gồm các entries cho loại <i>named user</i>, <i>named group</i>. Các permission được định nghĩa trong owner và other luôn luôn có hiệu lực. Ngoại trừ <i>mask entry</i> thì các entries khác luôn có hiệu lực hoặc là được masked. Nếu các quyền tồn tại trong 1 hoặc 1 số entry trên được mask thì chúng cũng có hiệu lực. Permission chỉ chứa mask hoặc duy nhất 1 entry thực sự thì sẽ không có hiệu lực.<br/> <br/> <font color='#6699CC'>ACL entries và File mode permission bits</font><br/> <br/> ACL được cấu tạo theo 3 khối: <br/> Không có mask: owning group map với group class<br/> có mask: mask map với group class<br/> <br/> Quá trình map này đảm bảo việc tương tác giữa các ứng dụng được và không được hỗ trợ bởi ACLs. Quyền truy cập được gán bởi bit quyền đại diện cho giới hạn cao nhất. Tất cả các quyền không phản ánh ở đây hoặc là ko được gán trong ACL hoặc là không có hiệu lực. <br/> <br/> <font color='#6699CC'>Một thư mục với truy cập ACL</font><br/> <br/> Việc xử lý ACL được giải thích theo 3 bước:<br/> + Tạo file<br/> + Chỉnh ACL<br/> + Dùng masks<br/> <br/> Trước khi bạn tạo thư mục hãy dùng <font color='orange'>umask</font> để xác định quyền truy cập ban đầu. <br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ umask 027</pre><br/> 		</div><br/> Sau đó tạo mydir:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ mkdir mydir</pre><br/> 		</div><br/> Sau khi tạo <b>mydir</b> hãy dùng <font color='orange'>ls -dl</font> để kiểm tra lại là quyền đã được gán chính xác:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ ls -dl mydir/<br/> drwxrwx---+ 2 quanta quanta 4096 2007-12-29 22:53 mydir/</pre><br/> 		</div><br/> Kiểm tra trạng thái khởi đầu của ACL và chèn một new user và new group entry<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/<br/> # file: mydir<br/> # owner: quanta<br/> # group: quanta<br/> user::rwx<br/> group::r-x<br/> other::---</pre><br/> 		</div><br/> Đầu tiên hãy thử chỉnh sửa bằng cách: gán quyền đọc, ghi, thi hành cho user <b>kitty</b> và group <b>friends</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ setfacl -m user:kitty:rwx,group:friends:rwx mydir/</pre><br/> 		</div><br/> Tuỳ chọn <font color='olive'>-m</font> sẽ nhắc setfacl chỉnh sửa một ACL đã tồn tại.<br/> <br/> Thử xem kết quả với lệnh <font color='orange'>getfacl</font> xem sao:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/<br/> # file: mydir<br/> # owner: quanta<br/> # group: quanta<br/> user::rwx<br/> user:kitty:rwx<br/> group::r-x<br/> group:friends:rwx<br/> mask::rwx<br/> other::---</pre><br/> 		</div><br/> <br/> Ngoài các entries khởi tạo cho user <b>kitty</b> và group <b>friends</b>, <i>mask entry</i> cũng được tạo ra. <i>mask entry</i> này được gán tự động để giảm thiểu số lượng các entries trong group class để gọi tên thông thường. mask định nghĩa quyền truy cập có hiệu lực lớn nhất cho tất cả các entries trong group class: <i>named user</i>, <i>named grou</i>p, <i>owning group</i>. Do đó, <i>mask entry</i> tương ứng với bit quyền của group class - được hiển thị bằng lệnh <font color='orange'>ls -dl</font><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ ls -dl mydir/<br/> drwxrwx---+ 2 quanta quanta 4096 2007-12-29 22:53 mydir/</pre><br/> 		</div><br/> Bạn chú ý, cột đầu tiên của output chứa đựng một dấu +, đây là ký tự đại diện cho một extended ACL<br/> <br/> Theo output trên, permission của mask entry cũng bao gồm quyền write, theo đó owning group cũng có quyền write thư mục mydir. <br/> <br/> Bây giờ thử dùng <font color='orange'>chmod</font> hoặc <font color='orange'>setfacl</font> để disabled quyền write của group class xem sao, output của lệnh <b>ls</b> cho thấy mask bits đã được điều chỉnh với <b>chmod</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ sudo chmod g-w mydir/</pre><br/> 		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/<br/> # file: mydir<br/> # owner: quanta<br/> # group: quanta<br/> user::rwx<br/> user:kitty:rwx                  #effective:r-x<br/> group::r-x<br/> group:friends:rwx               #effective:r-x<br/> mask::r-x<br/> other::---</pre><br/> 		</div><br/> <font color='#6699CC'>Một thư mục với default ACL</font><br/> <br/> <b>default ACL</b> định nghĩa tất cả các quyền truy cập kế thừa từ thư mục này khi nó được tạo. <b>default ACL</b> ảnh hưởng đến các thư mục con cũng như là các files. <br/> <br/> <i><u>Ảnh hưởng của Default ACLs</u></i><br/> Về cơ bản quyền của ACL được handled theo 2 cách:<br/> + 1 thư mục kế thừa default ACL từ thư mục cha<br/> + 1 file kế thừa từ default ACL và nó sở hữu Access ACL<br/> <br/> Tất cả các hệ thống tạo file đều sử dụng mode parameter để định nghĩa quyền truy cập cho file mới được tạo:<br/> + Nếu thư mục không có default ACL,một sự giao nhau giữa các quyền trong mode parameter và trong umask hiện tại sẽ được tạo và gán cho đối tượng<br/> + Nếu default ACL tồn tại trong thư mục cha, bit quyền được xác định theo sự giao nhau giữa giá trị của mode parameter và quyền định nghĩa trong default ACL, và được gán cho đối tượng. <br/> <br/> <i><u>Ứng dụng của default ACLs</u></i><br/> + Tạo một default ACL cho một thư mục đã tồn tại<br/> + Tạo một thư mục con trong thư mục có default ACLs<br/> + Tạo một file trong thư mục có default ACLs<br/> <br/> Thêm một default ACLs vào một thư mục đã tồn tại <b>mydir</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ setfacl -d -m group:friends:r-x mydir/</pre><br/> 		</div><br/> Tuỳ chọn <font color='olive'>-d</font> sẽ nhắc <font color='orange'>setfacl</font> thực hiện một "chỉnh sửa" trên default ACLs<br/> Xem kết quả của lệnh này:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/<br/> # file: mydir<br/> # owner: quanta<br/> # group: quanta<br/> user::rwx<br/> user:kitty:rwx                  #effective:r-x<br/> group::r-x<br/> group:friends:rwx               #effective:r-x<br/> mask::r-x<br/> other::---<br/> default:user::rwx<br/> default:group::r-x<br/> default:group:friends:r-x<br/> default:mask::r-x<br/> default:other::---</pre><br/> 		</div><br/> <font color='orange'>getfacl</font> sẽ trả về cả access ACL và default ACL. <br/> <br/> Tiếp theo thử tạo một thư mục con trong <b>mydir</b>, bạn sẽ thấy thư mục con này kế thừa default ACL từ <b>mydir</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ mkdir mydir/mysubdir</pre><br/> 		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/mysubdir/<br/> # file: mydir/mysubdir<br/> # owner: quanta<br/> # group: quanta<br/> user::rwx<br/> group::r-x<br/> group:friends:r-x<br/> mask::r-x<br/> other::---<br/> default:user::rwx<br/> default:group::r-x<br/> default:group:friends:r-x<br/> default:mask::r-x<br/> default:other::---</pre><br/> 		</div><br/> Bạn thấy rõ là access ACL của <b>mysubdir</b> phản ánh chính xác default ACL của <b>mydir</b>.<br/> <br/> Sử dụng <font color='orange'><i>touch</i></font> để tạo một file trong thư mục <b>mydir</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ touch mydir/myfile</pre><br/> 		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ ls -l mydir/myfile <br/> -rw-r-----+ 1 quanta quanta 0 2008-01-07 00:59 mydir/myfile</pre><br/> 		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/><br/> 		<div class="coded""><br/> 		<pre>$ getfacl mydir/myfile <br/> # file: mydir/myfile<br/> # owner: quanta<br/> # group: quanta<br/> user::rw-<br/> group::r-x                      #effective:r--<br/> group:friends:r-x               #effective:r--<br/> mask::r--<br/> other::---</pre><br/> 		</div><br/> </div>
						</td>
					</tr>

					<tr>
						<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/readingRoom/item/108870.hva"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
					</tr>
				</table>
			</td>
		</tr>



		<tr>
			<td align="left" valign="top">
				<a href="#topPage"><img src="/hvaonline/templates/viet/images/goup.gif" align="absbottom" border="0" alt="Go to top" title="Go to top"></a>
				<a href="/hvaonline/posts/list/0/18151.hva#108870" target="_blank"><img src="/hvaonline/templates/viet/images/goright.gif" border="0" align="absbottom" alt="Go to original post" title="Go to original post"></a> 
				&nbsp;
			</td>
			<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/readingRoom/show/'+ this.options[this.selectedIndex].value +'.hva'; }" name="select">
						<option value="0" selected="selected">Go to Category</option>	
						<option value="0">------------------------</option>	
								<option value="1">Defense</option>
								<option value="2">Exploit</option>
								<option value="3">Reverse Engineering</option>
								<option value="4">*nix</option>
								<option value="5">Windows</option>
								<option value="6">Networking</option>
								<option value="7">Others</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
		</tr>
</table>
<script type="text/javascript">
		var ctlTop = false;
		var ctlBt = false;

		function activateControllerTop()
		{
			ctlTop = !ctlTop;
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");
			document.getElementById("controllerTop").style.display = (ctlTop ? "" : "none");

			if (ctlTop) {
				document.location = document.location + "#ctlTop";
			}
		}

		function activateControllerBottom()
		{
			ctlBt = !ctlBt;
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");
			document.getElementById("controllerBottom").style.display = (ctlBt ? "" : "none");

			if (ctlBt) {
				document.location = document.location + "#ctlBt";
			}
		}
</script>

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
