<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Messages posted by "nnquangit"]]></title>
		<link>/hvaonline/posts/listByUser/231498.html</link>
		<description><![CDATA[Messages posted by "nnquangit"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Xin giúp đỡ memory leak trên Centos 6.4</title>
				<description><![CDATA[ Chào mấy bác,

Em mới cài con server của em Centos 6.4 có httpd + mysql + php nhưng khi em đánh lệnh tar 1 thư mục &gt; 10 GB memory nó nhảy từ từ lên 8g full luôn, Swap thì free. Chờ mãi mà memory nó ko tụt xuống &gt;.&lt;

Hix có báo nào giúp em với.
Thk mấy bác.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/45362/279259.html#279259</guid>
				<link>/hvaonline/posts/preList/45362/279259.html#279259</link>
				<pubDate><![CDATA[Fri, 20 Dec 2013 03:29:11]]> GMT</pubDate>
				<author><![CDATA[ nnquangit]]></author>
			</item>
			<item>
				<title>Bind trên Centos 6.3</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Ikut3 wrote:</cite><br>
		<blockquote>Nếu như vậy thì bạn cứ để mọi người chạy ổn định trong 8.8.8.8 đi. 
Bao giờ configure & test okie hết thì hẵng trỏ qua 192.168.111.220. Sao lại mang Client ra để test vậy ? 

Bạn tham khảo 1 trường hợp tương tự nhé. Lí giải rất rõ ràng. Ngày trước mình cũng đã từng gặp chuyện này 
<blockquote>
Questions 

I have a user on Windows 7 that is trying to access a local server with a DNS name of windows.cs. We have two internal DNS servers. The DHCP server assigns users the two internal DNS servers as primary and secondary and then our ISPs DNS as a tertiary DNS server.

Every now and then, the user can't access the website at windows.cs. If I ping it, it says it can't resolve the host name. I flush the DNS cache, and then when I display the dns cache it has the following:

windows.cs - Name does not exist

Yet if I use nslookup, which by default queries the primary DNS server (our internal one) and I query windows.cs, it returns the correct IP address.

So why can't Windows resolve the hostname using ping, but it can when using the nslookup tool? And how do I fix this?

Repply 

It's appears from what you're saying that the request for windows.cs is going to the ISPs DNS server now and again. The nxdomain result is then probably cached by Windows' DNS client, and thus used for any retries with a web browser, ping etc. Clearing the cache (ipconfig /flushdns) should force the Windows DNS client to retry the query, but there's no guarantee it won't go to the ISP DNS server again.

The reason ping can't resolve the hostname but nslookup can is because nslookup a low level tool that bypasses the Windows DNS client. It uses whatever DNS server you tell it to (the first one by default), and does the query on the fly. You can change the DNS server it queries by typing server &lt;host&gt; from the nslookup prompt, where host is the IP or FQDN.

The Windows DNS client however will only do queries for entries that are not in its cache (or have expired). Otherwise it returns the cached result.

It's not immediately apparent why the Windows client is using the ISP DNS server. Perhaps it could not resolve the local server recently (due perhaps to being on another network), perhaps the local server was returning errors. Or perhaps it is not ordered correctly under Advanced TCP/IP settings &gt; DNS.

Personally I prefer to only use local DNS server addresses on workstations (propagated by DHCP), to simplify configuration and avoid issues like this. I'd be curious to know the rationale behind setting the ISPs DNS server on desktops. I can't image their being any valid performance reasons and as far as redundancy goes two is enough on most networks (if not add a third).&nbsp;
		</blockquote>&nbsp;
		</blockquote>

mình không hiểu 
&quot;It's not immediately apparent why the Windows client is using the ISP DNS server. Perhaps it could not resolve the local server recently (due perhaps to being on another network), perhaps the local server was returning errors. Or perhaps it is not ordered correctly under Advanced TCP/IP settings &gt; DNS.&quot;
tại sao ?
Vậy nó query DNS nào ? sao nó biết ip? Phải chăng trong DNS Client nó cũng có root hint ?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/43210/268693.html#268693</guid>
				<link>/hvaonline/posts/preList/43210/268693.html#268693</link>
				<pubDate><![CDATA[Thu, 23 Aug 2012 20:37:12]]> GMT</pubDate>
				<author><![CDATA[ nnquangit]]></author>
			</item>
			<item>
				<title>Bind trên Centos 6.3</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Ikut3 wrote:</cite><br>
		<blockquote>Mình nghĩ chỉ cần để 1 cái dns 192.168.111.220 
Sử dụng chức năng Forwarder DNS để client có thể query những domain không có trong List Zones.
Lúc này khi bạn truy cập tên miền nội bộ thì dns sẽ tìm kiếm trong các zones có trongl list.nếu không có mới Forward ra ngoài. 

Thân.&nbsp;
		</blockquote>
thk bác nhưng vì cái dns mình cài đang test nhìu khi cần restart / lỡ may nó chít nếu client chỉ về 1 máy mình thui thì sao lên net dc &gt;.&lt;

Mong các bác giúp em với huhu]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/43210/268573.html#268573</guid>
				<link>/hvaonline/posts/preList/43210/268573.html#268573</link>
				<pubDate><![CDATA[Mon, 20 Aug 2012 00:59:26]]> GMT</pubDate>
				<author><![CDATA[ nnquangit]]></author>
			</item>
			<item>
				<title>Bind trên Centos 6.3</title>
				<description><![CDATA[ Bên mình có mô hình như thế này.

|------ abc.com
|
[Internet]
|
|------ (win2k8) gateway 192.168.111.248 
|
|------ (centos) DNS + Web ( 192.168.111.220 ) (zone : noibo.abc.com)
|
|------ (win7) Client (dns : 192.168.111.220,8.8.8.8 gateway : 192.168.111.248)

----------------------- <b>[file named.conf]</b> ----------------------- 
options {
	query-source	port 53;	
	query-source-v6	port 53;
	directory 	"/var/named";
	dump-file 	"/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
	recursion yes;

	dnssec-enable yes;
	dnssec-validation yes;
	dnssec-lookaside auto;

	/* Path to ISC DLV key */
	bindkeys-file "/etc/named.iscdlv.key";

	managed-keys-directory "/var/named/dynamic";
	forwarders { 210.245.31.20; 8.8.8.8; 8.8.4.4; };
}
.......

----------------------- <b>[files zone]</b> -----------------------
$TTL 2D;
@	IN SOA	noibo.abc.com. root(
					20080214	; serial
					10800	; refresh
					3600	; retry
					604800	; expire
					86400 	; minimum
				  )
	IN NS	noibo.abc.com.
	IN A	192.168.111.220
www	IN A	192.168.111.220
hinhanh	IN A	192.168.111.220

Khi client ping www.noibo.abc.com thì nó kêu host unkown. 
Nhưng nslookup thì nó query ra được từ cái dns của em. 
Khi client em chỉnh dns lại 192.168.111.220 bỏ 8.8.8.8 đi thì ping +nslookup ok. 

Vì cái server em đang test nên hay restart lắm nên client em phải chỉnh cho nó 2 cái dns. 
Mà không hiểu sao nó lại bị lỗi này hix hix.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/43210/268570.html#268570</guid>
				<link>/hvaonline/posts/preList/43210/268570.html#268570</link>
				<pubDate><![CDATA[Sun, 19 Aug 2012 23:48:47]]> GMT</pubDate>
				<author><![CDATA[ nnquangit]]></author>
			</item>
	</channel>
</rss>
