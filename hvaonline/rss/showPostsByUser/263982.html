<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Messages posted by "tmlinhkct"]]></title>
		<link>/hvaonline/posts/listByUser/263982.html</link>
		<description><![CDATA[Messages posted by "tmlinhkct"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Cần giúp đỡ về sắp xếp database MySQL</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">myquartz wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">henryhuy wrote:</cite><br>
		<blockquote>Xin gừi bác cấu trúc table của mình như sau :
	 1	id	int(250)
	 2	content_id	varchar(250)
	 3	content_category_id	varchar(255)
	 4	title	text
	 5	sub_title	text
	 6	detail	longtext
	 7	image	varchar(250)
	 8	idlang	varchar(250)
	 9	show_content	int(2)
	 10	dateadd	datetime

Câu lệnh SELECT mỗi lần lấy tin mới nhất của mình thế này : &quot;select id, content_id, content_category_id, title, sub_title, image, idlang, show_content, dateadd  from content order by id desc limit 0,10&quot;

Nếu muốn tạo INDEX thì mình làm thế nào, sorry mình hỏi hơi kỹ vì chưa làm INDEX lần nào cả

Mình có đọc 1 số tut trên mạng thì hướng dẫn là ALTER TABLE content ADD INDEX idx_id(id); nhưng mình không rõ là khi nào nên ALTER TABLE cả, có phải là mỗi lần select 10 tin mới ra chăng ?

Cảm ơn các bác nhiều.&nbsp;
		</blockquote>

Ợ. Vậy là bạn học lập trình SQL mà không học về ... index của CSDL, một thứ quan trọng sống còn của nó (mặc dù hệ thống vẫn chạy khi không có nó), có thể đây là sự thiếu sót không chỉ mỗi bạn mắc phải đâu.
Cột ID của bạn có phải là primary key? nếu là primary key rồi thì không cần index nữa vì nó đã được index rồi (primary key là 1 dạng index, với thuộc tính unique). Việc tạo index chỉ 1 lần kèm với tạo bảng, và thi thoảng thì phải bảo dưỡng nó thôi (analyze table), alter table là nhóm DDL như create table...

Nếu cột ID của bạn là số tăng dần, mỗi bài tin là tăng 1 đơn vị, bạn lấy 10 tin mới nhất thì sửa 1 chút thế này:

select id, content_id, content_category_id, title, sub_title, image, idlang, show_content, dateadd  from content where id &gt;= (select max(id)-10 from content) order by id desc limit 0,10

Nếu lo ngại có sự delete trong content, gây lỗ thủng id, thiếu, thì max(id) - 10 thay bằng - 20, - 30... thậm chí 100 vẫn là rất tốt cho bảng. nó đảm bảo rằng dù bảng có tăng kích thước lên thì tốc độ vẫn không thay đổi nhiều.&nbsp;
		</blockquote>
mình xin đính chính chút là nếu cột id đã là primary key rồi thì không cần dùng WHERE... nữa mà chiến luôn:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>select id, content_id, content_category_id, title, sub_title, image, idlang, show_content, dateadd  from content order by id desc limit 0,10</pre>
		</div>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/45564/281073.html#281073</guid>
				<link>/hvaonline/posts/preList/45564/281073.html#281073</link>
				<pubDate><![CDATA[Thu, 24 Jul 2014 00:34:48]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Cách tính mức chịu tải của server</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quangteospk wrote:</cite><br>
		<blockquote>Mình thấy có gì đó không đúng ở cách tính chịu tải dựa trên bandwidth thì phải. 

Ví dụng mình dùng pingdom-tool để đo thử trang vnexpress, page size vào home-page là 3.9MB.

Giải dụ vnexpress thuê bw là 1Gbps (khá cao), tương đương 128 Megabyte/s vậy tính ra với băng thông đó, chưa tính mức độ chịu tải về hardware thì chỉ với xấp xỉ 33 req là hết băng thông. Không biết có gì sai ở đây không nhỉ?

&nbsp;
		</blockquote>

Đó là tính theo lượt người dùng mới. Tức là user mới vô vnexpress lần đầu sẽ phải load toàn bộ site về. Còn từ lần 2 trở đi, do site đã cache trên máy user rồi nên load lại site sẽ chiếm ít băng thông hơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/45677/280917.html#280917</guid>
				<link>/hvaonline/posts/preList/45677/280917.html#280917</link>
				<pubDate><![CDATA[Tue, 1 Jul 2014 04:37:28]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Vấn đề loadavg cao trong khi CPU, I/O, RAM bình thường</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">linshan wrote:</cite><br>
		<blockquote>bắt đầu đoạn  "<font color='yellow'>3 zombie</font>"  sẽ tìm được vấn đề&nbsp;
		</blockquote>
đây mới là nguyên nhân chính]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/45652/280916.html#280916</guid>
				<link>/hvaonline/posts/preList/45652/280916.html#280916</link>
				<pubDate><![CDATA[Tue, 1 Jul 2014 04:25:32]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Kết hợp Nginx + Varnish + Apache</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Framer wrote:</cite><br>
		<blockquote>Thanks các bác đã cho ý kiến. Em thực sự thấy Vanish cache ổn hơn nginx nhiều. Em sẽ giữ mô hình này :)&nbsp;
		</blockquote>
Mình cũng từng dùng vanish cache cho 1 hệ thống site báo nhỏ. Dùng để cache static file, controll ram tốt hơn nginx nhiều (mình đã test ab full đường truyền 12 Mbps).]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/45532/280623.html#280623</guid>
				<link>/hvaonline/posts/preList/45532/280623.html#280623</link>
				<pubDate><![CDATA[Mon, 12 May 2014 23:51:41]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Giúp đỡ vấn đề file .htaccess trên windows</title>
				<description><![CDATA[ dùng URL Rewrite for IIS ấy.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/44525/277711.html#277711</guid>
				<link>/hvaonline/posts/preList/44525/277711.html#277711</link>
				<pubDate><![CDATA[Wed, 24 Jul 2013 04:45:33]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>giúp đỡ về tạo mạng aỏ trên linux</title>
				<description><![CDATA[ Cậu muốn thông được với máy thật thì phải tạo thêm 1 card mạng ảo cho cái vmnet.
vào edit chọn virtual network editor =&gt; chọn card vmnet đang dùng =&gt; chọn host only =&gt; tick vào  Connect a virtual host adapter to this network.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/43488/269933.html#269933</guid>
				<link>/hvaonline/posts/preList/43488/269933.html#269933</link>
				<pubDate><![CDATA[Fri, 5 Oct 2012 22:36:09]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>FullScreen máy ảo trong VMware Workstation</title>
				<description><![CDATA[ cài linux xong rùi nếu bạn k0 dùng đồ hoạ thì bạn dùng mấy tool ssh vào cho dễ làm. cần gì vmware tool cho rắc rối .:)]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/43161/268327.html#268327</guid>
				<link>/hvaonline/posts/preList/43161/268327.html#268327</link>
				<pubDate><![CDATA[Sat, 11 Aug 2012 22:28:42]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Lỗi khi phân quyền thư mục chứa mailbox trong postfix</title>
				<description><![CDATA[ tại sao bạn lại chmod /home/virtual sang postfix:postfix để làm gì....
theo như trên thì bạn nên :

tạo 1 user virtual: useradd virtual -u 125 -g 125 (tạo user virtual có UID/GID=125/125)
trong main.cf : home_mailbox = Maildir/
trong dovecot.conf: mail_location = maildir:/home/virtual/%d/%n/Maildir

tức là bạn đang tạo 1 user mà trong thư mục home của nó chứa mailbox. sau đó bạn cấu hình để postfix và dovecot móc vào mailbox thông qua user này.
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/42877/266956.html#266956</guid>
				<link>/hvaonline/posts/preList/42877/266956.html#266956</link>
				<pubDate><![CDATA[Tue, 17 Jul 2012 04:37:57]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Làm thế nào để 2 máy ở 2 lớp mạng khác nhau có thể nhìn thấy nhau?</title>
				<description><![CDATA[ phải cáu hình route giữa 1 mạng LAN đó.
http://my.opera.com/okabi/blog/static-route-with-linux-cau-hinh-route-tinh-tren-linux-2]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/42840/266454.html#266454</guid>
				<link>/hvaonline/posts/preList/42840/266454.html#266454</link>
				<pubDate><![CDATA[Sun, 8 Jul 2012 23:50:48]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Cho mình hỏi về load balancer giữa tomcat với MySQL server</title>
				<description><![CDATA[ @Ikut3
cái này chỉ là hạn chế tính trạng split brain. 
còn khi xảy ra split brain rồi thì làm sao để khắc phục 1 cách tự động được nhỉ....]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/42657/265428.html#265428</guid>
				<link>/hvaonline/posts/preList/42657/265428.html#265428</link>
				<pubDate><![CDATA[Thu, 21 Jun 2012 23:23:21]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
			<item>
				<title>Cho mình hỏi về load balancer giữa tomcat với MySQL server</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Ikut3 wrote:</cite><br>
		<blockquote>Hi ngtrongtri
2. Trong trường hợp việc connect giữa 2 máy MySQL có vấn đề, 2 con không nhận được tín hiệu của nhau trong 1 khoảng thời gian nhất định. Bạn sẽ bị Split Brain. Đối với trường hợp này bạn phải giải quyết ra sao ?  :-D
Cheers,&nbsp;
		</blockquote>
cái này em thấy đối với active/active thì vào /etc/drbd.d/global_common.conf
<blockquote>
        net {
                allow-two-primaries yes;
                after-sb-0pri discard-zero-changes;
                after-sb-1pri discard-secondary;
                after-sb-2pri call-pri-lost-after-sb;
           }
&nbsp;
		</blockquote>

khi phát hiện ra split brain là tự động reboot trên 1 node đc coi là mất dữ liệu. sau reboot thì connect lại bt.

với acive/passive thì chĩ có mỗi manual còn auto thì hok bít.:(

]]></description>
				<guid isPermaLink="true">/hvaonline/posts/preList/42657/265365.html#265365</guid>
				<link>/hvaonline/posts/preList/42657/265365.html#265365</link>
				<pubDate><![CDATA[Wed, 20 Jun 2012 23:55:32]]> GMT</pubDate>
				<author><![CDATA[ tmlinhkct]]></author>
			</item>
	</channel>
</rss>
