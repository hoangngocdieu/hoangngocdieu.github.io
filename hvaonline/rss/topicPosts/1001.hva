<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Hỏi cách backup thư mục trong *nix"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.hva</link>
		<description><![CDATA[Latest messages posted in the topic "Hỏi cách backup thư mục trong *nix"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ Em có một cái host chạy *nix. Nó có chức năng crontab nhưng em không hiểu rõ lắm về lệnh này. Bác nào có thể chỉ em câu lệnh để thực thi: mỗi tuần 1 lần, zip (tar hay gz) một thư mục lại để 1 bản trên server, một bản gửi cho email của em (có smtp server).]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4067</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4067</link>
				<pubDate><![CDATA[Wed, 5 Jul 2006 01:34:06]]> GMT</pubDate>
				<author><![CDATA[ ttkingdom]]></author>
			</item>
			<item>
				<title>Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">ttkingdom wrote:</cite><br>
		<blockquote>Em có một cái host chạy *nix. Nó có chức năng crontab nhưng em không hiểu rõ lắm về lệnh này. Bác nào có thể chỉ em câu lệnh để thực thi: mỗi tuần 1 lần, zip (tar hay gz) một thư mục lại để 1 bản trên server, một bản gửi cho email của em (có smtp server).&nbsp;
		</blockquote>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>man crontab</pre>
		</div>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4350</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4350</link>
				<pubDate><![CDATA[Wed, 5 Jul 2006 20:17:57]]> GMT</pubDate>
				<author><![CDATA[ hxizan]]></author>
			</item>
			<item>
				<title>Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">ttkingdom wrote:</cite><br>
		<blockquote>Em có một cái host chạy *nix. Nó có chức năng crontab nhưng em không hiểu rõ lắm về lệnh này. Bác nào có thể chỉ em câu lệnh để thực thi: mỗi tuần 1 lần, zip (tar hay gz) một thư mục lại để 1 bản trên server, một bản gửi cho email của em (có smtp server).&nbsp;
		</blockquote>

Bồ cần câu lệnh thực thi các quy trình backup và gởi mail hay là cần thông tin về cách setup cron?

Mail của bồ cho phép gởi file với dung lượng là bao nhiêu?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4451</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4451</link>
				<pubDate><![CDATA[Thu, 6 Jul 2006 06:07:06]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ Sorry cắt ngang câu hỏi của bạn ttkingdom, hỏi thêm anh conmale điều này.

Nếu thiết lập crontab giống như HVA ngày trước (sử dụng IPB) thì anh conmale cũng sử dụng chức năng crontab này ?

Em thiết lập Crontab xong ví dụ file .tar backup của em hôm nay là <b>0607.tar</b>, em có sử dụng phần mềm để tự động download file .tar này về máy mình nhưng không biết quy định xoá bỏ file củ ví dụ file <b>0507.tar</b> đi .
Trên linux có ứng dụng nào cho phép mình tự động xoá file backup củ đi hông anh (file củ là <b>0507.tar</b>) nhưng vẫn đảm bảo còn tồn tại trên server file backup mới nhất <b>0607.tar</b>

<b>"Đòi hỏi" của em như thế này</b>
- Cứ 03h sáng tự động backup
- File backup này tự động download về máy mình, không cần send qua mail vì dung lượng mail chắc chắn sẽ không đủ cho forum có đông thành viên (nếu có thì chĩ cần báo cáo quá trình backup thành công, không có cũng được)
- Và file backup củ của ngày hôm trước tự động sẽ bị xoá (phần này là em cần nhất)

Cám ơn anh  :) ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4489</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4489</link>
				<pubDate><![CDATA[Thu, 6 Jul 2006 11:21:50]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>Sorry cắt ngang câu hỏi của bạn ttkingdom, hỏi thêm anh conmale điều này.

Nếu thiết lập crontab giống như HVA ngày trước (sử dụng IPB) thì anh conmale cũng sử dụng chức năng crontab này ?
&nbsp;
		</blockquote>
Hễ đụng tới *nix là đụng tới cron. Cron is made for lazy bums ;)

<p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>
Em thiết lập Crontab xong ví dụ file .tar backup của em hôm nay là <b>0607.tar</b>, em có sử dụng phần mềm để tự động download file .tar này về máy mình nhưng không biết quy định xoá bỏ file củ ví dụ file <b>0507.tar</b> đi .

Trên linux có ứng dụng nào cho phép mình tự động xoá file backup củ đi hông anh (file củ là <b>0507.tar</b>) nhưng vẫn đảm bảo còn tồn tại trên server file backup mới nhất <b>0607.tar</b>
&nbsp;
		</blockquote>
File được tạo có "create date" và "create time" :). Vậy muốn tìm một file được tạo lúc nào thì sao? Xem thử:

find /path/to/where/you/wanna/check/ -type f -ctime +1 -exec rm -f {} \;

Đọc thêm: <b>man find</b>

<p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>
<b>"Đòi hỏi" của em như thế này</b>
- Cứ 03h sáng tự động backup
&nbsp;
		</blockquote>
Đưa vào crontab 1 dòng:
0 3 * * * * /script/to/backup

Đọc thêm: <b>man cron</b>
Cái script này em phải viết tuỳ theo nhu cầu. Nó như thế nào thì tính sau.

<p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>
- File backup này tự động download về máy mình, không cần send qua mail vì dung lượng mail chắc chắn sẽ không đủ cho forum có đông thành viên (nếu có thì chĩ cần báo cáo quá trình backup thành công, không có cũng được)
&nbsp;
		</blockquote>
Cái này tuỳ thuộc vào chuyện download về máy em thế nào thì mới hình thành được cái script.


<p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>
- Và file backup củ của ngày hôm trước tự động sẽ bị xoá (phần này là em cần nhất)

Cám ơn anh  :) &nbsp;
		</blockquote>
Xem ở trên.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4537</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#4537</link>
				<pubDate><![CDATA[Thu, 6 Jul 2006 12:53:35]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ Vâng, em cũng làm được cái script backup bằng cron tuy nhiên em phải sử dụng chương trình Internet Download Manager lập lịch vào lúc 3 giờ sáng thì cho nó để tải về máy tính của mình .
Tức là quá trình backup hoàn tất .

 Ý của em yêu cầu, em muốn tạo một script để nó tự động download file backup về máy của em vào thời gian mà mình ấn định, không cần sử dụng chương trình nào hỗ trợ hết thì em phải làm sao . Em mò hoài và đến bí luôn . 
Nên post bài này nhờ anh làm "hướng dẫn viên" cho em, <b>tạo script backup nó tự động tải về máy tính của mình</b> vì em tạo được file backup và ấn định đợc thời gian mà mình muốn backup rồi tuy nhiên em không biết phải làm sao để cho nó tự động tải về máy tính của mình cả . 

Nếu làm được theo yêu cầu của em thì em phải sử dụng thêm chương trình Internet Download Manager.  :cry: 

Cám ơn anh]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5443</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5443</link>
				<pubDate><![CDATA[Sun, 9 Jul 2006 17:39:17]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>Vâng, em cũng làm được cái script backup bằng cron tuy nhiên em phải sử dụng chương trình Internet Download Manager lập lịch vào lúc 3 giờ sáng thì cho nó để tải về máy tính của mình .
Tức là quá trình backup hoàn tất .

 Ý của em yêu cầu, em muốn tạo một script để nó tự động download file backup về máy của em vào thời gian mà mình ấn định, không cần sử dụng chương trình nào hỗ trợ hết thì em phải làm sao . Em mò hoài và đến bí luôn . 
Nên post bài này nhờ anh làm "hướng dẫn viên" cho em, <b>tạo script backup nó tự động tải về máy tính của mình</b> vì em tạo được file backup và ấn định đợc thời gian mà mình muốn backup rồi tuy nhiên em không biết phải làm sao để cho nó tự động tải về máy tính của mình cả . 

Nếu làm được theo yêu cầu của em thì em phải sử dụng thêm chương trình Internet Download Manager.  :cry: 

Cám ơn anh&nbsp;
		</blockquote>

Script backup làm việc trên server. Còn script download thì lại làm việc ở một máy khác mà Golden Autumn muốn "save" file backup. Như thế trên máy backup cũng có thể dùng thêm một cron-tab script để run wget. Nếu IDM (thế nghĩa là windows?) có thể download trên server thì wget cũng sẽ được thôi.
Nếu muốn run luôn scrip đó trên server, có thể làm thử với scp. Khoai không có điều kiện test scp nên không chắc.
-----------------------
hope i help :D
Khoai]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5520</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5520</link>
				<pubDate><![CDATA[Mon, 10 Jul 2006 00:41:36]]> GMT</pubDate>
				<author><![CDATA[ Mr.Khoai]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>Vâng, em cũng làm được cái script backup bằng cron tuy nhiên em phải sử dụng chương trình Internet Download Manager lập lịch vào lúc 3 giờ sáng thì cho nó để tải về máy tính của mình .
Tức là quá trình backup hoàn tất .

 Ý của em yêu cầu, em muốn tạo một script để nó tự động download file backup về máy của em vào thời gian mà mình ấn định, không cần sử dụng chương trình nào hỗ trợ hết thì em phải làm sao . Em mò hoài và đến bí luôn . 
Nên post bài này nhờ anh làm "hướng dẫn viên" cho em, <b>tạo script backup nó tự động tải về máy tính của mình</b> vì em tạo được file backup và ấn định đợc thời gian mà mình muốn backup rồi tuy nhiên em không biết phải làm sao để cho nó tự động tải về máy tính của mình cả . 

Nếu làm được theo yêu cầu của em thì em phải sử dụng thêm chương trình Internet Download Manager.  :cry: 

Cám ơn anh&nbsp;
		</blockquote>

Em cho anh biết từ server về máy em phương tiện chuyển tải dữ liệu là gì? (ftp, sftp, http form, rsync...)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5549</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5549</link>
				<pubDate><![CDATA[Mon, 10 Jul 2006 06:33:06]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Mr.Khoai wrote:</cite><br>
		<blockquote>Script backup làm việc trên server. Còn script download thì lại làm việc ở một máy khác mà Golden Autumn muốn "save" file backup. Như thế trên máy backup cũng có thể dùng thêm một cron-tab script để run wget. Nếu IDM (thế nghĩa là windows?) có thể download trên server thì wget cũng sẽ được thôi.
Nếu muốn run luôn scrip đó trên server, có thể làm thử với scp. Khoai không có điều kiện test scp nên không chắc.
-----------------------
hope i help :D
Khoai&nbsp;
		</blockquote>

Uh, tớ sử dụng Windows để backup về máy mình vì trên linux cũng mới chập chững làm quen với nó . :wink: Hy vọng học hỏi nhiều để sau này học hỏi anh chị em kiến thức linux nhiều hơn . Rất tiếc trên Linux tớ không biết sử dụng cái gì để mò cách thực hiện download file backup về máy mình cho nên sử dụng Windows để download :( 

<p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Em cho anh biết từ server về máy em phương tiện chuyển tải dữ liệu là gì? (ftp, sftp, http form, rsync...)&nbsp;
		</blockquote> 

Dạ, em sử dụng hệ điều hành FreeBSD, Linux Fedora Core4 và Windows XP Pro . 
Em không thể sử dụng giao thức ftp vì cơ quan của em nó chặn từ Squid nhưng không sao anh hướng dẫn cho em các giao thức này đều được cả : <b>http , ftp hay rsync</b> . Em muốn học hỏi chúng . 

Cám ơn anh ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5571</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5571</link>
				<pubDate><![CDATA[Mon, 10 Jul 2006 10:40:55]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Golden Autumn wrote:</cite><br>
		<blockquote>
Dạ, em sử dụng hệ điều hành FreeBSD, Linux Fedora Core4 và Windows XP Pro . 
Em không thể sử dụng giao thức ftp vì cơ quan của em nó chặn từ Squid nhưng không sao anh hướng dẫn cho em các giao thức này đều được cả : <b>http , ftp hay rsync</b> . Em muốn học hỏi chúng . 

Cám ơn anh &nbsp;
		</blockquote>

OK... thử xem

1. Cho ftp:

#!/bin/bash
DATE=`date '+%Y-%m-%d'`

# Your host to have backup file transfered to (at home?)
HOST=remote.host.name

# Your log in account to your host (at home?)
USER=whoever

# Your password to your host (at home?)
PASSWD=whatever

# make dir of today on server
mkdir -p /path/to/store/backup/$DATE
cd /path/to/store/backup/$DATE

# backup and bzip directories
tar cvfj /path/to/store/backup/$DATE/$DATE.tar.bz2 /path/to/files/

# ftp bz2 compressed file to your host
exec 4>&1
ftp -nv >&4 2>&4 |&

print -p open $HOST
print -p user $USER $PASSWD
print -p cd /to/where/you/keep/your/backup/athome/
print -p binary
print -p put $DATE.tar.bz2
print -p bye
wait
exit 0
if [ $? -eq 0 ]; then
mail -s "Backup OK - $DATE" yourname@your.domain.com
else
mail -s "Backup not OK - $DATE" yourname@your.domain.com
fi

# check and remove older versions
# any folder created 7 days ago are to be removed.
find /path/to/store/backup/ -type d -name "200*" -atime +7 -exec rm -rf {} \;


2. cho rsync (nếu như máy của em có rsyn listen), chỉ thay phần ftp ở trên bằng 1 dòng:

rsync  -ax --delete /path/to/store/backup/ <yourname>@<yourshostathome>:/to/where/you/keep/your/backup/athome/


3. cho ssh và rsync có chạy trên máy ở nhà nhưng không muốn rsync mở ra cho công cộng:

rsync -e "ssh -p 22" -ax --delete  /path/to/store/backup/ <yourname>@<yourshostathome>:/to/where/you/keep/your/backup/athome/


4. cho http form: quá phức tạp. Em phải có apache hoặc cái gì đó tương tự và phải thiết lập một cái http form cho phép POST và attach file. Cái này khoan nghĩ tới cái đã không thì long óc ;).

Thân.

PS: mấy cái ở trên anh chỉ gõ thẳng ra, chưa debug, em thử dùng đi. Nếu có trục trắc thì cho anh biết trục trặc ở đâu.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5581</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5581</link>
				<pubDate><![CDATA[Mon, 10 Jul 2006 11:20:45]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Hỏi cách backup thư mục trong *nix</title>
				<description><![CDATA[ Cám ơn anh rất nhiều, em đang thử nghiệm và sẽ "phỏng vấn" anh tiếp .

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5609</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1001.hva#5609</link>
				<pubDate><![CDATA[Mon, 10 Jul 2006 12:30:19]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
	</channel>
</rss>
