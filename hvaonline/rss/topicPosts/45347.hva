<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Squid Proxy và Tomcat"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.hva</link>
		<description><![CDATA[Latest messages posted in the topic "Squid Proxy và Tomcat"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Squid Proxy và Tomcat</title>
				<description><![CDATA[ Tình hình là cty có 1 con server Centos 6.4.

- 2 card mạng (eth0 192.168.1.113 nối với router và eth1 192.168.10.1 làm LAN )
- Server sử dụng DHCP cấp ip cho client từ eth1.
- Webserver (192.168.1.113) cài đặt tomcat sử dụng port:8080
- Squid Proxy sử dụng port 3128 mặc định của nó.

Mình đã cấu hình cho client truy cập đi internet ok.
Cấu hình DNAT từ port 80 đến 8080 nên client mạng trong truy cập đến Webserver không cần gõ 8080 ok. Và Client đi internet bình thường. (không sử dụng REDIRECT)

Nhưng nếu sử dụng Squid Proxy qua port 3128 thì client vẫn đi internet bình thường, nhưng khi truy cập web server thì phải nhập thêm :8080 thì mới vào đc.

Nếu không sử dụng Squid Proxy thì không phải nhập 8080 vẫn vào Webserver bình thường (chỉ nhập ip eth0).

Bây giờ mình muốn client phải đi qua Squid Proxy qua port 3128 rồi mới đến webserver mà không cần nhập thêm 8080 phía sau.

Mình có nghĩ đến giải pháp là để Squid listen từ port 80 của client đến 3128. Rồi từ port 3128 của Squid Proxy PREROUTING đến 8080 để khi client nhập ip 192.168.1.113 thì vào webserver luôn, đồng thời vẫn truy cập đến các website khác.

Như vậy mình nên cấu hình Iptables như thế nào cho hợp lý.
Cảm ơn các bạn đã đọc bài viêt!]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45347.hva#279211</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45347.hva#279211</link>
				<pubDate><![CDATA[Thu, 12 Dec 2013 05:47:36]]> GMT</pubDate>
				<author><![CDATA[ thuandx]]></author>
			</item>
	</channel>
</rss>
