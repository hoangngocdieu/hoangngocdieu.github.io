<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "[Thảo luận] Ai là người cuối cùng tác động đến 1 file?"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "[Thảo luận] Ai là người cuối cùng tác động đến 1 file?"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>[Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Trong tình huống nào đó, bạn cần biết ai là người cuối cùng tác động (truy cập, sửa, thay đổi permissions ...) đến một file.

Với cả 2 trường hợp:
+ Trước đó bạn chưa có "dự phòng" gì cả
+ Bạn đã monitoring rồi

Xin mời mọi người thảo luận để đưa ra những giải pháp.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129597</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129597</link>
				<pubDate><![CDATA[Thu, 8 May 2008 01:05:54]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ theo tui : mở đến file đó &gt; view &gt; choo detail... &gt;đánh dấu chọn data accseed.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129661</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129661</link>
				<pubDate><![CDATA[Thu, 8 May 2008 20:28:36]]> GMT</pubDate>
				<author><![CDATA[ tranduyninh]]></author>
			</item>
			<item>
				<title>[Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Trong tình huống nào đó, bạn cần biết ai là người cuối cùng tác động (truy cập, sửa, thay đổi permissions ...) đến một file.

Với cả 2 trường hợp:
+ Trước đó bạn chưa có "dự phòng" gì cả
+ Bạn đã monitoring rồi

Xin mời mọi người thảo luận để đưa ra những giải pháp.&nbsp;
		</blockquote>

Trong *nix có lệnh <b>ls</b> , trong đó ở cột thứ 6 hay thứ 7 gì đó có ghi rõ thời gian thay đổi cuối cùng . 

Good luck]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129664</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129664</link>
				<pubDate><![CDATA[Thu, 8 May 2008 21:31:27]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>[Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Lưu ý: 
+ thường chỉ nói tới các file cấu hình (Plain text)
+ bạn có quyền root

<p></p>
		<cite class="blockquote">tranduyninh wrote:</cite><br>
		<blockquote>theo tui : mở đến file đó &gt; view &gt; choo detail... &gt;đánh dấu chọn data accseed.&nbsp;
		</blockquote>
Chỗ nào vậy bạn? Cho cái screenshot.
<p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Trong tình huống nào đó, bạn cần biết <font color='orange'>ai</font> là người cuối cùng tác động (truy cập, sửa, thay đổi permissions ...) đến một file.

Với cả 2 trường hợp:
+ Trước đó bạn chưa có "dự phòng" gì cả
+ Bạn đã monitoring rồi

Xin mời mọi người thảo luận để đưa ra những giải pháp.&nbsp;
		</blockquote>

Trong *nix có lệnh <b>ls</b> , trong đó ở cột thứ 6 hay thứ 7 gì đó có ghi rõ <font color='orange'>thời gian</font> thay đổi cuối cùng . 

Good luck&nbsp;
		</blockquote>
<b>Ai</b> chứ không phải là <b>thời điểm</b> anh à.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129703</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129703</link>
				<pubDate><![CDATA[Fri, 9 May 2008 02:02:59]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>[Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Lưu ý: 
+ thường chỉ nói tới các file cấu hình (Plain text)
+ bạn có quyền root

<p></p>
		<cite class="blockquote">tranduyninh wrote:</cite><br>
		<blockquote>theo tui : mở đến file đó &gt; view &gt; choo detail... &gt;đánh dấu chọn data accseed.&nbsp;
		</blockquote>
Chỗ nào vậy bạn? Cho cái screenshot.
<p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Trong tình huống nào đó, bạn cần biết <font color='orange'>ai</font> là người cuối cùng tác động (truy cập, sửa, thay đổi permissions ...) đến một file.

Với cả 2 trường hợp:
+ Trước đó bạn chưa có "dự phòng" gì cả
+ Bạn đã monitoring rồi

Xin mời mọi người thảo luận để đưa ra những giải pháp.&nbsp;
		</blockquote>

Trong *nix có lệnh <b>ls</b> , trong đó ở cột thứ 6 hay thứ 7 gì đó có ghi rõ <font color='orange'>thời gian</font> thay đổi cuối cùng . 

Good luck&nbsp;
		</blockquote>
<b>Ai</b> chứ không phải là <b>thời điểm</b> anh à.&nbsp;
		</blockquote>

chắc ý anh ý là từ thời gian rồi phán đoán ra người đó anh, em nghĩ nếu không dự phòng trước thì chỉ có thông tin này làm căn cứ.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129739</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129739</link>
				<pubDate><![CDATA[Fri, 9 May 2008 10:12:03]]> GMT</pubDate>
				<author><![CDATA[ secmask]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Trên máy chủ anh dùng <b>Tripwire </b>để giám sát sự thay đổi trên hệ thống ví dụ như attacker xâm nhập thành công vào server mà anh đang nắm thì nhờ Tripwire anh có thể kiểm tra được attacker đang làm việc gì trên server của mình và theo anh biết nó là công  cụ good nhất để giải quyết bài toán của em . 

Good luck]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129760</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129760</link>
				<pubDate><![CDATA[Fri, 9 May 2008 11:40:49]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>[Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">secmask wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote>
Trong *nix có lệnh <b>ls</b> , trong đó ở cột thứ 6 hay thứ 7 gì đó có ghi rõ <font color='orange'>thời gian</font> thay đổi cuối cùng . 

Good luck&nbsp;
		</blockquote>
<b>Ai</b> chứ không phải là <b>thời điểm</b> anh à.&nbsp;
		</blockquote>

chắc ý anh ý là từ thời gian rồi phán đoán ra người đó anh, em nghĩ nếu không dự phòng trước thì chỉ có thông tin này làm căn cứ.&nbsp;
		</blockquote>
Còn <b>.bash_history</b> (nếu họ chưa xóa), còn <b>last</b> command mà em.

Giải pháp sơ bộ sẽ là:
+ Dùng <b>ls</b> xem thời điểm cuối cùng file đó bị thay đổi
+ Dùng <b>last</b> xem những ai logged in trong khoảng thời gian đó
+ View <b>.bash_history</b> của họ xem có "đụng chạm" gì đến file đó không. Có thể viết 1 đoạn script để làm việc này (nếu trong khoảng thời gian đó có quá nhiều người logged in):
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/bash
if &#91; $# -eq 0 &#93;
then
        echo 1&gt;&2 "Usage: $0 &lt;file_name&gt;"
        exit 127
else
        for USER in `ls /home`
        do
                if &#91; -f /home/$USER/.bash_history &#93;
                then
                        if &#91; `grep $1 /home/$USER/.bash_history | wc -l` != 0 &#93;
                        then
                                echo $USER:
                                grep $1 /home/$USER/.bash_history | sed -e "s/^/\t/"
                        fi
                fi
        done
fi</pre>
		</div>

Mời mọi người nghĩ tiếp những cách khác, để đem lại kết quả với độ chính xác cao nhất có thể.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129825</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129825</link>
				<pubDate><![CDATA[Fri, 9 May 2008 18:57:52]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Chà, chắc là quanta muốn đề cập đến computer forensic. Đề tài này rất thú vị nhưng tiếc quá mình không có thời gian ngâm nên vấn đề này chỉ biết ngồi ngó :D
Về các cách của quanta thì 2 trong số đó có thể bypass là last và .bash_history, ls thì hình như cũng có cách để bypass.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129828</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129828</link>
				<pubDate><![CDATA[Fri, 9 May 2008 19:07:46]]> GMT</pubDate>
				<author><![CDATA[ pnco]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ nếu là lQ thì sẽ không cấp tài khoản root cho bất kỳ ai. Thay vào đó, sử dụng sudo khi ai đó muốn edit các file config. Nếu làm vậy sẽ biết ai đã thực thi lệnh edit một file config nào đó dựa vào log của file auth.log. Nếu được thì đẩy logs tập trung về 01 server, tránh việc ai đó muốn xoá dấu vết.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#129920</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#129920</link>
				<pubDate><![CDATA[Sat, 10 May 2008 10:42:54]]> GMT</pubDate>
				<author><![CDATA[ lQ]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Em mới kiếm được 1 thằng <span class="link"> http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html</span>, đáp ứng khá ngon yêu cầu trong trường hợp 2 (tức có chuẩn bị) của anh quanta.

Trong bài giới thiệu <span class="link"> http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html</span> nó có ghi là:
<blockquote>Modern Linux kernel (2.6.x) comes with auditd daemon&nbsp;
		</blockquote>
Mà sao Slackware chả thấy có sẵn, phải cài thêm  :D.


Cài vô, cứ để con ma này chạy nền  :D. Thích nó ám file nào, làm phát:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>auditctl -w /etc/passwd -p war</pre>
		</div>
Khi nào muốn nhòm ngó thì làm phát:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ausearch -f /etc/passwd -i | less</pre>
		</div>
 -:-) 


PS: À, hình như đoạn mã của anh quanta chưa đụng đến cái ý thứ 2 "Dùng last xem những ai logged in trong khoảng thời gian đó" mà chỉ quét tất cả user có thư mục trong /home?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#130107</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#130107</link>
				<pubDate><![CDATA[Sun, 11 May 2008 19:50:55]]> GMT</pubDate>
				<author><![CDATA[ lihavim]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">lihavim wrote:</cite><br>
		<blockquote>Em mới kiếm được 1 thằng <span class="link"> http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html</span>, đáp ứng khá ngon yêu cầu của anh quanta.

Trong bài giới thiệu <span class="link"> http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html</span> nó có ghi là:
<blockquote>Modern Linux kernel (2.6.x) comes with auditd daemon&nbsp;
		</blockquote>
Mà sao Slackware chả thấy có sẵn, phải cài thêm  :D.


Cài vô, cứ để con ma này chạy nền  :D. Thích nó ám file nào, làm phát:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>auditctl -w /etc/passwd -p war</pre>
		</div>
Khi nào muốn nhòm ngó thì làm phát:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ausearch -f /etc/passwd -i | less</pre>
		</div>
 -:-) &nbsp;
		</blockquote>
Cảm ơn <b>lihavim</b>, kết hợp từ một tình huống gặp phải cộng với sau khi đọc bài viết đó, tớ mới lập cái topic này mà.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#130108</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#130108</link>
				<pubDate><![CDATA[Sun, 11 May 2008 19:57:43]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ Đọc bài này của anh quanta và link của lihavim em thử áp dụng với con Centos 4.4 của em
Cài đặt auditd daemon
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># yum install audit</pre>
		</div>

sau đó
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># chkconfig auditd on</pre>
		</div>
cho nó Auto start

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># /etc/init.d/auditd start</pre>
		</div>
 để start nó


sau đó muốn monitor file /etc/passwd thì

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># auditctl -w /etc/passwd -p war</pre>
		</div>
Hoàn toàn là bắt chước lihavim

nhưng ở <span class="link"> http://www.cyberciti.biz/tips/linux-audit-files-to-see-who-made-changes-to-a-file.html</span> có thêm option
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>-k password-file</pre>
		</div>
Giải thích
<i>-k password-file : Set a filter key on a /etc/passwd file (watch). The password-file is a filterkey (string of text that can be up to 31 bytes long). It can uniquely identify the audit records produced by the watch. You need to use password-file string or phrase while searching audit logs.
</i>
Thêm nữa, muốn monitor file /etc/shadow thì dùng
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># auditctl -w /etc/shadow -k shadow-file -p rwxa</pre>
		</div>
Ai giải thích hộ em cách dùng các  option <font color='red'>-k password-file</font> và <font color='red'>-k shadow-file</font> này, set filter key để làm gì? Chỉ dùng để search ...cho nhanh thôi à  :-/ . Và string này lấy đâu ra? hay chỉ cho đại một dòng gì đó vào, nhớ sau đó dùng string này để search log?
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#130123</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#130123</link>
				<pubDate><![CDATA[Sun, 11 May 2008 22:58:20]]> GMT</pubDate>
				<author><![CDATA[ mR.Bi]]></author>
			</item>
			<item>
				<title>Re: [Thảo luận] Ai là người cuối cùng tác động đến 1 file?</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mR.Bi wrote:</cite><br>
		<blockquote>
...
Ai giải thích hộ em cách dùng các  option <font color='red'>-k password-file</font> và <font color='red'>-k shadow-file</font> này, set filter key để làm gì? Chỉ dùng để search ...cho nhanh thôi à  :-/. Và string này lấy đâu ra? hay chỉ cho đại một dòng gì đó vào, nhớ sau đó dùng string này để search log?
&nbsp;
		</blockquote>
Bạn hoàn toàn có thể đọc <b>man</b> page:
<blockquote>
-k key: Set  a filter key on an audit rule. The filter key is an arbitrary string of text that can be up to 31 bytes long. It can uniquely identify the audit records produced by a rule. Typical  use  is  for when  you  have  several  rules  that together satisfy a security requirement. The key value can be searched on with ausearch so that no matter which rule  triggered  the  event,  you  can  find  its results.  The  key  can  also be used on delete all (-D) and list rules (-l) to select rules with a specific key. You may have more than one key on a rule if you want to  be  able  to  search  logged events in multiple ways or if you have an audispd plugin that uses a key to aid its analysis.
&nbsp;
		</blockquote>

Với ví dụ trên, bạn thử <b># ausearch -k shadow-file</b> xem sao.

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/21789.html#130124</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/21789.html#130124</link>
				<pubDate><![CDATA[Sun, 11 May 2008 23:29:25]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
	</channel>
</rss>
