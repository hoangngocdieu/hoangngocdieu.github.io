<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Flood Apache Webserver."]]></title>
		<link>/hvaonline/posts/list/8.html</link>
		<description><![CDATA[Latest messages posted in the topic "Flood Apache Webserver."]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Flood Apache Webserver.</title>
				<description><![CDATA[ Chào mọi người.

Mình có một vấn đề , mong mọi người bỏ chút thời gian ra đọc và giúp đỡ.

Mình có làm một server GameOnline MU nho nhỏ. Mình đã mở port 44405 cho GameConnectServer ( người chơi kết nối vào ) , port 55901 cho GameMainServer , port 80 cho Web.

Tất cả liên quan đến Game mình chạy trên 1 máy . Webserver trên 1 máy . 2 máy này đứng sau ISA 2006.

Về máy chạy GameServer : 
Cài Comodo Firewall Pro 3 , MSSQL 2000 SP 4 .
Chạy 7,8 cái program chạy server (ConnectServer,ExternalData,Data,JoinServer,GameServer,...) trong đó , mỗi khi bị flood thì Joinserver nhận được các lỗi sau :
<blockquote>1114a [dasxv] (222.253.205.187) User Login
RecvQ Count : 279
RecvQ Count : 278
RecvQ Count : 277
RecvQ Count : 276
RecvQ Count : 276
RecvQ Count : 275
1118a [flowea] (222.253.205.187) User Login
RecvQ Count : 278
RecvQ Count : 277
RecvQ Count : 276
RecvQ Count : 275
RecvQ Count : 274
RecvQ Count : 273
RecvQ Count : 272
RecvQ Count : 271
RecvQ Count : 270
1122a [contnue] (222.254.31.212) User Login&nbsp;
		</blockquote>

Những lúc bị như thế này thì cả hệ thống máy GameServer đều bị lag , hoạt động rất chậm , game gần như không hoạt động được nữa.Mình thử nghiên cứu thì nhận thấy mỗi khi RecvQ đang bị flood lên , mình tắt ngay Apache Service là hết bị .

Về máy chạy Apache Server : Chạy Apache bản mới nhất 2.2.8 port 47421 , PHP mới nhất , đã add 2 mod : mod_security và mod_evasive đều mới nhất , Login box bằng .htaccess

Về máy ISA: Chạy ISA 2006 , config đủ thứ : Chỉ mở 2 port 44405,55901 , không mở Outbound luôn. Publish web port 80 dẫn về port 47421 của máy chạy Apache Server. Config limit TCP , UDP , HTTP REQUEST per second.

Tất cả các máy đều chạy Windows Server 2003 SP 2 , đã được tắt NetBios service , disable port 137,138,139,445.

Với cách config trên của mình thì có thể xác định 100% là bị đánh vào qua Webserver. mình đã thử monitor các port 80 , 47421 , thậm chí là các port 44405 , 55901 nhưng vẫn không phát hiện được vấn đề. Chuyển qua HTTP policy của ISA . Mình thử disable hết các HTTP methods, chỉ dùng GET thôi thì vẫn bị , nhưng disable GET , mở các mothod còn lại thì không bị . Như vậy là bị GET. mình đã bị gần 3 tuần nay . Thử đủ phương pháp nhưng vẫn không phòng được . Cứ 7 8 giờ sáng là hắn thức , hắn phá cho đến tối khuya. Chỉ khi nào mình stop service Apache hoặc bỏ publish web hoặc disable method GET thì không bị . Nhưng những lúc đó thì web của mình cũng off luôn.  :-S Mong các bạn chỉ giúp cách nào có thể cải thiện được tình hình hiện tại.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112064</guid>
				<link>/hvaonline/posts/list/18838.html#112064</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 02:28:26]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Đoạn log ở trên của chương trình nào vậy?

Post lên một đoạn log của apache trong khi bị "nó" phá xem sao?

mod_security và mod_evasive có cài lên nhưng không chỉnh cụ thể để chống thì vô ích.
.htaccess có thể bị "by-pass" để flood một cách dễ dàng.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112075</guid>
				<link>/hvaonline/posts/list/18838.html#112075</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 05:50:30]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn đã giúp đỡ.

Đây là log của Game . Mỗi khi nó báo RecvQ là lúc đó đang bị flood.<span class="link"> http://stukyo.com/20080124.log</span>

Theo file log đó thì đầu giờ sáng ngày 24 là đang bị .

Đây là file access log của apache server ngày hôm đó :<span class="link"> http://stukyo.com/access.log</span>
Do mình chỉnh ISA nhầm nên log này chỉ nhận IP internal của ISA , không hiểu IP thật từ client . Mình sẽ sửa lại sau . Nếu được mình sẽ update lại log ngày 25 cho bạn xem.

Đây là report của ISA tạo ngày 24 :<span class="link"> http://stukyo.com/ISAreport.rar</span>

Đọc file log của apacheserver thì mình thấy đầu giờ sáng có những dòng này đáng nghi , không biết phải không :
192.168.1.10 - - [23/Jan/2008:23:59:15 +0700] "GET /home/ HTTP/1.1" 500 13019
192.168.1.10 - - [23/Jan/2008:23:59:23 +0700] "GET /home/ HTTP/1.1" 500 13019
192.168.1.10 - - [23/Jan/2008:23:59:25 +0700] "GET /home/ HTTP/1.1" 500 13019
192.168.1.10 - - [23/Jan/2008:23:59:26 +0700] "GET /home/ HTTP/1.1" 500 13019
192.168.1.10 - - [23/Jan/2008:23:59:27 +0700] "GET /home/ HTTP/1.1" 500 13019

Đối phương flood mình không dồn dập . Không phải là cả ngàn tin cùng lúc . Mình nghĩ vậy  . Modem không bị gì . Appserv không bị restart , không bị stop . Chỉ ảnh hưởng đến Game . Nếu ngưng flood thì mọi thứ sẽ trở lại bình thường. Có điều là lúc này các kết nối đến game đều đã bị ngắt hết rồi. Cụ thể là trong 1 giây , Game sẽ nhận được khoảng 5 cái RecvQ. Có lúc ít hơn nữa . nhưng càng ngày càng tăng , không giảm nên không chữa được luôn. Mong các bạn xem giúp.
Nếu bạn cần chi tiết cụ thể , mình sẽ monitor port 80 ở ngoài và port web của apache server cho các bạn xem. Xin cảm ơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112129</guid>
				<link>/hvaonline/posts/list/18838.html#112129</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 13:29:20]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Đây là conf của evasive : 
<blockquote>&lt;IfModule dosevasive22_module&gt;
DOSHashTableSize 3097
DOSPageCount 2
DOSSiteCount 10
DOSPageInterval 1
DOSSiteInterval 1
DOSBlockingPeriod 120
&lt;/IfModule&gt; &nbsp;
		</blockquote>

Đây là conf của security
<blockquote>SecRuleEngine On
SecFilter xp_enumdsn
SecFilter xp_filelist
SecFilter xp_availablemedia
SecFilter xp_cmdshell
SecFilter xp_regread
SecFilter xp_regwrite
SecFilter xp_regdeletekey 
SecFilterSelective "ARG_recipient" "!@modsecurity\.org$" 
SecFilterSelective "ARG_recipient" "!@modsecurity\.org$" 
SecFilterSelective OUTPUT "Volume Serial Number"
SecFilterSelective OUTPUT "Command completed"
SecFilterSelective OUTPUT "Bad command or filename"
SecFilterSelective OUTPUT "file(s) copied"
SecFilterSelective OUTPUT "Index of /cgi-bin/"
SecFilterSelective OUTPUT ".*uid\=\(" 
SecAuditLog logs/audit.log
SecFilterDebugLog logs/modsec.log
SecFilterDebugLevel 1
SecFilterScanPOST On  
SecFilter /etc/password
SecFilter /bin/ls 
SecFilter "\.\./" 
SecFilterForceByteRange 32 126 &nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112130</guid>
				<link>/hvaonline/posts/list/18838.html#112130</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 13:34:00]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình đã tắt hết Netbios của tất cả các máy Internal , Disable outbound hết nhưng vẫn bị . Change port của Webserver liên tục luôn rồi  :-( ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112131</guid>
				<link>/hvaonline/posts/list/18838.html#112131</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 13:35:24]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bó tay. Log toàn log IP  192.168.1.10 thì không cách gì phân tích nguồn nào là nguồn đáng ngờ (dựa trên biên độ thời gian). Apache log thì dùng dạng đơn giản nhất nên cũng không giúp được gì.

Cái này có lẽ không dính gì đến netBios đâu.

Log của game có thể cung cấp thông tin gì chi tiết hơn không?

Log của Apache nên đổi để cung cấp thêm thông tin.

1) Xác định log format chi tiết hơn:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>LogFormat "%h %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" combined
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" combined_forwarded</pre>
		</div>

2) Xác định biến nếu proxy được dùng:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>SetEnvIfNoCase X-Forwarded-For "." from_proxy=1</pre>
		</div>

3) Ấn định dạng log:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>CustomLog /path/to/access.log combined env=!from_proxy
CustomLog /path/to/access.log combined_forwarded env=from_proxy</pre>
		</div>


Sau đó restart lại apache và theo dõi rồi cung cấp log mới thì mới có thể phân tích được.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112178</guid>
				<link>/hvaonline/posts/list/18838.html#112178</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 17:24:25]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Rất cảm ơn bạn đã nhiệt tình giúp đỡ . Mình đã config lại ISA và đây là log apache chiều ngày 25/01 với IP cụ thể từ client. <span class="link"> http://stukyo.com/access.log</span>

Các thời điểm bị tấn công mà mình canh được:
5g45pm
5g48pm
6g02pm
6g08pm
6g23pm
6g28pm
6g53pm
6g54pm
6g56pm

Đây là thời điểm mà game báo là bị flood . Bạn có thể xem qua file này , đây là log của game . Những nơi nào có dòng RecvQ Count là vào thời điểm đó đang bị flood . <span class="link"> http://stukyo.com/20080125.log</span>

Tuy nhiên , mình nghĩ các packet flood mà game nhận phải được gửi vào apache trước đó vài chục giây hoặc 1 , 2 phút vì nếu mình STOP Service apache thì flood ngưng ngay , nhưng nếu stop publish web hoặc stop publish method GET thì phải đợi vài chục giây sau . Dường như là Game còn phải ... nhận cho hết các packet flood thì mới ngưng được.
Đây là file conf của apache server mình đã config lại theo ý bạn , không biết có sai sót gì không , mời bạn xem qua.
<span class="link"> http://stukyo.com/httpd.conf</span>

Chân thành cảm ơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112217</guid>
				<link>/hvaonline/posts/list/18838.html#112217</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 21:08:01]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình xin bổ sung thêm log file apache mới . Vừa bị flood thêm nữa vào lúc 8g00 PM và 8g08PM <span class="link"> http://stukyo.com/newaccess.log</span>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112228</guid>
				<link>/hvaonline/posts/list/18838.html#112228</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 22:26:49]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình đã xem log nhưng không phát hiện được điểm nào đáng ngờ . Mong các bạn chỉ giúp.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112231</guid>
				<link>/hvaonline/posts/list/18838.html#112231</link>
				<pubDate><![CDATA[Fri, 25 Jan 2008 22:41:50]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mod comale ơi , giúp mình với. Mình F5 sau mỗi 2 3 phút từ trưa giờ rồi :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112256</guid>
				<link>/hvaonline/posts/list/18838.html#112256</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 01:29:16]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ anh post dùm em lên những rule đã set cho con ISA đc ko?
có khi nào anh nghĩ do hiệu năng của server quá kém, khi nhận được request quá nhiều thì sụm ko?

Đoán mò, đọc log mù cả mắt!]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112263</guid>
				<link>/hvaonline/posts/list/18838.html#112263</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 02:46:26]]> GMT</pubDate>
				<author><![CDATA[ mR.Bi]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ HIc . Mình dùng line VNN 4MB. Cấu hình máy mạnh lắm . Xeon 2g4 . Ram 4g . Hdd 200gb . lúc bị flood , CPU và RAM không hề bị quá tải . Chỉ có apache server thôi .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112267</guid>
				<link>/hvaonline/posts/list/18838.html#112267</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 04:03:32]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Thời gian hiển thị trên log của Apache không tương ứng với thời gian trên log của game. Ngay cả mở rộng mốc thời gian  theo giờ và phút (thay vì đi cụ thể đến giây) vẫn không thể tìm ra được mốc tương ứng giữa 2 log files.

Băng thông 4Mbit mà host game + web thì quá ít. Ai đó chỉ cần flood trơn (có nghĩa là chọn vài URL nào đó ít khả nghi trên site của bồ để flood) thì đường băng thông sẽ tràn ngay.

Bồ PM cho tôi cái URL của site bồ để tôi vào thu thập các URL hợp lệ rồi mới dùng chúng để so sánh với cái apache log của bồ thì may ra mới tìm được điểm khác biệt.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112269</guid>
				<link>/hvaonline/posts/list/18838.html#112269</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 08:05:01]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn comale đã trả lời. Do khi bị flood , mình thấy nó flood lên cao quá nên có tắt publish để ngắt đi . Nhiều khi do đó nên apache không lưu log hoặc gì đó khiến bạn không thể phân tích . Mình đã gửi lại cho bạn 1 file access.log và log của game mới vào sáng ngày 26 . Ngủ trưa mới dậy thì thấy nó flood ngút trời từ lúc 8g50 đến 9g10 và 10g50 đến 11g10 . Thời gian dài như thế này hi vọng bạn có thể xem được . Bạn chú ý giùm mình điểm này : Khi bị flood : Gameserver sẽ báo RecvQ Count tăng lên từ từ . Tăng đến một mức nào đó tùy theo flooder thì sẽ được nhả ra hết. Lúc này thì mới được lưu vào log . Ví dụ lần flood thứ 2 , xem log thì thấy là từ lúc 10g50 nhưng trên thật tế thì có lẽ đã nhận được từ trước đó :|]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112311</guid>
				<link>/hvaonline/posts/list/18838.html#112311</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 13:37:03]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Trên site của bạn, có module nào là <font color='red'>user</font> không? Ví dụ, request đi đến: <b>/home/main.php?op=<font color='red'>user</font></b>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112320</guid>
				<link>/hvaonline/posts/list/18838.html#112320</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 14:32:40]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Dùng một công cụ để lọc ra hết các request đi từ IP: <b>203.210.251.123</b> rồi xem kỹ thì sẽ thấy các điểm đáng ngờ.

Tôi không thể login bằng username + pass bạn gởi nên không thể xác định các modules được dùng sâu hơn.

PS: bây giờ đi nhậu một phát cái đã. Có thể ngày mai online lại.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112327</guid>
				<link>/hvaonline/posts/list/18838.html#112327</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 14:55:00]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Có main.php?op=user . Đây là module mà người chơi đăng nhập vào web để quản lý tài khoản của mình . Game của mình là MU , có reset nhân vật sau mỗi lần luyện nên một tiếng có vài chục người truy cập vào để reset nhân vậtt. Nói thế chứ bạn đừng nghĩ là do vậy nên mình tưởng là flood vì trước đây người chơi đông gấp 2 lần giờ luôn . Không bị gì . Giờ vắng lắm mà bị . Vì bữa mình có khóa acc của vài người cheat . Họ nói họ sẽ báo thù , hãy canh chừng hacker :(.

Hiện tại nó đang flood nên đành phải stop publish web , đợi một tí mới mở lại xem xem hết chưa . Chưa hết lại phải off tiếp :(.
Hôm nay mình nhận thấy thêm một thông tin : Nếu mình stop service của apache thì game hết báo recvQ ngay nhưng sau khi start lại service thì sẽ tiếp tục báo recvQ lại khoảng vài chục cái . Đây có lẽ là " tàn dư" . Mình nghĩ cho dù stop service , tín hiệu flood vẫn còn nằm trong apache server , start service lên , nó chạy vào lại game vài chục cái rồi mới xong.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112328</guid>
				<link>/hvaonline/posts/list/18838.html#112328</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 15:00:07]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Dùng một công cụ để lọc ra hết các request đi từ IP: <b>203.210.251.123</b> rồi xem kỹ thì sẽ thấy các điểm đáng ngờ.

Tôi không thể login bằng username + pass bạn gởi nên không thể xác định các modules được dùng sâu hơn.

PS: bây giờ đi nhậu một phát cái đã. Có thể ngày mai online lại.&nbsp;
		</blockquote>

Ọc . Mình vào được mà . Bạn mở my computer ra ,gõ vào ftp.servage.net . Full là<span class="link"> ftp://ftp.servage.net/</span> chứ không phải<span class="link"> ftp://servage.net/</span> nhé :| Bạn ráng giúp mình nhé . Mình cầu cứu nhiều lắm rồi mà không được . Bản thân mình từ lúc bị flood đến nay đã nghiên cứu nhiều lắm , cài mấy mod cho apache ,firewall, .htaccesss , isa , ... nhưng vẫn chịu thua .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112329</guid>
				<link>/hvaonline/posts/list/18838.html#112329</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 15:03:43]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình có gửi lên đây file mà ISA monitor được ngay vào thời điểm bị flood . Mình monitor port 80 ( web out ) và 15212 ( web in ) . http://stukyo.com/isamonitor.xls
Các IP trong file log :
IP 192.168.1.10 : card mạng Internal của máy ISA
IP 192.168.1.9 : card mạng External của máy ISA
IP 192.168.1.3 : IP máy chạy WebServer
IP 192.168.1.11 : Client internal]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112348</guid>
				<link>/hvaonline/posts/list/18838.html#112348</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 16:08:20]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Theo như anh nói thì em nghĩ vấn đề ở đây là Apache. "Thử" tập trung vào config của apache nhé. Vì như những thông tin anh đưa lên, theo kiến thức kém cỏi của em thì ko tìm ra điểm đáng ngờ ở đâu cả, ngay cả đoạn log ISA anh vừa post lên.

Lần trước em hỏi anh post rule của ISA lên anh ko post (chắc vì lí do gì đấy)
Lần này anh thử post conf của Apache lên được ko? Cái này có cũng chả đụng chạm gì tới server của anh được, nên anh ko cần lo lắng :)

Thử dùng một monitor tool kiểm tra các IP send request liên tục đến server (nằm trong log), chỉ kiểm tra riêng các request đến từ các IP này, như anh conmale nói, xem có điều gì đáng ngờ ko? Hoặc post lên đây cùng nghiên cứu.


]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112446</guid>
				<link>/hvaonline/posts/list/18838.html#112446</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 02:42:18]]> GMT</pubDate>
				<author><![CDATA[ mR.Bi]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn mR.Bi . Đang là 12:49 AM . Đợi comale giúp thì có mR.Bi trả lời . Vui quá . Mình thử phân tích log apache server và log ISA nhưng không tìm được đầu mối :( . Thật ra mình đâu có gì đâu mà giấu . File conf của Apache mình đã post từ bài trên rồi http://stukyo.com/httpd.conf.
Có cả conf mod security và evasive ở trên luôn . Còn rule của ISA thì như mình đã nói , mình chỉ mở publish web 80 , đưa về port đúng port apache server cho máy webserver, publish thêm 44405 , 55901 cho game . Outbound cho 2 máy internal ra ngoài ( máy mình xài để chat chiếc , mở web chơi , không đụng gì đến server web và game cả ) . Chứ post rule thì mình cũng không biết phải post thế nào , chụp màn hình Configuration firewall của ISA thì đâu thấy được cụ thể các protocol bên trong :|. Nhưng mình nghĩ ISA đã OK . Vấn đề ở đây là apache của mình thôi . Mình thử dùng chức năng HTTP FILTER của ISA nhưng không được . Đến cả nguyên cái web của mình đã đổi thành web khác , người khác viết , xóa hết , thay nguyên cái web mới vào cũng bị tiếp . Mình mới bước chân vào lĩnh vực này nên chưa có kinh nghiệm nhiều , chưa biết nhiều tools. Bạn có thể nói cụ thể tools nào ,tên gì , dùng để làm gì để mình tìm được không. Còn log hay mọi thông tin bạn cần mình đều có thể cung cấp được . Ngay cả việc remote server mình để xem = remote administrator . Hoặc đến nhà mình giúp . Xin hậu tạ luôn. Mình ở TPHCM . Q Tân Bình . Bị 3 tuần nay . Khổ sổ lắm rồi . Huhu . cảm ơn bạn mR.Bi đã giúp .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112450</guid>
				<link>/hvaonline/posts/list/18838.html#112450</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 03:00:21]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình tính dùng cái này apply vào web :http://www.white-hat-web-design.co.uk/articles/php-captcha.php . Mọi người cho ý kiến thử xem ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112465</guid>
				<link>/hvaonline/posts/list/18838.html#112465</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 05:29:43]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Mình tính dùng cái này apply vào web :http://www.white-hat-web-design.co.uk/articles/php-captcha.php . Mọi người cho ý kiến thử xem &nbsp;
		</blockquote>

Captchar cho mọi trang?

Xem logs của bồ, nếu module "user" có và hợp lệ thì không thấy có dấu hiệu gì đáng cho là bị flood cả.

Bồ cho biết apache của bồ có giá trị <b>MaxClients</b>, <b>MaxRequestsPerChild</b>, <b>MaxKeepAliveRequests</b> và <b>KeepAliveTimeout</b> là bao nhiêu?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112474</guid>
				<link>/hvaonline/posts/list/18838.html#112474</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 09:30:13]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Như mình đã đưa http://stukyo.com/httpd.conf lên , mình chưa config các thông số như bạn nói . Chỉ có MaxRequestsPerChild  0 là default. Mình có thể tìm kiếm và thêm các thông số đó vào được . Nhưng không biết thông số nào là phù hợp . Bạn có thể cho mình biết với tình trạng server của mình thì nên dùng thông số là bao nhiêu không ? Như mình đã nói , mình bị flood rất nhẹ , rất đều đều. Mình sẽ dùng chương trình quay phim lại cho bạn xem nhé .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112480</guid>
				<link>/hvaonline/posts/list/18838.html#112480</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 10:43:08]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ http://stukyo.com/b.swf

Đây là flash video ghi lại quá trình bị flood.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112490</guid>
				<link>/hvaonline/posts/list/18838.html#112490</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 11:20:19]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Qua các dữ liệu bồ cung cấp, tôi thấy có 2 việc:

1) Băng thông quá ít.
2) Apache config không đầy đủ.

Chớ chẳng có ai flood bồ cả. Phân tích xuyên qua mấy cái apache logs của bồ, tôi không thấy có một pattern nào chứng tỏ bạn bị flood. Về việc cấu hình apache 2.2, nên tham khảo tài liệu chính thức trên http://httpd.apache.org, cấu hình httpd.conf của bạn quá đơn giản và không đầy đủ.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112515</guid>
				<link>/hvaonline/posts/list/18838.html#112515</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 14:30:28]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Vâng . Đúng là em config Apache không đầy đủ thật . Em đã nghiên cứu và config các giá trị MaxClients, MaxRequestsPerChild, MaxKeepAliveRequests và KeepAliveTimeout lại rồi nhưng vẫn bị . Nhưng việc em bị flood thì hoàn toàn là sự thật vì trước giờ không bị gì , gần đây bị ghét nên vậy . Và ban đêm hoặc ngay cả các giờ cao điểm , các giờ mà số lượng người truy cập vào đông cũng không bị tình trạng vậy . Nó xảy ra rất là ngẫu nhiên, vào các thời điểm không cố định , chứ không phải bị theo số người truy cập . Băng thông của em ít thật nhưng với lượng người truy cập chỉ là vài chục thì có đến tình trạng đó không. Em tìm đến HVA nhờ giúp đỡ cũng vì em bế tắc rồi . Anh nói vậy thì em đành chịu . Thôi thì cảm ơn anh đã nhiệt tình giúp đỡ em trong các bài vừa rồi . Chúc anh vui vẻ .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112519</guid>
				<link>/hvaonline/posts/list/18838.html#112519</link>
				<pubDate><![CDATA[Sun, 27 Jan 2008 15:18:06]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Vâng . Đúng là em config Apache không đầy đủ thật . Em đã nghiên cứu và config các giá trị MaxClients, MaxRequestsPerChild, MaxKeepAliveRequests và KeepAliveTimeout lại rồi nhưng vẫn bị . Nhưng việc em bị flood thì hoàn toàn là sự thật vì trước giờ không bị gì , gần đây bị ghét nên vậy . Và ban đêm hoặc ngay cả các giờ cao điểm , các giờ mà số lượng người truy cập vào đông cũng không bị tình trạng vậy . Nó xảy ra rất là ngẫu nhiên, vào các thời điểm không cố định , chứ không phải bị theo số người truy cập . Băng thông của em ít thật nhưng với lượng người truy cập chỉ là vài chục thì có đến tình trạng đó không. Em tìm đến HVA nhờ giúp đỡ cũng vì em bế tắc rồi . Anh nói vậy thì em đành chịu . Thôi thì cảm ơn anh đã nhiệt tình giúp đỡ em trong các bài vừa rồi . Chúc anh vui vẻ .&nbsp;
		</blockquote>

Đoạn cuối của httpd.conf của bồ có đoạn:

<blockquote># Server-pool management (MPM specific)
#<font color='red'>Include conf/extra/httpd-mpm.conf</font>

# Multi-language error messages
#Include conf/extra/httpd-multilang-errordoc.conf

# Fancy directory listings
#Include conf/extra/httpd-autoindex.conf

# Language settings
#Include conf/extra/httpd-languages.conf

# User home directories
#Include conf/extra/httpd-userdir.conf

# Real-time info on requests and configuration
#Include conf/extra/httpd-info.conf

# Virtual hosts
#<font color='red'>Include conf/extra/httpd-vhosts.conf</font>

# Local access to the Apache HTTP Server Manual
#Include conf/extra/httpd-manual.conf

# Distributed authoring and versioning (WebDAV)
#Include conf/extra/httpd-dav.conf

# Various default settings
#<font color='red'>Include conf/extra/httpd-default.conf</font>&nbsp;
		</blockquote>

Bồ nên nghiên cứu config file của các phần màu đỏ mà tôi đã đánh dấu. Hiện nay chúng đều bị "hash out" (vô hiệu hóa). Bạn nên xem chúng và điều chỉnh và sử dụng cho đúng.

Hiện tượng này càng ngẫu nhiên càng giải thích tình trạng config của apache không đúng, thiếu sót.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112610</guid>
				<link>/hvaonline/posts/list/18838.html#112610</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 07:40:17]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn đã chú ý . Mình đang tìm kiếm . ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112625</guid>
				<link>/hvaonline/posts/list/18838.html#112625</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 11:27:18]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bro sử dụng bộ XAMPP cho server của bro . Nếu sử dụng 1.6.4 thì upgrade lên 1.6.5 

Nếu server Linux thì chắc có nhiều cuộc thảo luận thú vị nhưng ở đây là server Windows thì tôi dám bàn tiếp, chỉ có cách điều chỉnh Apache, Mysql như anh conmale nói ở trên . 

Còn tôi không tin tưởng bất cứ phần mềm "firewall" nào trên Windows :) ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112650</guid>
				<link>/hvaonline/posts/list/18838.html#112650</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 13:19:16]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn đã góp ý . Mình cũng nghe nói là Linux bảo mật tốt hơn nhưng mình không biết dùng Linux và các chương trình của mình dùng để chạy server game không hỗ trợ Linux :(.

Các bạn cho mình hỏi . Mình có đọc nhiều tài liệu . Nhưng không hiểu tại sao mình phải config virtual hosts. Mình đâu có nhu cầu dùng nhiều domain , nhiều host đâu.

Còn về mpm cho apache . Mình có đọc và hiểu các thông số . Nhưng mình không tìm thấy nơi nào dùng để set cấu hình mpm. Mình thấy " Use "apachectl -l" to find out the active mpm". Nhưng trong bin lại không có apachectl . Mình chưa biết nên nhờ các bạn chỉ giúp . Cảm ơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112668</guid>
				<link>/hvaonline/posts/list/18838.html#112668</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 15:01:20]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Timeout 30
KeepAlive On
MaxKeepAliveRequests 5
KeepAliveTimeout 15

Hiện tại mình đã config httpd-default như vậy. Load web có hơi lâu thật nhưng cũng đỡ vì bình thường nó flood lên đến ... vài ngàn recvq . nay chỉ vài chục là tự ngắt .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112669</guid>
				<link>/hvaonline/posts/list/18838.html#112669</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 15:08:47]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Cảm ơn bạn đã góp ý . Mình cũng nghe nói là Linux bảo mật tốt hơn nhưng mình không biết dùng Linux và các chương trình của mình dùng để chạy server game không hỗ trợ Linux :(.

Các bạn cho mình hỏi . Mình có đọc nhiều tài liệu . Nhưng không hiểu tại sao mình phải config virtual hosts. Mình đâu có nhu cầu dùng nhiều domain , nhiều host đâu.

Còn về mpm cho apache . Mình có đọc và hiểu các thông số . Nhưng mình không tìm thấy nơi nào dùng để set cấu hình mpm. Mình thấy " Use "apachectl -l" to find out the active mpm". Nhưng trong bin lại không có apachectl . Mình chưa biết nên nhờ các bạn chỉ giúp . Cảm ơn.&nbsp;
		</blockquote>

Trên các phiên bản Apache 2.x hỗ trợ multi-processing module thay vì prefork như Apache 1.x
Cách dùng, so sánh nó ra vào xin mời đọc cuốn <span class="link"> /book/</span> trong thư viện HVA

Hèm, nên nhớ server của bro đang dùng là server Windows chứ không phải server Linux
<blockquote>C:\&gt; cd \xampp\apache\bin
C:\&gt; httpd.exe -l&nbsp;
		</blockquote>

Trong đây chứa danh sách các module được cài đặt cho Apache của bro . 

Nếu muốn cấu hình MPM trên WinNT thì trong http-mpm.conf
<blockquote># WinNT MPM
# ThreadsPerChild: constant number of worker threads in the server process
# MaxRequestsPerChild: maximum  number of requests a server process serves
&lt;IfModule mpm_winnt_module&gt;
    ThreadsPerChild     250
    MaxRequestsPerChild   0
&lt;/IfModule&gt;&nbsp;
		</blockquote>

Nếu muốn "bật" tập tin http-mpm.conf thì đảm bảo tập tin cấu hình Apache của bro có thêm dòng 
<blockquote># Server-pool management (MPM specific)
Include conf/extra/httpd-mpm.conf &nbsp;
		</blockquote>

Bỏ dấu # ở đằng trước kế chữ Include , các mục sau cũng làm tương tự . 

<p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Timeout 30
KeepAlive On
MaxKeepAliveRequests 5
KeepAliveTimeout 15

Hiện tại mình đã config httpd-default như vậy. Load web có hơi lâu thật nhưng cũng đỡ vì bình thường nó flood lên đến ... vài ngàn recvq . nay chỉ vài chục là tự ngắt .&nbsp;
		</blockquote>

Bro nên đọc cuốn sách mà tôi giới thiệu ở trên và giải thích từng tham số của các tập tin được lưu trữ trong thư mục conf , extra của Apache . 

Nhìn đoạn log của bro đưa ra, tôi chỉ nhìn thấy mấy cú GET hợp lệ chứ chẳng thấy "triệu chứng" server của bro bị người ta phá . 
- Có khả năng server của bro cấu hình kém chẳng hạn dẫn đến tình trạng crash MSSQL .
- Băng thông 4M cũng là vấn đề lớn, với đường truyền ở VN hiện nay ví dụ ở nhà cung cấp từ VNPT thiết lập cho bro với gói 4M ở đầu DSLAM tuy nhiên khi lên đến BRAS bị "bóp" một chút thì gói cước của bro sẽ thay đổi rõ rệt, nếu làm server game nhỏ thì theo tôi nên thuê luôn gói cước Megawan có tốc độ upload, download không đổi thì tốt hơn .

Trên đây chỉ là ở vấn đề suy đoán, còn nếu muốn kiểm tra nó thì cần có thời gian để điều tra, phân tích, xác minh sự cố thì mới biết được server của bro hiện nay bị lỗi là do đâu.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112686</guid>
				<link>/hvaonline/posts/list/18838.html#112686</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 16:58:35]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn đã chỉ dẫn . Về vấn đề có bị phá hay không thì mình là người hiểu rõ nhất . Mình chạy server này , game này , web này đã 2 năm rồi . Rất ổn định . Chỉ có gần đây mình block mấy cheater . Rồi bắt đầu bị tình trạng này . ISA thỉnh thoảng vẫn báo deny các truy cập , các port ko hợp lệ . Google các port này thì toàn là thông tin về ddos . Đã thế vừa bị được 2 ngày là đã nhận được email " Sao rồi hả bạn , mấy hôm nay thích không ? " Đau đầu là xem log apache , log isa cũng không biết request nào gây như vậy. Chỉ biết là tắt apache sv thì nó ngắt ngay, không làm gì được nữa. Mình biết là flood không nhiều , ít , nhưng những packet đó có tác dụng rất mạnh đến gameserver nên cũng ráng tìm , đọc kĩ các dòng mà vẫn không thấy . Mình nghĩ nếu bị mạnh thì apache service bị stop /restart hay modem tắt luôn ( cái này mình nghe nói ). Mình đang download ebook bạn chỉ . Hi vọng sẽ biết được nhiều điều .Rất cảm ơn!]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112724</guid>
				<link>/hvaonline/posts/list/18838.html#112724</link>
				<pubDate><![CDATA[Mon, 28 Jan 2008 23:12:59]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Mình có google và thấy "The Worker MPM is a Multiprocessing Model for the Linux/Unix Operating System Platform." Thế có nghĩa là Windows không dùng được PMP này à ? Mình thấy bên PMP Worker có các thông số MaxClient,Min-MaxSpareThread mà PMP WINNT không có .Thử đem các thông số của PMP worker đưa vào PMP Winnt thì không được . Còn cuốn sách Hungry Mind - Apache Server 2 Bible bạn chỉ thì mình download đến 79% thì đứng . 3 tiếng rồi , không resume , redownload cũng không được . Google sách đó thì toàn là sách bán :D. Bạn xem lại link giúp mình nhé .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112750</guid>
				<link>/hvaonline/posts/list/18838.html#112750</link>
				<pubDate><![CDATA[Tue, 29 Jan 2008 02:28:19]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Cảm ơn bạn đã chỉ dẫn . Về vấn đề có bị phá hay không thì mình là người hiểu rõ nhất . Mình chạy server này , game này , web này đã 2 năm rồi . Rất ổn định . Chỉ có gần đây mình block mấy cheater . Rồi bắt đầu bị tình trạng này . ISA thỉnh thoảng vẫn báo deny các truy cập , các port ko hợp lệ . Google các port này thì toàn là thông tin về ddos . Đã thế vừa bị được 2 ngày là đã nhận được email " Sao rồi hả bạn , mấy hôm nay thích không ? " Đau đầu là xem log apache , log isa cũng không biết request nào gây như vậy. Chỉ biết là tắt apache sv thì nó ngắt ngay, không làm gì được nữa. Mình biết là flood không nhiều , ít , nhưng những packet đó có tác dụng rất mạnh đến gameserver nên cũng ráng tìm , đọc kĩ các dòng mà vẫn không thấy . Mình nghĩ nếu bị mạnh thì apache service bị stop /restart hay modem tắt luôn ( cái này mình nghe nói ). Mình đang download ebook bạn chỉ . Hi vọng sẽ biết được nhiều điều .Rất cảm ơn!&nbsp;
		</blockquote>

Web site của bồ chỉ cần chọn 1 chục URL hoàn toàn hợp lệ (tồn tại và hợp lệ) và vài người thay phiên nhau flood cũng đủ chết. Bởi vì những request này hợp lệ và không bị dồn dập nên không thể nhận diện được từ log.

Website nào hiện diện trên mạng và có firewall thì 99.99% sẽ nhận được các thông báo "deny truy cập", "port không hợp lệ".... Đây là chuyện hoàn toàn bình thường. Riêng việc bồ nhận được e-mail khiêu khích thì có vẻ bồ bị "chơi" thật. Khổ một nỗi, trọn bộ các log files bồ cung cấp không có gì chứng tỏ bồ bị flood cả. Bởi thế, không có cách gì giúp bồ khắc phục được.

Riêng phần apache thì như tôi đã nói ở trên, Apache của bồ thiếu nhiều thứ quan trọng nên nó hoàn toàn chạy ở chế độ mặc định. Nếu bị flood 1 tí sẽ bị nghẽn ngay. Tôi không đưa ra cấu hình cụ thể cho apache của bồ vì tôi không biết site của bồ ra sao (và đây là trách nhiệm của bồ - người làm chủ website). Theo kinh nghiệm bản thân, tôi cho rằng apache chạy trên Windows chỉ đạt tối đa 1/2 hiệu suất so sánh với apache chạy trên *nix (Linux nói riêng). Apache chạy trên Windows chỉ có thể dùng Prefork MPM mà thôi. Bởi vậy, nên tham khảo sâu khoản này.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112768</guid>
				<link>/hvaonline/posts/list/18838.html#112768</link>
				<pubDate><![CDATA[Tue, 29 Jan 2008 05:51:12]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ có thể log apache không thể log được khi bị dạng giống flash DoS, nên tìm trong apache log sẽ không ra, ngoại trừ dùng ct dạng sniffit]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112820</guid>
				<link>/hvaonline/posts/list/18838.html#112820</link>
				<pubDate><![CDATA[Tue, 29 Jan 2008 13:19:41]]> GMT</pubDate>
				<author><![CDATA[ JAL]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote> Apache chạy trên Windows chỉ có thể dùng Prefork MPM mà thôi. Bởi vậy, nên tham khảo sâu khoản này.&nbsp;
		</blockquote>

Cám ơn anh conmale chỉ rõ điểm sai của em ở chổ này  :) ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#112864</guid>
				<link>/hvaonline/posts/list/18838.html#112864</link>
				<pubDate><![CDATA[Tue, 29 Jan 2008 18:58:08]]> GMT</pubDate>
				<author><![CDATA[ subnetwork]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ bắt đầu nhảy sang *nix rồi, Windows coi bộ lép về quá. 
Lúc Reply bài của anh xong thì em làm một giấc ngay, sáng lại phải đi xa, h vào lại thì ngập tràn kiến thức, ko đủ level để bàn :D.
Nếu còn ở sg thì chắc qua nghía con server của anh phát, h đi xa rồi, tiếc thật.

**Anh nghiên cứu kĩ các module của apache, config lại một lần nữa thử xem, ko ai đảm bảo mình config apache ko sai sót. Chỉ nói tới đây thôi]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113233</guid>
				<link>/hvaonline/posts/list/18838.html#113233</link>
				<pubDate><![CDATA[Thu, 31 Jan 2008 23:48:33]]> GMT</pubDate>
				<author><![CDATA[ mR.Bi]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Mấy hôm nay không vào được HVA . Không hiểu sao . Cứ tưởng bị gì rồi. Cảm ơn các bạn đã giúp đỡ. Hiện tại mình đã config lại các module , đọc các tài liệu . Nhưng vẫn chưa khắc phục được. Đang dùng 2 đường truyền rồi . Tách riêng cái webserver ra , cho chạy đường truyền riêng . Cứ tưởng vậy thì có sập cũng sập webserver , không ảnh hưởng đến game . Ai ngờ đâu không biết bằng cách nào nó vẫn đánh được . 

Cơ bản là mình tổ chức như vầy :

Máy Webserver 192.168.1.13 nằm trong internal không đi qua ISA , default gateway dẫn ra modem A .
Máy Gameserver 192.168.1.3 nằm trong internal đi qua ISA , ISA đi ra modem B.

DNS Web dẫn về máy Webserver 192.168.1.13, tại đây , máy này chỉ nằm chung switch với máy Gameserver 192.168.1.3, không liên kết gì nữa cả . Chỉ có connect đến mssql của máyGameserver 192.168.1.3 thôi. Ấy thế mà gameserver vẫn bị flood.

Mình nghĩ log Apache khi bị flood không lưu lại log được. Mình thử cho tấn công bên ngoài . 5 IP khác nhau đánh thử bằng DDOS share.swf thì log apache lưu lại ok , và vẫn ok , gameserver vẫn không ảnh hưởng như vậy.
Vấn đề thật đau đầu , mình thử limit lại các giá trị Timeout ,MaxKeepAliveRequests ,KeepAliveTimeout ,    ThreadsPerChild ,   MaxRequestsPerChild  . Để thấp quá thì apache báo lỗi , mọi người không vào web được nữa nhưng vẫn bị flood ào ào chứ không bị ngắt . Còn để 0 thả cửa thì bị flood hàng giờ luôn .

Mình có dùng thử soft Attacker 3.0 của www.foundstone.com để sniff lại . Nhưng không hiểu sao cứ sniff là bên ngoài ko kết nối đc , cứ như apache service không hoạt động vậy á. Không biết còn soft nào theo dõi trực tiếp như vậy không nữa . 
Cho mình hỏi thêm là có cách nào , mod nào giúp apache khi có quá nhiều truy cập đến như lúc bị flood vậy á, mọi người ko vào được , thì tự động stop , restart lại service không .

Hi . Mình hỏi hơi nhiều . Các bạn giúp mình nhé . Đau đầu vụ này lắm rồi.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113340</guid>
				<link>/hvaonline/posts/list/18838.html#113340</link>
				<pubDate><![CDATA[Fri, 1 Feb 2008 23:58:31]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Dùng Ethereal để sniff ngay trên server chạy apache. Chỉ sniff packets đến cổng nào chạy apache mà thôi. Sau đó post lên ở đâu đó để tôi xem thử. Tôi nhắc lại một lần nữa, apache log của bồ không có biểu hiện nào chứng tỏ bị DDoS cả.

Sẵn tiện, post lên tất cả các config của apache mà bồ dùng để tôi góp ý cho.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113358</guid>
				<link>/hvaonline/posts/list/18838.html#113358</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 11:26:25]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Vâng . Đây là các thông số của mình . Mời bạn xem qua .
#File httpd.conf
#Server Root mình đặt tên vậy thôi chứ không dùng xampp, mình dùng 2.2.8 mới nhất từ apachelounge và php mới nhất từ php.net
ServerRoot "c:/xampp"
Listen 80

LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule env_module modules/mod_env.so
LoadModule include_module modules/mod_include.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule php5_module "c:/xampp/php/php5apache2_2.dll"
LoadModule security2_module modules/mod_security2/mod_security2.so
LoadModule unique_id_module modules/mod_unique_id.so

&lt;IfModule !mpm_netware_module&gt;
&lt;IfModule !mpm_winnt_module&gt;

User daemon
Group daemon

&lt;/IfModule&gt;
&lt;/IfModule&gt;

ServerAdmin admin@trianglemu.com
ServerName ta3.myvnc.com:80
DocumentRoot "c:/Xampp/htdocs"

&lt;Directory /&gt;
    Options None
    AllowOverride None
    Order deny,allow
    Deny from all
&lt;/Directory&gt;

&lt;Directory "c:/Xampp/htdocs"&gt;
    Options None
    AllowOverride all
    Order allow,deny
    Allow from all
&lt;/Directory&gt;

&lt;IfModule dir_module&gt;
    DirectoryIndex index.php index.php3 index.html index.htm index.html.var
&lt;/IfModule&gt;

&lt;FilesMatch "^\.ht"&gt;
    Order allow,deny
    Deny from all
    Satisfy All
&lt;/FilesMatch&gt;

ErrorLog "logs/error.log"
LogLevel warn
SetEnvIfNoCase X-Forwarded-For "." from_proxy=1
&lt;IfModule log_config_module&gt;
    LogFormat "%h %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" combined
    LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" combined_forwarded
    LogFormat "%h %l %u %t \"%r\" %&gt;s %b" common
    &lt;IfModule logio_module&gt;
      LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    &lt;/IfModule&gt;

    CustomLog logs/access.log common
    CustomLog logs/access.log combined env=!from_proxy
    CustomLog logs/access.log combined_forwarded env=from_proxy
&lt;/IfModule&gt;

&lt;Directory "c:/Apache2/cgi-bin"&gt;
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
&lt;/Directory&gt;

DefaultType text/plain

&lt;IfModule mime_module&gt;
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType application/x-httpd-php .php
    AddType application/x-httpd-php .php3
&lt;/IfModule&gt;

EnableMMAP off
EnableSendfile off
Win32DisableAcceptEx
Include conf/extra/httpd-mpm.conf
Include conf/extra/httpd-default.conf


#Cấu hình cho httpd-mpm.conf (mpm winnt) :
&lt;IfModule mpm_winnt_module&gt;
    ThreadsPerChild      200
    MaxRequestsPerChild    0
&lt;/IfModule&gt;

#Cấu hình cho httpd-default.conf :
Timeout 200
KeepAlive On
MaxKeepAliveRequests 0
KeepAliveTimeout 15
UseCanonicalName Off
AccessFileName .htaccess
ServerTokens Prod
ServerSignature Off
HostnameLookups Off
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113360</guid>
				<link>/hvaonline/posts/list/18838.html#113360</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 11:52:43]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình có thử hạ thấp giá trị     MaxRequestsPerChild  và MaxKeepAliveRequests xuống thấp 50 , 100 nhưng vẫn không hiệu quả . Còn về mpm thì hệ thống đang chạy với winnt mpm , không biết có thể chuyển về prefork không nữa . Mình có thử google thử thì đọc được là apache tự động chạy với duy nhất 1 mpm. Tùy vào mpm đó mà cấu hình và chỉ rõ từng thông số chứ không nói có thể chuyển mpm này sang mpm khác được không , mà mình cũng không biết có chuyển được không nữa. Mới sáng sớm mà comale đã giúp đõ rồi  . Cảm ơn rất nhiều . Chúc 1 ngày an lành.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113363</guid>
				<link>/hvaonline/posts/list/18838.html#113363</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 11:56:41]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <blockquote> #Cấu hình cho httpd-mpm.conf (mpm winnt) :
&lt;IfModule mpm_winnt_module&gt;
ThreadsPerChild 200
MaxRequestsPerChild 0
&lt;/IfModule&gt;

#Cấu hình cho httpd-default.conf :
Timeout 200
KeepAlive On
MaxKeepAliveRequests 0
KeepAliveTimeout 15
UseCanonicalName Off
AccessFileName .htaccess
ServerTokens Prod
ServerSignature Off
HostnameLookups Off &nbsp;
		</blockquote>

Đối với httpd-mpm:
Đổi:
<b>ThreadsPerChild 512
MaxRequestsPerChild 5000</b> (dùng giá trị này để theo dõi xem còn sự cố hay không, nếu không còn sự cố thì gia tăng nó lên thành 20000, đừng để 0 vì system của bồ có thể có vấn đề với memory).

Thêm:
<b>ThreadLimit 1024</b>


Đối với httpd-default:
Đổi:
<b>MaxKeepAliveRequests 512
KeepAliveTimeout 5</b>


Ngoài ra, chưa có dữ liệu sniff được thì cũng chưa có cái gì rõ ràng cả.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113366</guid>
				<link>/hvaonline/posts/list/18838.html#113366</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 13:01:51]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn . Mình đã thiết lập như bạn hướng dẫn và vẫn bị . Hiện mình đang cố gắng sniff 1 đoạn chính xác . Sẽ up lên sau .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113372</guid>
				<link>/hvaonline/posts/list/18838.html#113372</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 13:49:15]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Đây là file được sniff lúc bình thường : http://stukyo.com/ok.pcap
Đây là 2 file được sniff lúc bị flood : 
http://stukyo.com/flood.pcap
http://stukyo.com/flood2.pcap

Mời các bạn xem giúp . 3 file pcap trên mình sniff từ soft wireshark tại đây http://wireshark.zing.org/download/win32/wireshark-setup-0.99.7.exe vì vào trang Ethereal , download về setup bị lỗi và đọc thì thấy nó rename Ethereal thành Wireshark . Chắc bạn dùng Ethereal vẫn mở được.

Nếu bạn không đọc được 3 file trên thì  đây là bản text của 3 file đó . Vì export ra text nên có thể sẽ khỏ nhìn , khó kiếm.
http://stukyo.com/ok.txt
http://stukyo.com/flood.txt
http://stukyo.com/flood2.txt

Trên 3 file đó , chỉ có 2 ip Internal : 192.168.1.5 ( Webserver ) và 192.168.1.3 (GameServer , bao gồm MSSQL Server ) . Chỉ có 1 kết nối duy nhất từ  192.168.1.5 đến 192.168.1.3 là kết nối MSSQL Connect để truy xuất dữ liệu , load lên web. Nên mình nghĩ có khả năng GameServer bị ảnh hưởng là do Webserver bị flood , kéo vào MSSQL. Không biết có giải pháp nào chận / giới hạn kết nối MSSQL từ Apache Sv không . Cảm ơn.
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113381</guid>
				<link>/hvaonline/posts/list/18838.html#113381</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 17:35:48]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình dám cam đoan là mình đang bị phá :( . Vừa nhận được một Email thách thức , khoái chí của tụi nó nữa  :-(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113382</guid>
				<link>/hvaonline/posts/list/18838.html#113382</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 17:57:42]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Xóa ngay mấy cái pcap files đi (vì nó có username + pass trong packets đó). Tôi đã download được rồi. Tôi sẽ phân tích và cho kết quả.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113384</guid>
				<link>/hvaonline/posts/list/18838.html#113384</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 18:18:55]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình đã xóa rồi . Cảm ơn comale rất nhiều .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113386</guid>
				<link>/hvaonline/posts/list/18838.html#113386</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 18:42:30]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Xin hỏi:

192.168.1.5 là web server và 192.168.1.3 là mssql server?

Cho biết giữa 192.168.1.5 và 192.168.1.3 connect qua cơ chế nào? (ODBC?)

Có <b>quá nhiều</b> request / response giữa 2 host này và cũng có <b>quá nhiều</b> <font color='red'>malform</font> packets (gói tin không hợp lệ), quá nhiều <font color='red'>fragmented</font> packets (gói tin bị chẻ nhỏ ra). Chứng tỏ network connection giữa 2 host này <b>rất kém</b>.

Có quá nhiều response packets từ 192.168.1.5 đến các clients (public IP nào đó) ở dạng "reassembled PDU" và đây là nguyên nhân của sự trì trệ. Hầu như các response stream đi từ 192.168.1.5 đến clients (public IP nào đó) đều bị dính khá nhiều "reassembled PDU". Để khắc phục tình trạng này, bồ phải hạ MTU trên ADSL modem bớt (tôi không rõ bồ dùng ADSL modem nào nên không thể nói chi tiết hạ như thế nào) và chỉnh MTU trên Windows server có y hệt MTU trên ADSL modem. Nếu không, tình trạng này tiếp tục xảy ra và nếu kéo dài, tình trạng sẽ càng lúc tệ hại. Xin lưu ý rằng: <font color='red'>việc điều chỉnh MTU trên Windows là việc không nên làm bởi vì nó khá nguy nên tôi không khuyến khích làm việc này</font>.

Vẫn không có dấu hiệu apache bị flood. Tôi e rằng bồ bị flood ngay ở ADSL modem.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113387</guid>
				<link>/hvaonline/posts/list/18838.html#113387</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 18:58:30]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <blockquote> 192.168.1.5 là web server và 192.168.1.3 là mssql server? &nbsp;
		</blockquote>
Vâng . Chính xác.

<blockquote> Cho biết giữa 192.168.1.5 và 192.168.1.3 connect qua cơ chế nào? (ODBC?) &nbsp;
		</blockquote>

Không qua ODBC , Qua MSSQL Connect .Vì 2 máy nằm chung network nên chỉ việc connect như thế này .

<blockquote>$muweb['connection'] = 'mssql';

$muweb['localhost'] = '192.168.1.3'';

$muweb['dbhost'] = '192.168.1.3';

$muweb['database'] = 'MuOnline';

$muweb['dbuser'] = 'sa';

$muweb['dbpassword'] = 'xxxxxxxx';

$db = &ADONewConnection('mssql');
$connect_mssql = $db-&gt;Connect($muweb['dbhost'],$muweb['dbuser'],$muweb['dbpassword'],$muweb['database']);

&nbsp;
		</blockquote>
Nhưng mình cũng đã có thử dùng ODBC rồi . Vẫn bị.
<blockquote>Chứng tỏ network connection giữa 2 host này rất kém. &nbsp;
		</blockquote> 2 máy này nằm trong 1 switch , kết nối rất nhanh :( . Đâu phải remote connection từ xa đâu ạ .Đồng ý là hệ thống của em yếu kém, nhưng em dám chắc là không tự nhiên mà bị thế này . Em chạy đã 2 năm rồi . Không bị gì cả . Chỉ gần đây là bị phá hoại có chủ đích thôi.

<blockquote> Vẫn không có dấu hiệu apache bị flood. Tôi e rằng bồ bị flood ngay ở ADSL modem.&nbsp;
		</blockquote>

Mình không dám phản biện lại ý kiến này . Nhưng nếu là flood từ ADSL modem thì tại sao mình stop service ApacheServer là hết bị ngay?


<blockquote>Để khắc phục tình trạng này, bồ phải hạ MTU trên ADSL modem bớt (tôi không rõ bồ dùng ADSL modem nào nên không thể nói chi tiết hạ như thế nào) và chỉnh MTU trên Windows server có y hệt MTU trên ADSL modem. Nếu không, tình trạng này tiếp tục xảy ra và nếu kéo dài, tình trạng sẽ càng lúc tệ hại. Xin lưu ý rằng: việc điều chỉnh MTU trên Windows là việc không nên làm bởi vì nó khá nguy nên tôi không khuyến khích làm việc này. &nbsp;
		</blockquote>

Hic . Mình backup dữ liệu hàng ngày . Giờ bị phá hoài ức lắm . Rất tức . Mình không phá hoại , gây hiềm khích gì ai cả . Công sức mình làm 2 năm nay , không bỏ trắng được :( . Nên giờ làm cái gì có thể là mình làm ngay . Mình đang sử dụng ADSL Router DLink-520T . Dùng 2 cái . Mình không hiểu được là tại sao kết nối giữa Web đến MSSQL lại ảnh hưởng đến Joinserver , khiến Joinserver báo lỗi RecvQ như đoạn video mình đã post.
<blockquote>http://stukyo.com/b.swf &nbsp;
		</blockquote>

Đau đầu quá . Tối nay mình sẽ thử đưa MSSQL ra chạy riêng 1 máy 192.168.1.4. Web 192.168.1.5 Connect đến đó lấy dữ liệu và GameServer 192.168.1.3 để riêng ra , cũng kết nối đến 192.168.1.4 . Xem xem còn bị ảnh hưởng giữa Web và Game nữa không .
Mình đang reply bài ở đây , mà cứ vài giây lại tab qua cửa số remote màn hình xem xem có bị flood hay không . Có là stop service appserv ngay . Cái cảm giác ngồi canh , canh để xem nó phá khi nào mà không làm gì được . Nó ....

Nếu bạn có ý kiến hay lời khuyên nào cho mình hiện tại , mình sẽ thử ngay . Cảm ơn comale rất nhiều . Mình biết không phải ai cũng bỏ thời gian của mình ra để giúp đỡ người khác mà không được gì . Nhưng mình rất quý điều đó và rất biết ơn. Chúc bạn được nhiều niềm vui trong cuộc sống.
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113390</guid>
				<link>/hvaonline/posts/list/18838.html#113390</link>
				<pubDate><![CDATA[Sat, 2 Feb 2008 19:25:14]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Đã thử đem MSSQL ra chạy riêng , Tức Web riêng , MSSQL riêng , Game riêng . Vẫn bị . Không hiểu được bị đánh như thế nào nữa :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113408</guid>
				<link>/hvaonline/posts/list/18838.html#113408</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 04:02:05]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ MTU trên ADSL Modem của mình là 1400 Bytes . Liệu mình có nên giảm nó xuống không , và giảm xuốn thì có ảnh hưởng gì đến tốc độ mạng không vậy bạn ?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113413</guid>
				<link>/hvaonline/posts/list/18838.html#113413</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 05:57:19]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[  Tôi đã cố gắng xem hết các bài của bạn, cũng như các bài viết của anh conmale. Anh conmale đã cho những ý kiến, thưc sự là các recommendation xác đáng. Bạn chịu khó đọc kỹ lại các bài của anh conmale.
 Trước hết tôi cảm ơn vì bạn đã cung cấp các thông tin đầy đủ và chi tiết về các webserver và Game server của bạn, giúp cho việc tìm ra các nguyên nhân dễ dàng hơn. Trong trường hợp này hay các trường hợp khác tương tự không có gì là đáng "<b><font color='yellow'>bí mật</font></b>" cả. <b><font color='orange'>Vì để giữ "bí mật' tốt nhất một hệ thống, một công nghệ là luôn luôn, liên tục thay đổi, cải tiến, nâng cấp chúng.</font></b>

 Về topology giữa modem, switch, webserver và Game server... của bạn, tôi không thấy có gì đặc biệt cần lưu ý. Mặc dù có thể chưa là tối ưu. Nhưng xin bạn cho biết model cụ thể của ADSL modem bạn đang dùng. ADSL modem cũng là một yếu tố không thể bỏ qua vì nó là hàng rào đầu tiên.
Trên Apache event log tôi cũng thấy không có dấu hiệu rõ ràng của các cuộc tấn công, dù đó là tấn công Flash DDoS. Tất cà các GET request đều có vẻ hợp lệ và webserver của bạn đã chấp nhận các yêu cầu này một cách "đầy đủ và hoàn hảo".

 Bạn có đưa ra nôi dung file config. trong Apache. Dù rằng bạn chưa chú ý đến một số chi tiết cần config. kỹ hơn trong nôi dung, nhiều chỗ bạn dùng "default". Nhưng theo tôi có lẽ nôi dung config. bạn đang dủng trong Apache không phải là nguyên nhân chính dẫn đến những trục trặc mà bạn đang mắc.
Tôi cũng đã tìm ra tên miền của webserver của bạn và tôi sẽ check kỹ để tìm ra những điểm yếu trên hệ thống, có thể dẫn đến khi hacker tấn công vào đó sẽ làm hệ thống sụp đổ. Khi hệ thống có một điểm yếu thì hacker chỉ cần gửi vài chục request với character đặc biệt đến một nơi nào đó trên hệ thống  có thể làm cho hệ thống ngưng hoạt đông, mà có thể một số log nào đó, thí dụ http.log trong Apache không ghi nhận đựoc. Các cuộc tấn công này có "hàm lượng trí tuệ" cao hơn rất nhiều các cuộc tấn công DDos tràn lan như ta đã thấy, kể cả Flash DDoS. Ấy là ví von như vây cho vui.
Khi có tìm ra điều gì tôi xin thông báo cho bạn, nhưng không thể báo cho bạn trong thời gian ngắn. Vì mấy hôm nay tôi rất bận.
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113415</guid>
				<link>/hvaonline/posts/list/18838.html#113415</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 10:02:23]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cảm ơn bạn đã quan tâm bài viết của mình . Mình sử dụng modem của Dlink . Đời 520 T . Mình rất đồng ý với ý kiến của PXMMRF đã đưa ra về trường hợp của mình , đặc biệt là đoạn cuối . Mình không biết phải nói sao . Đúng là về phía apache thì rất bình thường. Nhưng khi bị tấn công thì webserver của mình bị sụm lại   , không ai vào được , kể cả localhost. Và Authentication Server của game báo có rất nhiều yêu cầu đang đợi xử lý (RecvQ- Receive Queue). Vâng . Thích thì anh ta flood khoảng 5 10 phút , để cho khoảng 50 % số người chơi văng ra còn buồn thì anh ta flood vài tiếng cho đến khi không còn ai online cả ( Nếu mình không stop service Apache ) và khi anh ta ngưng tấn công thì tất cả mọi thứ đều trở lại bình thường. Bình thường thì anh ta tấn công mọi lúc , đôi khi tối thứ 7 , chủ nhật hay ngày lễ thì anh ta tha cho , chắc là đi chơi với người yêu hay nhật nhẹt . Có điều mình đã tìm kiếm rất nhiều mà vẫn không biết khe hở đó bắt nguồn từ đâu mặc dù đã cố gắng dùng source web khác. Và mình cũng đã biết được , người flood server của mình lại lại một thành viên của HVA ONLINE. Trớ trêu.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113417</guid>
				<link>/hvaonline/posts/list/18838.html#113417</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 10:31:52]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Cảm ơn bạn đã quan tâm bài viết của mình . Mình sử dụng modem của Dlink . Đời 520 T . Mình rất đồng ý với ý kiến của PXMMRF đã đưa ra về trường hợp của mình , đặc biệt là đoạn cuối . Mình không biết phải nói sao . Đúng là về phía apache thì rất bình thường. Nhưng khi bị tấn công thì webserver của mình bị sụm lại   , không ai vào được , kể cả localhost. Và Authentication Server của game báo có rất nhiều yêu cầu đang đợi xử lý (RecvQ- Receive Queue). Vâng . Thích thì anh ta flood khoảng 5 10 phút , để cho khoảng 50 % số người chơi văng ra còn buồn thì anh ta flood vài tiếng cho đến khi không còn ai online cả ( Nếu mình không stop service Apache ) và khi anh ta ngưng tấn công thì tất cả mọi thứ đều trở lại bình thường. Bình thường thì anh ta tấn công mọi lúc , đôi khi tối thứ 7 , chủ nhật hay ngày lễ thì anh ta tha cho , chắc là đi chơi với người yêu hay nhật nhẹt . Có điều mình đã tìm kiếm rất nhiều mà vẫn không biết khe hở đó bắt nguồn từ đâu mặc dù đã cố gắng dùng source web khác. Và mình cũng đã biết được , <font color='yellow'>người flood server của mình lại lại một thành viên của HVA ONLINE</font>. Trớ trêu.&nbsp;
		</blockquote>

 Vâng! Mọi vấn đề cơ bản có lẽ đã rõ.

 Hiện nay, giờ này, bạn đã chuyển trang gameonline "<b><font color='yellow'>trianglemu.com</font></b>" hosting tại một webserver của một công ty cho thuê hosting websites, có trụ sở đặt tại Mỹ. Trang gameonline này không còn đặt trong một gameonline server, nằm trong mạng LAN sau một ADSL modem của bạn, có private IP là 192.168.1.x, như bạn đã mô tả trước đây. <font color='yellow'>Việc truy cập đến trang gameonline nay đã cải thiện rất nhiều</font>. Cách giải quyết của bạn như vậy là hợp lý và đúng đắn phải không bạn?

 Webserver của bạn có tên miền là "<font color='yellow'>ta1.myvnc.com</font>" thì vẫn đặt ở "chỗ cũ". Chỗ cũ là một chỗ trong mạng LAN sau ADSL modem D-Link 250T, webserver đựong nhiên phải có một private IP như bạn đã từng nói. 
Trang web "ta1.myvnc.com" nay chỉ cho các user truy cập đến <font color='yellow'>một trang duy nhất với một số thông báo cần thiết</font>. Nó không còn hoành tráng  như xưa, như là trước đây các user chơi gameonline đã từng nhìn thấy.
 
 Tuy vậy bây giờ tôi vẫn còn "nhìn thấy" đựoc những trang "hoành tráng" của website dù đã cho ẩn (hiden). Công nhận những trang đó thiết kế khá đẹp, bố trí hài hòa. Bạn là người có kiến thức khá về nhiều mặt.

Tôi "nhìn thấy" được những trang này là vì khi check bảo mật đến website  "trianglemu.com' <font color='yellow'>tôi tìm ra được các link bị disclosed (lộ đừong dẫn) và theo đó tôi "mò" vào đựoc những trang đẹp trên webserver "ta1.myvnc.com</font>"(<i>dù rằng việc truy cập đến các URL này rất chậm, rất hay bị "timeout"</i>). Website này cũng còn một số lỗi khác, nhưng lúc này không phải là lúc bàn đến chuyện "lỗi".

 Những sư việc trục trặc mà bạn đã gặp phải chắc là do các nguyên nhân sau:

 - Webserver của bạn là một homeserver sử dụng <b><font color='yellow'>một tên miền năng động </font></b>(Dynamic domain name): ta1.myvnc.com do công ty kinh doanh dịch vụ tên miền động "no-ip" quản lý<span class="link"> www.no-ip.com</span>). Tuy là tên miền của bạn là loại phải mua (không phải là free), <b><font color='orange'>nhưng không phải là preminum class</font></b>. Nếu là tên miền năng động preminum class thì thường chúng phải có dạng khác, thí dụ như <font color='yellow'>px.com</font> hay <font color='yellow'>ta1.com</font>.... Các tên miền Secondary class như <font color='yellow'>ta1.myvnc.com </font>thường hay gặp trục trặc trong quá trình phân giải (resolution), do server phân giải chịu trách nhiệm phân giải quá nhiều tên miền, do công ty không bố trí nhiều DNS server tại các đia điểm khác nhau trên TG để giúp việc phân giải nhanh hơn , hiệu quả hơn...vân vân. Do vậy việc truy cập từ ngoài đến các webserver có tên miền năng động loại này đôi khi trục trặc hay dễ bị overflow khi bị tấn công, dù chỉ tấn công không mạnh.
(<i>Xin chú ý là giá một Dynamic domain name loại preminum class cao hơn giá domaine thông thường như .net, .com, .org loại "tĩnh" từ 3 đến 5 lần</i>)

- Webserver lại đặt trong một mạng thuê bao do một <font color='yellow'>ISP VIệt nam quản lý </font>và bạn thuê bao với <font color='yellow'>gói dịch vụ trung bình </font>( không phải là loại cao), trong khi mạng LAN lại đặt cả webserver và gameonline server và giữa chúng có quan hê truyền dữ liệu, thì hiện tựong trục trặc càng dễ xảy ra.
 
Vì vậy bạn đã bố trí lại như hiện nay (webserver thì lắp trong LAN sau modem có các link chỉ đến website gameonline, website gameonline thì hosting trên một webserver mạnh  của nước ngoài) là hợp lý.

 Không có ai ở HVA tấn công bạn đâu. Nếu có chỉ là một cá nhân nào đó, người này không thể đại diện cho HVA, họ làm với tư cách cá nhân. Vì HVA không chủ trương việc này (xem nôi quy HVA). 



 

]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113435</guid>
				<link>/hvaonline/posts/list/18838.html#113435</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 16:34:57]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
...
 Và mình cũng đã biết được , người flood server của mình lại lại một thành viên của HVA ONLINE. Trớ trêu.&nbsp;
		</blockquote>
Ặc, vào đây nhờ giúp đỡ đã đời xong kết luận một câu shock quá.  #:S#:S#:S ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113436</guid>
				<link>/hvaonline/posts/list/18838.html#113436</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 16:58:26]]> GMT</pubDate>
				<author><![CDATA[ Defender]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Defender wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
...
 Và mình cũng đã biết được , người flood server của mình lại lại một thành viên của HVA ONLINE. Trớ trêu.&nbsp;
		</blockquote>
Ặc, vào đây nhờ giúp đỡ đã đời xong kết luận một câu shock quá.  #:S#:S#:S &nbsp;
		</blockquote>

Dạ thưa . Đó là sự thật . Người chơi cheat tại game của mình có nick là lychailon . Có chat vài lần thì biết là hắn làm trong 1 tiệm net , hai mươi mấy tuổi , có kiến thức IT , và vài thông tin khác . Google lychailon thì không có nhiều kết quả lắm đâu :( Ổng đây :<span class="link"> /hvaonline/posts/preList/10953/69853.html#69853,</span>
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113439</guid>
				<link>/hvaonline/posts/list/18838.html#113439</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 17:29:20]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bác PXMMRF phân tích cực kì chính xác . Hiện bác khó vào được trang http://ta1.myvnc.com vì mình liên tục bị flood , và hay tắt service nên bác bị timeout. Còn cái NO-IP . Cái này chỉ là DNS thôi . Khi đã qua nó rồi thì nó kết nối đến IP thật . Rất nhanh. Còn như ý của bác nói thì , hịc . Hồi trước em làm 1 line , người chơi đông gấp 2 lần giờ còn không vấn đề gì . Giờ còn có 1/2 players , mà 2 line , mà vẫn bị sập . Web ta1.myvnc.com public lên trianglemu.com nên ổng biết , ổng xem mà flood nên không ổn định . Đây là link web phụ đây : http://taw.myvnc.com/wb . Bác xem xem sao . ( mà giờ ổng đang đọc cũng ko biết chừng ) Đây cũng là Webserver appserv đặt trong LAN nhưng có default gateway khác với game. Không dám public cái link đó lên trianglemu.com luôn. Chỉ có vài chục người gamer quen biết . Họ vào địa chỉ đó chẳng bị gì cả.Em có 2 line ADSL , đã thử dùng 1 line chạy riêng cho Webserver , 1 line chạy riêng cho Game, nhưng khi line Web bị flood , vẫn ảnh hưởng đến Game vì web có kết nối MSSQL đến game trong mạng lan. Em tính đưa cái web lên host của servage cho nó host . chạy mssql connect tới mssql server của em . mà nó ko support MSSQL connect , chỉ có MYSQL thôi . So banana &lt;= câu này lychailon nói trong vài trang web mà ổng học tiếng Anh.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113441</guid>
				<link>/hvaonline/posts/list/18838.html#113441</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 17:37:25]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
Dạ thưa . Đó là sự thật . Người chơi cheat tại game của mình có nick là lychailon . Có chat vài lần thì biết là hắn làm trong 1 tiệm net , hai mươi mấy tuổi , có kiến thức IT , và vài thông tin khác . Google lychailon thì không có nhiều kết quả lắm đâu :( Ổng đây :<span class="link"> /hvaonline/posts/preList/10953/69853.html#69853,</span>
&nbsp;
		</blockquote>
Bạn biết đấy, ai cũng có thể reg một cái nick ở HVA cả. Mọi  người vào thảo luận giúp đỡ bạn và rồi bạn lại kết bằng một câu như thế. Nên không bạn!?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113442</guid>
				<link>/hvaonline/posts/list/18838.html#113442</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 17:50:09]]> GMT</pubDate>
				<author><![CDATA[ Defender]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Ọc . No . Mình không nói gì về HVA cả . Ý mình nói là người phá mình có kiến thức IT nhiều , và cũng là thành viên của diễn đàn HVA . Ý mình nói về sự trùng hợp . Chứ có trách móc gì phía HVA đâu bạn . Xin lỗi vì mình nói không chính xác . Phải là một người tham gia diễn đàn HVA. Hic . Giờ vẫn đang bị . Tất cả các ý tưởng đều đã được triển khai nhưng ko si nhê :( Giờ mình tính làm cách nào đó giới hạn lại kết nối giữa MSSQL SV và Apache Sv . Để nếu có bị flood thì Apache SV die  , không ảnh hưởng gì đến MSSQL SV cả . Nhưng google mãi không thấy thông tin gì :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113446</guid>
				<link>/hvaonline/posts/list/18838.html#113446</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 18:10:39]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Phân tích lại 2 đoạn sniff của bồ, tôi thấy vài chi tiết quan trọng sau:

1) Bồ bị Syn Flood từ các IP ở VN, chủ yếu là từ Vietel network. Nếu bồ dùng firewall, <font color='red'>nên giới hạn số lượng SYN được phép trong 1 giây là 2 hoặc 3 là tối đa</font>.

2) Trong suốt 2 đoạn sniff ngắn ngủi, có chưa đến 10 IP request đến server của bồ nhưng đã có:
- <b>vài chục duplicated ACK</b> đi từ các public IP. Tình trạng này xảy ra do router của bồ trả lời cái gì đó không hợp lệ hoặc packets bị lost khi router của bồ gởi packets đi đến clients.

- <b>vài trăm malform</b> packets từ 192.168.1.3 đến 192.168.1.5. Đây là tình trạng rất tệ bởi vì nếu 2 servers trong cùng 1 LAN, dùng chung 1 switch mà bị tình trạng này thì network card của một trong hai server này có vấn đề hoặc cable có vấn đề hoặc switch có vấn đề. Không thể gọi là bình thường được. Đây là dấu hiệu của sự trì trệ trong quá trình chuyển gởi thông tin.

- gần một ngàn response packets đi từ 192.168.1.3 đến 192.168.1.5. Đây là cái yếu của việc không dùng database connection pool mà dùng direct query như trên. Nếu website hoạt động bình thường và chỉ có 1 số lượng người nào đó truy cập thì ok. Tuy nhiên, nếu bị flood thì các response packets này sẽ gia tăng theo cấp số và mỗi lần như thế, apache phải tạo connection (socket) đến mssql --&gt; cực kỳ trì trệ.

3) Có dấu hiệu của x-flash. Những dấu hiệu này có biến thái khá mới lạ và chúng chỉ nhằm vào các file có kích thước lớn trên site của bồ. Các files này thường là các flash mà bồ đính trên site của mình. Nếu dùng mod_security, bồ nên cho dòng sau vào httpd.conf:

<b>SecFilterSelective &quot;HEADERS&quot;  &quot;x-flash-version&quot; &quot;deny,status:400&quot;</b>


Ngoài ra, MTU của bồ như thế là ok rồi. Không cần phải chỉnh thấp hơn. Tôi nghĩ rằng nếu bồ chạy apache trên Linux có lẽ bồ sẽ không bị tệ hại như thế. Nếu bồ điều chỉnh lại cơ chế truy vấn đến mssql thì site của bồ sẽ bền hơn.

Một lời cuối: bất cứ ai cũng có thể đăng ký nick tại HVA và trở thành member của HVA. Khi họ sinh hoạt trên diễn đàn này, họ cần thực hiện đúng với luật chơi chung của HVA. Tuy nhiên, những gì họ làm bên ngoài diễn đàn HVA, HVA hoàn toàn không chịu trách nhiệm. Bản thân tôi có thể khuyến dụ ai đó là member của HVA ngưng phá phách bồ. Tuy vậy, cá nhân ấy có đồng ý hay không là chuyện ngoài khả năng của tôi. Xin nhớ rằng, HVA không có chủ trương phá hoại. Những gì xảy ra bên ngoài khuôn khổ diễn đàn HVA thì không có gì liên quan đến HVA cả.

Thân mến.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113447</guid>
				<link>/hvaonline/posts/list/18838.html#113447</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 18:45:27]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Bác PXMMRF phân tích cực kì chính xác . Hiện bác khó vào được trang<span class="link"> http://ta1.myvnc.com</span> vì mình liên tục bị flood , và hay tắt service nên bác bị timeout. Còn cái NO-IP . Cái này chỉ là DNS thôi . Khi đã qua nó rồi thì nó kết nối đến IP thật . Rất nhanh. Còn như ý của bác nói thì , hịc . Hồi trước em làm 1 line , người chơi đông gấp 2 lần giờ còn không vấn đề gì . Giờ còn có 1/2 players , mà 2 line , mà vẫn bị sập . Web ta1.myvnc.com public lên trianglemu.com nên ổng biết , ổng xem mà flood nên không ổn định . Đây là link web phụ đây :<span class="link"> http://taw.myvnc.com/wb</span> . Bác xem xem sao . ( mà giờ ổng đang đọc cũng ko biết chừng ) Đây cũng là Webserver appserv đặt trong LAN nhưng có default gateway khác với game. Không dám public cái link đó lên trianglemu.com luôn. Chỉ có vài chục người gamer quen biết . Họ vào địa chỉ đó chẳng bị gì cả.Em có 2 line ADSL , đã thử dùng 1 line chạy riêng cho Webserver , 1 line chạy riêng cho Game, nhưng khi line Web bị flood , vẫn ảnh hưởng đến Game vì web có kết nối MSSQL đến game trong mạng lan. Em tính đưa cái web lên host của servage cho nó host . chạy mssql connect tới mssql server của em . mà nó ko support MSSQL connect , chỉ có MYSQL thôi . So banana &lt;= câu này lychailon nói trong vài trang web mà ổng học tiếng Anh.&nbsp;
		</blockquote>

"Nó" nói "<font color='yellow'>So banana</font>" là ý nó nói hệ thống của bạn là "<b><font color='yellow'>như củ chuối</font></b>" phải không? Hì hì. Bạn nói lại với nó là "Cười người hôm trước, hôm sau người cười", là "Câu sao không lo cái tiệm net của cậu đi, cứ đi phá người khác"; "Cạnh tranh là phải nâng cao chất lượng phục vụ, chất lượng trang web, chứ đâu đi làm chuyện tầm bậy, hạ đẳng như vậy"; "Có giỏi thì thử tấn công vào HVA webserver xem sao?"...vân vân.

  Theo tôi bạn <font color='yellow'>cứ duy trì như sắp xếp hiện nay của bạn</font>. Nếu cần thì sử dụng MySQL của Webserver của công ty hosting. Tạm bố trí  "trianglemu.com" có thể hoạt động một cách độc lập. Website-webserver ta1.myvnc.com chỉ làm nhiệm vụ giới thiệu, quảng cáo, tổng kết... gì đó. Trên đó có những link, chỉ khi click vào thì mới dẫn trình duyệt của user đi đến trang "trianglemu.com". <font color='yellow'>Không nên tạo một mối liên hệ "phụ thuộc" dưới hình thức truyền dẫn dữ liệu giữa trianglemu.com và ta1.myvnc.com.</font>

Bạn chú ý là khi một user truy cập đến một website, thí dụ ta1.myvnc.com thì trình duyệt phải hoàn tất <font color='yellow'>hai giai đoạn</font>: <font color='orange'>phân giải tên miền thành đia chỉ IP với 4 "octets</font>" và <font color='orange'>truy cập đến webserver có IP trên.</font> Chỉ một giai đoạn bị châm hay trục trặc là quá trình truy cập đến website bị thất bại. Khi một hacker khởi sự tấn công vào website thì hai giai đoạn nói trên cũng phải lần lượt hoàn tất. Nếu hệ thống DNS bị sụp đổ hay bị chậm khi phân giải các gói tin tấn công thì đưong nhiên việc truy cập đến website từ các user khác sẽ không được hay bị chậm lại.

Nếu bạn đã có hai nguồn ADSL thuê bao thì tốt nhất là bạn nên mua một <b><font color='yellow'>Advanced security router </font></b>và nối cả hai nguồn ADSL này vào router. Router sẽ cân bằng tải giữa hai nguồn ADSL, cũng như một cái sẽ đứng ra đảm nhân hoàn toàn việc  nhận truyền các traffic, khi cái kia bị đứt mach. Trên router này có một firewall khá mạnh và có các cơ cấu quét virus online (quét virus ngay trên các nguồn dữ liệu vào ra), cơ cấu IDS, IPS.... Firewall tích hợp trên Advanced security router này <font color='yellow'>có một cơ chế phòng, chống, hay hạn chế  DoS</font>. Cơ chế này mới xem qua thấy nó kỳ cục, buồn cười. Nhưng nghĩ kỹ lại và qua thực tế dùng thì thấy quả là quá thông minh, hình như không thể thông minh hơn, trên hiện trạng thiết bị tầm cỡ ấy. <i>Tôi không kinh doanh net gì cả, chỉ ngâm cứu mạng và bảo mật chơi thôi, mà còn mua được một Advanced security router đấy</i>. (<i>giá cũng không có gì là cao, nếu biết chọn loại phù hợp mà mua</i>)

Sau  "chạy rà kỹ" router này bạn có thể lắp webserver như ta1.myvnc.com. Lúc đó có lẽ bạn không còn sợ các DoS thông thường như vừa qua. Chắc chỉ các DDoS quá mạnh thì còn có thể có những trục trặc tạm thời nào đó. Vì DDoS rất mạnh thì những hệ thống hiện đại, tầm cỡ trên TG còn phải chịu thua cơ mà.

Sau khi đã "rà trơn" hệ thống với router mới, có kinh nghiệm, thì bạn có thể lắp một game server sau router, cùng với webserver, tất nhiên phải port forwarding cho game server một cổng khác trên ADSL modem.



  ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113453</guid>
				<link>/hvaonline/posts/list/18838.html#113453</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 19:17:41]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Phân tích lại 2 đoạn sniff của bồ, tôi thấy vài chi tiết quan trọng sau:

............................
- <b>vài trăm malform</b> packets từ 192.168.1.3 đến 192.168.1.5. Đây là tình trạng rất tệ bởi vì nếu 2 servers trong cùng 1 LAN, dùng chung 1 switch mà bị tình trạng này thì network card của một trong hai server này có vấn đề hoặc cable có vấn đề hoặc switch có vấn đề. Không thể gọi là bình thường được. Đây là dấu hiệu của sự trì trệ trong quá trình chuyển gởi thông tin.
.......................................
- gần một ngàn response packets đi từ 192.168.1.3 đến 192.168.1.5. Đây là cái yếu của việc không dùng database connection pool mà dùng direct query như trên. Nếu website hoạt động bình thường và chỉ có 1 số lượng người nào đó truy cập thì ok. Tuy nhiên, nếu bị flood thì các response packets này sẽ gia tăng theo cấp số và mỗi lần như thế, apache phải tạo connection (socket) đến mssql --&gt; cực kỳ trì trệ.

Thân mến.&nbsp;
		</blockquote>
 Hì hì. Anh conmale đã phân tích kỹ thêm khi decode các gói tin sniff. Rất tiếc, tôi không thể download các file sniff này. <font color='yellow'>Hinh như nó đã bị delete rồi</font>?

 Ngoài ra, khi check website "trianglemu.com" tôi thấy hiện tượng có khá nhiều <b><font color='yellow'>"Script Error"</font></b>. Đó là hiện tựong có nhiều "incorrect request" (những truy vấn sai sót) từ nguồn gửi (<i>ở đây chính là webserver
ta1.myvnc.com hay cũng có thể  từ users nếu như lúc trước đây-lúc có sự số và bạn sniff các gói tin- bạn cho phép user có thể truy cập trực tiếp vào website " trianglemu.com"</i>), từ đó gây ra các lỗi (Script error) trên website   "trianglemu.com". 

Như vậy nhận xét trên đây của anh conmale trên đây là hoàn toàn chính xác]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113457</guid>
				<link>/hvaonline/posts/list/18838.html#113457</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 20:29:38]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mừng quá . Quá mừng . Mình rất vui khi được hai bạn nhiệt tình giúp đỡ như vậy .Chiều nay buồn lắm , tính buông xuôi rồi , buồn , đi ngủ một giấc , giờ dậy thấy được hai bạn giúp như vậy . Hi .

<blockquote> Bồ bị Syn Flood từ các IP ở VN, chủ yếu là từ Vietel network. Nếu bồ dùng firewall, nên giới hạn số lượng SYN được phép trong 1 giây là 2 hoặc 3 là tối đa.&nbsp;
		</blockquote>

Cực kì chính xác . Mình đã nắm được vài cái IP . Cứ hễ mở service là IP đó nhảy vào ào ào . Toàn là 123.xx... 125.xx... Hiện tại cái ISA thấy nó ... ấy ấy quá . Mấy cái rule nó tạo thì OK . Chống được khá nhiều thứ ngoài luồng. Nhưng cũng phải tạo vài cái rule nhỏ để nó không chận với vài phần mềm của client nữa. Chức năng Limit Flood Configuration gì đó , mình thử config tới lui nhưng vẫn không chận được. Giờ máy Webserver có COMODO FIREWALL. Mình sẽ nghiên cứu và tìm thêm firewall khác hữu hiệu hơn. Chỉ cần có đầu mới <blockquote>giới hạn số lượng SYN được phép trong 1 giây là 2 hoặc 3 là tối đa.&nbsp;
		</blockquote> là rất vui . là có hi vọng tiếp rồi :D

<blockquote> - vài trăm malform packets từ 192.168.1.3 đến 192.168.1.5. Đây là tình trạng rất tệ bởi vì nếu 2 servers trong cùng 1 LAN, dùng chung 1 switch mà bị tình trạng này thì network card của một trong hai server này có vấn đề hoặc cable có vấn đề hoặc switch có vấn đề. Không thể gọi là bình thường được. Đây là dấu hiệu của sự trì trệ trong quá trình chuyển gởi thông tin. &nbsp;
		</blockquote>
Cái này , ngày mai mình sẽ thay cái switch , toàn bộ dây và các card mạng lại .
<blockquote>. Đây là cái yếu của việc không dùng database connection pool mà dùng direct query như trên.&nbsp;
		</blockquote>

Mình không biết về database connection pool , cảm ơn bạn đã chỉ , tí nữa sẽ nghiên cứu nó là gì.
<blockquote>SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400" &nbsp;
		</blockquote>
Mình vừa thêm vào , hi vọng nó có hiệu quả.
<blockquote> 
"Nó" nói "So banana" là ý nó nói hệ thống của bạn là "như củ chuối" phải không? Hì hì. Bạn nói lại với nó là "Cười người hôm trước, hôm sau người cười", là "Câu sao không lo cái tiệm net của cậu đi, cứ đi phá người khác"; "Cạnh tranh là phải nâng cao chất lượng phục vụ, chất lượng trang web, chứ đâu đi làm chuyện tầm bậy, hạ đẳng như vậy"; "Có giỏi thì thử tấn công vào HVA webserver xem sao?"...vân vân. &nbsp;
		</blockquote>
Hic. gần 2 tháng trước .Lúc đầu ổng bảo là game của em có lỗi , ổng bảo ổng sẽ chỉ ra lỗi với điều kiện gì đó , đại loại như là để im account của đó của ổng , cho ổng items trong game dù các gamers khác trong game rất bất bình vì tự nhiên có  1 superman trên trời rơi xuống . Thế là em nghiên cứu và sửa được lỗi , block acc của ổng , dù không cần ổng chỉ như thế nào nữa. Thế là ổng quay qua bảo em làm thế là quá tay , rồi chửi em , rồi bảo em .. " lo mà canh chừng hacker". Thế là từ sáng hôm sau cho đến nay , ngày nào cũng bị flood.

<blockquote> Theo tôi bạn cứ duy trì như sắp xếp hiện nay của bạn. Nếu cần thì sử dụng MySQL của Webserver của công ty hosting. Tạm bố trí "trianglemu.com" có thể hoạt động một cách độc lập. Website-webserver ta1.myvnc.com chỉ làm nhiệm vụ giới thiệu, quảng cáo, tổng kết... gì đó. Trên đó có những link, chỉ khi click vào thì mới dẫn trình duyệt của user đi đến trang "trianglemu.com". Không nên tạo một mối liên hệ "phụ thuộc" dưới hình thức truyền dẫn dữ liệu giữa trianglemu.com và ta1.myvnc.com. &nbsp;
		</blockquote>

Hic . Hình như bạn hiểu nhầm . Cái trianglemu.com nó chẳng có gì cả , chỉ là vài cái trang index quảng cáo , dẫn đến website chính mà mình host . Mình mua host ,domain trianglemu.com của servage.net để có 1 cái domain cố định , upload cái CLIENT cho gamer download về , và 1 cái forum cho gamer tiện trao đổi . Chứ nó không hỗ trợ MSSQL  , không thể đưa cái web chính lên đó được . mà cái web này rất quan trọng . Người mới vào chơi phải vào đó để tao tài khoản , và rất nhiều vấn đề khác nữa , không thể thiếu được.
<blockquote>Nếu hệ thống DNS bị sụp đổ hay bị chậm khi phân giải các gói tin tấn công thì đưong nhiên việc truy cập đến website từ các user khác sẽ không được hay bị chậm lại. &nbsp;
		</blockquote>

Cái này đúng quan trọng thật nhưng hiện nay , chỉ cần webserver không làm ảnh hưởng đến gameserver thì em mừng lắm rồi. Mục đích ổng flood là cho người chơi không vào được game , khiến em phải tắt web , mà game mà không có web thì 1 thời gian sớm cũng sẽ die . Người chơi mới không có vì không tạo được tài khoản , người chơi cũ thì cũng ra đi luôn vì ... so banana , muonline mà không có web :(.
<blockquote>Advanced security router&nbsp;
		</blockquote>
Mình vừa nghiên cứu cái này vào trưa nay , cũng tính thử nhưng sợ kinh nghiệm không có , không biết tổ chức cho tốt nữa. Cho mình hỏi ké thì bạn thấy hiệu nào , loại nào thì có giá bình dân mà chất lượng ok , có thể sử dụng tốt cho mô hình mạng của mình hiện nay không , vì google thì thấy có quá nhiều loại , các cửa hàng của VN thì 100% là tụi nó cũng chẳng biết cái nào ngon , à không , phải là cái nào cũng ngon mới đúng . Cái này thật sự không biết thật  . Nếu bạn biết thì chỉ giúp nhé . Chứ mình nhìn vào đây thì hoa cả mắt<span class="link"> http://www.tic.vn/vi/thongtinbaogiachitiet.asp?idbaogia=91</span>

Rất cảm ơn hai bạn đã nhiệt tình giúp đỡ mình . Tối nay sẽ lại thức sáng đêm để nghiên cứu tiếp . Gần 2 tháng nay  , ngày nào cũng ngủ có 3 4 tiếng :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113469</guid>
				<link>/hvaonline/posts/list/18838.html#113469</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 23:27:59]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Có người bảo mình 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>* Open php.ini
* Find safe_mode = off and change it to safe_mode = on
* Do same thing with safe_mode_gid = off
* Restart appserv</pre>
		</div>

Cũng đã thử , hi vọng có kết quả .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113470</guid>
				<link>/hvaonline/posts/list/18838.html#113470</link>
				<pubDate><![CDATA[Sun, 3 Feb 2008 23:37:46]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
Hic . Hình như bạn hiểu nhầm . Cái trianglemu.com nó chẳng có gì cả , chỉ là vài cái trang index quảng cáo , dẫn đến website chính mà mình host . Mình mua host ,domain trianglemu.com của servage.net để có 1 cái domain cố định , upload cái CLIENT cho gamer download về , và 1 cái forum cho gamer tiện trao đổi . Chứ nó không hỗ trợ MSSQL  , không thể đưa cái web chính lên đó được . mà cái web này rất quan trọng . Người mới vào chơi phải vào đó để tao tài khoản , và rất nhiều vấn đề khác nữa , không thể thiếu được.
&nbsp;
		</blockquote>

Ờ, cái webserver đang hosting trianglemu.com chạy trên nền linux, cài Apache 1.3.x, PHP 5.2.3, nhưng nó chỉ mở cổng 80 TCP và không hề cài MySQL.
 Tuy nhiên servage.net có một Datacenter khổng lồ, có tới 1000 MySQL. Vì các server của nó đều chạy trên nền Linux nên nó không hỗ trợ Ms SQL, như SQL 2000 hay 2005 chẳng hạn. 
Sao bạn không chuyển sang dùng MySQL, để website trianglemu.com  có thể chạy độc lập, có đủ tính năng cần thiết mong muốn, như tôi đề nghị?. (<i>Hay bạn chưa quen Linux lắm</i>). Cũng như sao bạn không tìm một công ty web hosting khác có các webserver chạy trên nền Windows và có hỗ trợ Ms SQL để hosting trianglemu.com?  

 Những thứ trong<span class="link"> http://www.tic.vn/vi/thongtinbaogiachitiet.asp?idbaogia=91</span> đa phần là của Cisco, nên giá rất mắc.
Vả lại cũng không có cái nào phù hợp với yêu cầu của bạn. Có dịp tôi sẽ cho bạn xem cái tôi đang dùng, khá rẽ. Chỉ bằng giá một Desktop loại tốt thôi. Còn nếu dùng cái xịn nhất  thì cũng chỉ trên dưới 15 triệu đồng thôi. 

 <i>À quên, trong hệ thống của bạn nếu hardware (như NIC, switch...) hư hỏng, trục trặc, thì thường chỉ gây ra hiện tượng gián đoạn việc truyền các gói tin thôi, ít khi có hiện tượng gây ra, tạo ra các gói tin hay request malformatted. Theo tôi nên xem kỹ các service và việc config. hệ thống, cũng như ảnh hưởng của việc hacker tấn công vào hệ thống</i>. 
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113476</guid>
				<link>/hvaonline/posts/list/18838.html#113476</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 00:54:06]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hi . Nhìn bảng giá trong đó mà chóng mặt . Nếu được bạn cho mình biết hiệu , model của cái router của bạn nhé . Và giá của nó luôn :D .Mình cũng muốn dùng MYSQL nhưng thiết kế của MUServer không cho phép nên cũng không dùng LINUX được. Và bắt buộc SQL Server phải là mình host . Cái mình cần là PHP của Apache Server có support php_mssql thôi :( Mà dạo quanh vài hosting thấy không có . Mà mình vẫn thích mình host luôn cái web :D Toàn quyền kiểm soát dù là không biết kiếm soát ^^

Hiện mình đang nghiên cứu giới hạn số lượng SYN được phép trong 1 giây là 2 hoặc 3 là tối đa như comale nói và nghiên cứu  database connection pool , phải thử một đống các giải pháp rồi mới chợp mắt , đợi đợt tấn công tiếp theo vào lúc 8g sáng mai. Cứ tối nào cũng thử vài thứ rồi hi vọng , 8g dậy là thấy hi vọng tan biến vì màn hình là con số ReceiveQueue tăng ào ào.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113479</guid>
				<link>/hvaonline/posts/list/18838.html#113479</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 01:16:01]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <blockquote>À quên, trong hệ thống của bạn nếu hardware (như NIC, switch...) hư hỏng, trục trặc, thì thường chỉ gây ra hiện tượng gián đoạn việc truyền các gói tin thôi, ít khi có hiện tượng gây ra, tạo ra các gói tin hay request malformatted. Theo tôi nên xem kỹ các service và việc config. hệ thống, cũng như ảnh hưởng của việc hacker tấn công vào hệ thống. &nbsp;
		</blockquote>

Vâng . Mình sẽ xem xét kĩ lại xem sao . Cảm ơn bạn đã nhắc nhở.

Có đọc một số bài về iptables hay quá , mà chỉ triển khai được trên LINUX :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113480</guid>
				<link>/hvaonline/posts/list/18838.html#113480</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 01:22:32]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Trường hợp khẩn cấp . Không biết hắn đang giở trò gì với mình đây . Huhu. Bác nào mà nhìn log này mà bảo " không ai tấn công em " nữa thì thì em đập đầu vào tường mất thôi .
xem giúp em đi.<span class="link"> http://stukyo.com/access.rar</span>
Dường như hắn ta đang SCAN gì đó .

Đoạn đầu của error.log, thấy có rất nhiều request đến stageb.swf . Còn có cả đống request gì

[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../..%c0%af../winnt/system32/cmd.exe?/c+dir+c:\\ HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../..%c0%af../winnt35/system32/cmd.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../..%c0%af../winnt351/system32/cmd.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../..%c0%af../wint/system32/cmd.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../cmd.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../cmd.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../cmd1.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../cmd1.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../sensepost.exe HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../..%c0%af../sensepost.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c0%af../winnt/system32/cmd.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c1%1c..%c1%1c../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c1%1c../winnt/system32/cmd.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c1%9c..%c1%9c../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c1%9c../winnt/system32/cmd.exe?/c+dir HTTP/1.0 to file
[Mon Feb 04 00:19:30 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%c1%af..%c1%af../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] File does not exist: C:/xampp/htdocs/..\xd0\xaf
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] File does not exist: C:/xampp/htdocs/..\xd1\x9c
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%e0%80%af..%e0%80%af../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%f0%80%80%af..%f0%80%80%af../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%f8%80%80%80%af..%f8%80%80%80%af../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] (22)Invalid argument: Cannot map GET /..%fc%80%80%80%80%af..%fc%80%80%80%80%af../winnt/system32/cmd.exe?/c+dir+c: HTTP/1.0 to file
[Mon Feb 04 00:19:31 2008] [error] [client 117.6.127.180] Invalid URI in request GET /..\\%e0\\%80\\%af../..\\%e0\\%80\\%af../..\\%e0\\%80\\%af../winnt/system32/cmd.exe\\?/c\\+dir+c: HTTP/1.0


Hiện tại , em đang giới hạn maxthreads lại 100 . Nên log báo hết threads , có nên mở tiếp không các bác ?
Kinh quá . Xem hộ em với.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113489</guid>
				<link>/hvaonline/posts/list/18838.html#113489</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 02:45:49]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hiện tại mình đã block IP đó bằng .htaccess . Nhưng hắn vẫn đang tiếp tục thăm dò . Mấy bác xem giùm xem kiểu tấn công của hắn là kiểu gì và có thể có nguy hại gì không ? Mình có nên chuẩn bị bảo mật gì cho trước mắt không? Hic 117.6.127.180. Lại là IP từ VIETTEL.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113493</guid>
				<link>/hvaonline/posts/list/18838.html#113493</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 03:00:13]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Em block IP rồi . Hắn vẫn request tiếp dù bị denied .
<blockquote>[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/_vti_log
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/_vti_script
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/_vti_shm
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/_vti_txt
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/a
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/abc
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/about
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/acart
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/acceso
[Mon Feb 04 01:09:11 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/access
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/access-log
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/access.log
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/accesslog
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server 
configuration: C:/xampp/htdocs/accesswatch
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/acciones
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/account
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/accounting
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/accounts
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/achievo
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/active
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/activex
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/ad
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/address
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/adm
[Mon Feb 04 01:09:12 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/admentor
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/admin
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/admin.html
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/administration
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/administrator
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/admins
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/adminuser
[Mon Feb 04 01:09:13 2008] [error] [client 117.6.127.180] client denied by server configuration: C:/xampp/htdocs/ads&nbsp;
		</blockquote>

<blockquote>[Mon Feb 04 01:11:49 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../../winnt/repair/sam._ HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../../winnt/win.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../autoexec.bat HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../boot.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../config.sys HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../etc/hosts HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../etc/passwd HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../../etc/shadow HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../autoexec.bat HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../boot.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../conf/Eserv.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../etc/passwd HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../scandisk.log HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../winnt/repair/sam HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../winnt/repair/sam._ HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../../winnt/win.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../boot.ini HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../config.sys HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../etc/passwd HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../hosts HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../passwd HTTP/1.0
[Mon Feb 04 01:11:50 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../shadow HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../template/shared/indexTemplate.xml HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../windows/repair/sam._ HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../windows/user.dat HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../windows/win.ini HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../windows\\win.ini HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../../winnt/win.ini HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../..\\ HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../boot.ini HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../config/html/cnf_gi.htm HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../examples//WEB-INF/../../../../../ HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../scandisk.log HTTP/1.0
[Mon Feb 04 01:11:51 2008] [error] [client 117.6.127.180] Invalid URI in request GET /../ssd.ini HTTP/1.0&nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113495</guid>
				<link>/hvaonline/posts/list/18838.html#113495</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 03:10:35]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Từ forum VBB của mình nhận được rất nhiều mail gửi về . Hắn đánh luôn cả diễn đàn trên host trianglemu.com (<span class="link"> http://trianglemu.com/diendan</span> )

<blockquote>The following message was sent to you via the Diễn Đàn TriAngle MU Contact Us form by 1.&lt;ptxscan-demo@MTAuMC4wLjQ.com&gt;
Referring Page:<span class="link"> http://www.trianglemu.com/PTtpnvsrbybm.htm</span>
IP Address: 116.118.40.235
User Name: Khách
User ID: 0
&nbsp;
		</blockquote>
Google thông tin về ptxscan thì toàn là ba cái ngôn ngữ gì đâu ko :(
Trên host trianglemu.com không có file này PTtpnvsrbybm.htm.Hiện mình đã bắt verify image khi send feedback cho vbb forum . Hi vọng ko bị về forum nữa . Còn apache thì sao nhỉ :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113497</guid>
				<link>/hvaonline/posts/list/18838.html#113497</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 03:35:30]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[  Hì hì! Xem trên log mà thấy như vậy, hay phải thấy như vậy mới đúng là bị "tấn công" toàn diện, mọi kẽ hở. Còn như nội dung event log của bạn đưa ra trong các post đầu tiên, thì ai đã quen xem log (<i>thí dụ xem  log trên máy của mình sau khi tự mình tấn công DoS đủ loai vào chính máy mình để kiểm tra bảo mật và khả năng chịu đựng của hệ thống</i>) sẽ không thể nói, rất khó nói là máy bạn đã bị tấn công, hay ít nhất là bị tấn công qua cổng 80.

 Ngoài ra thì những cái gì có chữ PX thì chắc là của lão PX chứ còn gì nữa? Thôi rỡn chút cho vui. Đó là vì tôi đã check khá kỹ hệ thống của bạn, cả ta1.myvnc.com và trianglemu.com, chủ yếu <font color='yellow'>để tìm ra những vulnerability liên quan đến khả năng hệ thống dễ bị overflow hay bị ngưng trệ khi bị một hacker tấn công DoS vào hệ thống</font>, thông qua cổng 80 hay bất cứ cổng nào đang mở trên hệ thống. <i>Tôi không dùng Proxy khi check bảo mật, tôi thuê bao dịch vụ ADSL của Viettel và VDC, 2 nguồn.</i>

 Hiện nay tôi chưa tìm ra được một vulnerability như vậy, nên tôi đã, đang nghiêng về khả năng là những trục trặc vừa qua trên hệ thống chủ yếu là từ nguyên nhân: sự <font color='yellow'>hạn chế của tên miền năng động loại secondary class</font>, hạn chế từ <font color='yellow'>nhà cung cấp dịch vụ Dynamic DNS</font>, từ <font color='yellow'>ISP</font>, <font color='yellow'>mạng của VN</font>...và cả việc <font color='yellow'>incorrect config</font>. (cấu hình chưa đúng ) hệ thống. Tôi không tin là một hacker đã gây cho bạn những trục trặc như vậy. Nếu có một hacker tấn công vào bạn, nó chỉ "góp phần" nhỏ làm hệ thống trục trặc mà thôi.

 Còn những lỗi khác sau này có dịp rảnh rang tôi sẽ nói cho bạn. Cũng như tôi sẽ nói rõ về Advanced security router, cho bạn xem tận mắt nó đang hoạt động và bạn sẽ thấy có thích nó hay không? Đầu tư một số tiền vào đó mà sau này bạn không thích, thì lại oán là lão PX xui dại.

Note:<i>À quên, đã thông báo là sẽ check rồi, mà có lúc bạn lại block IP lại thì hỏng to. Lần sau tôi "thay"WAN IP đấy. Hề hề. Chỉ rỡn cho vui thôi. </i>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113499</guid>
				<link>/hvaonline/posts/list/18838.html#113499</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 07:49:30]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . thế mà làm đau tim quá trời . 5 g sáng ngủ . 7g sáng dậy ngay để xem xem tình hình ra sao rồi. :| Bác có nhiều tools hay ghê . Mà flooder đâu có check kĩ như bác , nó vào http://www.trianglemu.com để xem link của mục Quản lý tài khoản hiện tại ( phải cho mọi người biết để tạo tài khoản , ...) thì sẽ thấy là http://ta1.myvnc.com/tamu/ &lt;- cứ đánh thẳng vào nó luôn thôi.  Hic . Thôi em nằm , vừa nằm vừa canh tiếp  . mở cái Magnifier , đưa chuột vào chữ RecvQ , phóng to ra xem số  . Bình thường chỉ có 0 , 1 , 2 . Lâu lâu mở mắt thấy vài trăm , vài ngàn là biết.... tắt apache thôi.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113501</guid>
				<link>/hvaonline/posts/list/18838.html#113501</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 09:03:28]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic. Vẫn đang bị flood :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113505</guid>
				<link>/hvaonline/posts/list/18838.html#113505</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 11:50:15]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Hic. Vẫn đang bị flood :(&nbsp;
		</blockquote>
Hello levinthan,

Tôi cũng là người theo dõi khá sát tình trạng của bạn trong mấy ngày gần đây. Rất tiếc, các pcap files đã được xoá (theo khuyến cáo của anh <i>conmale</i>) nên tôi cũng ko thể biết chính xác những gì đã được gửi tới web server của bạn. Theo phỏng đoán của tôi, bên cạnh việc hiệu chỉnh apache theo sự trợ giúp của anh <i>conmale,</i> có lẽ bạn cần hiệu chỉnh thêm một chút các tham số liên quan tới phần TCP/IP của Windows mà Web server đang chạy trên nó, từ đó hi vọng giảm thiểu tình trạng SYN flood(!). Bạn có thể sử dụng công cụ <span class="link"> http://www.sniff-em.com/hardenit.shtml</span>. Lưu ý: do hệ thống hiện tại của bạn đang bị tấn công, nên tốt nhất bạn lựa chọn các giá trị tùy chọn <b>thắt chặt nhất</b>, sau đó nới lỏng dần từng tham số rồi xem phản ứng của hệ thống ra sao khi sử dụng công cụ trên.

Ngoài ra, theo gợi ý của bác <i>PXMMRF</i>, nếu có thể bạn cũng nên cân nhắc khả năng tăng cường phần hardware cho hệ thống. Nếu bạn đã có 2 ADSL lines, bạn có thể tham khảo sản phẩm <b>Draytek Security Router</b> hỗ trợ out-bound load balancing trên 2 WAN interfaces. Chi phí cho Router này cũng tầm trên dưới 10 tr VNĐ. 

Hi vọng chút góp ý phần nào giúp được bạn vượt qua được đợt khó khăn này.

Thân mến.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113511</guid>
				<link>/hvaonline/posts/list/18838.html#113511</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 14:47:36]]> GMT</pubDate>
				<author><![CDATA[ prof]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Chào bạn, theo những gì bạn đã nói thì mình có 1 ý thủ công
Bạn nói khi tắt Apache thì games chạy bình thường, mình nghĩ vậy là nó không dos trực tiếp vào servergame. Mình xin đưa ra vài câu hỏi để suy nghĩ
Trong lúc bị dos
-Bạn có thử đưa web tĩnh lên.
-Bạn có thử bỏ tất cả các dịch vụ như reset, xóa mật khẩu,đổi giới tính, chuyển tiền, shop,.... rồi sau đó thêm từng dịch vụ 1 vào, rồi xem trạng thái hệ thống thế nào.... 
Nếu sau khi thêm vào 1 dịch vụ mà thấy bất ổn thì mới bắt đầu soi cái dịch vụ đó.
Mong là khả quan hơn , 



<p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
Hic. Vẫn đang bị flood  :( 
&nbsp;
		</blockquote>

cười cái nào  B-) ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113512</guid>
				<link>/hvaonline/posts/list/18838.html#113512</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 14:57:24]]> GMT</pubDate>
				<author><![CDATA[ seraphpl]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hi . Lại có người giúp nữa rồi. Vui quá . Mình đã giới hạn các thông số của apache server ( timeout , MaxKeepAliveRequests , keelalivetimeout ,ThreadsPerChild ,MaxRequestsPerChild, ThreadLimit ) nhưng vẫn không khắc phục được. Mình có đọc một số bài viết giới hạn lại TCP/IP trong windows bằng cách chỉnh sửa registry . Để mình thử cái đó xem sao .Có phải cái này không nhỉ 
<blockquote>Open your registry and find the key below.

Create a new DWORD value called "SynAttackProtect" and set it to either 0, 1 or 2 based on the table below.

This value causes Transmission Control Protocol (TCP) to adjust retransmission of SYN-ACKS. When you configure this value, the connection responses time out more quickly in the event of a SYN attack (a type of denial of service attack).

    * 0 (default) - typical protection against SYN attacks
    * 1 - better protection against SYN attacks that uses the advanced values below.
    * 2 (recommended) - best protection against SYN attacks. This value adds additional delays to connection indications, and TCP connection requests quickly timeout when a SYN attack is in progress. 

Optional Advanced Values

For extra control you can create these additional DWORD values in the same key for each of the items below. They are not required for SynAttackProtect to be effective.

    * TcpMaxHalfOpen - default value is "100"
    * TcpMaxHalfOpenRetried - default value is "80"
    * TcpMaxPortsExhausted - default value is "5"
    * TcpMaxConnectResponseRetransmissions - default value is "3" &nbsp;
		</blockquote>
 Mình đã up lại đoạn sniff trong quá trình bình thường và bị flood , bạn nào rảnh có thể xem giúp mình nhé<span class="link"> http://stukyo.com/flood.rar</span>
Mình sẽ tham khảo một số router xem sao . Có lẽ giá cao thật nhưng nếu nó lọc được 1 ít flood thì cũng cam .<span class="link"> http://www.draytek.com.vn/category.aspx?cat=2</span>
Ở đây có vài cái router support load balancing . Nhưng quan trọng nhất là về mặt security ,  cái nào cũng là " best security , anti ddos, flood " . cái dlink 520t của mình cũng quảng cáo như vậy :(
Hiện mình đang ngắm 2 cái là Vigor2910 Dual WAN Security Router ( 170+ $ ) và Vigor2950 Dual WAN Security Router (460+ $). Không biết cái nào phù hợp hơn nhỉ . 
<blockquote>Chào bạn, theo những gì bạn đã nói thì mình có 1 ý thủ công
Bạn nói khi tắt Apache thì games chạy bình thường, mình nghĩ vậy là nó không dos trực tiếp vào servergame. &nbsp;
		</blockquote>

Chính xác là flood vào webserver qua port 80 , mình đã thử change port , thậm chí change port của apache qua port khác , isa listen port 80 rồi chuyển qua đúng port cho apache mà vẫn không si nhê. Vì cái web của mình chẳng có gì . 90% là kết nối , lưu , xuất dữ liệu từ mssql . news cung lấy từ mssql ra , chỉ còn 2 chức năng must have là reg account , change password , user control thôi . bỏ mấy cái tính năng này ra , không kết nối đến mssql nữa thì ... là web trắng rồi :D Cảm ơn các bạn đã giúp đỡ. Sự thật là không vui nổi . Trước giờ thảnh thơii lắm . Có nhiều thời gian , còn giờ cứ phải ngồi trên máy suốt luôn , ngày ngày đêm đêm mà canh stop service apache khi bị flood , tìm cách khắc phục . ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113520</guid>
				<link>/hvaonline/posts/list/18838.html#113520</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 15:54:16]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bạn dùng 2 line riêng, 1 cho web, 1 cho server (servergame) 
Ms sql bạn để trên máy web hay máy server?
Web liên hệ với server qua trao đổi dữ liệu với sql
Không biết bạn thiết kế theo mô hình nào
1) <font color='red'>Web</font> + MS sql &lt;--------------&gt; <font color='cyan'>servergame</font>
2) <font color='red'>Web</font> &lt;--------&gt; MS sql &lt;-----&gt; <font color='cyan'>servergame</font>
3) <font color='red'>Web</font> &lt;--------------&gt; MS sql + <font color='cyan'>servergame</font>
(Từng cụm là từng máy, 2 màu thể hiện 2 line khác nhau)
Nó dos web mà ảnh hưởng tới server thì mình nghĩ là trong phần dịch vụ của web, nếu không thì chỉ có web có vấn đề thôi, đằng này server cũng &quot;hưởng&quot; theo.  :D ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113522</guid>
				<link>/hvaonline/posts/list/18838.html#113522</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 16:21:13]]> GMT</pubDate>
				<author><![CDATA[ seraphpl]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">seraphpl wrote:</cite><br>
		<blockquote>Bạn dùng 2 line riêng, 1 cho web, 1 cho server (servergame) 
Ms sql bạn để trên máy web hay máy server?
Web liên hệ với server qua trao đổi dữ liệu với sql
Không biết bạn thiết kế theo mô hình nào
1) <font color='red'>Web</font> + MS sql &lt;--------------&gt; <font color='cyan'>servergame</font>
2) <font color='red'>Web</font> &lt;--------&gt; MS sql &lt;-----&gt; <font color='cyan'>servergame</font>
3) <font color='red'>Web</font> &lt;--------------&gt; MS sql + <font color='cyan'>servergame</font>
(Từng cụm là từng máy, 2 màu thể hiện 2 line khác nhau)
Nó dos web mà ảnh hưởng tới server thì mình nghĩ là trong phần dịch vụ của web, nếu không thì chỉ có web có vấn đề thôi, đằng này server cũng &quot;hưởng&quot; theo.  :D &nbsp;
		</blockquote>

Nó đấy , là nó đấy , vấn đề mà mình đau đầu , không hiểu nổi . Cả 3 phương án trên mình đều đã thử hết . Và cả 3 phương án đều bị flood tè le . Biết là bị tấn công . Biết là bị tấn công từ web . Mà không biết là how'd they do that :(]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113523</guid>
				<link>/hvaonline/posts/list/18838.html#113523</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 16:25:45]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Mình cũng đọc qua hết kí sự và hiểu tình trạng của bạn. Chỉ mong bạn nên coi đây là một cơ hội để nâng cao skill defending cho mình. Dù kết quả ra sao bạn cũng học được rất nhiều phải kô?

Mình không biết sâu và có kinh nghiệm gì về hosting và networking security, nhưng qua theo dõi mình có rút ra vài điều trên phương diện logic, biết đâu ngáp phải ruồi :)

Theo mình hiểu thì khả năng là flooder tìm ra 1 url hợp lệ mà task ứng với url này yêu cầu một khối lượng lớn resource của dbserver. Hiện tại chưa thể ngăn chặn từ gốc bằng firewall vì chưa nắm rõ pthức tcông nhưng để tạm thời hạn chế và khoanh vùng, mình xin đưa ra 1 số gợi ý nhắm vào phần truy cập của web lên DB. 
1.Disable lần lượt hoặc (nhị phân) các thao tác của user hoặc guest theo thứ tự giảm dần độ "nặng" của thao tác lên DB, và theo dõi thay đổi áp lực flood.
2. Xem lại các module thống kê xem có cái nào yêu cầu dữ liệu reatime hoặc đáp ứng request tức thời không, mặt khác tăng thời gian tái cập nhật dữ liệu asyn của các module stats, bỏ các auto refresh.
3. Một hướng nữa là bạn tạm thời dừng server game và mở  log của DB để theo dõi những access từ web, bật log của một số table chủ yếu như user info,... để phát hiện access hay update tập trung những bản nào từ đó lần ra module hay link mà flooder đang dùng để attack.
Xin bạn hãy coi đây là 1 thử thách hơn là tai họa!]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113533</guid>
				<link>/hvaonline/posts/list/18838.html#113533</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 18:05:45]]> GMT</pubDate>
				<author><![CDATA[ vivashadow]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bổ sung: (kô sửa bài trên dc)
4. Tạo một db user khác để dùng cho web php, và thắt chặt quyền và balance cho nó, phần nào sẽ đỡ cho user dành cho game server]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113534</guid>
				<link>/hvaonline/posts/list/18838.html#113534</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 18:17:55]]> GMT</pubDate>
				<author><![CDATA[ vivashadow]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">vivashadow wrote:</cite><br>
		<blockquote>Bổ sung: (kô sửa bài trên dc)
4. Tạo một db user khác để dùng cho web php, và thắt chặt quyền và balance cho nó, phần nào sẽ đỡ cho user dành cho game server&nbsp;
		</blockquote>

Wao . Ý kiến này hay quá . Quả là chưa thử , chưa nghĩ tới . Cảm ơn bạn nhiều]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113536</guid>
				<link>/hvaonline/posts/list/18838.html#113536</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 18:47:46]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Hi . Lại có người giúp nữa rồi. Vui quá . Mình đã giới hạn các thông số của apache server ( timeout , MaxKeepAliveRequests , keelalivetimeout ,ThreadsPerChild ,MaxRequestsPerChild, ThreadLimit ) nhưng vẫn không khắc phục được. Mình có đọc một số bài viết giới hạn lại TCP/IP trong windows bằng cách chỉnh sửa registry . Để mình thử cái đó xem sao .Có phải cái này không nhỉ 
<blockquote>Open your registry and find the key below.

Create a new DWORD value called "SynAttackProtect" and set it to either 0, 1 or 2 based on the table below.

This value causes Transmission Control Protocol (TCP) to adjust retransmission of SYN-ACKS. When you configure this value, the connection responses time out more quickly in the event of a SYN attack (a type of denial of service attack).

    * 0 (default) - typical protection against SYN attacks
    * 1 - better protection against SYN attacks that uses the advanced values below.
    * 2 (recommended) - best protection against SYN attacks. This value adds additional delays to connection indications, and TCP connection requests quickly timeout when a SYN attack is in progress. 

Optional Advanced Values

For extra control you can create these additional DWORD values in the same key for each of the items below. They are not required for SynAttackProtect to be effective.

    * TcpMaxHalfOpen - default value is "100"
    * TcpMaxHalfOpenRetried - default value is "80"
    * TcpMaxPortsExhausted - default value is "5"
    * TcpMaxConnectResponseRetransmissions - default value is "3" &nbsp;
		</blockquote>
 Mình đã up lại đoạn sniff trong quá trình bình thường và bị flood , bạn nào rảnh có thể xem giúp mình nhé<span class="link"> http://stukyo.com/flood.rar</span>
...
&nbsp;
		</blockquote>
Thông tin về bài viết đó chưa đủ. Tôi đã để link của công cụ mà tôi giới thiệu cho bạn trong chữ "này" rồi mà. Cụ thể là ở đây:<span class="link"> http://www.sniff-em.com/hardenit.shtml.</span> Bạn tải về và thắt chặt thêm cho phần TCP/IP trên Web server của mình. 
<blockquote>
...
Bạn có thể sử dụng công cụ này. Lưu ý: do hệ thống hiện tại của bạn đang bị tấn công, nên tốt nhất bạn lựa chọn các giá trị tùy chọn thắt chặt nhất, sau đó nới lỏng dần từng tham số rồi xem phản ứng của hệ thống ra sao khi sử dụng công cụ trên. 
&nbsp;
		</blockquote>
<blockquote>
Mình sẽ tham khảo một số router xem sao . Có lẽ giá cao thật nhưng nếu nó lọc được 1 ít flood thì cũng cam .<span class="link"> http://www.draytek.com.vn/category.aspx?cat=2</span>
Ở đây có vài cái router support load balancing . Nhưng quan trọng nhất là về mặt security ,  cái nào cũng là " best security , anti ddos, flood " . cái dlink 520t của mình cũng quảng cáo như vậy :(
Hiện mình đang ngắm 2 cái là Vigor2910 Dual WAN Security Router ( 170+ $ ) và Vigor2950 Dual WAN Security Router (460+ $). Không biết cái nào phù hợp hơn nhỉ . 
...
&nbsp;
		</blockquote>
Bạn nên tự cân nhắc xem thiết bị nào phù hợp với túi tiền và nhu cầu của mình. Tớ sẽ ngâm cứu đoạn sniff mà bạn cung cấp xem có manh mối gì không. Hi vọng có thể giúp được bạn điều gì đó.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113540</guid>
				<link>/hvaonline/posts/list/18838.html#113540</link>
				<pubDate><![CDATA[Mon, 4 Feb 2008 20:29:11]]> GMT</pubDate>
				<author><![CDATA[ prof]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <blockquote>
Thông tin về bài viết đó chưa đủ. Tôi đã để link của công cụ mà tôi giới thiệu cho bạn trong chữ "này" rồi mà. Cụ thể là ở đây:<span class="link"> http://www.sniff-em.com/hardenit.shtml.</span> Bạn tải về và thắt chặt thêm cho phần TCP/IP trên Web server của mình. &nbsp;
		</blockquote> 
Xin lỗi , mình đọc không kĩ nên tưởng đó là phần mềm sniff.
<blockquote>Tạo một db user khác để dùng cho web php, và thắt chặt quyền và balance cho nó, phần nào sẽ đỡ cho user dành cho game server &nbsp;
		</blockquote>
Cách này đã thất bại luôn rồi. HIc.
<blockquote>Tớ sẽ ngâm cứu đoạn sniff mà bạn cung cấp xem có manh mối gì không. Hi vọng có thể giúp được bạn điều gì đó.&nbsp;
		</blockquote> Cảm ơn bạn rất nhiều. Đã thiết lập Harden-It rồi . Sáng mai mình sẽ có kết quả :D]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113554</guid>
				<link>/hvaonline/posts/list/18838.html#113554</link>
				<pubDate><![CDATA[Tue, 5 Feb 2008 00:21:08]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">seraphpl wrote:</cite><br>
		<blockquote>Bạn dùng 2 line riêng, 1 cho web, 1 cho server (servergame) 
Ms sql bạn để trên máy web hay máy server?
Web liên hệ với server qua trao đổi dữ liệu với sql
Không biết bạn thiết kế theo mô hình nào
1) <font color='red'>Web</font> + MS sql &lt;--------------&gt; <font color='cyan'>servergame</font>
2) <font color='red'>Web</font> &lt;--------&gt; MS sql &lt;-----&gt; <font color='cyan'>servergame</font>
3) <font color='red'>Web</font> &lt;--------------&gt; MS sql + <font color='cyan'>servergame</font>
(Từng cụm là từng máy, 2 màu thể hiện 2 line khác nhau)
Nó dos web mà ảnh hưởng tới server thì mình nghĩ là trong phần dịch vụ của web, nếu không thì chỉ có web có vấn đề thôi, đằng này server cũng &quot;hưởng&quot; theo.  :D &nbsp;
		</blockquote>

 Suy nghĩ, hay chính xác hơn là cách đặt vấn đề, như bạn <b>seraphp</b> trên đây là khoa học, hợp lý.

Khi một hệ thống có nhiều thiết bị, thưc hiện các nhiệm vụ, chức năng khác nhau, <font color='yellow'>thì vấn đề quan trọng nhất là phải thiết lập một sơ đồ bố trí (topology) hợp lý trên mạng</font>. Một sơ dồ hợp lý sẽ giảm thiểu các trục trặc cho hệ thống khi hoạt động, cũng như hạn chế tối đa số lượng và tác hại của các cuộc tấn công từ bên ngoài, trong đó có tấn công DoS.
Từ sơ đồ mạng đã vạch ra, căn cứ yêu cầu, nhiệm vụ của hệ thống (thí dụ public web, xây dựng gameonline, forum, tạo file server... vân vân), ta mới chọn thiết bị phù hợp, kể cả các thiết bị mạng.

 Vì vậy chúng ta không nên:
- Làm ngược lại, nghĩa là "nhảy thẳng vào thiết bị", không hề suy nghĩ đến một sơ đồ mạng hợp lý. Khi có trục trặc thì loay hoay sửa chữa, cấu hình (config.), harden lại thiết bị...mà không hề nghĩ đến sơ đồ hệ thống. Vì có thể sơ đồ hệ thống hiện hữu đã có những sai sót cơ bản. <i>Khi một chiếc máy bay mới thiết kế gặp trục trặc thì việc khắc phục trước hết là việc của Tổng công trình sư, không phải là việc một hay hai kỹ sư cơ khí, điện, thấy máy bay hư hỏng bèn nhảy bổ vào sửa chữa lung tung.</i>

- Kỹ thuật mạng (trong đó có thiết bị mạng) hiện phát triển mạnh, có thể nói là như vũ bão. Có rất nhiều kỹ thuật mới cũng như thiết bị mới có khả năng hoàn thành đồng thời nhiều nhiệm vụ phức tạp, mà trước đây phải nhiều thiết bị mới làm đựoc. Vì vậy chúng ta không nên suy nghĩ và thực hiện một việc, công trình theo cách mà chúng ta đã học thời học sinh, sinh viên, hay theo các kiến thức cũ kỹ trước đây.

Trở lại vấn đề của bạn levinthan thì theo tôi trước hết bạn phải tìm ra một <font color='yellow'>optimal topology (sơ đồ tối ưu)</font> cho hệ thống của bạn. Sau đó tìm các thiết bị mới (nếu thấy rất cần và có...tiền), rồi lắp hệ thống theo sơ đồ và chạy thử, kiểm tra hệ thống khi bị tấn công, như vừa rồi.

 Hiện nay có vẻ bạn đang "rối"? Tôi hình dung tâp tin httpd.conf trong Apache (vốn dài hơn 10 trang A4 khi in ra) có lẽ đã dày đặc các dòng sửa chữa, bổ sung, mà chắc bạn cũng không nhớ hết. <i>Giống như, thôi thì khi mắc trọng bệnh, ai mách thuốc gì, bèn uống thuốc đó ngay. Thành ra cơ thể là kho chứa thuốc.</i>

 Trong một hệ thống Public web, có nhiều service, thì web server (đây ý nói là trình quản lý web như Apache, IIS...) <font color='yellow'>luôn là khâu yếu nhất, dễ tổn thương nhất và nó lại nằm ở lớp cuối cùng, sâu nhất trong mô hình hệ thống </font>(lớp Application). Vì vậy cố gắng không thể để, hay hạn chế các gói tin "tấn công" vào đến đó. Cần cố gằng loại nó từ vòng ngoài. Trước một cuộc tấn công DoS hay DDoS mạnh, viêc config. lại Apache, thí dụ config. trong httpd.conf, là không cần thiết, mất công. Nó chỉ có tác dụng phòng thâm nhập dùng các exploit code.

Ngoài ra tôi thấy bạn phải canh chừng để tắt Apache khi bị tấn công-mất công quá. Song đó là việc cần làm, vì như tôi đã nói, Apache dễ bị tổn thương. Nhưng có một cơ cấu trong firewall của các security router, như  Draytek router, làm nhiệm vụ ấy một cách tự động và thông minh, theo chỉ định lúc đầu của ta. 

- 
-  ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113569</guid>
				<link>/hvaonline/posts/list/18838.html#113569</link>
				<pubDate><![CDATA[Tue, 5 Feb 2008 08:43:26]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Bạn nói rất có lý . Mình không phải không suy nghĩ khi giải quyết . Mình đã thử tổ chức lại mô hình mạng cho hợp lý , thử đủ giải pháp bằng phần mềm để phòng chống nhưng vẫn không có tác dụng. Có lẽ giải pháp mua 1 security router hiện nay là bắt buộc rồi . Gần tết nên kinh phí hơi hạn hẹp . Mình tính mua Draytek Vigor2910 . Có chức năng Load Balancing &lt;- Cái này không quan trọng cho lắm vì mình cần chức năng security để chống ddos và flood , liệu nó có khả năng không nhỉ. thấy quảng cáo thì có nhưng chắc chỉ những người đã sử dụng mới biết . Mấy bạn cho mình ý kiến nhé .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113590</guid>
				<link>/hvaonline/posts/list/18838.html#113590</link>
				<pubDate><![CDATA[Tue, 5 Feb 2008 16:26:33]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Một số người khuyên  mình nên triển khai kiểu khi bị đánh thì sẽ tự forward sang 1 máy khác để máy đó chịu , không ảnh hưởng đến máy chính . Các bạn cho mình hỏi đây là triển khai kiểu gì và thiết bị cần thiết là gì được không ?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113622</guid>
				<link>/hvaonline/posts/list/18838.html#113622</link>
				<pubDate><![CDATA[Tue, 5 Feb 2008 21:02:57]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hôm nay , log access của mình liên tục nhận được thông báo này , từ IP đó , với nội dung cố định đó . Cho mình hỏi đây là gì vậy mấy bạn ? ....

<blockquote>58.186.167.115 - - [08/Feb/2008:03:29:46 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18692
58.186.167.115 - - [08/Feb/2008:03:29:46 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18692 "-" "Microsoft URL Control - 6.00.8862"
58.186.167.115 - - [08/Feb/2008:03:29:58 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693
58.186.167.115 - - [08/Feb/2008:03:29:58 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693 "-" "Microsoft URL Control - 6.00.8862"
58.186.167.115 - - [08/Feb/2008:03:30:10 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693
58.186.167.115 - - [08/Feb/2008:03:30:10 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693 "-" "Microsoft URL Control - 6.00.8862"
58.186.167.115 - - [08/Feb/2008:03:30:16 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693
58.186.167.115 - - [08/Feb/2008:03:30:16 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693 "-" "Microsoft URL Control - 6.00.8862"
58.186.167.115 - - [08/Feb/2008:03:30:23 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693
58.186.167.115 - - [08/Feb/2008:03:30:23 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693 "-" "Microsoft URL Control - 6.00.8862"
58.186.167.115 - - [08/Feb/2008:03:30:29 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693
58.186.167.115 - - [08/Feb/2008:03:30:29 +0700] "GET /tamu/main.php?op=rankings HTTP/1.1" 200 18693 "-" "Microsoft URL Control - 6.00.8862"&nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#113904</guid>
				<link>/hvaonline/posts/list/18838.html#113904</link>
				<pubDate><![CDATA[Fri, 8 Feb 2008 05:44:16]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hiện mình đã mua Vigor2950 Dual WAN Security Router (460+ $) vẫn không khắc phục được . Thứ nhất là tình trạng bị đánh vào web , ảnh hưởng đến gameserver vẫn còn bị . hic , mấy ngày tết mà không được ăn tết yên ổn . Hôm nay thì lại bị một ... tình trạng mới . Web lag kinh khủng dù game không bị gì , xem log apache thì không thấy gì bất ổn . Nhưng sniff thì thấy từ IP 87.106.56.236 có rất nhiều request quái đản mà apache không ghi nhận được. IP này liên tục request , cứ apache mở lên là request ngay . Do kiến thức có hạn , mình không thể xác định đây là kiểu đánh gì để phòng chống , nhờ các bạn xem giúp.
http://stukyo.com/dontknow.pcap

Tình hình đó thì có lẽ là chỉ bị mất băng thông và làm webserver overload thôi chứ game thì không sao . Như vậy là lại thêm 1 vấn nạn nữa . 1 cái là bị đánh ảnh hưởng đến game ( not fixed yet ) , và bây giờ thêm cái này nữa . Hic . Các bác rảnh xem giúp mình với . Cảm ơn.


//Chỉnh sửa : Hiện mình đã xem IP 87.106.56.236 . Đây là trang web của CXTRA mà mình include code vào trang index của mình để tăng bảo mật . Chắc vì lý do này mà nó tự kết nối đến Cxtra , gây ra tình trạng vừa rồi . Như vậy cái này là do mình . Hic . Mình thử tìm đủ cách bảo mật nhưng không cách nào hiệu quả cả . Mình đã thử gỡ bỏ tất cả các module xuống, chỉ để 2 module là register và account control . Mình đã chạy profier của MSSQL SERVER để xem xem các query nào chạy nhiều , phải read , write nhiều để tối ưu lại . Nhưng dường như ,... hễ có cái gì mà liên quan giữa Webserver và MSSQL SERVER là bị tấn công . Bây giờ mình đang làm lại , đưa Apacheserver và MSSQL server vào chạy chung 1 máy để tiện sniff . Mình sẽ sớm up lên đây kết quả sniff được của port 80 khi bị đánh , ảnh hưởng đến game.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114441</guid>
				<link>/hvaonline/posts/list/18838.html#114441</link>
				<pubDate><![CDATA[Tue, 12 Feb 2008 19:05:55]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Chào các bạn.

Trước tiên mình rất cảm ơn các bạn đã nhiệt tình giúp đỡ mình trong thời gian vừa qua . Mình đã biết được rất nhiều kiến thức qua các lần cố gắng bảo mật cho server . Hôm nay là 12/02 rồi . Đã gần 2 tháng kể từ lúc bị tấn công . Không có ngày nào mà ăn ngủ yên cả . Lúc nào cũng ngồi trên máy để canh và nghiên cứu chống lại . Mình đã thử rất nhiều cách từ router firewall ngoài , firewall software, isa, mod apache , các script cho web , giới hạn connnection ,... đủ thứ nhưng vẫn không khắc phục được . Rất buồn. Cái cảm giác thật sự khó diễn tả ... Hôm nay mình sniff 1 đoạn port 80 ghi lại hoạt động của webserver vào thời điểm bị tấn công ( liên tục từ lúc 05:50 PM và kéo dài 20 phút ) kèm log của apache server.
Rất mong các bạn có thể bỏ chút thời gian ra xem xét và chỉ hộ giúp mình.Lần này mà mình vẫn không sửa được nữa thì có nước bó tay mất :(
Đây là file : http://stukyo.com/120208.rar

Địa chỉ IP của máy là 192.168.1.3 . Hiện mình đã gộp appserv và mssql lại chạy chung trên máy này luôn để tiện theo dõi. 
Rất cảm ơn các bạn đã quan tâm giúp đỡ . ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114457</guid>
				<link>/hvaonline/posts/list/18838.html#114457</link>
				<pubDate><![CDATA[Tue, 12 Feb 2008 20:48:08]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Chào các bạn.

Trước tiên mình rất cảm ơn các bạn đã nhiệt tình giúp đỡ mình trong thời gian vừa qua . Mình đã biết được rất nhiều kiến thức qua các lần cố gắng bảo mật cho server . Hôm nay là 12/02 rồi . Đã gần 2 tháng kể từ lúc bị tấn công . Không có ngày nào mà ăn ngủ yên cả . Lúc nào cũng ngồi trên máy để canh và nghiên cứu chống lại . Mình đã thử rất nhiều cách từ router firewall ngoài , firewall software, isa, mod apache , các script cho web , giới hạn connnection ,... đủ thứ nhưng vẫn không khắc phục được . Rất buồn. Cái cảm giác thật sự khó diễn tả ... Hôm nay mình sniff 1 đoạn port 80 ghi lại hoạt động của webserver vào thời điểm bị tấn công ( liên tục từ lúc 05:50 PM và kéo dài 20 phút ) kèm log của apache server.
Rất mong các bạn có thể bỏ chút thời gian ra xem xét và chỉ hộ giúp mình.Lần này mà mình vẫn không sửa được nữa thì có nước bó tay mất :(
Đây là file :<span class="link"> http://stukyo.com/120208.rar</span>

Địa chỉ IP của máy là 192.168.1.3 . Hiện mình đã gộp appserv và mssql lại chạy chung trên máy này luôn để tiện theo dõi. 
Rất cảm ơn các bạn đã quan tâm giúp đỡ . &nbsp;
		</blockquote>

Hello levinthan,

Tình trạng PDU và fragmentation như trước đã giảm rất nhiều. Đây là dấu hiệu đáng mừng. Có 2 điểm quan trọng trong đoạn sniff trên:

1) Dùng Basic Auth (tamu) không khắc phục được flood đâu vì cái này có thể chèn vào công cụ gì đó để flood một cách dễ dàng.

2) Đoạn sniff ngắn ngủi cho thấy bồ bị x-flash và các x-flash request này chỉ nhắm vào các file trong mục /tamu/images/ và /tamu/swf/. Chúng không dồn dập mà chỉ cách rời khoảng 1 đến 2 giây cho mỗi request.

Tôi nhớ tôi có đề nghị bạn đưa 1 đoạn rule cho mod_security vào để cản x-flash. Có lẽ bồ chưa thực hiện hoặc chưa thực hiện đúng nên không có tác dụng ngăn chặn gì cả.

Tôi không rõ bồ sniff thế nào mà chỉ capture được packets đi từ bên ngoài vào mà không có packets trả lời (đi từ server ra). Bồ thử điều chỉnh lại và sniff lại. Thiếu phần đi ra, việc phân tích cực kỳ hạn chế.

Thân mến.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114531</guid>
				<link>/hvaonline/posts/list/18838.html#114531</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 09:08:51]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>HIc . Mình dùng line VNN 4MB. Cấu hình máy mạnh lắm . Xeon 2g4 . Ram 4g . Hdd 200gb . lúc bị flood , CPU và RAM không hề bị quá tải . Chỉ có apache server thôi .&nbsp;
		</blockquote>


Quá lởm line ADSL 4m của VNN là down 4096 Up 640 giá trọn gói là ~1,8 triệu 1 tháng đã bao gồm thếu   ,máy cũng quá yếu phải dùng con xeon 3,2 g 4 chíp 4 lõi ram ít phải 16G Hdd phải là SCSI 15k/rpm . Vấn đề ở đây là dường truyền bạn đã tham khảo các game khác chưa như MU fpt họ đặt server tại đâu ?, <font color='red'>võ lâm truyền kỳ mất bao tiền đặt máy chủ tại các ISP khác nhau, MUHN ngày xưa đặt máy chủ tại bưu điện hà nội bạn biết kinh phí là bao nhiêu không ngày xưa có bị lag không bây giờ thêu đường truyền của ai lag như thế nào,  </font>    ,vấn đề game cực kỳ tốn băng thông ko làm gì cũng ngang ngữa bị ddos ko tin bạn đặt thử 1 đoạn fim xxx thật hot nên  1 cái host của bạn ví dụ bạn thêu bên mỹ thì có nhiều người down vào die host ngay.  mình nghĩ bạn nên đặt hẳn máy chủ tại các ISP thì hiện tượng của bạn sẽ hết,  còn các MU free toàn thêu host lởm lên cái nào cũng yếu khách hàng kêu ca nhiều, 

còn hiện tượng <font color='red'>Flood Apache Webserver</font>  thì phải là cái web site hocccna.com    đấy nó dùng apache nên khi bị ddos nó sẽ báo như thế  chứ vẫn đề của bạn quá ngớ ngẩn]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114538</guid>
				<link>/hvaonline/posts/list/18838.html#114538</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 11:06:04]]> GMT</pubDate>
				<author><![CDATA[ mèo con xinh xắn]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ To mèo con xinh xắn : Cảm ơn bạn đã đóng góp ý kiến . Nhưng mình làm với quy mô nhỏ , lượng người truy cập cũng có giới hạn nên mình tự biết như thế nào là đủ . Mình đâu phải là công ty , có tiền hàng tỷ đâu mà .... Nhưng thật sự xin lỗi vì vấn đề của mình hoàn toàn không ngớ ngẩn . Cái site hocccna.com mà bạn nói đó là host thuê , bị ddos thì hết bandwidth nên bị suspend , còn site của mình là do mình host với dynamic dns , rõ là bạn không đọc các bài viết của mình mà đã vội chỉ trích .

To comale : Rất cảm ơn comale lần nữa lại giúp đỡ . 
Auth basic . Mình bế tắc lắm nên vạ cái gì làm được là thử ngay . Thấy  1 số site khác cũng làm vậy và ở HVA cũng có 1 guide bảo mật bằng .htaccess nên mình cũng thử . Thử xong cũng bị flood ào ào ^^.
Xflash các file image và swf . Mình hoàn toàn đồng ý vì xem file log apache mình cũng chẳng thấy được gì ngoài các request các file image và swf. Mình cũng ngờ ngợ không biết phải không , tại mình thấy nó không liên tục và nếu là xflash thì với config file log của mình thì nó phải để lại dấu vết referen chứ nhỉ . Nhưng đúng là khoảng 1 2 giây thì bị vài cái , nhưng cứ thế mà liên tục , tiến tới như trong clip swf mình record lại quá trình game bị ảnh hưởng . Mình đã thử dùng ddos xflash share.swf với file config là dungyeuanh.txt . Chắc comale có biết cái này. Mình thử config nó , up lên 1 host . Nhờ mọi người truy cập để ... thử tự đánh chính mình . Thì với gần 20 người truy cập , server của mình vẫn không bị gì cả . Apache nhận được liên tục request hàng milisecond nhưng vẫn không die, gameserver cũng không bị gì . 

Về file sniff trên là do mình nghĩ là ... bị tấn công thì chỉ cần theo dõi chiều vào , khỏi cần xem chiều ra ... và rút ngắn lại thì dễ cho các bạn xem .... thật là sai lầm . Giờ là 10g22 , cũng gần tới giờ ... hắn quậy . Tí nữa mình sẽ sniff lại và up lên . Cảm ơn bạn rất nhiều .

Còn rule cho mod_security, mình đã add vào rồi .

File httpd.conf , mình đã include mod_security vào : 

LoadModule security2_module modules/mod_security2/mod_security2.so
LoadModule unique_id_module modules/mod_unique_id.so
&lt;IfModule mod_security.c&gt;
include modules/mod_security2/modsecurity.conf
&lt;/IfModule&gt;

Và đây là nội dung file modsecurity.conf với nội dung config mình đã nghiên cứu , chọn lọc thêm vài cái :

SecRuleEngine On
SecRule ARGS "c:/" t:normalisePathWin 
SecRule ARGS "\.\./" t:normalisePathWin
SecRule ARGS "d:/" t:normalisePathWin
SecRule ARGS:highlight "(\x27|%27|\x2527|%2527)"
SecFilter xp_enumdsn
SecFilter xp_filelist
SecFilter xp_availablemedia
SecFilter xp_cmdshell
SecFilter xp_regread
SecFilter xp_regwrite
SecFilter xp_regdeletekey 
SecFilter "delete[[:space:]]+from"
SecFilter "insert[[:space:]]+into"
SecFilter "select.+from"
SecFilter "&lt;(.|n)+&gt;"
SecFilter "&lt;[[:space:]]*script"
SecFilter "../"
SecDefaultAction log,auditlog,deny,status:403,phase:2,t:lowercase,t:replaceNulls,t:compressWhitespace
SecFilterSelective "HTTP_USER_AGENT|HTTP_HOST" "^$"
SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400"
SecFilterSelective "ARG_recipient" "!@modsecurity\.org$" 
SecFilterSelective "ARG_recipient" "!@modsecurity\.org$" 
SecFilterSelective OUTPUT "Volume Serial Number"
SecFilterSelective OUTPUT "Command completed"
SecFilterSelective OUTPUT "Bad command or filename"
SecFilterSelective OUTPUT "file(s) copied"
SecFilterSelective OUTPUT "Index of /cgi-bin/"
SecFilterSelective OUTPUT ".*uid\=\(" 
SecFilterSelective ARG_PHPSESSID "!^[0-9a-z]*$"
SecFilterSelective COOKIE_PHPSESSID "!^[0-9a-z]*$" 
SecFilterScanPOST On
SecFilterCheckURLEncoding On
SecFilterCheckCookieFormat On
SecFilterCheckUnicodeEncoding Off
SecFilterNormalizeCookies On
SecFilterCookieFormat 1
SecFilterDebugLog logs/modsec.log
SecFilterDebugLevel 0
SecFilterScanPOST On  
SecFilter /etc/password
SecFilter /bin/ls 
SecFilter "\.\./" 
SecFilterForceByteRange 1 255
SecAuditEngine RelevantOnly
SecAuditLogType Serial
SecAuditLog logs/mod_security2.log
SecServerSignature "NOYB"
SecServerResponseToken Off
SecRequestBodyAccess On
SecResponseBodyAccess Off
SecUploadKeepFiles Off
SecRequestBodyLimit 131072
SecRequestBodyInMemoryLimit 131072
SecResponseBodyLimit 524288]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114551</guid>
				<link>/hvaonline/posts/list/18838.html#114551</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 12:24:00]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Đợi mãi đến 1g hắn mới chịu tấn công tiếp. Lần này mình sniff cả 2 chiều i/o luôn . Display lên đến vài chục ngàn ... Sợ bạn đọc không nổi. Mình nhìn hoa cả mắt. Đoạn đầu của file sniff có thể là chưa bị tấn công . Bắt đầu vào lúc 1g là tấn công dồn dập đến 1g30 luôn. . Hừm . Giờ đang để ý . MSSQL vẫn còn nhẹ ram nhưng chắc cũng ảnh hưởng . Còn httpd.exe thì ram ngốn lên gần 1GB :| . comale cho mình hỏi nếu là xflash thì sao mình không thể xem được nguồn của nó ở đâu nhỉ , không thấy referen của nó .

Đây là file sniff kèm theo log của apache : http://stukyo.com/130208.rar
Giải nén ra là 40+MB . Log hơi dài . 30' lận .2 chiều nữa,Bạn chịu khó xem giúp mình nhé . Cảm ơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114591</guid>
				<link>/hvaonline/posts/list/18838.html#114591</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 15:41:11]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Nếu 1 site A chứa flash banner để tấn công và người dùng vào site A này để xem những thứ khác, đồng thời "xem" cả flash banner ấy thì request đi thẳng từ người dùng đến site B (bị tấn công). Những request được tạo ra từ browser của người dùng khi đụng phải banner ấy sẽ không có thông tin Referer ở đâu cả.

Hãy xem 1 đoạn thông tin từ gói sniff bồ vừa gởi:

<blockquote>
GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
<font color='red'>Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span></font>
<font color='red'>x-flash-version: 9,0,115,0</font>
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 <b>304 Not Modified</b>
Date: Wed, 13 Feb 2008 <b>06:06:44 GMT</b>
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=512
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
<font color='red'>Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span></font>
<font color='red'>x-flash-version: 9,0,115,0</font>
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 <b>304 Not Modified</b>
Date: Wed, 13 Feb 2008 <b>06:06:45 GMT</b>
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=511
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
<font color='red'>Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span></font>
<font color='red'>x-flash-version: 9,0,115,0</font>
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 <b>304 Not Modified</b>
Date: Wed, 13 Feb 2008 <b>06:06:46 GMT</b>
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=510
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:48 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=509
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/includes/image_verify.php HTTP/1.1
Accept: */*
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=myaccount</span>
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 200 OK
Date: Wed, 13 Feb 2008 06:06:48 GMT
Server: Apache
X-Powered-By: PHP/5.2.4
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Cache-Control: no-store, no-cache, must-revalidate
Pragma: no-cache
Last-Modified: Wed, 13 Feb 2008 06:06:49 GMT
Cache-Control: post-check=0, pre-check=0
Content-Length: 1133
Keep-Alive: timeout=15, max=508
Connection: Keep-Alive
Content-Type: image/jpeg

......JFIF.............&gt;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), default quality
...C..............
..
................. $.' ",#..(7),01444.'9=82&lt;.342...C........

.2!.!22222222222222222222222222222222222222222222222222........2.."......................................
.....................}........!1A..Qa."q.2....#B...R..$3br..
.....%&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz........................................................................................................
.....................w.......!1..AQ.aq."2...B.....#3R..br.
.$4.%.....&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz.......................
.............................................................?..[+(..[....8YQ..{.l.U\....$......k.y..q%.....C(.4.[v..v2B.?6...p
..R{]&gt;...U....)...PU...1..%....y..n......7+......F(...#...a..n.9.@.J..+.i)......^..R.U....F...?/g...&lt;.E........'..A..J.%......T.....@.F....R........dsS..k.A.m.)t..R...........a.Y......O.....Mqe...g..#...&lt;.
..
QK......S..;!sT.;zyz.*I..Z^I
...!H....W,....d]....y.&lt;d...G.j2Z.3J..K:le%A*...RJ...5r}B.T.M...J.e..w...F....$...@$..=k...[....}.L.$..2....:.N.
)..sv....(.5
(..
(..
(..
(..?..</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a

<font color='#6699CC'>
HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:50 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=507
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:52 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=506
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=user</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:53 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=505
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=myaccount</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a

<font color='#6699CC'>
HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:54 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=504
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


GET /tamu/swf/main_navi.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 03 Sep 2007 22:20:36 GMT
If-None-Match: "23600000000479d-22017-4394294f341fc"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:55 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=503
ETag: "23600000000479d-22017-4394294f341fc"</font>


GET /tamu/swf/logo.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/swf/main_navi.swf</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 07 Jan 2008 14:34:20 GMT
If-None-Match: "9a00000000479c-6e8e-44322c1771ac0"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:55 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=502
ETag: "9a00000000479c-6e8e-44322c1771ac0"</font>


GET /tamu/images/newportrait1.jpg HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/images/slideshow.swf</span>
x-flash-version: 9,0,115,0
Cache-Control: no-transform
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 07 Jan 2008 14:51:10 GMT
If-None-Match: "55a000000003ffa-9d4e-44322fdab56fa"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:06:56 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=501
ETag: "55a000000003ffa-9d4e-44322fdab56fa"</font>


GET /tamu/images/newportrait2.jpg HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/images/slideshow.swf</span>
x-flash-version: 9,0,115,0
Cache-Control: no-transform
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 07 Jan 2008 14:59:51 GMT
If-None-Match: "fb80000000041aa-fb85-443231cb742f2"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:07:01 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=500
ETag: "fb80000000041aa-fb85-443231cb742f2"</font>


GET /tamu/swf/nav_menu_mutoolz_new.swf HTTP/1.1
Accept: */*
Accept-Language: en-US
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=myaccount</span>
x-flash-version: 9,0,115,0
Accept-Encoding: gzip, deflate
If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT
If-None-Match: "e5b0000000041dd-db66-444c0539c3b80"
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Connection: Keep-Alive
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


<font color='#6699CC'>HTTP/1.1 304 Not Modified
Date: Wed, 13 Feb 2008 06:07:05 GMT
Server: Apache
Connection: Keep-Alive
Keep-Alive: timeout=15, max=499
ETag: "e5b0000000041dd-db66-444c0539c3b80"</font>


POST /tamu/main.php?op=myaccount HTTP/1.1
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-shockwave-flash, */*
Referer:<span class="link"> http://ta1.myvnc.com/tamu/main.php?op=myaccount</span>
Accept-Language: en-us
Content-Type: application/x-www-form-urlencoded
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)
Host: ta1.myvnc.com
Content-Length: 143
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: PHPSESSID=2da7c724ef47f60e1c22ae11587f6c5a


login=xxxxxxxx&account_login=account_login&pass=xxxxxxx&registration=registration&verifyinput2=43802&Submit=%C4%90%C4%83ng+nh%E1%BA%ADp%21
&nbsp;
		</blockquote>

Có gì đặc biệt ở các phần đã được tô màu? Những phần sau đó đều tương tự.

1) Request gởi đến server của bồ được khai báo là nó dùng x-flash plugin để request (phần x-flash-version).
2) Request gởi đến liên tục có cùng 1 giá trị Referer. Đây là điểm bất hợp lệ bởi vì cùng một request đến nav_menu_mutoolz_new.swf phải xảy ra liên tục và có cùng 1 Referer? 
3) Trong khi đó, server của bồ đã respond 304, có nghĩa là file này không thay đổi, browser nên dùng bản đã được cache.
4) Client gởi request đến và đòi hỏi rằng: <b>If-Modified-Since: Mon, 28 Jan 2008 03:58:54 GMT</b> (nếu thay đổi từ lúc 3:58:54 giờ GMT thì cung cấp bản mới) mặc dù server liên tục báo là "không có gì thay đổi" (code 304).


Với biên độ request như thế, chứng tỏ firewall của bồ hoàn toàn không giới hạn request rate và vì lý do gì đó, mod_security hoàn toàn không có tác dụng. Bồ nên xem lại hai yếu tối quan trọng này.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114610</guid>
				<link>/hvaonline/posts/list/18838.html#114610</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 18:11:51]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Rất cảm ơn bài phân tích rất chi tiết của comale . Hiện mình đã thử rất nhiều firewall . Ngay cả cái draytrek hình như cũng không hiệu quả . Bạn có thể chỉ mình giúp firewall nào có thể chận tốt các request không ? Chứ các firewall của mình từ software đến hardware toàn thiết lập xong , limit các request xuống thấp nhất mà vẫn bị. Cho mình hỏi thêm vậy nếu bây giờ mình gỡ hết các flash swf xuống thì có phải hắn sẽ không flood được nữa không . Và nếu là ko bị nữa thì mình đem cái flash này lên host khác . Ví dụ host trianglemu.com mua của servage.net thì khi bị đánh thì host đó sẽ bị , còn host ta1.myvnc.com sẽ không bị gì cả đúng không ạ. Hic . Không hiểu sao cái mod_security lại không hoạt động nhỉ .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114614</guid>
				<link>/hvaonline/posts/list/18838.html#114614</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 18:59:37]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Mình đã gỡ hết các file flash SWF xuống rồi mà vẫn bị đánh bầm dập. Liệu các file IMG có thể bị đánh không vậy comale ? Hay tất cả mọi thứ đều có thể bị DDOS ???]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114620</guid>
				<link>/hvaonline/posts/list/18838.html#114620</link>
				<pubDate><![CDATA[Wed, 13 Feb 2008 19:28:25]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>
Hic . Mình đã gỡ hết các file flash SWF xuống rồi mà vẫn bị đánh bầm dập. Liệu các file IMG có thể bị đánh không vậy comale ? Hay tất cả mọi thứ đều có thể bị DDOS ???
&nbsp;
		</blockquote>
gọi B là web bị dos
Mình hiểu Xflash là mượn 1(hay nhiều) trang web(gọi là A) nhiều người truy cập, rồi gắn cái flash có độc trên đó. Mỗi người truy cập vào trang web A thì sẽ đồng thời mở 1 request tới trang web B (trong web B có thể có flash, hình ảnh(img), text,film...), <font color='red'>web B sẽ reply</font>
Vậy càng nhiều web A(A1,A2,A3,...) , càng nhiều ngừơi truy cập vào các web A(1,2,3,....) thì web B càng bị dos nhiều hơn.
Do đó cho dù gỡ hết SWF, hình ảnh, âm thanh,... thì cũng bị dos như thường.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114659</guid>
				<link>/hvaonline/posts/list/18838.html#114659</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 02:39:34]]> GMT</pubDate>
				<author><![CDATA[ seraphpl]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Khổ tâm thật . mod security thì không chống được . Cản request rate cũng không xong . Giờ thì biết NGUYÊN DO  rồi , các bạn tư vấn mình cách nào phòng chống với. Đang xem về mod_line_edit mà đọc thấy ...

<blockquote>Tuy vậy, phương thức này cũng có những nhược điểm:

    * Thứ nhất, nó chỉ chống được thế hệ xFlash hiện tại. Theo nghiên cứu của riêng tôi, Flash, cụ thể là Flash Player 9 với ActionScript 3, cực kì nguy hiểm. Cách làm này sẽ không thể chống được thế hệ xFlash mới được phát triển dựa trên tính năng của ActionScript 3. Ngoài ra, nếu kẻ tấn công biết cách khai thác các lỗ hổng của Flash 9 trở về trước, phương thức này cũng sẽ trở nên vô tác dụng.

    * Thứ hai, nó chỉ phát hiện và chống được POST request từ xFlash. Theo anh con-ma-le cho biết, một số biến thể xFlash hiện tại chỉ chơi GET request mà thôi.&nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114661</guid>
				<link>/hvaonline/posts/list/18838.html#114661</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 04:25:09]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Hic . Khổ tâm thật . mod security thì không chống được . Cản request rate cũng không xong . Giờ thì biết NGUYÊN DO  rồi , các bạn tư vấn mình cách nào phòng chống với. Đang xem về mod_line_edit mà đọc thấy ...

<blockquote>Tuy vậy, phương thức này cũng có những nhược điểm:

    * Thứ nhất, nó chỉ chống được thế hệ xFlash hiện tại. Theo nghiên cứu của riêng tôi, Flash, cụ thể là Flash Player 9 với ActionScript 3, cực kì nguy hiểm. Cách làm này sẽ không thể chống được thế hệ xFlash mới được phát triển dựa trên tính năng của ActionScript 3. Ngoài ra, nếu kẻ tấn công biết cách khai thác các lỗ hổng của Flash 9 trở về trước, phương thức này cũng sẽ trở nên vô tác dụng.

    * Thứ hai, nó chỉ phát hiện và chống được POST request từ xFlash. Theo anh con-ma-le cho biết, một số biến thể xFlash hiện tại chỉ chơi GET request mà thôi.&nbsp;
		</blockquote>&nbsp;
		</blockquote>

Tôi không rành cái firewall bồ dùng nên không thể góp ý cho bồ khoản giới hạn request rate trên firewall ấy. Tuy nhiên, tôi có thể giúp bồ khoản mod_security.

Việc đầu tiên bồ cần xác định xem mod_security có thật sự làm việc trên apache của bồ hay không. Xem thử trong nơi chứa log của apache có xuất hiện log của mod_security hay không? Xem thử trong error_log của apache có gì đụng chạm đến mod_security hay không? Nếu không, bồ phải thực hiện lại việc cài đặt mod_security cho đúng rồi mới có thể tính tiếp.

Bồ nên biết rằng, với trang web của bồ, mỗi request đi thẳng đến một module php là mỗi "cú đấm" làm tổn hại. Nó không những tổn hại tài nguyên của apache mà nó còn tổn hại tài nguyên của DB bởi nó tương tác trực tiếp đến việc truy vấn đến database.

Tôi đưa ra hai điểm cần khắc phục ở bài trước vì hai lý do:

1) Một khi bồ có thể giới hạn số lượng request trong mỗi giây thì dung hại sẽ giảm hẳn bởi vì nó không có cơ hội "đập" dồn dập nữa. Cái này phải thiết lập trên firewall. Tìm tài liệu về sản phẩm firewall bồ dùng mà tham khảo cho thật kỹ các chức năng này.

2) Firewall có thể bỏ sót những request dung hại. Bởi thế, một số request dung hại vẫn có thể vào đến apache. mod_security trở thành công cụ quý giá để cản lọc những request ấy trước khi nó đi sâu vào trong.

Có những trường hợp bồ bị DDoS với các request hoàn toàn hợp lệ. Bởi thế, firewall chỉ có thể giới hạn biên độ request và mod_security không có gì để cản cả. Trong trường hợp này, ứng dụng web của bồ phải có đủ khả năng cản lọc những request có vẻ không hợp lý. Ví dụ: người dùng (có session hẳn hòi) không thể request liên tục một trang, một bức ảnh nhiều lần trong một khoảng thời gian nào đó. Nếu có tình trạng không hợp lý này xảy ra, session ấy phải bị hủy ngay lập tức để duy trì tính ổn định cho trang web. Đây là tầng tự vệ cuối cùng (và quan trọng nhất) trước hiểm họa DDoS. Trên bình diện lập trình web, tôi không thể đi sâu được bởi vì tôi không biết trang web bồ có cái gì.

Good luck.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114662</guid>
				<link>/hvaonline/posts/list/18838.html#114662</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 06:14:13]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hì hục hì hục . 6g rồi . Em mới mò ra . Hu hu hu . Trước giờ dùng cái mod_security 2.1.4 và 2.1.5 download từ http://www.apachelounge.com/. Củ chuối thật . làm y chang như trong file readme mà nó ko work .

Dù đã loadmodules đủ hết , nhưng 
&lt;IfModule mod_security2.c&gt;
&lt;/IfModule&gt;

thì ghi bùa ghi phèo gì bậy bạ trong đó nó cũng chạy vô tư , chả có sao cả :|. Làm include cái file .conf vào config mãi mà không thấy gì . Log mod_security cũng chả thấy đâu . Đến giờ mới mò được trang /www.gknw.net , vào down bản 2.1.1 về mà xài ( ko ham bản mới nữa ) thì rất good. Đang config lại . Quả là sai lầm . Hic . Làm báo comale quá , quả thật có lỗi .

//Chỉnh : 

Ối trời . Cái SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400" phải dùng cho mod_security ver 1.xx . Vừa down và setup lại cái mod này bản 1.9 :( . Cho mình hỏi với cấu trúc là SecFilterSelective thì cho mod_security ver 2 là gì vậy ? Mình có thử SecRule mà nó báo lỗi , ứ chịu . Và tình hình là cái file log audit_log của mình nó ... tăng khá nhanh :|]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114665</guid>
				<link>/hvaonline/posts/list/18838.html#114665</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 07:57:44]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Hì hục hì hục . 6g rồi . Em mới mò ra . Hu hu hu . Trước giờ dùng cái mod_security 2.1.4 và 2.1.5 download từ<span class="link"> http://www.apachelounge.com/.</span> Củ chuối thật . làm y chang như trong file readme mà nó ko work .

Dù đã loadmodules đủ hết , nhưng 
&lt;IfModule mod_security2.c&gt;
&lt;/IfModule&gt;

thì ghi bùa ghi phèo gì bậy bạ trong đó nó cũng chạy vô tư , chả có sao cả :|. Làm include cái file .conf vào config mãi mà không thấy gì . Log mod_security cũng chả thấy đâu . Đến giờ mới mò được trang /www.gknw.net , vào down bản 2.1.1 về mà xài ( ko ham bản mới nữa ) thì rất good. Đang config lại . Quả là sai lầm . Hic . Làm báo comale quá , quả thật có lỗi .

//Chỉnh : 

Ối trời . Cái SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400" phải dùng cho mod_security ver 1.xx . Vừa down và setup lại cái mod này bản 1.9 :( . Cho mình hỏi với cấu trúc là SecFilterSelective thì cho mod_security ver 2 là gì vậy ? Mình có thử SecRule mà nó báo lỗi , ứ chịu . Và tình hình là cái file log audit_log của mình nó ... tăng khá nhanh :|&nbsp;
		</blockquote>

Đưa cái config mới nhất có dính mod_security lên xem?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114666</guid>
				<link>/hvaonline/posts/list/18838.html#114666</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 08:45:12]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[     SecFilterEngine On
    SecFilterCheckURLEncoding On
    SecFilterForceByteRange 32 126
    SecAuditEngine RelevantOnly
    SecAuditLog logs/audit_log
    SecFilterDebugLog logs/modsec_debug_log
    SecFilterDebugLevel 0
#  SecFilterScanPOST On
    SecFilterDefaultAction "deny,log,status:403"
# chongxflash
    SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400"
    SecFilter /etc/passwd
    SecFilter "\.\./"
    SecFilter "&lt;[[:space:]]*script"
    SecFilter "&lt;(.|\n)+&gt;"
    SecFilter "delete[[:space:]]+from"
    SecFilter "insert[[:space:]]+into"
    SecFilter "select.+from"
    SecFilterSelective "HTTP_USER_AGENT|HTTP_HOST" "^$"
    SecFilterSelective "HTTP_CONTENT_TYPE" multipart/form-data


Nãy mình không đế ý , set SecFilterScanPOST On, thành ra nó chận POST hết , players login vào account control panel nó chận sạch :| nên log audit tăng ào ào . 

Hiện tại mình đã di dời tất cả các IMG và SWF lên host của servage.net , Web chỉ còn text , script , php , htm . Với mod security như trên và dời img , swf đi thì chắc hắn sẽ không đánh vào flash nữa . Mà là request này nọ ( mình nghĩ vậy ) . Để sáng nay theo dõi thử 1 cái nữa xem sao . Xem xem hắn sẽ đánh vào đâu . Nếu vẫn bị thì mình sẽ sniff lại 1 cái rồi gửi cho comale xem lại nhé . Cảm ơn rất nhiều . Không có comale giúp chắc giờ đập đầu vào màn hình mất thôi.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114667</guid>
				<link>/hvaonline/posts/list/18838.html#114667</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 08:55:05]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>    SecFilterEngine On
    SecFilterCheckURLEncoding On
    SecFilterForceByteRange 32 126
    SecAuditEngine RelevantOnly
    SecAuditLog logs/audit_log
    SecFilterDebugLog logs/modsec_debug_log
    SecFilterDebugLevel 0
#  SecFilterScanPOST On
    SecFilterDefaultAction "deny,log,status:403"
# chongxflash
    SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400"
    SecFilter /etc/passwd
    SecFilter "\.\./"
    SecFilter "&lt;[[:space:]]*script"
    SecFilter "&lt;(.|\n)+&gt;"
    SecFilter "delete[[:space:]]+from"
    SecFilter "insert[[:space:]]+into"
    SecFilter "select.+from"
    SecFilterSelective "HTTP_USER_AGENT|HTTP_HOST" "^$"
    SecFilterSelective "HTTP_CONTENT_TYPE" multipart/form-data


Nãy mình không đế ý , set SecFilterScanPOST On, thành ra nó chận POST hết , players login vào account control panel nó chận sạch :| nên log audit tăng ào ào . 

Hiện tại mình đã di dời tất cả các IMG và SWF lên host của servage.net , Web chỉ còn text , script , php , htm . Với mod security như trên và dời img , swf đi thì chắc hắn sẽ không đánh vào flash nữa . Mà là request này nọ ( mình nghĩ vậy ) . Để sáng nay theo dõi thử 1 cái nữa xem sao . Xem xem hắn sẽ đánh vào đâu . Nếu vẫn bị thì mình sẽ sniff lại 1 cái rồi gửi cho comale xem lại nhé . Cảm ơn rất nhiều . Không có comale giúp chắc giờ đập đầu vào màn hình mất thôi.&nbsp;
		</blockquote>

Vậy bồ dùng mod_security version 2? hay 1.9? Nếu bồ dùng 1.9 thì đoạn rule ở trên phải OK. Nếu bồ dùng version 2 thì phải viết lại. mod_security 2 không dùng Directive SecFilter nữa mà nó dùng SecRule. Tham khảo thêm ở:<span class="link"> http://www.modsecurity.org/documentation/modsecurity-apache/2.1.5/modsecurity2-apache-reference.html</span>

Ví dụ đoạn:
<b>SecFilterSelective "HEADERS" "x-flash-version" "deny,status:400"</b>

phải thay đổi thành:
<b>SecRule REQUEST_HEADERS_NAMES "x-flash-version" "deny,status:400"</b>

Những phần khác phải đổi hết thì mới chạy được.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114668</guid>
				<link>/hvaonline/posts/list/18838.html#114668</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 09:08:07]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hi . Mò mãi mà không thấy REQUEST_HEADERS_NAMES. Tức là mình đã chạy bản 2. mà dùng câu Directive SecFilter nên nó không hiểu , đành quay về 1.9 vì không tìm được câu SecRule đó . ( Mò 30' ko ra :( . Đúng gà thật ) Giờ thì quay lại 2.1.1 . ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114669</guid>
				<link>/hvaonline/posts/list/18838.html#114669</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 09:15:53]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Có gì bất bình thường với đoạn log sau:

<blockquote>99.231.220.166 - - [13/Feb/2008:13:22:20 +0700] "GET /tamu/main.php?op=downloads HTTP/1.1" 200 28079 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:27 +0700] "GET /tamu/images/nzMenuSet.js HTTP/1.1" 200 11558 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:27 +0700] "GET /tamu/includes/helptip.js HTTP/1.1" 200 9303 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:28 +0700] "GET /tamu/images/global.css HTTP/1.1" 200 15618 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:29 +0700] "GET /tamu/images/bg.gif HTTP/1.1" 200 54 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:29 +0700] "GET /tamu/images/blank.gif HTTP/1.1" 200 43 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:29 +0700] "GET /tamu/images/pds.css HTTP/1.1" 200 7287 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:30 +0700] "GET /tamu/images/bodyTop.gif HTTP/1.1" 200 1257 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:30 +0700] "GET /tamu/images/top.jpg HTTP/1.1" 200 70734 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:31 +0700] "GET /tamu/images/Revolution-title.jpg HTTP/1.1" 200 30229 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:32 +0700] "GET /tamu/images/left.jpg HTTP/1.1" 200 3424 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:33 +0700] "GET /tamu/images/menu01off.gif HTTP/1.1" 200 1175 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:33 +0700] "GET /tamu/images/menu02off.gif HTTP/1.1" 200 1239 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:33 +0700] "GET /tamu/images/menu03off.gif HTTP/1.1" 200 2877 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:34 +0700] "GET /tamu/images/menu05off.gif HTTP/1.1" 200 2746 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:34 +0700] "GET /tamu/images/menu07off.gif HTTP/1.1" 200 2683 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:35 +0700] "GET /tamu/images/060705a.gif HTTP/1.1" 200 8609 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:35 +0700] "GET /tamu/images/bottom.gif HTTP/1.1" 200 473 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:35 +0700] "GET /tamu/images/pdsGallery.gif HTTP/1.1" 200 2314 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:36 +0700] "GET /tamu/images/bodyBg.gif HTTP/1.1" 200 68 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:36 +0700] "GET /tamu/images/titlePic1.gif HTTP/1.1" 200 2878 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:37 +0700] "GET /tamu/images/bullet1.gif HTTP/1.1" 200 280 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:37 +0700] "GET /tamu/images/lineMapBg.gif HTTP/1.1" 200 282 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:37 +0700] "GET /tamu/images/lineMapBox1.gif HTTP/1.1" 200 1491 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:37 +0700] "GET /tamu/images/lineMapBox2.gif HTTP/1.1" 200 1427 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:38 +0700] "GET /tamu/images/lbg.gif HTTP/1.1" 200 4962 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:38 +0700] "GET /tamu/images/titlePic2.gif HTTP/1.1" 200 366 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:39 +0700] "GET /tamu/images/0.gif HTTP/1.1" 200 43 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:39 +0700] "GET /tamu/images/box_list_top.gif HTTP/1.1" 200 1995 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:39 +0700] "GET /tamu/images/num01.gif HTTP/1.1" 200 409 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:39 +0700] "GET /tamu/images/num02.gif HTTP/1.1" 200 426 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:40 +0700] "GET /tamu/images/box_list_lft.gif HTTP/1.1" 200 64 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:40 +0700] "GET /tamu/images/help.gif HTTP/1.1" 200 540 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:41 +0700] "GET /tamu/images/box_list_btm.gif HTTP/1.1" 200 2045 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:41 +0700] "GET /tamu/images/box_list_rht.gif HTTP/1.1" 200 73 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:41 +0700] "GET /tamu/images/num03.gif HTTP/1.1" 200 423 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:41 +0700] "GET /tamu/images/pic1.jpg HTTP/1.1" 200 1491 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:42 +0700] "GET /tamu/images/bottomBg1.gif HTTP/1.1" 200 35469 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:42 +0700] "GET /tamu/images/btnPrivacy.png HTTP/1.1" 200 4085 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
99.231.220.166 - - [13/Feb/2008:13:22:42 +0700] "GET /tamu/images/pic2.jpg HTTP/1.1" 200 1484 "http://ta1.myvnc.com/tamu/swf/nav_menu_mutoolz_new.swf" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.1; MEGAUPLOAD 2.0)"
&nbsp;
		</blockquote>

Ngoài ra, bồ xem lại phần logging directive của apache vì bồ log mỗi entry 2 lần đó.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114670</guid>
				<link>/hvaonline/posts/list/18838.html#114670</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 09:45:25]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <blockquote>
Ngoài ra, bồ xem lại phần logging directive của apache vì bồ log mỗi entry 2 lần đó.&nbsp;
		</blockquote>

Cảm ơn / Mình đã sửa lại rồi . Sáng nay ngủ dậy lại thấy bị đánh tè le . Hic . Lúc đó đang ngủ nên không sniff được. Để tí nữa nó flood , mình sniff lại xem sao . Đã thử gỡ các flash xuống mà vẫn bị.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114723</guid>
				<link>/hvaonline/posts/list/18838.html#114723</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 13:42:58]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Hic . Sáng nay vẫn bị đánh . comale xem giúp mình xem nó lại đánh vào đâu nhé. Không hiểu được là tại sao gỡ img và swf xuống hết mà vẫn bị.
http://stukyo.com/140208.rar]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114727</guid>
				<link>/hvaonline/posts/list/18838.html#114727</link>
				<pubDate><![CDATA[Thu, 14 Feb 2008 15:07:35]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Hic . Sáng nay vẫn bị đánh . comale xem giúp mình xem nó lại đánh vào đâu nhé. Không hiểu được là tại sao gỡ img và swf xuống hết mà vẫn bị.<span class="link"> http://stukyo.com/140208.rar&nbsp;</span>
		</blockquote>

Vẫn vậy thôi. Đừng loay hoay với mấy cái này nữa. Nên đọc kỹ những gì tôi đề nghị và làm cho đến nơi, đến chốn rồi tính tiếp.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114809</guid>
				<link>/hvaonline/posts/list/18838.html#114809</link>
				<pubDate><![CDATA[Fri, 15 Feb 2008 06:02:22]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Rất cảm ơn comale đã giúp đỡ . Hôm qua mình có up các IMG và SWF lên host khác , đổi source link các IMG và SWF trong mọi trang index về host mới này nhưng vẫn bị đánh dù mod security đã được thiết lập. Tối qua thì mình đã xóa hẳn các IMG và SWF tại htdocs luôn nên mọi image đều phải load từ host servage xuống , và đến trưa nay ( đáng ra là đã bị đánh rầm rầm ) thì vẫn ok. Không biết là đã ổn , hay tạm ổn , hay là " ổng " bận gì, quên gì nên ... Dù gì thì có một buổi sáng dậy mà thấy server bình yên là mừng lắm . Tạm thời là vậy . Rất cảm ơn comale trong những ngày vừa qua . Hiện mình sẽ theo dõi tiếp . Nhưng nếu lại bị nữa thì đành phải nhờ comale tiếp tục phân tích nữa quá . Hì .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#114849</guid>
				<link>/hvaonline/posts/list/18838.html#114849</link>
				<pubDate><![CDATA[Fri, 15 Feb 2008 13:55:26]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Cả ngày hôm nay bị đánh bầm mình luôn . Từ sáng đến tối . Dù các flash đã được xóa . Các IMG đều được load từ host khác . Buồn thay . Sáng mai mình sẽ canh và sniff lại xem xem lần này là bị đánh vào đâu nữa .]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#115446</guid>
				<link>/hvaonline/posts/list/18838.html#115446</link>
				<pubDate><![CDATA[Tue, 19 Feb 2008 05:42:18]]> GMT</pubDate>
				<author><![CDATA[ levinthan]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">levinthan wrote:</cite><br>
		<blockquote>Cả ngày hôm nay bị đánh bầm mình luôn . Từ sáng đến tối . Dù các flash đã được xóa . Các IMG đều được load từ host khác . Buồn thay . Sáng mai mình sẽ canh và sniff lại xem xem lần này là bị đánh vào đâu nữa .&nbsp;
		</blockquote>

Chừng nào bồ còn dùng ADSL hạn chế như thế và chạy apache trên Windows, chừng ấy bồ còn "bầm mình" dài dài.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#115447</guid>
				<link>/hvaonline/posts/list/18838.html#115447</link>
				<pubDate><![CDATA[Tue, 19 Feb 2008 05:49:20]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Re: Flood Apache Webserver.</title>
				<description><![CDATA[ Tôi thấy với chi phí để duy trì service (tiền điện + tiền đường dây) của bạn như hiện tại thì bạn nên nghĩ đến giải pháp thuê chỗ ở datacenter, chỉ khoảng 4,5 triệu/tháng cho server 2U nhưng bandwith 100Mbps lớn hơn rất nhiều so với dùng ADSL. Lưu ý là tuy đối với gói cước Pro (4096Kbps/640Kbps) nhưng khi bạn open service thì quan trọng là đường upload.

Vài góp ý.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#115510</guid>
				<link>/hvaonline/posts/list/18838.html#115510</link>
				<pubDate><![CDATA[Tue, 19 Feb 2008 13:41:13]]> GMT</pubDate>
				<author><![CDATA[ pnco]]></author>
			</item>
			<item>
				<title>Flood Apache Webserver.</title>
				<description><![CDATA[ Theo kí sự này thấy thích quá ! Học được một số kiến thức bổ ích.

Có điều không hiểu ở chỗ hồi đó web MU có bản viết bằng ASP 3.0 chạy trên IIS mà bạn này không dùng lại dùng PHP. Giả sử bạn này dùng IIS thì chuyện gì sẽ xảy ra ? Mình tò mò chỗ này.

Có điều sao đến đây là dứt. Không biết kết quả đoạn cuối ra sao ? 

P/s: Xin lỗi vì khảo cổ :D]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/18838.html#261375</guid>
				<link>/hvaonline/posts/list/18838.html#261375</link>
				<pubDate><![CDATA[Sat, 14 Apr 2012 01:05:43]]> GMT</pubDate>
				<author><![CDATA[ TheShinichi]]></author>
			</item>
	</channel>
</rss>
