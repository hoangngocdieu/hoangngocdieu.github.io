<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Cách đóng gói RPM"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.hva</link>
		<description><![CDATA[Latest messages posted in the topic "Cách đóng gói RPM"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Cách đóng gói RPM</title>
				<description><![CDATA[ <b>Mục lục</b>

    * Giới thiệu
    * Chuẩn bị, cấu hình
    * Tạo chữ ký điện tử cho RPM
    * Build RPM

<b>Giới thiệu</b>
Tác giả (James) có nhu cầu xây dựng riêng các gói RPM để tối ưu cho máy chủ của mình. Việc làm RPM thực chất là làm file spec và tạo một số patch (nếu cần thiết). Tuy nhiên để build được rpm, còn phải chuẩn bị một số cấu hình khác. Tác giả ghi lại trong bài này những chuẩn bị cần thiết đó.

<b>Chuẩn bị directory và file cấu hình</b>
Các máy Linux thuộc hệ RH đều có sẵn một directory cho việc làm RPM, đó là /usr/src/redhat. Quyền viết (write permission) vào <b>/usr/src/redhat </b>thuộc về người quản trị (root account), tuy nhiên tác giả không thích dùng quyền root cho những việc không cần thiết đến root. Thực tế cũng có nhiều người sử dụng máy Linux muốn tự làm RPM nhưng không có quyền root.

Do đó ở đây chỉ dùng đến quyền hạn của một người dùng bình thường (normal user), người dùng này có toàn bộ quyền đọc và viết trong home directory của chính họ, giả sử là $HOME (thường là /home/username/).
<b>
   1. Bước 1: tạo directory</b>

<blockquote>          $ mkdir $HOME/rpmbuild
          $ mkdir $HOME/rpmbuild/BUILD
          $ mkdir $HOME/rpmbuild/RPMS
          $ mkdir $HOME/rpmbuild/SOURCES
          $ mkdir $HOME/rpmbuild/SPECS
          $ mkdir $HOME/rpmbuild/SRPMS
          $ mkdir $HOME/rpmbuild/RPMS/i386
          $ mkdir $HOME/rpmbuild/RPMS/noarch&nbsp;
		</blockquote>

   2. Bước 2: chuẩn bị file cấu hình <b>$HOME/.rpmmacros</b> với nội dung như sau

<blockquote>          %_topdir        /home/username/rpmbuild&nbsp;
		</blockquote>

        ### dòng này chỉ rằng, tất cả RPM của mọi architecture (như i386, i686, athlon,...) sẽ nằm chung một directory
<blockquote>          %_build_name_fmt        %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm

          %packager       User Name <email -at- domain -dot- name>
          ### chữ kí điện tử
          %_signature     gpg
          %_gpg_path      /home/username/.gnupg
          %_gpg_name      User Name <email@domain.name>&nbsp;
		</blockquote>

<b>   3. Bước 3 (option): Tạo chữ kí điện tử</b>

<blockquote>          $ gpg --gen-key
          $ gpg --armor --export UserName > RPM-GPG-KEY-UserName.txt&nbsp;
		</blockquote>

Build RPM

<blockquote>    $ cd $HOME/rpmbuild
    $ rpmbuild --ba --sign --target i686 SPECS/software.spec&nbsp;
		</blockquote>

<b>Tham khảo</b>

    * Tác giả đã xem FAQ về cách build rpm without root privilege khi làm courier-imap RPM cho FC.<span class="link"> http://www.courier-mta.org/?FAQ.html~rpm</span>
    * Những cấu hình chi tiết, đọc thêm ở /usr/lib/rpm/macros

Nguồn  : <span class="link"> http://james.dyndns.ws/index.php</span>
Tác giả :  James Nguyen]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/1293.hva#6090</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/1293.hva#6090</link>
				<pubDate><![CDATA[Wed, 12 Jul 2006 09:47:10]]> GMT</pubDate>
				<author><![CDATA[ tranvanminh]]></author>
			</item>
	</channel>
</rss>
