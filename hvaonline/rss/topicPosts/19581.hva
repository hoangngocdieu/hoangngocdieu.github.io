<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Simple Upload File bị lỗi"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/23.hva</link>
		<description><![CDATA[Latest messages posted in the topic "Simple Upload File bị lỗi"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Simple Upload File bị lỗi</title>
				<description><![CDATA[ Em mới học lập trình PHP. Tập viết thử đoạn code về Upload File. Nhưng em có thắc mắc này mong các pro chỉ em chỗ sai với. Cảm ơn mấy anh trước.

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>1: &lt;html&gt;
2: &lt;head&gt;
3: &lt;title&gt;
4: Simple Upload File
5: &lt;/title&gt;
6: &lt;/head&gt;
7:
8:   &lt;?php
9 :  $file_dir = " c:/wamp/tmp";
10: $file_url = "c:/wamp/www";
11:
12: if&#40;isset&#40;$fupload&#41; == true&#41;
13: {
14:   echo "Path File : $fupload &lt;br&gt;";
15:    echo $_FILE&#91;"fupload"&#93;&#91;"name"&#93; ;
16:    echo $_FILE&#91;"fupload"&#93;&#91;"size"&#93;;
17:    echo $_FILE&#91;"fupload"&#93;&#91;"type"&#93;;
18:
19:    if&#40;$_FILE&#91;"fupload"&#93;&#91;"type"&#93; == "image/jpeg"&#41;
20:    {
21:        copy&#40;$fupload,"$file_dir/$fupload_name"&#41; or die&#40;"Couldn't upload this file"&#41;;
22:        echo '&lt;image src="$file_dir/$fupload_name"&gt;';
23:    }
24 :}


?&gt;

&lt;body&gt;
&lt;form enctype="multipart/fomr-data" action="&lt;?php echo $PHP_SELF?&gt;" method=
"POST"&gt;
&lt;input type="hidden" name="MAX_FILE_SIZE" value="51200"/&gt;
&lt;br /&gt;
&lt;input type="file" name="fupload" size="20"/&gt;
&lt;br /&gt;
&lt;input type="submit" value="Upload" /&gt;
&lt;br /&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
		</div>

Vấn đề là ở dòng 15 ,16,17 nó ko chịu in ra chi tiết file mà em đã upload lên. Và trong thư mục
 c:\wamp\tmp vẫn chưa có file em đã upload lên. 
Em mò gần cả buổi vẫn ko tìm ra cách khắc phục. Rất mong được sự chỉ giúp của các Pro. 
Cảm ơn mí anh nhiều.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116585</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116585</link>
				<pubDate><![CDATA[Mon, 25 Feb 2008 13:27:41]]> GMT</pubDate>
				<author><![CDATA[ hungrau]]></author>
			</item>
			<item>
				<title>Re: Simple Upload File bị lỗi</title>
				<description><![CDATA[ XEm cái Safe Mode là ON hay OFF dza! Nếu là ON thì thay dòng 12 đi, nếu là OFF thì nt lại tui thử cách khác!]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116691</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116691</link>
				<pubDate><![CDATA[Tue, 26 Feb 2008 00:45:39]]> GMT</pubDate>
				<author><![CDATA[ squallcs12]]></author>
			</item>
			<item>
				<title>Re: Simple Upload File bị lỗi</title>
				<description><![CDATA[ Nó là OFF bạn ah. Mong bạn chỉ giúp tí nha. Thx nhiều .^-^.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116705</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116705</link>
				<pubDate><![CDATA[Tue, 26 Feb 2008 01:47:59]]> GMT</pubDate>
				<author><![CDATA[ hungrau]]></author>
			</item>
			<item>
				<title>Re: Simple Upload File bị lỗi</title>
				<description><![CDATA[ Bạn thay thử điều kiện kiểm tra if của bạn bằng việc kiểm tra sự tồn tại của biến $_FILE["fupload"] xem sao, đừng nên dùng biến trực tiếp $fupload như thế.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116715</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116715</link>
				<pubDate><![CDATA[Tue, 26 Feb 2008 05:06:39]]> GMT</pubDate>
				<author><![CDATA[ learn2hack]]></author>
			</item>
			<item>
				<title>Re: Simple Upload File bị lỗi</title>
				<description><![CDATA[ <blockquote>19:    <font color='orange'>if($_FILE["fupload"]["type"] == "image/jpeg")</font>
 20:    {
 21:        copy($fupload,"$file_dir/$fupload_name") or die("Couldn't upload this file");
 22:        echo '&lt;image src="$file_dir/$fupload_name"&gt;';
 23:    }&nbsp;
		</blockquote>
Dòng 19 ko ổn nhé, attacker dùng một proxy phía client (Paros chẳng hạn) để edit lại HTTP Headers đôi chút là có thể bypass và upload script backdoor (r57.php chẳng hạn )]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116760</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#116760</link>
				<pubDate><![CDATA[Tue, 26 Feb 2008 13:53:09]]> GMT</pubDate>
				<author><![CDATA[ gamma95]]></author>
			</item>
			<item>
				<title>Re: Simple Upload File bị lỗi</title>
				<description><![CDATA[ Có một số cần lưu ý.

1. nếu bạn set php register_globals = off thì 100% code sẽ ko thực thi đến upload. Vì sao? Vì dòng 12 if(isset($fupload) == true) --&gt; kiểm tra biến $fupload nên fix lại là

if ($_FILE['fupload']['name']) :D hoặc thích chính quy thì check true :).

2. Đơn giản là bật register_global on.

3. Security thì như gamma nói, ràng buộc càng nhiều điều kiện thì sẽ ổn hơn. check tên file, rename file, change extension, set thư mục upload không duoc chay script php...

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/19581.hva#117026</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/19581.hva#117026</link>
				<pubDate><![CDATA[Wed, 27 Feb 2008 21:42:12]]> GMT</pubDate>
				<author><![CDATA[ LM]]></author>
			</item>
	</channel>
</rss>
