<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "FreeBSD on usb"]]></title>
		<link>/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "FreeBSD on usb"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>FreeBSD on usb - Phần 1</title>
				<description><![CDATA[ Chào các bạn hâm mộ *nix!

Nhân dịp dụ khị được vài bạn sử dụng FreeBSD nên cũng thấy vui vui :mrgreen: Hôm nay rảnh rỗi giới thiệu với các bạn một thủ thuật nhỏ về việc cài đặt FreeBSD lên usb disk. Những lý do chính để cài đặt FreeBSD lên usb disk là:
- Tính di động: Bạn xây dựng 1 hệ điều hành cùng với các ứng dụng yêu thích của mình lên 1 thiết bị và đem nó theo bất cứ nơi nào bạn đến (home, office,...)
- Nâng cao bảo mật: Với việc cài đặt hệ điều hành và ứng dụng lên usb bạn có thể giải phóng hard disk của mình, dùng nó hoàn toàn chỉ trong việc lưu trữ dữ liệu và bạn có thể áp dụng các biện pháp bảo mật cho dữ liệu của mình.
Khuyết điểm: Việc đọc ghi lên usb là khá chậm, tuy vậy chúng ta sẽ cải thiện bằng cách dời những phần tương tác đọc ghi nhiều vào đĩa cứng như swap, /tmp, /usr/port,... và tăng thêm RAM :P)
Hiện nay có rất nhiều distro linux được phân phối dưới dạng livecd, tuy nhiên khuyết điểm của chúng (đối với 1 số trường hợp thì nó là ưu điểm :P)) là không thể lưu trữ. Bạn khó có thể bổ sung các ứng dụng yêu thích của mình vào các bản phân phối này. Việc cài đặt chúng lên usb thì cũng khá đơn giản tuy nhiên trong bài này tôi sẽ giới thiệu cho các bạn một cách thức khác xây dựng FreeBSD từ source giúp cho hệ điều hành và ứng dụng của bạn stable hơn.
Nào bây giờ chúng ta bắt đầu thực hiện. Yêu cầu cần có là 1 đĩa cứng tạm (dùng để build FreeBSD) hoặc một phân vùng còn trống trên đĩa cứng tối thiểu cỡ 10GB (OpenOffice build từ source cần 9GB đĩa cứng trống). Bạn nên dùng đĩa cứng tạm nếu có thể, nếu không thì phải backup dữ liệu cẩn thận. <b>An toàn nhất thì nên dùng máy ảo</b>.

1. Cài đặt FreeBSD lên đĩa cứng (phần này để giới thiệu với những bạn chưa từng cài đặt FreeBSD.)
- <span class="link"> ftp://ftp.freebsd.org/pub/FreeBSD/releases/i386/ISO-IMAGES/6.2/</span> và khởi động

bmuht_gpj.746011_44380c8251cdb7e2c805e1580a7ed05a/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth

- Chọn Custom -&gt; chọn Partition (3) -&gt; chọn A (Use Entire Disk) -&gt; chọn Q (Quit) (Lưu ý: Trường hợp bạn chỉ có 1 phân vùng trống trên đĩa cứng thì hãy chọn vào phân vùng trống và chọn C (Create Slice) và chọn type là 165 default).

[img]http:/bmuht_gpj.746011_30012bebdae0dfba0f8a47cd99e2214c/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptthStandard
- Chọn Label (4) -&gt; chọn A (Auto Default) -&gt; chọn Q (Quit).
- Chọn Distribution (5) -&gt; chọn Custom -&gt; chọn base + kernels GENERIC + src (chọn all) -&gt; OK -&gt; OK.
- Chọn Media (6) là CD/DVD.
- Chọn Comit (7) và hệ thống sẽ được cài đặt.
- Sau khi cài đặt xong bạn sẽ được hỏi "Visit the general configuration menu for a chance to set any last option" hãy chọn Yes. Bạn sẽ được đưa vào menu sau:

[img]http://www.htmlonlbmuht_gpj.746011_159c6301e0b72257994618840ca9c4c5/12/7/7002/daolpu/enilnoavh/ten.enilnoavh.www//:ptth tinh chỉnh các thứ như root passwd, time zone, add user, config network,... Sau khi làm xong chọn Exit 3 lần máy tính sẽ khởi động lại. Nếu không có trục trặc thì chúc mừng bạn bạn đã cài đặt FreeBSD thành công :mrgreen:

2. Cập nhật mã nguồn và tiến hành biên dịch hệ thống.
- Sau khi khởi động lại vào hệ thống thì bạn cần cài đặt gói cvsup-without-gui-16.1h để cập nhật mã nguồn.
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#/usr/sbin/sysintall</pre>
		</div>
- Chọn Configure -&gt; chọn packages -&gt; chọn FTP (nếu chọn CD/DVD thì bạn phải download ISO image thứ 2 của FreeBSD) -&gt; chọn net -&gt; chọn cvsup-without-gui-16.1h -&gt; OK -&gt; Install -&gt; OK -&gt; Exit.
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cp /usr/share/example/cvsup/stable-supfile /etc</pre>
		</div>
- Điều chỉnh cấu hình:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#ee /etc/stable-supfile</pre>
		</div>
- Điều chỉnh dòng 68 lại thành *default host=cvsup.freebsd.org -&gt; ESC -&gt; leave and save. Bạn có thể tham khảo danh sách mirror các <span class="link"> http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/cvsup.html#CVSUP-MIRRORS</span> để lựa chọn 1 server thích hợp.
- Chạy lệnh sau để update source code:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cvsup -g -L 2 /etc/stable-supfile</pre>
		</div>
- Trong lúc chờ đợi chuyển sang terminal thứ 2 và soạn thảo file cấu hình kernel.
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#ee /usr/src/sys/i386/conf/MYKERNEL</pre>
		</div>
Bởi vì nội dung của file cấu hình kernel là khá nhiều nên tôi sẽ đính kèm để các bạn download về tham khảo, ngoài ra còn có 1 lưu ý ở đây. File cấu hình kernel này bao gồm tất cả các cấu hình phần cứng mà FreeBSD hỗ trợ, trừ trường hợp bạn có ý muốn sử dụng cho nhiều máy tính khác nhau còn không thì bạn hãy tìm hiểu kỹ phần cứng máy tính của mình và loại bỏ những phần không liên quan, chi tiết về các loại phần cứng được FreeBSD hỗ trợ các bạn có thể tham khảo <span class="link"> http://www.freebsd.org/releases/6.2R/hardware-i386.html</span>, để loại bỏ những phần không liên quan trong file cấu hình kernel thì chỉ cần đánh dấu # vào dòng cần loại bỏ.

- Tạo make.conf:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#ee /etc/make.conf</pre>
		</div>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># $FreeBSD: src/share/examples/etc/make.conf,v 1.265.2.8 2006/09/13 08:39:16 des Exp $
    #
    # The CPUTYPE variable controls which processor should be targeted for
    # generated code. This controls processor-specific optimizations in
    # certain code &#40;currently only OpenSSL&#41; as well as modifying the value
    # of CFLAGS to contain the appropriate optimization directive to gcc.
    # The automatic setting of CFLAGS may be overridden using the
    # NO_CPU_CFLAGS variable below.
    # Currently the following CPU types are recognized:
    # Intel x86 architecture:
    # &#40;AMD CPUs&#41; opteron athlon64 athlon-mp athlon-xp athlon-4
    # athlon-tbird athlon k8 k6-3 k6-2 k6 k5
    # &#40;Intel CPUs&#41; nocona pentium4&#91;m&#93; prescott pentium3&#91;m&#93; pentium-m
    # pentium2 pentiumpro pentium-mmx pentium i486 i386
    # &#40;Via CPUs&#41; c3 c3-2
    # Alpha/AXP architecture: ev67 ev6 pca56 ev56 ev5 ev45 ev4
    # AMD64 architecture: opteron, athlon64, nocona
    # Intel ia64 architecture: itanium2, itanium
    #
    # &#40;?= allows to buildworld for a different CPUTYPE.&#41;
    #
    CPUTYPE=pentium4
    #
    CFLAGS= -O2 -pipe
    COPTFLAGS= -O2 -pipe
    #
    INSTALL=install -C
    #
    NO_ATM= # do not build ATM related programs and libraries
    NO_DICT= # do not build the Webster dictionary files
    NO_I4B= # do not build isdn4bsd package
    NO_INFO= # do not make or install info files
    NO_IPFILTER= # do not build IP Filter package
    NO_KERBEROS= # do not build and install Kerberos 5 &#40;KTH Heimdal&#41;
    NO_MAN= # do not build manual pages
    NO_NIS= # do not build NIS support and related programs.
    NO_PROFILE= # Avoid compiling profiled libraries
    NO_RCMDS= # do not build or install BSD r* commands &#40;rsh, etc&#41;.
    NO_SENDMAIL= # do not build sendmail and related programs
    NO_SHAREDOCS= # do not build the 4.4BSD legacy docs
    NO_BIND= # Do not build any part of BIND
    NO_BIND_DNSSEC= # Do not build dnssec-keygen, dnssec-signzone
    NO_BIND_ETC= # Do not install files to /etc/namedb
    NO_BIND_LIBS_LWRES= # Do not install the lwres library
    NO_BIND_MTREE= # Do not run mtree to create chroot directories
    NO_BIND_NAMED= # Do not build named, rndc, lwresd, etc.
    NO_BIND_UTILS= # Do not build dig, host, nslookup, nsupdate
    #
    MAKE_IDEA=yes # IDEA &#40;128 bit symmetric encryption&#41;
    #
    KERNCONF=MYKERNEL</pre>
		</div>
Lưu ý:

- Dòng CPUTYPE, bạn hãy chọn đúng loại CPU của mình.
- Sendmail và bind là 2 phần mềm nổi tiếng và rất lâu đời trong thế giới *nix, vì thế không có gì lạ khi nó mặc định được cài đặt trong hầu hết các phiên bản UNIX cũng như linux. Cá nhân tôi không thích dùng chúng vì thế trong file cấu hình make.conf tôi lựa chọn là không build các software này, nếu bạn thích dùng nó thì đơn giản thêm # vào các dòng tương ứng. Ngoài ra các bạn có thể tham khảo <span class="link"> http://www.freebsd.org/cgi/man.cgi?query=make.conf&apropos=0&sektion=0&manpath=FreeBSD+6.2-RELEASE&format=html</span> để biết thêm chi tiết.

Phần chuẩn bị đã xong, chuyển sang terminal 1 coi source đã được update xong chưa, nếu mọi thứ đã xong hãy chạy lệnh sau để tiến hành biên dịch hệ thống:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cd /usr/src
#make buildworld && make buildkernel</pre>
		</div>
Trên máy Pentium4 của tôi phải mất gần 2 giờ để công việc này hoàn tất, vì vậy bạn hãy pha 1 ly cafe và bật tivi theo dõi trận Việt Nam - Iraq trong thời gian chờ đợi :D)
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/12488.html#72940</guid>
				<link>/hvaonline/posts/list/12488.html#72940</link>
				<pubDate><![CDATA[Sat, 21 Jul 2007 19:43:38]]> GMT</pubDate>
				<author><![CDATA[ pnco]]></author>
			</item>
			<item>
				<title>FreeBSD on usb - Phần 2</title>
				<description><![CDATA[ 3. Cài đặt FreeBSD lên usb

- Đưa usb vào và chạy lệnh sau:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#fdisk -BI /dev/da0
#bsdlabel -B -w /dev/da0s1
#newfs /dev/da0s1a</pre>
		</div>
- Mount usb và cài đặt:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#mount /dev/da0s1a /mnt
#cd /usr/src
#make installworld DESTDIR=/mnt
#cd etc
#make distribution DESTDIR=/mnt
#cd ..
#make installkernel DESTDIR=/mnt</pre>
		</div>
- Tạo fstab và rc.conf:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cp /etc/fstab /mnt/etc
#ee /mnt/etc/fstab
# Device Mountpoint FStype Options Dump Pass
/dev/da0s1a / ufs rw 1 1
/dev/acd0 /cdrom cd9660 ro,noauto 0 0
#cp /etc/rc.conf /mnt/etc
#umount /mnt</pre>
		</div>
Lưu ý: Tập tin rc.conf là tập tin cấu hình hệ thống quan trọng vì vậy bạn hãy tham khảo <span class="link"> http://www.freebsd.org/cgi/man.cgi?query=rc.conf&apropos=0&sektion=0&manpath=FreeBSD+6.2-RELEASE&format=html</span> cẩn thận để tạo ra cấu hình phù hợp nhất với mình. Sau đó bạn hãy khởi động lại máy tính với usb để chắc chắn rằng nó làm việc tốt :mrgreen:

4. Cài đặt phần mềm với ports.

Đến đây chúng ta đã hoàn tất việc cài đặt FreeBSD lên usb, tuy nhiên chỉ có mỗi hệ điều hành. Việc tiếp theo cần làm là cài đặt thêm các ứng dụng yêu thích của mình. Cũng như nhiều bản phân phối linux khác FreeBSD có 1 hệ thống quản lý package riêng và rất độc đáo. Tất cả các pagkage đều được cài đặt từ source và bạn không cần phải quan tâm đến dependencies vì nó sẽ tự động được download và biên dịch.
- Để thực hiện việc này ta cần cài hệ thống ports vào đĩa cứng:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#mkdir /usr/ports
#mkdir /mnt/usr
#mount /dev/ad0s1f /mnt/usr
#mount /dev/acd0 /cdrom
#tar xzvf /cdrom/6.2-RELEASE/ports/ports.tgz -C /mnt/usr
#mount_nullfs /mnt/usr/ports /usr/ports</pre>
		</div>
Từ bây giờ bạn có thể cài đặt bất kỳ software nào bằng cách di chuyển vào thư mục tương ứng và gõ lệnh make install clean. Ví dụ:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cd /usr/ports/x11-wm/fluxbox
#make install clean</pre>
		</div>
Bạn hãy tham khảo <span class="link"> http://www.freebsd.org/ports/categories-alpha.html</span> để biết phần mềm nào là được đặt ở đâu. Bạn cũng nên cập nhật ports tree để có được những phiên bản phần mềm mới nhất. Cách thực hiện điều này thì cũng giống như bước 1, có nghĩa là bạn phải cài đặt gói cvsup-without-gui-16.1h và cấu hình ports-supfile.
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cp /usr/share/example/cvsup/ports-supfile /etc
#ee /etc/ports-supfile</pre>
		</div>
Điều chỉnh dòng 51 lại thành *default host=cvsup.freebsd.org và chạy lệnh sau để update ports tree:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#cvsup -g -L 2 /etc/ports-supfile</pre>
		</div>
Bạn cũng nên cài đặt portupgrade (/usr/ports/ports-mgmt/portupgrade) và portaudit (/usr/ports/ports-mgmt/portaudit) để dễ dàng cho việc nâng cấp sau này cũng như nâng cao bảo mật cho các phần mềm được cài đặt.
Cuối cùng thì sau khi đã cài đặt các phần mềm yêu thích của mình xong thì hãy backup usb cẩn thận phòng khi bạn hào phóng tặng không usb cho ai đó :))
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/12488.html#73937</guid>
				<link>/hvaonline/posts/list/12488.html#73937</link>
				<pubDate><![CDATA[Wed, 25 Jul 2007 19:40:02]]> GMT</pubDate>
				<author><![CDATA[ pnco]]></author>
			</item>
			<item>
				<title>FreeBSD on usb</title>
				<description><![CDATA[ Good Job .Nhung tiện thể tìm cho mình cái cài Fedora 7 lên usb đc ko. Mình tìm ko ra
cám ơn trước]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/12488.html#74301</guid>
				<link>/hvaonline/posts/list/12488.html#74301</link>
				<pubDate><![CDATA[Fri, 27 Jul 2007 10:42:58]]> GMT</pubDate>
				<author><![CDATA[ zThienLongz]]></author>
			</item>
			<item>
				<title>FreeBSD on usb</title>
				<description><![CDATA[ Ùm tớ không dùng FC nên không thể trả lời cho bạn được. Tuy nhiên nếu bạn thích có thể xây dựng linux từ source, tham khảo tại <span class="link"> http://www.linuxfromscratch.org/</span> và <span class="link"> /hvaonline/posts/list/12239.html</span> tại HVA.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/12488.html#74523</guid>
				<link>/hvaonline/posts/list/12488.html#74523</link>
				<pubDate><![CDATA[Fri, 27 Jul 2007 23:07:02]]> GMT</pubDate>
				<author><![CDATA[ pnco]]></author>
			</item>
			<item>
				<title>Re: FreeBSD on usb</title>
				<description><![CDATA[ + Ngoài cách của anh pnco nêu ở trên, còn có một cách cũng khá đơn giản để cài đặt FreeBSD lên USB:
<b>Cài đặt từ CD-room:</b>
- Cài đặt từ CDroom lên USB không khác biệt so với cài đặt lên ổ cứng. Cần thiết cắm sẵn USB để FreeBSD có thể nhận ra device này (thường là da0), và lựa chọn cài đặt lên device này.
- Những bước cài đặt tiếp theo có thể xem ở post đầu tiên hướng dẫn về việc cài FreeBSD.
- Như đã được nhắc ở các bài viết trên, nên lựa chọn cài đặt custom với các gói cài căn bản, cần thiết nhất, compile kernel phù hợp, gọn nhẹ, ...

Chúc các bạn thành công với FreeBSD luôn ở trong túi của mình ;)

FaL
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/12488.html#112359</guid>
				<link>/hvaonline/posts/list/12488.html#112359</link>
				<pubDate><![CDATA[Sat, 26 Jan 2008 17:39:08]]> GMT</pubDate>
				<author><![CDATA[ FaL]]></author>
			</item>
	</channel>
</rss>
