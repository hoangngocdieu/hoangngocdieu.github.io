<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Xử lý server sau khi bị hack"]]></title>
		<link>/hvaonline/posts/list/8.html</link>
		<description><![CDATA[Latest messages posted in the topic "Xử lý server sau khi bị hack"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Xử lý server sau khi bị hack</title>
				<description><![CDATA[ Hiện tại em đang cầm 1 con Centos của công ty, chạy khoảng 10 website, có 3 người có quyền root.
2-3 ngày nay thì xuất hiện tình trạng một số trang trên server bị xoá vài thư mục. Em nghĩ là trên server đã có 1 website nào đó bị up shell. 

Em check trong audit.log thì có mấy dòng sau :

<blockquote>type=AVC msg=audit(1374222841.230:203359): avc:  denied  { getattr } for  pid=17608 comm="httpd" path="/home/username/public_html/includes/libs" dev=sda3 ino=23331130 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:user_home_t:s0 tclass=dir&nbsp;
		</blockquote>

trong đó /home/username/public_html/includes/libs chính là thư mục bị xoá. 

Tuy nhiên thì em hiện không biết làm thế nào để tìm ra ai đã xoá & thay đổi nội dung các thư mục trên website & cấu hình lại server như thế nào để đảm bảo an toàn.

Nhờ mọi người chỉ dẫn ạ,]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/44978.html#277598</guid>
				<link>/hvaonline/posts/list/44978.html#277598</link>
				<pubDate><![CDATA[Fri, 19 Jul 2013 08:38:26]]> GMT</pubDate>
				<author><![CDATA[ anhtuanvo]]></author>
			</item>
			<item>
				<title>Xử lý server sau khi bị hack</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">anhtuanvo wrote:</cite><br>
		<blockquote>
Em check trong audit.log thì có mấy dòng sau :

<blockquote>type=AVC msg=audit(1374222841.230:203359): avc:  denied  { getattr } for  pid=17608 comm="httpd" path="/home/username/public_html/includes/libs" dev=sda3 ino=23331130 scontext=unconfined_u:system_r:httpd_t:s0 tcontext=unconfined_u:object_r:user_home_t:s0 tclass=dir&nbsp;
		</blockquote>
trong đó /home/username/public_html/includes/libs chính là thư mục bị xoá. 
&nbsp;
		</blockquote>
Đoạn log trên là của SELinux. Nó cho biết rằng Apache bị denied khi truy cập đến `/home/username/public_html/includes/libs`, không liên quan gì đến việc thư mục kia bị xoá cả.
<p></p>
		<cite class="blockquote">anhtuanvo wrote:</cite><br>
		<blockquote>
Tuy nhiên thì em hiện không biết làm thế nào để tìm ra ai đã xoá & thay đổi nội dung các thư mục trên website & cấu hình lại server như thế nào để đảm bảo an toàn.
&nbsp;
		</blockquote>
Nếu bạn chưa chuẩn bị trước thì chắc là không có cách nào tìm ra ai đã xoá đâu. Giờ bạn thử dùng `inotify`, `incron`, hoặc `audit` để giám sát toàn bộ thư mục `public_html`, khi nào có một thư mục con bị xoá, sửa thì vào kiểm tra lại xem có đúng là apache thực hiện không.
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/44978.html#277677</guid>
				<link>/hvaonline/posts/list/44978.html#277677</link>
				<pubDate><![CDATA[Tue, 23 Jul 2013 10:50:51]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
	</channel>
</rss>
