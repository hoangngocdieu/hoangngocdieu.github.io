<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Huawei E173Eu-1 trên Linux"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.hva</link>
		<description><![CDATA[Latest messages posted in the topic "Huawei E173Eu-1 trên Linux"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Huawei E173Eu-1 trên Linux</title>
				<description><![CDATA[ Chào mọi người,

Trước hết là câu hỏi mà mình sắp nêu ra có liên quan đến topic &quot;<b>D-Com 3G E173Eu-1 trên Gentoo</b>&quot; của anh <font color='orange'><b>quanta</b></font> <span class="link"> http://www.hvaonline.net/hvaonline/posts/list/39002.hva</span>). Vì topic kia đã lâu nên mình không &quot;đào mộ&quot; mà tạo topic mới.

Thiết bị <b>Huawei E173Eu-1</b> thường có thể được tự động nhận diện trên Linux (ở trong topic này, distro mình dùng là Arch) dưới dạng<b> /dev/ttyUSB</b>* và chúng ta có thể quay số bằng wvdial. Thiết bị này mình đã dùng được một thời gian khá lâu, mãi đến gần đây (sau vài lần update packages) đem ra dùng lại thì không còn sử dụng được nữa.

Thông tin về thiết bị:
Nếu kiểm tra bằng lsusb thì Huawei sẽ có Vendor ID là <b>12d1</b> và Hardware ID của E173Eu-1 là <b>14b5</b> (đối với chế độ Mass Storage) hoặc <b>14a8 </b>(đối với chế độ 3G). Kết quả lsusb trên máy mình có vẻ là đúng:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ lsusb | grep Huawei
Bus 001 Device 023: ID 12d1:14a8 Huawei Technologies Co., Ltd.</pre>
		</div>

Ngoài ra, đèn LED của E173Eu-1 là màu xanh da trời nhấp nháy mỗi 3 giây, có nghĩa là có tìm thấy sóng 3G.

Tuy nhiên, trong system của mình không còn thấy xuất hiện<b> /dev/ttyUSB* </b>nữa. Do vậy mà cả wvdial lẫn Network Manager đều không thể kết nối vào mạng 3G được nữa. Ví dụ:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ sudo wvdial
Password: 
--&gt; WvDial: Internet dialer version 1.61
--&gt; Cannot open /dev/ttyUSB0: No such file or directory
--&gt; Cannot open /dev/ttyUSB0: No such file or directory
--&gt; Cannot open /dev/ttyUSB0: No such file or directory</pre>
		</div>

Mình kiểm tra các file cấu hình của<b> usb_modeswitch</b> thì có vẻ là đúng:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ cat /lib/udev/rules.d/40-usb_modeswitch.rules | grep -A1 Viettel
# Huawei E173 &#40;Viettel 3G&#41;
ATTRS{idVendor}==&quot;12d1&quot;, ATTRS{idProduct}==&quot;14b5&quot;, RUN+=&quot;usb_modeswitch '%b/%k'&quot;</pre>
		</div>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ cat usb_modeswitch.setup | grep -A8 Viet
# Huawei E173 &#40;Viettel 3G&#41;

TargetVendor=  0x12d1
TargetProduct= 0x14a8

DefaultVendor= 0x12d1
DefaultProduct=0x14b5

MessageContent=&quot;55534243123456780000000000000011062000000100000000000000000000&quot;</pre>
		</div>

Tuy nhiên có một điểm đáng chú ý là nếu mình cắm thẻ nhớ microSD vào E173Eu-1 thì hệ thống sẽ tự nhận diện nó dưới dạng Storage USB (<b>/dev/sd[a-x]</b>) mặc dù lsusb vẫn cho ra kết quả là <b>12d1:14a8</b> chứ không phải <b>12d1:14b5</b>!

Mình có thử vọc bằng 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ sudo  rmmod usb-storage # để disable chế độ USB storage
$ sudo modprobe usbserial # thử theo một số thông tin từ Google</pre>
		</div>

Nhưng mà vẫn vô phương. 

Kernel mình đang dùng là <b>3.1.4</b>, cài đặt từ repo của Arch. Mình không có distro nào khác để test. Mình có thử trên Mac OS X thì USB 3G này vẫn chạy tốt (với phần mềm đi kèm của Viettel) nên loại trừ trục trặc của USB. Google thử vài vòng thì không ra giải pháp nào phù hợp. Chỉ có vài comment khá mơ hồ trên một số forum là vấn đề này thuộc về bản mới của wvdial.

Không biết có bạn nào cũng gặp trục trặc tương tự mình không (đã từng dùng được một thời gian, sau đó là không dùng được nữa) thì ới một tiếng với. Nếu bạn nào đã tìm ra solution thì lại càng hoan nghênh.

-stk


]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40774.hva#250981</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40774.hva#250981</link>
				<pubDate><![CDATA[Sun, 11 Dec 2011 03:38:36]]> GMT</pubDate>
				<author><![CDATA[ St Konqueror]]></author>
			</item>
			<item>
				<title>Huawei E173Eu-1 trên Linux</title>
				<description><![CDATA[ Bổ sung thêm file wvdial.conf của mình

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ cat /etc/wvdial.conf 

&#91;Dialer Defaults&#93;
Init1 = ATZ
Init2 = ATQ0 V1 E1 S0=0 &C1 &D2 +FCLASS=0
Modem Type = Analog Modem
; Phone = &lt;Target Phone Number&gt;
ISDN = 0
; Password = &lt;Your Password&gt;
; Username = &lt;Your Login Name&gt;
Modem = /dev/ttyUSB0
Baud = 9600

&#91;Dialer viettel-3g&#93;
Phone = *99#
Username = ''
Password = ''
Stupid Mode = 1
Baud = 460800
Init3 = AT+CGDCONT=1,"IP","v-internet"</pre>
		</div>
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40774.hva#250982</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40774.hva#250982</link>
				<pubDate><![CDATA[Sun, 11 Dec 2011 03:46:52]]> GMT</pubDate>
				<author><![CDATA[ St Konqueror]]></author>
			</item>
			<item>
				<title>Huawei E173Eu-1 trên Linux</title>
				<description><![CDATA[ Kiểm tra bằng `dmesg` cho nó chắc cú em ơi:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;15991.433461&#93; USB Serial support registered for GSM modem &#40;1-port&#41;
&#91;15991.433555&#93; option 1-1:1.0: GSM modem &#40;1-port&#41; converter detected
&#91;15991.433718&#93; usb 1-1: GSM modem &#40;1-port&#41; converter now attached to ttyUSB0
&#91;15991.433746&#93; option 1-1:1.1: GSM modem &#40;1-port&#41; converter detected
&#91;15991.433828&#93; usb 1-1: GSM modem &#40;1-port&#41; converter now attached to ttyUSB1
&#91;15991.433855&#93; option 1-1:1.2: GSM modem &#40;1-port&#41; converter detected
&#91;15991.433937&#93; usb 1-1: GSM modem &#40;1-port&#41; converter now attached to ttyUSB2
&#91;15991.433964&#93; option 1-1:1.3: GSM modem &#40;1-port&#41; converter detected
&#91;15991.434090&#93; usb 1-1: GSM modem &#40;1-port&#41; converter now attached to ttyUSB3</pre>
		</div>

file cấu hình kia em gen bằng `wvdialconf` chứ? Thế trong `/dev` nó có những ttyUSB gì?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40774.hva#251212</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40774.hva#251212</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 12:35:15]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Huawei E173Eu-1 trên Linux</title>
				<description><![CDATA[ Tay Stk này mặc cảm dùng arch hay sao mà không lên ubutnu-vn hỏi :)).
Vấn đề USB Broadband bên đó giải quyết được nhiều lắm.
Với con E173 thì có giải quyết theo cách này.
<span class="link"> http://www.draisberghof.de/usb_modeswitch/bb/viewtopic.php?p=4521</span>

Còn trường hợp với em DWM 152 trên ubuntu 12.04 (64bit) hiện tại cũng gặp hiện tượng y chang vậy.
lsusb là 

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>Bus 002 Device 007: ID 07d1:3e01 D-Link System</pre>
		</div>
(switch từ a800)
dmesg là 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;  378.550967&#93; usb 2-1.2: new high-speed USB device number 6 using ehci_hcd
&#91;  378.660757&#93; scsi6 : usb-storage 2-1.2:1.0
&#91;  379.661807&#93; scsi 6:0:0:0: CD-ROM            ConnMgr  Storage          2.31 PQ: 0 ANSI: 2
&#91;  379.664659&#93; scsi 6:0:0:1: Direct-Access     Micro_SD Storage          2.31 PQ: 0 ANSI: 2
&#91;  379.675761&#93; sr1: scsi-1 drive
&#91;  379.676122&#93; sr 6:0:0:0: Attached scsi CD-ROM sr1
&#91;  379.678574&#93; sr 6:0:0:0: Attached scsi generic sg2 type 5
&#91;  379.680283&#93; sd 6:0:0:1: Attached scsi generic sg3 type 0
&#91;  379.740980&#93; sd 6:0:0:1: &#91;sdb&#93; Attached SCSI removable disk
&#91;  379.766326&#93; scsi 6:0:0:0: killing request
&#91;  389.350178&#93; usb 2-1.2: USB disconnect, device number 6
&#91;  389.586334&#93; usb 2-1.2: new high-speed USB device number 7 using ehci_hcd
&#91;  389.696740&#93; scsi7 : usb-storage 2-1.2:1.4
&#91;  390.697041&#93; scsi 7:0:0:0: Direct-Access     Micro_SD Storage          2.31 PQ: 0 ANSI: 2
&#91;  390.698738&#93; sd 7:0:0:0: Attached scsi generic sg2 type 0
&#91;  390.707734&#93; sd 7:0:0:0: &#91;sdb&#93; Attached SCSI removable disk</pre>
		</div>

nhưng ls /dev/ttyUSB thì chẳng được. network-manager không nhận wvdial chịu thua. :(

Nhưng cắm USB vào thì máy không ổn định, mới bị kernel panic :(. Rồi khựng khựng. Chả hiểu thằng ubuntu patch quái nào mà nó lung tung hết :(.

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91; 1254.033179&#93; usb 2-1.2: new high-speed USB device number 9 using ehci_hcd
&#91; 1254.142490&#93; option 2-1.2:1.0: GSM modem &#40;1-port&#41; converter detected
&#91; 1254.142725&#93; usb 2-1.2: GSM modem &#40;1-port&#41; converter now attached to ttyUSB0
&#91; 1254.143011&#93; option 2-1.2:1.1: GSM modem &#40;1-port&#41; converter detected
&#91; 1254.143188&#93; usb 2-1.2: GSM modem &#40;1-port&#41; converter now attached to ttyUSB1
&#91; 1254.143412&#93; option 2-1.2:1.2: GSM modem &#40;1-port&#41; converter detected
&#91; 1254.143591&#93; usb 2-1.2: GSM modem &#40;1-port&#41; converter now attached to ttyUSB2
&#91; 1254.143823&#93; option 2-1.2:1.3: GSM modem &#40;1-port&#41; converter detected
&#91; 1254.144006&#93; usb 2-1.2: GSM modem &#40;1-port&#41; converter now attached to ttyUSB3
&#91; 1254.144353&#93; scsi9 : usb-storage 2-1.2:1.4
&#91; 1257.424862&#93; option: option_instat_callback: error -108
&#91; 1257.425061&#93; option1 ttyUSB0: GSM modem &#40;1-port&#41; converter now disconnected from ttyUSB0
&#91; 1257.425112&#93; option 2-1.2:1.0: device disconnected
&#91; 1257.425294&#93; option1 ttyUSB1: GSM modem &#40;1-port&#41; converter now disconnected from ttyUSB1
&#91; 1257.425338&#93; option 2-1.2:1.1: device disconnected
&#91; 1257.425579&#93; option1 ttyUSB2: GSM modem &#40;1-port&#41; converter now disconnected from ttyUSB2
&#91; 1257.425633&#93; option 2-1.2:1.2: device disconnected
&#91; 1257.431553&#93; option1 ttyUSB3: GSM modem &#40;1-port&#41; converter now disconnected from ttyUSB3
&#91; 1257.431570&#93; option 2-1.2:1.3: device disconnected</pre>
		</div>

Có vẻ dính tới hal :(<span class="link"> https://bbs.archlinux.org/viewtopic.php?id=43614</span>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40774.hva#256855</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40774.hva#256855</link>
				<pubDate><![CDATA[Sun, 4 Mar 2012 08:11:55]]> GMT</pubDate>
				<author><![CDATA[ afterlastangel]]></author>
			</item>
	</channel>
</rss>
