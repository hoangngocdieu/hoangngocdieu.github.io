<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Tìm hiểu về umask"]]></title>
		<link>/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "Tìm hiểu về umask"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ <i><u>Nguồn</u></i>: 
<span class="link"> http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html</span>
<span class="link"> http://www.sun.com/bigadmin/content/submitted/umask_permissions.html</span>

<font color='orange'><i>umask là gì?</i></font>
<b>umask</b> được sử dụng để kiểm soát quyền mặc định của các files mới khi nó được tạo ra. <b>umask</b> gồm 4 chữ số trong hệ cơ số 8 (four-digit octal)

<font color='orange'><i>Gán umask mặc định như thế nào?</i></font>
Bạn có thể gán <b>umask</b> mặc định trong <b>/etc/bashrc</b> hoặc <b>/etc/profile</b> cho tất cả các users. Phần lớn các distro đều gán là 0022 hoặc 0002.
Để gán <b>umask</b> cho một user xác định nào đó, bạn có thể chỉnh sửa <b>~/.bashrc</b> của user đó và thêm vào dòng sau:
<blockquote>umask 022&nbsp;
		</blockquote>
Lưu lại, logout và login lại để thay đổi trên có hiệu lực.

<font color='orange'><i>0022 và 0002 nghĩa là gì?</i></font>
<b>umask</b> mặc định 0002 được sử dụng cho normal user. Với mặt nạ (mask) này, quyền mặc định của thư mục sẽ là 775 và quyền mặc định của file sẽ là 664.

<b>umask</b> mặc định cho root là 0022, nghĩa là quyền mặc định của thư mục sẽ là 755 và quyền mặc định của file sẽ là 644.

Nôm na bạn có thể hiểu rằng: Trước khi file hoặc thư mục được tạo ra, quyền truy cập đối với chúng được xác định dựa vào hai giá trị: quyền truy cập cơ sở (<b>base permissions</b>) và mặt nạ (<b>mask</b>). Đối với thư mục, quyền truy cập cơ sở là 0777(rwxrwxrwx), còn đối với files là 0666 (rw-rw-rw).

<font color='orange'><i>Thiết lập giá trị mask như thế nào?</i></font>
Giá trị "mask" được thiết lập nhờ lệnh <font color='olive'>umask</font>. Tất cả các file và thư mục được tạo ra sau đó sẽ chịu ảnh hưởng của giá trị mask mới.

Để tính toán quyền truy cập thư mục với umask 022 (root user):
Quyền truy cập mặc định: 777
Giá trị umask: 022
Quyền truy cập cho phép: 755

Để tính toán quyền truy cập file với umask 022 (root user):
Quyền truy cập mặc định: 666
Giá trị umask: 022
Quyền truy cập cho phép: 644

<i><u>Lấy một ví dụ đơn giản</u></i>: Bạn cần gán <b>umask</b> để các files được tạo ra sau đó sẽ có permissions là 600.
Ta có:
Quyền truy cập mặc định: 666
Giá trị umask: 066
Quyền truy cập cho phép: 600

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ umask 066
$ touch test.txt
$ ls -l test.txt 
-rw------- 1 quanta quanta 0 2008-02-16 17:38 test.txt</pre>
		</div>



]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#115054</guid>
				<link>/hvaonline/posts/list/19296.html#115054</link>
				<pubDate><![CDATA[Sat, 16 Feb 2008 20:02:57]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ Đố vui:

Quyền truy cập mặc định: 666
Giá trị umask: 123
Hỏi quyền truy cập cho phép: <font color='red'>???</font>
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140141</guid>
				<link>/hvaonline/posts/list/19296.html#140141</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 00:54:28]]> GMT</pubDate>
				<author><![CDATA[ 281]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">281 wrote:</cite><br>
		<blockquote>Đố vui:

Quyền truy cập mặc định: 666
Giá trị umask: 123
Hỏi quyền truy cập cho phép: <font color='red'>???</font>
&nbsp;
		</blockquote>
Bằng số: 543
Bằng chữ: rx r wx
 :D ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140145</guid>
				<link>/hvaonline/posts/list/19296.html#140145</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 01:37:30]]> GMT</pubDate>
				<author><![CDATA[ nil]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">nil wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">281 wrote:</cite><br>
		<blockquote>Đố vui:

Quyền truy cập mặc định: 666
Giá trị umask: 123
Hỏi quyền truy cập cho phép: <font color='red'>???</font>
&nbsp;
		</blockquote>
Bằng số: 543
Bằng chữ: rx r wx
 :D &nbsp;
		</blockquote>

chưa đúng,  :) ]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140147</guid>
				<link>/hvaonline/posts/list/19296.html#140147</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 01:43:39]]> GMT</pubDate>
				<author><![CDATA[ 281]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">281 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">nil wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">281 wrote:</cite><br>
		<blockquote>Đố vui:

Quyền truy cập mặc định: 666
Giá trị umask: 123
Hỏi quyền truy cập cho phép: <font color='red'>???</font>
&nbsp;
		</blockquote>
Bằng số: 543
Bằng chữ: rx r wx
 :D &nbsp;
		</blockquote>

chưa đúng,  :) &nbsp;
		</blockquote>
Hì, đã gọi là đố vui mà, bác <b>nil</b> thật thà quá. 
Đáp án: 644]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140149</guid>
				<link>/hvaonline/posts/list/19296.html#140149</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 01:58:55]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ Đúng là 644 thật, vừa mới test thử luôn. Tớ nghĩ nguyên do là vì 2 điểm sau, nếu không đúng mong mọi người góp ý:
- owner lúc nào cũng có đầy đủ quyền hạn trên file do mình tạo ra mặc cho umask là thế nào. Trong trường hợp trên thì owner sẽ có quyền là rw (do quyền mặc định là 666).
- user trong cùng group bao giờ cũng có quyền hạn cao hơn other. Trong trường hợp trên các user trong group có quyền đọc (r - tương ứng với 4), vì thế user không cùng group sẽ chỉ nhận được quyền tối đa là đọc mà không thể ghi (r - ứng với 4), mặc dù kết quả tương tác với umask ra là 3 (tức là có quyền ghi).
Cho nên đáp án là 644 như quanta nói.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140154</guid>
				<link>/hvaonline/posts/list/19296.html#140154</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 04:20:17]]> GMT</pubDate>
				<author><![CDATA[ learn2hack]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">learn2hack wrote:</cite><br>
		<blockquote>Đúng là 644 thật, vừa mới test thử luôn. Tớ nghĩ nguyên do là vì 2 điểm sau, nếu không đúng mong mọi người góp ý:
- owner lúc nào cũng có đầy đủ quyền hạn trên file do mình tạo ra mặc cho umask là thế nào. Trong trường hợp trên thì owner sẽ có quyền là rw (do quyền mặc định là 666).
- user trong cùng group bao giờ cũng có quyền hạn cao hơn other. Trong trường hợp trên các user trong group có quyền đọc (r - tương ứng với 4), vì thế user không cùng group sẽ chỉ nhận được quyền tối đa là đọc mà không thể ghi (r - ứng với 4), mặc dù kết quả tương tác với umask ra là 3 (tức là có quyền ghi).
Cho nên đáp án là 644 như quanta nói.&nbsp;
		</blockquote>

Tiếc là giải thích này của learn2hack chưa chính xác,  :) 

Quyền truy cập cho phép là kết quả giữa phép toán sau:

Quyền truy cập cho phép = "quyền truy cập mặc định" AND (NOT (Giá trị umask))

Ví dụ: 

Quyền truy cập mặc định: 666 = <font color='orange'>110 110 110</font>

Giá trị umask: 123 = 001 010 011
--&gt; NOT (Giá trị umask) = NOT (001 010 011) = <font color='orange'>110 101 100</font>

Quyền truy cập cho phép = <font color='orange'>110 110 110</font> AND <font color='orange'>110 101 100</font>                                     <b><font color='red'> = 110 100 100 = 644</font></b>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140166</guid>
				<link>/hvaonline/posts/list/19296.html#140166</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 11:08:18]]> GMT</pubDate>
				<author><![CDATA[ 281]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ Đối với files:
<p></p>
		<cite class="blockquote">281 wrote:</cite><br>
		<blockquote>
Quyền truy cập mặc định: 666 = <font color='orange'>110 110 110</font>
&nbsp;
		</blockquote>
Để ý thêm một chút là "execute bit" của "base permissions" bằng 0 (off), mà trong phép toán AND (logical), kết quả chỉ là 1 khi cả 2 bit đều bằng 1, do đó <font color='orange'>bạn không thể tạo ra một file với quyền thi hành (execute bit) bằng 1 (on) sẵn được</font> (mà phải <b>chmod</b> sau khi file được tạo ra).]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140188</guid>
				<link>/hvaonline/posts/list/19296.html#140188</link>
				<pubDate><![CDATA[Sun, 6 Jul 2008 13:45:35]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ Cám ơn các bác. Vậy mà em đọc tài liệu chỉ đọc được đoạn "777-022" hoặc "666-002". May mà đọc bài này mới biết thuật toán chính xác của bác 281 đưa ra.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140303</guid>
				<link>/hvaonline/posts/list/19296.html#140303</link>
				<pubDate><![CDATA[Mon, 7 Jul 2008 12:33:39]]> GMT</pubDate>
				<author><![CDATA[ mrtantien]]></author>
			</item>
			<item>
				<title>Re: Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mrtantien wrote:</cite><br>
		<blockquote>Cám ơn các bác. Vậy mà em đọc tài liệu chỉ đọc được đoạn "777-022" hoặc "666-002". May mà đọc bài này mới biết thuật toán chính xác của bác <b>quanta</b> đưa ra.&nbsp;
		</blockquote>
Đính chính: bạn <b>281</b> chỉ ra, không phải là tớ.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#140304</guid>
				<link>/hvaonline/posts/list/19296.html#140304</link>
				<pubDate><![CDATA[Mon, 7 Jul 2008 12:37:17]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ Hỏi ngược lại chút:
<font color='orange'>Nếu file mới tạo ra có quyền truy xuất là 236 thì umask là bao nhiêu? </font>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#209161</guid>
				<link>/hvaonline/posts/list/19296.html#209161</link>
				<pubDate><![CDATA[Fri, 16 Apr 2010 09:06:36]]> GMT</pubDate>
				<author><![CDATA[ shell-command]]></author>
			</item>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">shell-command wrote:</cite><br>
		<blockquote>Hỏi ngược lại chút:
<font color='orange'>Nếu file mới tạo ra có quyền truy xuất là 236 thì umask là bao nhiêu? </font>&nbsp;
		</blockquote>
<font color='orange'>236</font> = <font color='orange'>010 01</font><font color='red'>1</font> <font color='orange'>110</font>
Để ý bit <font color='red'>execute</font> ở trên. Bởi vì "<font color='orange'>bạn không thể tạo ra một file với quyền thi hành (execute bit) bằng 1 (on) sẵn được (mà phải chmod sau khi file được tạo ra)</font>" nên sẽ không có umask nào thoả mãn yêu cầu của bạn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#217257</guid>
				<link>/hvaonline/posts/list/19296.html#217257</link>
				<pubDate><![CDATA[Sun, 1 Aug 2010 23:29:45]]> GMT</pubDate>
				<author><![CDATA[ GuanPing]]></author>
			</item>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ sao umask =022 và umask=123 lại cho kết quả truy xuất giống nhau đều bằng 644 nhi?
ai có thể giải thick không?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#236071</guid>
				<link>/hvaonline/posts/list/19296.html#236071</link>
				<pubDate><![CDATA[Sat, 23 Apr 2011 11:43:39]]> GMT</pubDate>
				<author><![CDATA[ shankstocdo]]></author>
			</item>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">shankstocdo wrote:</cite><br>
		<blockquote>sao umask =022 và umask=123 lại cho kết quả truy xuất giống nhau đều bằng 644 nhi?
ai có thể giải thick không?&nbsp;
		</blockquote>

Đơn giản là vì ( 666 & (^022) ) = (666 & (^123) ) = 644

Nếu tạo folder thì sẽ ra kết quả khác]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#236117</guid>
				<link>/hvaonline/posts/list/19296.html#236117</link>
				<pubDate><![CDATA[Sun, 24 Apr 2011 20:44:57]]> GMT</pubDate>
				<author><![CDATA[ WinDak]]></author>
			</item>
			<item>
				<title>Tìm hiểu về umask</title>
				<description><![CDATA[ Quy tắc đơn giản tính nhanh quyền truy cập:

1- Với thư mục: Lấy 777-umask

2- Với file: Lấy 777-umask. Sau đó số nào chẵn giữ nguyên, số nào lẻ thì giảm đi 1.

Ví dụ: umask là 123 thì thư mục mới được tạo ra sẽ có quyền truy cập là 654, file mới tạo ra sẽ có quyền truy cập là 644 (777-123=654 -&gt; 644).]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/19296.html#241238</guid>
				<link>/hvaonline/posts/list/19296.html#241238</link>
				<pubDate><![CDATA[Fri, 17 Jun 2011 07:51:40]]> GMT</pubDate>
				<author><![CDATA[ Crunch]]></author>
			</item>
	</channel>
</rss>
