<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/31.html</link>
		<description><![CDATA[Latest messages posted in the topic "NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2684</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2684</link>
				<pubDate><![CDATA[Fri, 30 Jun 2006 19:03:40]]> GMT</pubDate>
				<author><![CDATA[ dabu]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>
úi dà ... thế thì đâu cần NAT đâu hả bạn ? :D mình nghĩ cấu hình RIP thì đúng hơn , mục đích của bạn là 2 lớp mạng trên thấy nhau mà , vậy thì config routing remote access theo RIP đi !!! (làm tren cả 2 may PC1&PC2) .]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2765</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2765</link>
				<pubDate><![CDATA[Fri, 30 Jun 2006 23:32:16]]> GMT</pubDate>
				<author><![CDATA[ lonely_Xorhandsome]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Hi, 
2 pc vẫn đi NET bình thường,ping thấy nhau, vấn đề là map port 80 vào máy chạy 2003 thôi. ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2810</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2810</link>
				<pubDate><![CDATA[Sat, 1 Jul 2006 03:40:50]]> GMT</pubDate>
				<author><![CDATA[ dabu]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2854</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2854</link>
				<pubDate><![CDATA[Sat, 1 Jul 2006 11:31:42]]> GMT</pubDate>
				<author><![CDATA[ thangdiablo]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân&nbsp;
		</blockquote>
Hi, 
Về cấu hình theo kiểu Bridge thông qua việc tạo một connection thì em làm được.
Thanhdiablo  có thể chỉ em cách quay PPPoE theo kiểu RAS trong Routing and Remote Access được hông ?
Có phải tạo một New demand-dial Interface không?
Còn cách thangdiablo nói là Header sẽ bị vỡ em sẽ nghiên cứu thử xem .
Thanks.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2880</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2880</link>
				<pubDate><![CDATA[Sat, 1 Jul 2006 12:38:02]]> GMT</pubDate>
				<author><![CDATA[ dabu]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>
Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?
 :( &nbsp;
		</blockquote>

Cho mình hỏi là IP nào bạn chọn là inside? IP nào là outsite? mình đoán là bạn bị nhầm chiều.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#2900</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#2900</link>
				<pubDate><![CDATA[Sat, 1 Jul 2006 13:29:24]]> GMT</pubDate>
				<author><![CDATA[ F1]]></author>
			</item>
			<item>
				<title>Re: NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <blockquote>Hi, 
Về cấu hình theo kiểu Bridge thông qua việc tạo một connection thì em làm được. 
Thanhdiablo có thể chỉ em cách quay PPPoE theo kiểu RAS trong Routing and Remote Access được hông ? 
Có phải tạo một New demand-dial Interface không? 
Còn cách thangdiablo nói là Header sẽ bị vỡ em sẽ nghiên cứu thử xem . 
Thanks. &nbsp;
		</blockquote>
Thì trên PC1 tạo acc quay số PPPoE 
My network place --- New network connection  cho đơn giản.
Việc gì phải dùng tới RAS cho mất công.
Còn đã bị vỡ header rồi thì sao mà vào được nữa.  :P 
Thân]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3013</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3013</link>
				<pubDate><![CDATA[Sat, 1 Jul 2006 19:10:13]]> GMT</pubDate>
				<author><![CDATA[ thangdiablo]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ theo tui, bạn NAT đến máy chạy win 2003 với 1 cổng khác cổng 80 là ok. TÔi đã làm như bạn nhưng không được. sau đó tui thay đổi port ở máy 2 là 8080 thế là ok.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3352</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3352</link>
				<pubDate><![CDATA[Sun, 2 Jul 2006 23:00:48]]> GMT</pubDate>
				<author><![CDATA[ nokia6610dn]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Tham khảo thêm môt số bài viết liên quan đến NAT của tôi trong vninformatics.com 
Khi trên router bạn đã mổ cổng 80 thì các gói tin từ trình duyệt của môt client  nào đó sẽ đến cổng 80 này và sau đó sẽ <b><font color='yellow'>CHỈ CÓ THỂ ĐẾN MỘT CỔNG 80 CỦA MỘT MÁY DUY NHẤT TRONG MẠNG LAN .</font></b> Máy này do bạn chỉ định trong rule khi thực hiện NAT .( thí dụ 10.0.0.5 )
 
Nếu bạn muốn chạy hai WEBSERVER đổng thởi trên cùng môt mạng LAN , mạng LAN như bạn mô tả ở trên . thì bạn phải mở môt cổng thứ hai , thường là cổng <b><font color='yellow'>8080 </font></b>( mở cổng 8080 trên router và cổng 8080 trên hệ thống [Webserver] ), cho webserver thứ hai (thí dụ 10.0.0.4)

 <b><font color='orange'>Nhưng khi môt client muốn truy cập đến webserver thứ hai này thì họ phải đánh trên thanh đia chỉ như sau , thí du www.tencuaban.com:8080 .
 Nếu chỉ đánh www.tencuaban.com thì hoàn toàn không thể truy cập đến webserver thứ hai nói trên </font></b>
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3745</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3745</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 02:51:26]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Nếu mà cố để học tập thì hay chứ em nghĩ cách này không khả thi tí nào.

Thực ra lời góp ý của em có phần dumbass chứ em nghĩ làm gì phải lằng 
nhằng thế - vì ngay cả tiền điện để bác phải luôn bật cái máy 2000 hầm hập trong trời này đã quá xừ cái tiền bác bỏ 300.000đ ra mua một cái switch 8 cổng chạy bét nhè.

Lúc ấy chả cần phải làm gì cho phức tạp rắc rối cuộc đời. :mrgreen: ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3751</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3751</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 03:40:55]]> GMT</pubDate>
				<author><![CDATA[ natasha]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">natasha wrote:</cite><br>
		<blockquote>Nếu mà cố để học tập thì hay chứ em nghĩ cách này không khả thi tí nào.

Thực ra lời góp ý của em có phần dumbass chứ em nghĩ làm gì phải lằng 
nhằng thế - vì ngay cả tiền điện để bác phải luôn bật cái máy 2000 hầm hập trong trời này đã quá xừ cái tiền bác bỏ 300.000đ ra mua một cái switch 8 cổng chạy bét nhè.

Lúc ấy chả cần phải làm gì cho phức tạp rắc rối cuộc đời. :mrgreen: &nbsp;
		</blockquote>

Vấn đề bạn dabu hỏi là thiết lập để cùng <b><font color='orange'>chạy đồng thời 2 webserver trên môt mạng LAN </font></b>. Không phải là hỏi việc chạy nhiều PC( 5,6,7,8 ...15 PC...  ) trên môt mang LAN 

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3784</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3784</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 10:22:07]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Tham khảo thêm môt số bài viết liên quan đến NAT của tôi trong vninformatics.com 
Khi trên router bạn đã mổ cổng 80 thì các gói tin từ trình duyệt của môt client  nào đó sẽ đến cổng 80 này và sau đó sẽ <b><font color='yellow'>CHỈ CÓ THỂ ĐẾN MỘT CỔNG 80 CỦA MỘT MÁY DUY NHẤT TRONG MẠNG LAN .</font></b> Máy này do bạn chỉ định trong rule khi thực hiện NAT .( thí dụ 10.0.0.5 )
 
Nếu bạn muốn chạy hai WEBSERVER đổng thởi trên cùng môt mạng LAN , mạng LAN như bạn mô tả ở trên . thì bạn phải mở môt cổng thứ hai , thường là cổng <b><font color='yellow'>8080 </font></b>( mở cổng 8080 trên router và cổng 8080 trên hệ thống [Webserver] ), cho webserver thứ hai (thí dụ 10.0.0.4)

 <b><font color='orange'>Nhưng khi môt client muốn truy cập đến webserver thứ hai này thì họ phải đánh trên thanh đia chỉ như sau , thí du www.tencuaban.com:8080 .
 Nếu chỉ đánh www.tencuaban.com thì hoàn toàn không thể truy cập đến webserver thứ hai nói trên </font></b>
&nbsp;
		</blockquote>

Anh PX chú ý mô hình của dabu la 2 Webser mắc nối tiếp nhau.
Nghĩa là webser 2 nối với Card mạng của WEBSER 1 chứ không phải 2 Webser này cùng gắn vào Switch

Như vậy nếu NAT WEBSERV 2 với port 8080 thì liệu có được không anh?
Vì packet từ ngoài WAN vào vẫn phải chạy qua và <b>bị NAT </b> bởi Router ADSL sau đó lại tiếp tục băng qua và <b>bị NAT lần 2 </b> bởi Web Ser thứ 1.
Vậy packet <font color='orange'>có đi tới được </font>WebSer thứ 2 khi header bị lột ra thay vào<b> 2 </b>lần ?
Em có thứ rồi nhưng rất nhiều lần đều không được.
Nên em đành phải sử dụng chiêu cấu hình Bridge cho Modem ADSL và WEb SER 1 sẽ có trách nhiệm quay PPPoE và IP WAN sẽ nhảy thẳng vào NIC 1 của WEB SER 1. Như vậy đến lúc này Packet từ ngoài WAN đi vào sẽ chỉ bị lột header 1 lần thì mới vào được WEB SER 2.

<font color='red'>PS: Giờ trong trường hợp em có 2 Webserver cắm chung và Switch. Em muốn cả 2 đều được NAT thẳng vào port 80 để thuận tiện cho người sử dụng và cũng là để để load balance với nhau thì theo anh dùng cơ chế nào là tốt nhất? 
2 Server này cũng host 1 website duy nhất.
Mong anh chỉ giáo</font>
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3847</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3847</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 13:27:42]]> GMT</pubDate>
				<author><![CDATA[ thangdiablo]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>Vấn đề bạn dabu hỏi là thiết lập để cùng <b><font color='orange'>chạy đồng thời 2 webserver trên môt mạng LAN </font></b>. Không phải là hỏi việc chạy nhiều PC( 5,6,7,8 ...15 PC...  ) trên môt mang LAN 

&nbsp;
		</blockquote>Xin lỗi em đang có vấn đề về đọc hiểu. :( Em tưởng nhầm dabu muốn ngắt cái webserver trên 2000 đi để chạy cái webserver trên 2003.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#3863</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#3863</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 13:50:48]]> GMT</pubDate>
				<author><![CDATA[ natasha]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Tham khảo thêm môt số bài viết liên quan đến NAT của tôi trong vninformatics.com 
Khi trên router bạn đã mổ cổng 80 thì các gói tin từ trình duyệt của môt client  nào đó sẽ đến cổng 80 này và sau đó sẽ <b><font color='yellow'>CHỈ CÓ THỂ ĐẾN MỘT CỔNG 80 CỦA MỘT MÁY DUY NHẤT TRONG MẠNG LAN .</font></b> Máy này do bạn chỉ định trong rule khi thực hiện NAT .( thí dụ 10.0.0.5 )
 
Nếu bạn muốn chạy hai WEBSERVER đổng thởi trên cùng môt mạng LAN , mạng LAN như bạn mô tả ở trên . thì bạn phải mở môt cổng thứ hai , thường là cổng <b><font color='yellow'>8080 </font></b>( mở cổng 8080 trên router và cổng 8080 trên hệ thống [Webserver] ), cho webserver thứ hai (thí dụ 10.0.0.4)

 <b><font color='orange'>Nhưng khi môt client muốn truy cập đến webserver thứ hai này thì họ phải đánh trên thanh đia chỉ như sau , thí du www.tencuaban.com:8080 .
 Nếu chỉ đánh www.tencuaban.com thì hoàn toàn không thể truy cập đến webserver thứ hai nói trên </font></b>
&nbsp;
		</blockquote>

Anh PX chú ý mô hình của dabu la 2 Webser mắc nối tiếp nhau.
Nghĩa là webser 2 nối với Card mạng của WEBSER 1 chứ không phải 2 Webser này cùng gắn vào Switch

Như vậy nếu NAT WEBSERV 2 với port 8080 thì liệu có được không anh?
Vì packet từ ngoài WAN vào vẫn phải chạy qua và <b>bị NAT </b> bởi Router ADSL sau đó lại tiếp tục băng qua và <b>bị NAT lần 2 </b> bởi Web Ser thứ 1.
Vậy packet <font color='orange'>có đi tới được </font>WebSer thứ 2 khi header bị lột ra thay vào<b> 2 </b>lần ?
Em có thứ rồi nhưng rất nhiều lần đều không được.
Nên em đành phải sử dụng chiêu cấu hình Bridge cho Modem ADSL và WEb SER 1 sẽ có trách nhiệm quay PPPoE và IP WAN sẽ nhảy thẳng vào NIC 1 của WEB SER 1. Như vậy đến lúc này Packet từ ngoài WAN đi vào sẽ chỉ bị lột header 1 lần thì mới vào được WEB SER 2.

<font color='red'>PS: Giờ trong trường hợp em có 2 Webserver cắm chung và Switch. Em muốn cả 2 đều được NAT thẳng vào port 80 để thuận tiện cho người sử dụng và cũng là để để load balance với nhau thì theo anh dùng cơ chế nào là tốt nhất? 
2 Server này cũng host 1 website duy nhất.
Mong anh chỉ giáo</font>
&nbsp;
		</blockquote>
À nếu hai webserver mắc " nối tiếp " như vậy thì không đưọc rồi dù ta vẫn mở hai cỗng 80 và 8080 trên modem .

Mỗi môt lỗ cắm cáp mạng trên chính modem  (hay trên switch ) chỉ hỗ trợ cho một đia chỉ Private IP . Khi ta config theo NAT trên modem thì mỗi cặp cổng 80-80 hay 8080 - 8080 chỉ áp dụng cho môt đia chỉ private IP ( thí dụ 10.0.0.3 hay 192.168.1.7 vân vân ) nghĩa là tương ứng với một lỗ cắm .

TRưỏng hop của thangdiablo đưa ra thì trên môt số modem , thí du Zoom X5 có thể áp dụng kỹ thuật  <b><font color='yellow'>RAR trong NAT </font></b>( tham khảo phần Advanced config . trong Zoom X5  ) để biến hai ổ cắm cáp mạng với hai Private IP trở thành gần như mirroring và vỉ hiệu ứng mirroring này nên hoàn toàn có thể load balancing giữa chúng , để giảm tãi cho servers mà chủ yếu là giảm tải cho web  server ( Apache - IIS ... ) . Vì Web  server ( trình quản lý web )chính là khâu yếu nhất trong hệ thống ( dễ bị overflow )
 
Còn trong các <font color='orange'>Advanced security modem </font>thì có môt kỹ thuật tương tư , gọi là<b><font color='yellow'> IP mirroring </font></b>, nhưng dễ và tiện config hơn nhiểu . Kỹ thuật RAR hay IP mirroring đặc biệt là IP mirroring rất lợi hại ( theo ý nghĩ của tôi ) . Vì trưóc kia để mirroring hai Webserver  đặt  tại 2 subnet khác nhau, để chống DDoS môt cách hiệu qủa nhất , rất  phức tạp và tốn kém . Nay với sư ra đời của Advanced security modem , chay nhiều WAN IP , vấn đề trở thành đơn giản hơn rất nhiều .

 <font color='yellow'><i>À vấn đề này tôi đã nói trong box BQT tại HVA forum trước kia ( đã bị hack ),  nhưng thấy rất ít người quan tâm . Nay có câu hỏi và ý tưỏng của thangdiablo,  tôi rất vui . Thì ra có làm thưc tế mới thấy hay </i></font>

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#4023</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#4023</link>
				<pubDate><![CDATA[Tue, 4 Jul 2006 22:51:55]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Vậy nếu modem em đang sử dụng không có chức năng Advanced security modem thì còn có cơ chế nào khác để load balance không anh PX?

Hiện tại mô hình nhà em là 

Internet<----- Modem ADSL Zyxel (Cấu hình thành Brigde)<----- Router Access Point Linksys (Có trách nhiệm quay số PPPoE.IP WAN sẽ nằm trên thằng Linksys này)<----- Webserver 

Vậy giờ nếu em có 2 Webserver cũng cắm vào Router Linksys thì có cơ chế nào để load balance giữa 2 thằng này không?

Mong anh chỉ giáo . ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#4343</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#4343</link>
				<pubDate><![CDATA[Wed, 5 Jul 2006 20:02:31]]> GMT</pubDate>
				<author><![CDATA[ thangdiablo]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>
Mình không rõ ý của dabu là  chỉ muốn làm 1 Web server trên 2k3 hay 2 web trên cả 2 server.
Nếu là trường hợp thứ nhất thì dabu phải NAT 192.168.1.2 -> 10.0.0.4 chứ.
Còn nếu là trường hợp thứ 2 thì phải tạo NAT 1 port 80 - cho web trên 2000- và 1 port khác 81 chẳng hạn - cho web trên 2k3- trên Modem ADSL, rồi 1 NAT từ port 81->80 trên 2000 nữa.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#4383</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#4383</link>
				<pubDate><![CDATA[Wed, 5 Jul 2006 22:20:52]]> GMT</pubDate>
				<author><![CDATA[ No.13]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>
À nếu hai webserver mắc " nối tiếp " như vậy thì không đưọc rồi dù ta vẫn mở hai cỗng 80 và 8080 trên modem .

Mỗi môt lỗ cắm cáp mạng trên chính modem  (hay trên switch ) chỉ hỗ trợ cho một đia chỉ Private IP . Khi ta config theo NAT trên modem thì mỗi cặp cổng 80-80 hay 8080 - 8080 chỉ áp dụng cho môt đia chỉ private IP ( thí dụ 10.0.0.3 hay 192.168.1.7 vân vân ) nghĩa là tương ứng với một lỗ cắm .

TRưỏng hop của thangdiablo đưa ra thì trên môt số modem , thí du Zoom X5 có thể áp dụng kỹ thuật  <b><font color='yellow'>RAR trong NAT </font></b>( tham khảo phần Advanced config . trong Zoom X5  ) để biến hai ổ cắm cáp mạng với hai Private IP trở thành gần như mirroring và vỉ hiệu ứng mirroring này nên hoàn toàn có thể load balancing giữa chúng , để giảm tãi cho servers mà chủ yếu là giảm tải cho web  server ( Apache - IIS ... ) . Vì Web  server ( trình quản lý web )chính là khâu yếu nhất trong hệ thống ( dễ bị overflow )
 
Còn trong các <font color='orange'>Advanced security modem </font>thì có môt kỹ thuật tương tư , gọi là<b><font color='yellow'> IP mirroring </font></b>, nhưng dễ và tiện config hơn nhiểu . Kỹ thuật RAR hay IP mirroring đặc biệt là IP mirroring rất lợi hại ( theo ý nghĩ của tôi ) . Vì trưóc kia để mirroring hai Webserver  đặt  tại 2 subnet khác nhau, để chống DDoS môt cách hiệu qủa nhất , rất  phức tạp và tốn kém . Nay với sư ra đời của Advanced security modem , chay nhiều WAN IP , vấn đề trở thành đơn giản hơn rất nhiều .

 <font color='yellow'><i>À vấn đề này tôi đã nói trong box BQT tại HVA forum trước kia ( đã bị hack ),  nhưng thấy rất ít người quan tâm . Nay có câu hỏi và ý tưỏng của thangdiablo,  tôi rất vui . Thì ra có làm thưc tế mới thấy hay </i></font>

&nbsp;
		</blockquote>


Hi, 
Em chưa thấy 1 Modem chạy cùng lúc 2 IP WAN cả,  nếu có thì chỉ thấy FPT chạy 2 dịch vụ :
 1. Dịch vụ Internet cấp phát IP.
 2. Dịch vụ IPTV chạy theo kiểu Multicast,băng thông mỗi kênh là 4,5-6M.
IPTV có các chỉ số VPI/VCI,encapsulation khác với chỉ số truy cập Internet.
Còn vấn đề load balancing em có thắc mắc sau:
+ Các packet hay các datagram có độ ưu tiên cho từng service không ?
+ Làm sao để biết được băng thông của 1 connection, hay các connection thì có băng thông như nhau vì chúng cùng kích cỡ packet.  :?: ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#4385</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#4385</link>
				<pubDate><![CDATA[Wed, 5 Jul 2006 22:26:05]]> GMT</pubDate>
				<author><![CDATA[ dabu]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <blockquote>Hi, 
Em chưa thấy 1 Modem chạy cùng lúc 2 IP WAN cả,  nếu có thì chỉ thấy FPT chạy 2 dịch vụ :
 1. Dịch vụ Internet cấp phát IP.
 2. Dịch vụ IPTV chạy theo kiểu Multicast,băng thông mỗi kênh là 4,5-6M.
IPTV có các chỉ số VPI/VCI,encapsulation khác với chỉ số truy cập Internet.&nbsp;
		</blockquote>
ADVANCED SECURITY MODEM  có thể chay nhiều WAN IP đồng thời : 2 ,3, 4 WAN IP ..., tuỳ loại .
 Khi chạy với 3 WAN IP chẳng hạn , thì thí dụ có thể chạy với 1 Dynamic WAN IP ( đia chỉ WAN IP đưọc ISP cấp phát thông qua giao thức DHCP ) của VDC , 1 WAN IP của Viettel và 1 WAN IP của FPT  hay 1WAN <b><font color='orange'>static</font></b> IP ( như từ dich vu MEGA Pro của VDC chẳng han ) và 2  WAN  Dynamic IP của hai ISP khác ... vân vân 
 <blockquote>Còn vấn đề load balancing em có thắc mắc sau: 
+ Các packet hay các datagram có độ ưu tiên cho từng service không ? 
+ Làm sao để biết được băng thông của 1 connection, hay các connection thì có băng thông như nhau vì chúng cùng kích cỡ packet.&nbsp;
		</blockquote>  


 Vì cả 2 hay 3 nguồn WAN IP khác nhau đều " nằm trong " một modem nên vấn đề loadbalancing giửa các WAN IP thuận tiện , coi như đưọc " xử lý nôi bộ " - nói một cách ví von như vậy .
 Về chế độ bload balancing thì có thể áp dụng <b><font color='orange'>"Autoload '' </font></b>( cân bằng tải tự động ) : anh WAN IP nào mạnh thì anh ấy thì chiếm môt tỷ lệ cao trong tổng băng thông , anh nào yếu - chậm thì chiếm tỷ lệ nhỏ , anh nào chết ( rớt mạng ) thì cứ chết . Modem - các webserver vẫn chạy mượt . Dỉ nhiên có cả chế độ "áp đặt" : anh nào ta thưòng thấy nó mạnh - nhanh thì ta " phân "cho nó môt tỷ lệ cố định -cao , 70-80 % chẳng hạn ......., hai anh kia thì môt anh 10 % anh kia 20 %....
Việc loadbalancing các Webserver  có dây mạng cắm vào modem này thì lại càng thuận lợi hơn bao giờ hết .

<i>Có nhiều biện pháp chống DDoS , nhưng tôi đưoc dạy bảo qua tài liệu của các IT famous experts (xuất bản cách đây 6-7-8 năm) ,  biện pháp dùng các mirror servers -loadbalancing với nhau , mirror server  đẵt ở các subnet xa nhau , là biện pháp hiệu qủa nhất . Nhưng như thế phức tạp và rất tốn kém . Các chuyên gia nói phức tạp-tốn kèm là nói đúng trong hoàn cảnh lich sử thời  đó .NHưng nay đã khác , có nhiều ISP trong môt thành phố chứ không phải chỉ có môt như trưòc kia , các Advanced security modems xuất hiện , ngày càng tinh vi và rẻ họn ( dù giá còn cao  ) . Tuy nhiên cái gọi là loadbalancing các mirror servers  nối với các subnet khác nhau chống DDoS khá hiệu qủa thỉ vẫn là chân lý </i>-

Nhưng viêc config môt Advanced security modem thì thưc tế khá gay go , phức tạp ( <i>hay do tôi vốn dốt nên nó thế</i> ), mày mò vỡ ra nhiều cái hay mà chính tài liêu của modem không nói đến .

 Cái hay hay thí dụ nhỏ như là trong môt mạng LAN của Advanced security modem ta có thể check , kết nôi với môt Webserver ở máy bên cạnh , khỏi phải localhost hay 127.0.0.1 , thấy OK nhưng phân vân không hiểu kết nối từ ngoài vào co đươc như vậy không ?? . <i>Mà đang test lúc gần nửa đêm , chạy ra ngoài cửa hàng dich vụ thì e ... vợ coi là .. bầt tiên </i>.
 Mà các tiện ích bảo mật trong modem này qủa là hơi tuyệt . Tôi chắc là vậy , nhưng có thể tôi chưa khai thác hết khả năng của nó , chỉ vỉ tôi kém - dốt mà thôi .
 NHưng như nói ở trên giá cái modem này hơi đắt , thì mua cái second-hand  hay " ăn chơi phải tốn kém chứ "

<font color='orange'>dabu</font> ! Best regard 

 


]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#4418</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#4418</link>
				<pubDate><![CDATA[Thu, 6 Jul 2006 02:02:29]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Các bác nói em chẳng hiểu tí nào cả!
Em cũng đang tìm hiểu làm thế nào đây? ví dụ: bên ngoài Wan gõ địa chỉ mà mình đăng ký ở no-ip.com .
aa.no-ip.com thì đến Server 1
bb.no-ip.com thì đến Server 2
Hiện em đang dùng Zoom X5 và 2 máy server nối vào 2 cổng MOdem.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#5799</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#5799</link>
				<pubDate><![CDATA[Tue, 11 Jul 2006 01:29:42]]> GMT</pubDate>
				<author><![CDATA[ vinasoft]]></author>
			</item>
			<item>
				<title>Re: NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">vinasoft wrote:</cite><br>
		<blockquote>Các bác nói em chẳng hiểu tí nào cả!
Em cũng đang tìm hiểu làm thế nào đây? ví dụ: bên ngoài Wan gõ địa chỉ mà mình đăng ký ở no-ip.com .
aa.no-ip.com thì đến Server 1
bb.no-ip.com thì đến Server 2
Hiện em đang dùng Zoom X5 và 2 máy server nối vào 2 cổng MOdem.&nbsp;
		</blockquote>

-Thông tin bạn đưa ra quá chung chung, nên theo dabu nghĩ cấu hình của bạn là có 2 PC cùng kết nối vào ZoomX5 theo 2 port Ethernet của Modem ADSL( bạn không có IP tĩnh).
-Dabu chưa xài dịch vụ no-ip nhưng nghĩ nó cung cấp dịch vụ dynamic DNS phải không?
-Giả sử bạn muốn có 2 Webserver 1& 2 như bạn nói thì muốn người ta truy cập vào 2 webserver của bạn cùng một thời điểm thì bạn có thể NAT theo các port khác nhau như anh PX đã nói ở trên.
-Hai domain bạn đang kí khi dùng dịch vụ Dynamic DNS thì cũng chỉ trỏ về 1 địa chỉ public IP do ISP cấp xuống, muốn nó truy cập được đến 2 server của bạn thì dùng các port khác nhau thôi(như port 80 và 8080 chẳng hạn).
Thân!]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#5953</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#5953</link>
				<pubDate><![CDATA[Tue, 11 Jul 2006 18:00:14]]> GMT</pubDate>
				<author><![CDATA[ dabu]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Bạn có thể làm thế này nhé.
Trên PC1 ko nat mà chỉ route.
tren ADSL modem open 2 port là 80 và 8080
lúc này bạn có thể chạy được hay Web Server trên cùng một Lan.
Nếu bạn NAT ở PC1 thì ko còn là hai Web Server trên cùng một LAN nữa vì hai Web Server này có hai IP ko cùng mạng (theo quan điểm nhìn tử outside vào inside)

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6012</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6012</link>
				<pubDate><![CDATA[Tue, 11 Jul 2006 22:13:41]]> GMT</pubDate>
				<author><![CDATA[ vanyen2000]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân&nbsp;
		</blockquote>

Một cách làm đúng.
Vấn đề là nếu ko config ADSL router dạng bridge thì khi một packet ở ngoài vào (giả sử request tới Webserver trên PC 1) sẽ bị strip ip header ở adsl router để thay thế ip của Webserver trên PC 1 vào, Nhưng nếu đó là request tới Webserver trên PC2 thì nó sẽ bị PC1 sẽ làm gì ? 
Nó có forward packet tới PC2 ko ? Nếu forward thì nó sẽ thực hiện những thao tác nào ? Thay thế ko ?
Vì có thể xem trường hợp này là NAT hai lớp. Vậy nếu ko làm Webserver ở PC1 chỉ làm ở PC2 thì có thành công không ?
mong các bác làm rõ giùm em ?

thanks

batigol
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6018</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6018</link>
				<pubDate><![CDATA[Tue, 11 Jul 2006 22:25:49]]> GMT</pubDate>
				<author><![CDATA[ vanyen2000]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Hey tốt nhất cứ việc tạo một vùng DMZ ( thuật ngữ máy tính là vùng giao tiếp với thế giới bên ngoài ) cái chức năng này có trong đa số router.Xong cứ việc cấu hình lập server song song ( tức giông giống việc tao siêu computer theo công nghê culster ) theo chế độ cân bằng tải là ngon lành mún 2 chứ 100 server cũng đc :D]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6020</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6020</link>
				<pubDate><![CDATA[Tue, 11 Jul 2006 22:46:08]]> GMT</pubDate>
				<author><![CDATA[ xnohat]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ tại sao ko có ai làm rõ ý thắc mắc của em vậy?

giải thích giùm em đi.

thanks

batigol]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6284</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6284</link>
				<pubDate><![CDATA[Wed, 12 Jul 2006 22:01:29]]> GMT</pubDate>
				<author><![CDATA[ vanyen2000]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân&nbsp;
		</blockquote>

Một cách làm đúng.
Vấn đề là nếu ko config ADSL router dạng bridge thì khi một packet ở ngoài vào (giả sử request tới Webserver trên PC 1) sẽ bị strip ip header ở adsl router để thay thế ip của Webserver trên PC 1 vào, Nhưng nếu đó là request tới Webserver trên PC2 thì nó sẽ bị PC1 sẽ làm gì ? 
Nó có forward packet tới PC2 ko ? Nếu forward thì nó sẽ thực hiện những thao tác nào ? Thay thế ko ?
Vì có thể xem trường hợp này là NAT hai lớp. Vậy nếu ko làm Webserver ở PC1 chỉ làm ở PC2 thì có thành công không ?
mong các bác làm rõ giùm em ?

thanks

batigol
&nbsp;
		</blockquote>
Tất nhiên khi đã NAT cổng 80 sang PC2 thì PC1 ko chạy webserver trên cổng 80, nếu có thì phải chạy ở cổng khác. Vì vậy ở đây coi như chỉ cần chạy webserver trên PC2 thông qua 2 lần NAT ở modem ADSL và PC1. 
Mudzot tôi nghĩ là chuyện NAT nối tiếp là hoàn toàn hợp lệ, vụ vỡ header nghe có vẻ mơ hồ quá, thử xem xét cụ thể xem header của gói tin đi từ internet vào sẽ thay đổi thế nào
client-------(internet)-------Modem ADSL----(LAN 1)-----(A)PC1(B)-----(LAN 2)------PC2
Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.

Ngoài internet, gói tin có IP nguồn của client, IP đích là WAN IP của modem ADSL
Đến đây chú modem lột đi cái IP đích, thay vào đó là IP của PC1 trong LAN 1 (gọi tắt là IP A), đồng thời thêm 1 entry vào NAT table của mình tương ứng với kết nối giữa IP client và IP A.
Như vậy quãng đường từ modem đến PC1 gói tin có IP nguồn vẫn của client, IP đích là IP A.
Tại PC1 xảy ra NAT lần 2, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.
Như vậy quãng đường từ PC1 đến PC2 gói tin có IP nguồn vẫn là IP client, IP đích là IP của PC2
Tóm lại, quá trình gói tin đi từ client đến PC2 nó bị thay IP đích 2 lần liên tiếp ( 2 lần Destination NAT )

Bây giờ PC2 trả lời IP client, vì là IP lạ nên nó gửi cho default gateway là PC1. Trên quãng đường từ PC2 đến PC1 gói tin có IP nguồn của PC2, IP đích là IP client.
Đồng chí PC1 nhìn thấy cặp IP đó tra bảng NAT thấy có entry tương ứng với cặp đó nên nó thực hiện nhiệm vụ của mình là lột đi IP nguồn, thay IP nguồn bằng IP của nó trong LAN 1, tức là IP A. Còn IP đích (IP client) đối với nó cũng lạ, ko cùng mạng nên nó gửi gói tin cho default gateway là modem.
Như vậy từ PC1 đến modem, gói tin có IP nguồn là IP A, IP đích là IP client.
Modem nhận được gói tin này, thấy cặp (IP client, IP A) tương ứng với entry trong bảng NAT nên thực hiện nhiệm vụ Source NAT của nó là thay IP nguồn (đang là IP A) thành WAN IP của modem.
Cuối cùng ra ngoài internet gói tin là có IP nguồn là WAN IP của modem và IP đích là IP client.
Tóm lại quá trình đi từ PC2 đến client gói tin bị thay IP nguồn 2 lần ( 2 lần Source NAT). Client luôn giả định là nó đang giao tiếp với IP WAN và hoàn toàn ko biết gì về PC1,PC2.

Kết luận : NAT 2 lần nối tiếp là hoàn toàn có thể nếu cấu hình đúng.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6308</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6308</link>
				<pubDate><![CDATA[Thu, 13 Jul 2006 00:31:35]]> GMT</pubDate>
				<author><![CDATA[ mudzot]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mudzot wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân&nbsp;
		</blockquote>

Một cách làm đúng.
Vấn đề là nếu ko config ADSL router dạng bridge thì khi một packet ở ngoài vào (giả sử request tới Webserver trên PC 1) sẽ bị strip ip header ở adsl router để thay thế ip của Webserver trên PC 1 vào, Nhưng nếu đó là request tới Webserver trên PC2 thì nó sẽ bị PC1 sẽ làm gì ? 
Nó có forward packet tới PC2 ko ? Nếu forward thì nó sẽ thực hiện những thao tác nào ? Thay thế ko ?
Vì có thể xem trường hợp này là NAT hai lớp. Vậy nếu ko làm Webserver ở PC1 chỉ làm ở PC2 thì có thành công không ?
mong các bác làm rõ giùm em ?

thanks

batigol
&nbsp;
		</blockquote>
Tất nhiên khi đã NAT cổng 80 sang PC2 thì PC1 ko chạy webserver trên cổng 80, nếu có thì phải chạy ở cổng khác. Vì vậy ở đây coi như chỉ cần chạy webserver trên PC2 thông qua 2 lần NAT ở modem ADSL và PC1. 
Mudzot tôi nghĩ là chuyện NAT nối tiếp là hoàn toàn hợp lệ, vụ vỡ header nghe có vẻ mơ hồ quá, thử xem xét cụ thể xem header của gói tin đi từ internet vào sẽ thay đổi thế nào
client-------(internet)-------Modem ADSL----(LAN 1)-----(A)PC1(B)-----(LAN 2)------PC2
Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.

Ngoài internet, gói tin có IP nguồn của client, IP đích là WAN IP của modem ADSL
Đến đây chú modem lột đi cái IP đích, thay vào đó là IP của PC1 trong LAN 1 (gọi tắt là IP A), đồng thời thêm 1 entry vào NAT table của mình tương ứng với kết nối giữa IP client và IP A.
Như vậy quãng đường từ modem đến PC1 gói tin có IP nguồn vẫn của client, IP đích là IP A.
Tại PC1 xảy ra NAT lần 2, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.
Như vậy quãng đường từ PC1 đến PC2 gói tin có IP nguồn vẫn là IP client, IP đích là IP của PC2
Tóm lại, quá trình gói tin đi từ client đến PC2 nó bị thay IP đích 2 lần liên tiếp ( 2 lần Destination NAT )

Bây giờ PC2 trả lời IP client, vì là IP lạ nên nó gửi cho default gateway là PC1. Trên quãng đường từ PC2 đến PC1 gói tin có IP nguồn của PC2, IP đích là IP client.
Đồng chí PC1 nhìn thấy cặp IP đó tra bảng NAT thấy có entry tương ứng với cặp đó nên nó thực hiện nhiệm vụ của mình là lột đi IP nguồn, thay IP nguồn bằng IP của nó trong LAN 1, tức là IP A. Còn IP đích (IP client) đối với nó cũng lạ, ko cùng mạng nên nó gửi gói tin cho default gateway là modem.
Như vậy từ PC1 đến modem, gói tin có IP nguồn là IP A, IP đích là IP client.
Modem nhận được gói tin này, thấy cặp (IP client, IP A) tương ứng với entry trong bảng NAT nên thực hiện nhiệm vụ Source NAT của nó là thay IP nguồn (đang là IP A) thành WAN IP của modem.
Cuối cùng ra ngoài internet gói tin là có IP nguồn là WAN IP của modem và IP đích là IP client.
Tóm lại quá trình đi từ PC2 đến client gói tin bị thay IP nguồn 2 lần ( 2 lần Source NAT). Client luôn giả định là nó đang giao tiếp với IP WAN và hoàn toàn ko biết gì về PC1,PC2.

Kết luận : NAT 2 lần nối tiếp là hoàn toàn có thể nếu cấu hình đúng.&nbsp;
		</blockquote>

Về lý thuyết thì thế là dúng.
Thế đã có ai thử chưa ? Nếu thử rồi thì xin hãy cho biết kết quả.
Công nhận anh thangdiablo nói vỡ header ko có cơ sở chính xác (mơ hồ) :mrgreen: ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6422</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6422</link>
				<pubDate><![CDATA[Thu, 13 Jul 2006 14:35:14]]> GMT</pubDate>
				<author><![CDATA[ vanyen2000]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mudzot wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">thangdiablo wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">dabu wrote:</cite><br>
		<blockquote>Cấu hình mạng của em như sau :
Modem (ADSL)|192.168.1.1|==|192.168.1.2|PC1(2000server)|10.0.0.5|===|10.0.0.4|PC2(server2003).

Em đã NAT từ modem ADSL vào PC1 theo cổng 80 làm Webserver trên PC1 thì ok .
Nhưng em muốn làm Webserver trên PC2 chạy 2003 .

Em đã thử NAT từ 192.168.1.2 sang 10.0.0.5 (NAT thông qua routing and Remote access )rồi nhưng vẫn không truy cập vào Webserver chạy trên 2003 được ?

Không biết em đã cấu hình sai chổ nào chăng ? mong mọi người góp ý.Thanks !

 :( &nbsp;
		</blockquote>

Không được vì làm theo kiều này packet đì từ ngoài WAN vào được tới PC2 thì sẽ bị vỡ header.

Giờ muốn làm được chỉ có cách là cấu hình Modem ADSL theo kiểu bridge sau đó PC 1 quay số PPPoE và IP WAN sẽ nhận thẳng vào NIC 1 của PC 1.
Sau đó PC 1 chỉ phải NAT 1 lần duy nhất để packet vào được PC 2.
Thân&nbsp;
		</blockquote>

Một cách làm đúng.
Vấn đề là nếu ko config ADSL router dạng bridge thì khi một packet ở ngoài vào (giả sử request tới Webserver trên PC 1) sẽ bị strip ip header ở adsl router để thay thế ip của Webserver trên PC 1 vào, Nhưng nếu đó là request tới Webserver trên PC2 thì nó sẽ bị PC1 sẽ làm gì ? 
Nó có forward packet tới PC2 ko ? Nếu forward thì nó sẽ thực hiện những thao tác nào ? Thay thế ko ?
Vì có thể xem trường hợp này là NAT hai lớp. Vậy nếu ko làm Webserver ở PC1 chỉ làm ở PC2 thì có thành công không ?
mong các bác làm rõ giùm em ?

thanks

batigol
&nbsp;
		</blockquote>
Tất nhiên khi đã NAT cổng 80 sang PC2 thì PC1 ko chạy webserver trên cổng 80, nếu có thì phải chạy ở cổng khác. Vì vậy ở đây coi như chỉ cần chạy webserver trên PC2 thông qua 2 lần NAT ở modem ADSL và PC1. 
Mudzot tôi nghĩ là chuyện NAT nối tiếp là hoàn toàn hợp lệ, vụ vỡ header nghe có vẻ mơ hồ quá, thử xem xét cụ thể xem header của gói tin đi từ internet vào sẽ thay đổi thế nào
client-------(internet)-------Modem ADSL----(LAN 1)-----(A)PC1(B)-----(LAN 2)------PC2
Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.

Ngoài internet, gói tin có IP nguồn của client, IP đích là WAN IP của modem ADSL
Đến đây chú modem lột đi cái IP đích, thay vào đó là IP của PC1 trong LAN 1 (gọi tắt là IP A), đồng thời thêm 1 entry vào NAT table của mình tương ứng với kết nối giữa IP client và IP A.
Như vậy quãng đường từ modem đến PC1 gói tin có IP nguồn vẫn của client, IP đích là IP A.
Tại PC1 xảy ra NAT lần 2, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.
Như vậy quãng đường từ PC1 đến PC2 gói tin có IP nguồn vẫn là IP client, IP đích là IP của PC2
Tóm lại, quá trình gói tin đi từ client đến PC2 nó bị thay IP đích 2 lần liên tiếp ( 2 lần Destination NAT )

Bây giờ PC2 trả lời IP client, vì là IP lạ nên nó gửi cho default gateway là PC1. Trên quãng đường từ PC2 đến PC1 gói tin có IP nguồn của PC2, IP đích là IP client.
Đồng chí PC1 nhìn thấy cặp IP đó tra bảng NAT thấy có entry tương ứng với cặp đó nên nó thực hiện nhiệm vụ của mình là lột đi IP nguồn, thay IP nguồn bằng IP của nó trong LAN 1, tức là IP A. Còn IP đích (IP client) đối với nó cũng lạ, ko cùng mạng nên nó gửi gói tin cho default gateway là modem.
Như vậy từ PC1 đến modem, gói tin có IP nguồn là IP A, IP đích là IP client.
Modem nhận được gói tin này, thấy cặp (IP client, IP A) tương ứng với entry trong bảng NAT nên thực hiện nhiệm vụ Source NAT của nó là thay IP nguồn (đang là IP A) thành WAN IP của modem.
Cuối cùng ra ngoài internet gói tin là có IP nguồn là WAN IP của modem và IP đích là IP client.
Tóm lại quá trình đi từ PC2 đến client gói tin bị thay IP nguồn 2 lần ( 2 lần Source NAT). Client luôn giả định là nó đang giao tiếp với IP WAN và hoàn toàn ko biết gì về PC1,PC2.

Kết luận : NAT 2 lần nối tiếp là hoàn toàn có thể nếu cấu hình đúng.&nbsp;
		</blockquote>

<font color='orange'>Bạn viết :Tại PC1 xảy ra <b>NAT lần 2</b>, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.</font>

<font color='yellow'><i>Như bạn viết thế này thì qua trình <b>NAT lần 2 </b>
 cần phải thưc hiện tại đâu ?? Nói môt cách khác là làm thế nào để gói tin từ máy client khi đến card mạng của PC1 có thể đựoc NAT lần 2 .
 Đương nhiên qua trình cấu hình modem theo NAT phải thưc hiện ở chính  ADSL modem . Vậy thì bạn NAT như thế nào để gói tin cùa máy client sau khi qua modem ( ở đây nó đựoc NAT lầ n 1 như bạn nói ) rồi nó tiếp tục đến card mạng của PC 1 , tại đó nó sẽ  đựoc NAT lần 2 , để đến PC2 ?? Bạn thử thi dụ môt rule trong NAT để thưc hiên đựoc yêu cầu trên , thí dụ với  Zoom X5 modem chẳng hạn ??</i></font>


:<font color='orange'>Bạn viết Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.</font>

 
<font color='yellow'><i>Đối với PC1 thì default gateway có phải là modem không ?? Vậy theo bạn gateway của môt mạng LAN đựoc định nghĩa như thế nào .
 Có gì khác giữa IP của gateway của môt mạng LAN với Private  default IP của một módem hay cũng chính là của mạng LAN ( thí dụ 10.0.0.2  hay 198.162.1.1 )
 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??</i></font>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6833</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6833</link>
				<pubDate><![CDATA[Fri, 14 Jul 2006 19:17:52]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>
<font color='orange'>Bạn viết :Tại PC1 xảy ra <b>NAT lần 2</b>, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.</font>

<font color='yellow'><i>Như bạn viết thế này thì qua trình <b>NAT lần 2 </b>
 cần phải thưc hiện tại đâu ?? Nói môt cách khác là làm thế nào để gói tin từ máy client khi đến card mạng của PC1 có thể đựoc NAT lần 2 .
&nbsp;
		</blockquote>

Nat lần 2 xảy ra  ở PC1, Trên PC1 cấu hình NAT với Win2003server.
packet đến PC1 thì sẽ được lột ip đích (IP A) và thay vào là IP của PC2.

 <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>
 Đương nhiên qua trình cấu hình modem theo NAT phải thưc hiện ở chính  ADSL modem . Vậy thì bạn NAT như thế nào để gói tin cùa máy client sau khi qua modem ( ở đây nó đựoc NAT lầ n 1 như bạn nói ) rồi nó tiếp tục đến card mạng của PC 1 , tại đó nó sẽ  đựoc NAT lần 2 , để đến PC2 ?? Bạn thử thi dụ môt rule trong NAT để thưc hiên đựoc yêu cầu trên , thí dụ với  Zoom X5 modem chẳng hạn ??</i></font>

&nbsp;
		</blockquote>

em nghĩ là ADSL router nat hoàn toàn bình thường như nat một lần.

<p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>

:<font color='orange'>Bạn viết Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.</font>

 
<font color='yellow'><i>Đối với PC1 thì default gateway có phải là modem không ?? Vậy theo bạn gateway của môt mạng LAN đựoc định nghĩa như thế nào .
 Có gì khác giữa IP của gateway của môt mạng LAN với Private  default IP của một módem hay cũng chính là của mạng LAN ( thí dụ 10.0.0.2  hay 198.162.1.1 )
 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??</i></font>&nbsp;
		</blockquote>

đây ko còn là một mạng lan nữa. Ở đây có thể xem là mạng Internal và LAN. 

 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??  Ko hiểu anh nói gì ?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6861</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6861</link>
				<pubDate><![CDATA[Fri, 14 Jul 2006 22:57:58]]> GMT</pubDate>
				<author><![CDATA[ vanyen2000]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>
<font color='orange'>Bạn viết :Tại PC1 xảy ra <b>NAT lần 2</b>, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.</font>

<font color='yellow'><i>Như bạn viết thế này thì qua trình <b>NAT lần 2 </b>
 cần phải thưc hiện tại đâu ?? Nói môt cách khác là làm thế nào để gói tin từ máy client khi đến card mạng của PC1 có thể đựoc NAT lần 2 .
 Đương nhiên qua trình cấu hình modem theo NAT phải thưc hiện ở chính  ADSL modem . Vậy thì bạn NAT như thế nào để gói tin cùa máy client sau khi qua modem ( ở đây nó đựoc NAT lầ n 1 như bạn nói ) rồi nó tiếp tục đến card mạng của PC 1 , tại đó nó sẽ  đựoc NAT lần 2 , để đến PC2 ?? Bạn thử thi dụ môt rule trong NAT để thưc hiên đựoc yêu cầu trên , thí dụ với  Zoom X5 modem chẳng hạn ??</i></font>


:<font color='orange'>Bạn viết Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.</font>

 
<font color='yellow'><i>Đối với PC1 thì default gateway có phải là modem không ?? Vậy theo bạn gateway của môt mạng LAN đựoc định nghĩa như thế nào .
 Có gì khác giữa IP của gateway của môt mạng LAN với Private  default IP của một módem hay cũng chính là của mạng LAN ( thí dụ 10.0.0.2  hay 198.162.1.1 )
 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??</i></font>&nbsp;
		</blockquote>
Phần 1 của bác thì vanyen2000 nói rồi, còn phần 2 em bàn luận tiếp. Chuyện default gateway của PC2 là PC1, của PC1 là LAN IP của modem là điều kiện bắt buộc để NAT hoạt động đúng. Gateway của một mạng LAN em  hiểu là đường sang 1 mạng khác :D, default gateway của 1 host là IP cùng mạng với nó (net/mask), sẽ là nơi nó gửi gói tin đến nếu IP đích của gói tin ko nằm trong bảng routing của nó.
Bác PX viết bài bao giờ cũng cẩn thận. Để trả lời một cách cẩn thận em cũng đã xây dựng mô hình giống như thế.
internet -------WAN IP [Win2003] 192.168.0.1 -------- 192.168.0.70 [PC1] 10.0.0.1 ------ 10.0.0.30 [PC2]
- Rule NAT ở win2003 : 
Nếu nhận được gói tin có đích là WAN IP port 8080 thì map vào 192.168.0.70:8080
- Rule NAT ở PC1 :
Nếu nhận được gói tin  từ interface 192.168.70, có IP đích là 192.168.0.70 port 8080 thì map vào 10.0.0.30:80
Trên PC2 em chạy apache, và trang mặc định của nó có câu "NAT, NAT nữa, NAT mãi".
Bây giờ các bác ngoài internet test thử địa chỉ<span class="link"> http://mudzot.homelinux.net:8080</span> mà thấy câu đó có nghĩa là tất cả chạy tốt.
Đây là ví dụ thực tế chứng minh cho 2 lần NAT nối tiếp nhau. Nhưng em chỉ duy trì được nó trong khoảng 1 ngày (vì còn lấy máy làm việc). Bác nào vào thấy chạy tốt thì xác nhận hộ :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6876</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6876</link>
				<pubDate><![CDATA[Sat, 15 Jul 2006 00:07:12]]> GMT</pubDate>
				<author><![CDATA[ mudzot]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote>

Nat lần 2 xảy ra  ở PC1, Trên PC1 cấu hình NAT với Win2003server.
packet đến PC1 thì sẽ được lột ip đích (IP A) và thay vào là IP của PC2.
&nbsp;
		</blockquote>
Đúng là người ta có thể dùng môt server cài Win 2003 để làm môt <b><font color='yellow'>NAT SERVER </font></b>. Trong trường hơp này NAT SERVER sẽ đóng vai trò tương tự như môt modem , xét về phương diện NAT . Qúa trình NAT trên NAT server sẽ đưọc thục hiên tại lóp 3 theo mô hình OSI gồm 7 lớp 

Tuy nhiên NAT SERVER chỉ hay đươc dùng khi nó môt phía nôi với mạng Internet và đươc ISP cấp môt đia chỉ WAN IP , phía kia là nối với nhiều máy , mổi máy có môt đia chỉ IP riêng (thí dụ 192.168.1.3, 192.168 . 1.4 .... vân vân ) , theo sơ đồ đã đưọc đơn giản hoá như sau 

<font color='orange'>các máy với IP riêng ---->NAT SERVER -------> Internet </font>

Trong sơ đồ trên nếu áp dụng Static NAT thì 1 máy trong các máy có IP riêng có thể trở thành môt webserver , thí du máy có ip 192.168.1.4 có thề map đến WAN IP mà ISP cấp cho NAT SERVER 
Sơ đồ trên còn có môt công dụng khác , có khi đươc coi là quan trong hơn , đó là dủng SERVER cài Win 2003 như môt hardware firewall , nhưng vấn đề này ta bàn sau 

Trơ lại vấn đề trên : vấn đề mà bạn dabu đặt ra là thiết lâp 2 webserver trong mạng LAN . Hai webserver mắc " nối tiếp " và  bạn dabu cho biết là <b><font color='orange'>chỉ mở môt cổng 80 trên modem </font></b>(xin nhăc lại là chỉ mở môt cổng 80 trên modem ,không mở thêm công khác thí dụ 8080)
Như vậy 
Nếu bạn vanyen2000 nối PC1 với môt lỗ cắm cáp mạng của ADSL modemvà nối PC2 với lỗ cắm thứ hai ( lỗ khác ) mà PC 2 cài Win 2003  và áp dụng NAT trên Win2003, thì có thể biến PC1 và PC2 trở thành hai Webserver trong mạng LAN , <b><font color='orange'>trong khi vẩn chỉ cần mở môt công 80 trên ADSL modem , chỉ cổng 80 mà thôi . </font></b>( <i>tôi đang chạy tốt môt sơ đồ tương tư như trên , nhưng chỉ có điểm khác là tôi không dùng 1modem và môt NATserver , mà dùng....... 2 modem. Các webserver của tôi chạy rất ổn định gần 4 tháng nay dù hệ thống chỉ dùng Dynamic DNS  </i>) 
 
Còn trong trưòng hơp mắc <b><font color='orange'>nối tiếp </font></b>PC1 và PC2 ( PC 1 cài Win 2003 và đươc sử dụng đồng thời như một NAT SERVER ) thì theo tôi trên modem lại <b><font color='yellow'>phải mở hai cổng 80 và 8080 </font></b>( hay môt cổng khác cũng đưọc ) . Cổng 80 dùng cho Webserver- PC1 và 8080 cho Webserver- PC2 .<font color='yellow'>NHưng xin nhớ là khi client muốn truy cập đến Webserver-PC2 , client bắt buôc phải đánh đia chỉ truy cập trên thanh trình duyệt như sau , thí dụ www.pc2.com:8080</font>

Bạn nào thử mắc nối tiếp PC1 và PC2 như sơ đồ mà dabu đưa ra , nhưng chỉ mở môt cổng 80 trên modem , xem có truy cập từ ngoài đến cả 2 webserver này đươc không ???

<p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote>
 đây ko còn là một mạng lan nữa. Ở đây có thể xem là mạng Internal và LAN. 
&nbsp;
		</blockquote>
Theo tôi nó là hai mạng LAN hay môt LAN trong môt LAN khác 


<p></p>
		<cite class="blockquote">vanyen2000 wrote:</cite><br>
		<blockquote>
 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??  Ko hiểu anh nói gì ?&nbsp;
		</blockquote>
Ý tôi muốn ví von môt chút thôi . Vì theo tôi  WAN IP  mà ISP gán cho modem hay cũng chính là  cho mạng LAN thì luôn thay đổi thông qua giao thức DHCP cài trong Server của ISP , nên không thể có default WAN IP.
 Chỉ có default gateway IP cùa môt (hoặc có thể nhiều ) mạng LAN hay modem , nhưng nó không phải là chính cái WAN IP mà ISP cấp cho modem nói ở trên ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6905</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6905</link>
				<pubDate><![CDATA[Sat, 15 Jul 2006 02:17:39]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>Re: NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[  Á tôi xin bổ sung điểm nhỏ này :
 Khi chay cà hai webserver trong  mạng LAN thì việc chỉ cần mở môt cổng 80 trên modem có ưu điểm hơn viêc phải mở hai cổng ( 80 và 8080 ) rất nhiều .
 Ưu điểm không phải là vấn đề phải mất công config. modem nhiều hay ít , mà là sư thuận lợi cho các client .
 Các client truy câp vào webserver thứ hai có domain thí dụ là www.domain2.com  ( webserver này sử dụng cỗng 8080 trên modem ), <b><font color='yellow'>họ phải biết , phải nhớ là cần đánh đủ trên thanh trình duyệt đia chỉ như sau : www.domain2.com:8080 . Nhưng rất ít người biết hay nhớ phải làm như vậy . Họ chỉ có thói quen là đánh :www.domain2.com  thôi  . Nhưng đánh  như vậy thì không bao giờ truy cập đựoc đến webserver thứ hai này </font></b>.
Khi đánh www.domain2.com thì cổng truy câp măc định là 80 

Port 8080 chỉ dùng trong thử nghiêm , không hay rất ít dùng trong dichvu WEB phổ thông cho public ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#6924</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#6924</link>
				<pubDate><![CDATA[Sat, 15 Jul 2006 03:55:46]]> GMT</pubDate>
				<author><![CDATA[ PXMMRF]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mudzot wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">PXMMRF wrote:</cite><br>
		<blockquote>
<font color='orange'>Bạn viết :Tại PC1 xảy ra <b>NAT lần 2</b>, IP đích (đang là IP A) bị lột đi, thay bằng IP của PC2, bảng NAT của PC1 có thêm 1 entry tương ứng với kết nối giữa IP client với IP của PC2.</font>

<font color='yellow'><i>Như bạn viết thế này thì qua trình <b>NAT lần 2 </b>
 cần phải thưc hiện tại đâu ?? Nói môt cách khác là làm thế nào để gói tin từ máy client khi đến card mạng của PC1 có thể đựoc NAT lần 2 .
 Đương nhiên qua trình cấu hình modem theo NAT phải thưc hiện ở chính  ADSL modem . Vậy thì bạn NAT như thế nào để gói tin cùa máy client sau khi qua modem ( ở đây nó đựoc NAT lầ n 1 như bạn nói ) rồi nó tiếp tục đến card mạng của PC 1 , tại đó nó sẽ  đựoc NAT lần 2 , để đến PC2 ?? Bạn thử thi dụ môt rule trong NAT để thưc hiên đựoc yêu cầu trên , thí dụ với  Zoom X5 modem chẳng hạn ??</i></font>


:<font color='orange'>Bạn viết Bổ sung thêm là default gateway của PC2 là PC1 và của PC1 là modem.</font>

 
<font color='yellow'><i>Đối với PC1 thì default gateway có phải là modem không ?? Vậy theo bạn gateway của môt mạng LAN đựoc định nghĩa như thế nào .
 Có gì khác giữa IP của gateway của môt mạng LAN với Private  default IP của một módem hay cũng chính là của mạng LAN ( thí dụ 10.0.0.2  hay 198.162.1.1 )
 THeo bạn có  WAN default IP của môt modem hay Mạng LAN ( lắp sau modem ấy ) không ??</i></font>&nbsp;
		</blockquote>
Phần 1 của bác thì vanyen2000 nói rồi, còn phần 2 em bàn luận tiếp. Chuyện default gateway của PC2 là PC1, của PC1 là LAN IP của modem là điều kiện bắt buộc để NAT hoạt động đúng. Gateway của một mạng LAN em  hiểu là đường sang 1 mạng khác :D, default gateway của 1 host là IP cùng mạng với nó (net/mask), sẽ là nơi nó gửi gói tin đến nếu IP đích của gói tin ko nằm trong bảng routing của nó.
Bác PX viết bài bao giờ cũng cẩn thận. Để trả lời một cách cẩn thận em cũng đã xây dựng mô hình giống như thế.
internet -------WAN IP [Win2003] 192.168.0.1 -------- 192.168.0.70 [PC1] 10.0.0.1 ------ 10.0.0.30 [PC2]
- Rule NAT ở win2003 : 
Nếu nhận được gói tin có đích là WAN IP port 8080 thì map vào 192.168.0.70:8080
- Rule NAT ở PC1 :
Nếu nhận được gói tin  từ interface 192.168.70, có IP đích là 192.168.0.70 port 8080 thì map vào 10.0.0.30:80
Trên PC2 em chạy apache, và trang mặc định của nó có câu "NAT, NAT nữa, NAT mãi".
Bây giờ các bác ngoài internet test thử địa chỉ<span class="link"> http://mudzot.homelinux.net:8080</span> mà thấy câu đó có nghĩa là tất cả chạy tốt.
Đây là ví dụ thực tế chứng minh cho 2 lần NAT nối tiếp nhau. Nhưng em chỉ duy trì được nó trong khoảng 1 ngày (vì còn lấy máy làm việc). Bác nào vào thấy chạy tốt thì xác nhận hộ :)&nbsp;
		</blockquote>

Tại lão không đọc kỹ bài tôi viết và yêu cầu của dabu.
Ý dabu chỉ muốn mở <font color='yellow'>1 port 80 duy nhất trên cả 2 Webserver</font>.Giả sử Client truy cập vào domain dạng<span class="link"> http://domainpc2.com</span> để mong muốn đến được trang web nằm trên PC 2 thì Request từ ngoài Internet có Source IP là IP của Client , Des IP là IP WAN của modem ADSL 
Như vậy khi request đi vào Modem ADSL (or Windows2003 Server đóng vai trò NAT như lão nói) nó sẽ lột header sau đó thay Des IP là IP Lan của PC1 .Trên PC1 nó sẽ <font color='yellow'>lại lột header của request này 1 lẫn nữa</font> để thay Des IP là IP LAN của PC 2. Đến đúng lúc này IP bị drop .Bạn có thể sniff thử request để theo dõi. Tôi cũng có thử hoài mà không thành công . :wink: 

Còn nếu trên PC1 và PC2 mở 2 port khác nhau kiểu như 80 và 8080 thì có lẽ được. Cái này tôi chưa test.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#7086</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#7086</link>
				<pubDate><![CDATA[Sat, 15 Jul 2006 21:20:33]]> GMT</pubDate>
				<author><![CDATA[ thangdiablo]]></author>
			</item>
			<item>
				<title>NAT qua 2 pc theo kiểu nối tiếp.Làm Webserver</title>
				<description><![CDATA[ Tớ set up cái ví dụ trên để test chuyện NAT nối tiếp nhau vài lần, cái dest IP có bị lột đi bao nhiêu lần thì nó cũng vẫn hợp lệ, chỉ cần cấu hình Dest NAT đúng dành cho đường tới của request và đặt default gateway đúng cho đường reply quay lại là .. đường thông hè thoáng
Còn yêu cầu của dabu mở 1 cổng trên modem, rồi thì 1 cổng trên PC1, request từ ngoài có lẽ chỉ phân biệt 2 webserver bởi domainname, do vậy thay vì NAT trên PC1 có lẽ cấu hình name based virtual host kết hợp với mod_proxy của apache trên PC1 là tự nhiên hơn.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/760.html#7182</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/760.html#7182</link>
				<pubDate><![CDATA[Sun, 16 Jul 2006 05:51:11]]> GMT</pubDate>
				<author><![CDATA[ mudzot]]></author>
			</item>
	</channel>
</rss>
