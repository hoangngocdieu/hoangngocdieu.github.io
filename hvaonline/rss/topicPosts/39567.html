<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "ftp lên Apache web root - gán permission thế nào cho đúng"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.hva</link>
		<description><![CDATA[Latest messages posted in the topic "ftp lên Apache web root - gán permission thế nào cho đúng"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Hi all,

Bạn có một website domain.com, web root tại /var/www/html/domain.com. Bạn cần tạo một FTP server cho developers upload code. $HOME folder cho các ftp users này bạn sẽ để thế nào? Giả sử: Apache chạy với quyền của user apache, còn user chạy FTP server là nobody. Bạn sẽ gán quyền thế nào cho /var/www/html/domain.com?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243429</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243429</link>
				<pubDate><![CDATA[Wed, 13 Jul 2011 00:24:47]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Home folder cho các users mình sẽ để:

/var/www/html/{user's_domain}

Và nếu như để cách mình ở trên thì /var/www/html/domain.com có user là: domain và gán quyền chown /var/www/html/domain.com cho user, group là domain luôn.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243596</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243596</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 04:12:24]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>Home folder cho các users mình sẽ để:

/var/www/html/{user's_domain}

Và nếu như để cách mình ở trên thì /var/www/html/domain.com có user là: domain và gán quyền chown /var/www/html/domain.com cho user, group là domain luôn.&nbsp;
		</blockquote>
Còn permission thì sao? FTP server bạn chạy dưới quyền của user nào?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243597</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243597</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 04:17:42]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ FTP Server mình nghĩ không cần gán cho nó quyền gì đặc biệt nên có thể chạy dưới quyền user nobody.

Permission mình nghĩ nên để mặc định cho folder là 755, thông thường là vậy :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243598</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243598</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 04:30:34]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>FTP Server mình nghĩ không cần gán cho nó quyền gì đặc biệt nên có thể chạy dưới quyền user nobody.

Permission mình nghĩ nên để mặc định cho folder là 755, thông thường là vậy :)&nbsp;
		</blockquote>
Vậy những thư mục upload qua FTP thì liệu apache có quyền write không? (hoặc ngược lại đối với những thư mục do Apache tạo ra)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243612</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243612</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 10:26:52]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ 1. Quyền hạn trong Linux thì chia thành 3 phần: User, Group, Other. Giả sử file A upload qua user U. Thì file A đó xem Apache là thành phần Other. Nếu chmod cho A ở phần Other là write thì Apache vẫn write được.

2. Tương tự với Apache ở phần giải thích trên.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243614</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243614</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 10:36:36]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>1. Quyền hạn trong Linux thì chia thành 3 phần: User, Group, Other. 
&nbsp;
		</blockquote>
Chính xác hơn là owner.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Giả sử file A upload qua user U. Thì file A đó xem Apache là thành phần Other. Nếu chmod cho A ở phần Other là write thì Apache vẫn write được.

2. Tương tự với Apache ở phần giải thích trên.&nbsp;
		</blockquote>
Vậy tất cả mọi other users đều có quyền write à? Từ "đúng" trong tiêu đề được hiểu là không thừa và cũng không thiếu.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243616</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243616</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 10:52:28]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Mình chưa nghĩ đến vấn đề phải chính xác như vậy.

Nếu chính xác như vậy mình nghĩ cách giải quyết như sau:

1. Users & home folder thì như mình đề xuất.

2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có cả user apache (mình đang suy nghĩ có nên cho ftp chạy user riêng và vào group này không nhỉ ?!)

Mình hơi confuse trong cái chữ "đúng" này. Không biết quanta có đưa ra 1 mô hình chính xác (như cần file abc.php được user nào write, user nào read) thì mình suy nghĩ giải pháp nó chi tiết hơn :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243617</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243617</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 11:04:47]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Nếu chính xác như vậy mình nghĩ cách giải quyết như sau:

1. Users & home folder thì như mình đề xuất.
&nbsp;
		</blockquote>
Thật ra thì mình cũng chưa hiểu chỗ /var/www/html/{user's_domain}, user's_domain ở đây là gì, có liên quan gì đến /var/www/html/domain.com. FTP users upload lên đó rồi làm sao nữa?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có cả user apache (mình đang suy nghĩ có nên cho ftp chạy user riêng và vào group này không nhỉ ?!)
&nbsp;
		</blockquote>
Vậy nếu có 100 users thì phải add apache vào 100 groups à?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Mình hơi confuse trong cái chữ "đúng" này. Không biết quanta có đưa ra 1 mô hình chính xác (như cần file abc.php được user nào write, user nào read) thì mình suy nghĩ giải pháp nó chi tiết hơn :)&nbsp;
		</blockquote>
Có lẽ bạn chưa đọc kỹ hoặc chưa hiểu cái mô hình mình đặt ra và nói trong post đầu tiên nên mới 'confuse'. Mình nói lại nhé:
- website công ty bạn chạy trên Apache, DocumentRoot tại /var/www/html/domain.com
- Apache chạy với quyền của user apache và group apache
- bạn cần tạo một FTP server để các lập trình viên upload code lên đó. Vậy home folder cho các FTP users này sẽ để thế nào? Có thể mở rộng cho các trường hợp: dùng user hệ thống + xác thực qua PAM, dùng virtual users, ...
- FTP server này chạy với quyền của user nobody và group nobody
- vậy /var/www/html/domain.com phải có permission thế nào, chown, chgrp ra sao để thoả mãn được nhu cầu đặt ra là: 
<ul><li>Apache có thể đọc, ghi được các files, folders do FTP users upload
FTP users có thể đọc, ghi được các files, folders cho Apache tạo ra
và chỉ vậy mà thôi</li></ul>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243619</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243619</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 11:23:54]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Vậy là mình hiểu cái chỗ home folder. Mình cứ nghĩ là mỗi user là 1 domain riêng nên nhầm :).

Vậy bây giờ mình suggest lại như sau:

Home folder cho mỗi user: /var/www/html/domain.com/{user}/

Giải pháp của mình để giải quyết vấn đề file tạo ra bởi Apache & FTP là:

1. Apache chạy với quyền của user apache và group apache.

2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có user, apache.

3. Để giải quyết vấn đề 100 users thì ta cứ viết 1 script. Hoạt động của script như sau:

a. Hỏi tên user cần tạo.
b. Tạo user.
c. Tạo group.
d. Add apache vào user's group.
e. chown folder (home directory) user:user's group (user's group ở đây bao gồm user, apache).
f. chmod folder: 77x.
g. Kết thúc script

Như vậy đã thoả mãn điều kiện của quanta, và việc cho phép các users xem nội dung của nhau hay không thì tuỳ vào chữ x của phần 4, mục f.


]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243620</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243620</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 11:35:01]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Vậy bây giờ mình suggest lại như sau:

Home folder cho mỗi user: /var/www/html/domain.com/{user}/
&nbsp;
		</blockquote>
Ơ, vậy là mỗi người upload code lên một chỗ khác nhau à?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Giải pháp của mình để giải quyết vấn đề file tạo ra bởi Apache & FTP là:

1. Apache chạy với quyền của user apache và group apache.

2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có user, apache.
&nbsp;
		</blockquote>
Nghĩa là bạn dùng user hệ thống (được tạo ra trong /etc/passwd).
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
3. Để giải quyết vấn đề 100 users thì ta cứ viết 1 script. Hoạt động của script như sau:

a. Hỏi tên user cần tạo.
b. Tạo user.
c. Tạo group.
d. Add apache vào user's group.
e. chown folder (home directory) user:user's group (user's group ở đây bao gồm user, apache).
f. chmod folder: 77x.
g. Kết thúc script

Như vậy đã thoả mãn điều kiện của quanta,
&nbsp;
		</blockquote>
Không thấy liên quan gì đến nobody nhỉ? Và như này thì liệu những thư mục <b>mới</b> do Apache tạo ra hoặc FTP user upload sẽ có quyền mặc định là bao nhiêu?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
 và việc cho phép các users xem nội dung của nhau hay không thì tuỳ vào chữ x của phần 4, mục f.
&nbsp;
		</blockquote>
Lưu ý là tất cả các lập trình viên này làm việc trong cùng một nhóm, nghĩa là họ cùng thao tác với /var/www/html/domain.com. Không hiểu bạn đặt home folder cho mỗi user vào trong domain.com thì DocumentRoot sẽ thành thế nào.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243622</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243622</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 11:51:13]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Thật ra thì mình cũng chưa hiểu chỗ /var/www/html/{user's_domain}, user's_domain ở đây là gì, có liên quan gì đến /var/www/html/domain.com. FTP users upload lên đó rồi làm sao nữa? &nbsp;
		</blockquote>

1 user có thể có nhiều domain nên đặt theo cú pháp như sau thì mình thấy hợp lý hơn

/home/user1/www/domaina.com/public_html
/home/user1/www/domainb.com/public_html


Theo mình thì nên đưa ftp user và apache user vào 1 group

gán ownership của folder /home/user1/www/domaina.com/public_html cho groupabc rồi set quyền read write cho folder đó

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># groupadd groupabc
# useradd -G groupabc ftp
# useradd -G groupabc apache
# chown -R :groupabc /home/user1/www/domaina.com/public_html
# chmod -R g+rw /home/user1/www/domaina.com/public_html</pre>
		</div>
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243623</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243623</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 11:57:32]]> GMT</pubDate>
				<author><![CDATA[ mv1098]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Nếu tất cả đều làm trong 1 chỗ thì mình nghĩ home folder của tất cả đều trỏ về /var/www/html/domain.com và folder này owner là apache.

Nobody thì mình thấy không liên quan gì trong đây cả, vì nhiệm vụ của nó chỉ là chạy FTPD thôi, còn quyền khi upload thì là của users.

Tóm lại:

1. /var/www/html/domain.com là home folder cho tất cả các users nhưng owner bởi apache. Home folder cho tất cả các users để khi user login vào FTP, FTP chuyển về /var/www/html/domain.com . Quyền hạn của /var/www/html/domain.com là: 775 nhằm đảm bảo tất cả các users đều có quyền read/write trong đây.

2. Config lại FTPD để khi user upload lên thì quyền hạn mặc định là: 775 

3. Nếu đã có nguyên tắc hoạt động thì mình nghĩ việc viết script không khó với quanta :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243624</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243624</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 12:00:53]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ @mv1098: mình thấy gần "chuẩn" rồi đó. Nhưng bạn trả lời nốt câu này nhé:
<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>những thư mục mới do Apache tạo ra hoặc FTP user upload sẽ có quyền mặc định là bao nhiêu?&nbsp;
		</blockquote>

<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>Nếu tất cả đều làm trong 1 chỗ thì mình nghĩ home folder của tất cả đều trỏ về /var/www/html/domain.com và folder này owner là apache.
&nbsp;
		</blockquote>
OK. Còn group là gì?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Nobody thì mình thấy không liên quan gì trong đây cả, vì nhiệm vụ của nó chỉ là chạy FTPD thôi, còn quyền khi upload thì là của users.
&nbsp;
		</blockquote>
Bạn thử làm đi xem nó có liên quan không nhé.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Tóm lại:

1. /var/www/html/domain.com là home folder cho tất cả các users nhưng owner bởi apache. Home folder cho tất cả các users để khi user login vào FTP, FTP chuyển về /var/www/html/domain.com . Quyền hạn của /var/www/html/domain.com là: 775 nhằm đảm bảo tất cả các users đều có quyền read/write trong đây.
&nbsp;
		</blockquote>
OK.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
2. Config lại FTPD để khi user upload lên thì quyền hạn mặc định là: 775 
&nbsp;
		</blockquote>
Còn thư mục do Apache tạo ra thì sao?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
3. Nếu đã có nguyên tắc hoạt động thì mình nghĩ việc viết script không khó với quanta :)&nbsp;
		</blockquote>
Nói nhỏ là cái này mình làm rồi và đem ra thảo luận. Hơn nữa, mình cũng không ngại viết script gì cả.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243625</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243625</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 12:20:29]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>những thư mục mới do Apache tạo ra hoặc FTP user upload sẽ có quyền mặc định là bao nhiêu?  &nbsp;
		</blockquote>

Theo mình default permission sẽ set là rwx]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243626</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243626</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 12:49:48]]> GMT</pubDate>
				<author><![CDATA[ mv1098]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">mv1098 wrote:</cite><br>
		<blockquote>
1 user có thể có nhiều domain nên đặt theo cú pháp như sau thì mình thấy hợp lý hơn

/home/user1/www/domaina.com/public_html
/home/user1/www/domainb.com/public_html
&nbsp;
		</blockquote>
Sau đó trỏ thế nào về /var/www/html/domain.com nhỉ?
<p></p>
		<cite class="blockquote">mv1098 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>những thư mục mới do Apache tạo ra hoặc FTP user upload sẽ có quyền mặc định là bao nhiêu?  &nbsp;
		</blockquote>

Theo mình default permission sẽ set là rwx&nbsp;
		</blockquote>
Cho owner, group, hay other?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243631</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243631</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 19:41:04]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>Nếu tất cả đều làm trong 1 chỗ thì mình nghĩ home folder của tất cả đều trỏ về /var/www/html/domain.com và folder này owner là apache.
&nbsp;
		</blockquote>
OK. Còn group là gì?
&nbsp;
		</blockquote>
Group là apache, chmod /var/www/html/domain.com thành 777

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Nobody thì mình thấy không liên quan gì trong đây cả, vì nhiệm vụ của nó chỉ là chạy FTPD thôi, còn quyền khi upload thì là của users.
&nbsp;
		</blockquote>
Bạn thử làm đi xem nó có liên quan không nhé.
&nbsp;
		</blockquote>

Chỗ này mình còn hơi lúng túng. Vì mình làm thì trước nay FTP mình không care về user chạy nó. Mình chỉ care khi bật anymous lên thôi :)

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
2. Config lại FTPD để khi user upload lên thì quyền hạn mặc định là: 775 
&nbsp;
		</blockquote>
Còn thư mục do Apache tạo ra thì sao?
&nbsp;
		</blockquote>
Thư mục do Apache tạo thì là 775 luôn.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243634</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243634</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 20:27:17]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Group là apache, chmod /var/www/html/domain.com thành 777
&nbsp;
		</blockquote>
Ngay từ khi mới làm quen với Linux mình đã nhớ nằm lòng một câu là: đừng bao giờ chmod cái gì thành 777. Bạn thử nghĩ xem lý do là gì?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Chỗ này mình còn hơi lúng túng. Vì mình làm thì trước nay FTP mình không care về user chạy nó. Mình chỉ care khi bật anymous lên thôi :)
&nbsp;
		</blockquote>
Vậy thử tìm hiểu kỹ lại xem, nhất là khi dùng virtual users.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Thư mục do Apache tạo thì là 775 luôn.
&nbsp;
		</blockquote>
Thật không vậy? 775 là mặc định tạo ra đã thế hay là phải chmod. Quyền này do cái gì quyết định?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243641</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243641</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 21:24:49]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Group là apache, chmod /var/www/html/domain.com thành 777
&nbsp;
		</blockquote>
Ngay từ khi mới làm quen với Linux mình đã nhớ nằm lòng một câu là: đừng bao giờ chmod cái gì thành 777. Bạn thử nghĩ xem lý do là gì?
&nbsp;
		</blockquote>

Đúng là chmod 777 thì rất nhiều nhược điểm. Nhưng nếu không chmod 777 thì lại không có cách nào làm cho các users khác có quyền write trong đây.

quanta có cao kiến gì nếu như giải pháp là của mình nhưng khắc phục được điểm này?

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Chỗ này mình còn hơi lúng túng. Vì mình làm thì trước nay FTP mình không care về user chạy nó. Mình chỉ care khi bật anymous lên thôi :)
&nbsp;
		</blockquote>
Vậy thử tìm hiểu kỹ lại xem, nhất là khi dùng virtual users.
&nbsp;
		</blockquote>

quanta có thể gởi cho mình tài liệu để tìm hiểu kỹ hơn về phần này không?

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Thư mục do Apache tạo thì là 775 luôn.
&nbsp;
		</blockquote>
Thật không vậy? 775 là mặc định tạo ra đã thế hay là phải chmod. Quyền này do cái gì quyết định?&nbsp;
		</blockquote>
&nbsp;
		</blockquote>

Phải chmod lại. Vì mặc định Apache gán quyền 644.

Mình đang nghĩ đến giải pháp mỗi users một home folder riêng, sau đó tất cả đều hardlink về, không biết được không nhỉ? Mình chưa thử hardlink với FTP bao giờ cả :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243646</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243646</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 21:43:57]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Đúng là chmod 777 thì rất nhiều nhược điểm. Nhưng nếu không chmod 777 thì lại không có cách nào làm cho các users khác có quyền write trong đây.

quanta có cao kiến gì nếu như giải pháp là của mình nhưng khắc phục được điểm này?
&nbsp;
		</blockquote>
Hình như bạn chưa đọc kỹ bài của mv1098 ở post #12.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
quanta có thể gởi cho mình tài liệu để tìm hiểu kỹ hơn về phần này không?
&nbsp;
		</blockquote>
Ngay cả khi với system users, xác thực qua PAM bạn cứ tạo một vài user rồi thử xem có liên quan đến user chạy FTP server không. Còn virtual users thì dùng FTP server nào thì Google cho FTP server ấy.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Phải chmod lại. Vì mặc định Apache gán quyền 644.
&nbsp;
		</blockquote>
Không, quyền mặc định của thư mục là 755. Làm sao biết khi nào Apache hay FTP users tạo ra một thư mục mới mà chmod, chẳng nhẽ lại dùng inotify cron. Bạn tìm hiểu thêm về umask xem.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Mình đang nghĩ đến giải pháp mỗi users một home folder riêng, sau đó tất cả đều hardlink về, không biết được không nhỉ? Mình chưa thử hardlink với FTP bao giờ cả :)&nbsp;
		</blockquote>
mount có tuỳ chọn <b>--bind</b> đấy.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243648</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243648</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 22:02:44]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Đúng là chmod 777 thì rất nhiều nhược điểm. Nhưng nếu không chmod 777 thì lại không có cách nào làm cho các users khác có quyền write trong đây.

quanta có cao kiến gì nếu như giải pháp là của mình nhưng khắc phục được điểm này?
&nbsp;
		</blockquote>
Hình như bạn chưa đọc kỹ bài của mv1098 ở post #12.
&nbsp;
		</blockquote>

Đã đọc kỹ, giải pháp của mình ở trên cũng giống như bạn mv1098 mà? nhưng giải pháp đó thì mình không nghĩ cách nào giải quyết được thằng DocumentRoot

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
quanta có thể gởi cho mình tài liệu để tìm hiểu kỹ hơn về phần này không?
&nbsp;
		</blockquote>
Ngay cả khi với system users, xác thực qua PAM bạn cứ tạo một vài user rồi thử xem có liên quan đến user chạy FTP server không. Còn virtual users thì dùng FTP server nào thì Google cho FTP server ấy.
&nbsp;
		</blockquote>

Mình sẽ xem lại phần này.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Phải chmod lại. Vì mặc định Apache gán quyền 644.
&nbsp;
		</blockquote>
Không, quyền mặc định của thư mục là 755. Làm sao biết khi nào Apache hay FTP users tạo ra một thư mục mới mà chmod, chẳng nhẽ lại dùng inotify cron. Bạn tìm hiểu thêm về umask xem.
&nbsp;
		</blockquote>
Trước nay mình chỉ làm umask cho FTP chứ chưa cho Apache nên tìm hiểu lại phần này.

Vẫn đang suy nghĩ các giải pháp khác :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243649</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243649</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 22:14:46]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Đã đọc kỹ, giải pháp của mình ở trên cũng giống như bạn mv1098 mà? 
&nbsp;
		</blockquote>
Giống là giống thế nào? Một đằng là add apache và nobody vào chung một group rồi gán quyền write cho group, còn một đằng là add apache vào tất cả các group của FTP users.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
nhưng giải pháp đó thì mình không nghĩ cách nào giải quyết được thằng DocumentRoot
&nbsp;
		</blockquote>
Dùng mount --bind.
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Trước nay mình chỉ làm umask cho FTP chứ chưa cho Apache nên tìm hiểu lại phần này.
&nbsp;
		</blockquote>
Phải gán umask cho cả 2 hoặc dùng SGID.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243651</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243651</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 22:22:23]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Đã đọc kỹ, giải pháp của mình ở trên cũng giống như bạn mv1098 mà? 
&nbsp;
		</blockquote>
Giống là giống thế nào? Một đằng là add apache và nobody vào chung một group rồi gán quyền write cho group, còn một đằng là add apache vào tất cả các group của FTP users.
&nbsp;
		</blockquote>

Có thể bạn quanta không hiểu ý mình ở topic mình đã viết ở trên. 

<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có cả user apache 
&nbsp;
		</blockquote>

Chữ user của mình ở đây được hiểu là FTP User.

Vậy là giải pháp đã có rồi, mình không biết về mount --bind nên thành ra đi dài dòng.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243652</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243652</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 22:31:32]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
Có thể bạn quanta không hiểu ý mình ở topic mình đã viết ở trên. 
&nbsp;
		</blockquote>
Bạn nghĩ rằng mình không hiểu ở chỗ nào vậy?
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">phonglanbiec wrote:</cite><br>
		<blockquote>
2. Mỗi một user thì có group cùng tên, nhưng trong group đó thì có cả user apache 
&nbsp;
		</blockquote>
Chữ user của mình ở đây được hiểu là FTP User.
&nbsp;
		</blockquote>
Mình có hiểu thành cái gì khác đâu nhỉ.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243653</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243653</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 22:47:08]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ Mình khẳng định cách làm của mình giống như mv1098 ở điểm group. Mà quanta nói không giống thì bạn đã hiểu khác đi rồi. Vì suy nghĩ của mình thì mình rõ chính xác nó nhất chứ.

Mà bắt đầu lạc đề rồi, dù cách mình đúng hay sai thì mình cũng hiểu thêm 1 cái mới trong topic này là mount --bind :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243654</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243654</link>
				<pubDate><![CDATA[Fri, 15 Jul 2011 23:18:05]]> GMT</pubDate>
				<author><![CDATA[ phonglanbiec]]></author>
			</item>
			<item>
				<title>ftp lên Apache web root - gán permission thế nào cho đúng</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">mv1098 wrote:</cite><br>
		<blockquote>
1 user có thể có nhiều domain nên đặt theo cú pháp như sau thì mình thấy hợp lý hơn

/home/user1/www/domaina.com/public_html
/home/user1/www/domainb.com/public_html
&nbsp;
		</blockquote>
Sau đó trỏ thế nào về /var/www/html/domain.com nhỉ?
&nbsp;
		</blockquote>

Cái này dùng user_dir

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">mv1098 wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>những thư mục mới do Apache tạo ra hoặc FTP user upload sẽ có quyền mặc định là bao nhiêu?  &nbsp;
		</blockquote>

Theo mình default permission sẽ set là rwx&nbsp;
		</blockquote>
Cho owner, group, hay other?&nbsp;
		</blockquote>
set rwx cho owner và group thôi còn other set r-x

Nếu sử dụng unmask thì mình sẽ set 002 quanta thấy có ổn không ?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243660</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/39567.hva#243660</link>
				<pubDate><![CDATA[Sat, 16 Jul 2011 00:44:55]]> GMT</pubDate>
				<author><![CDATA[ mv1098]]></author>
			</item>
	</channel>
</rss>
