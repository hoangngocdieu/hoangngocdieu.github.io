<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "CPU tăng cao khi traffic tăng"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "CPU tăng cao khi traffic tăng"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>CPU tăng cao khi traffic tăng</title>
				<description><![CDATA[ Hi mọi người

Mình có nhiều web server chạy nginx + php-fpm (web app của mình là php+mysql), phía trước mình có một proxy để đẩy vào các web node, db nằm trên một node khác

Vấn đề là web server mình cũng có cấu hình khá mạnh, RAM tối thiểu 16GB, CPU thì 1 vài con E3 1230, vài con E5-2620. Khi user của mình vào một url dạng<span class="link"> http://abc.xyz/hvaonline</span> (page này có cache bằng memcache) nhưng traffic tăng chỉ tầm gấp đôi, gấp 3 là bị 502 bad gateway liền

Mình có theo dõi trạng thái server thì thấy RAM sử dụng rất ít, tầm 8GB nhưng CPU thì tăng khá cao, đây là một đoạn mình ngắt ra 

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ vmstat 2 20
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
37  3  62768 369728 329080 6315536    0    0     0     6    0    0  8  0 92  0  0
40  0  62768 430356 329080 6315420    0    0     0    86 27305 9211 96  3  1  0  0
37  0  62768 426024 329080 6315428    0    0     0     0 24632 6733 98  2  0  0  0
38  1  62768 414368 329080 6315436    0    0     0     8 25024 6717 98  2  0  0  0
31  0  62768 373828 329084 6315440    0    0     0    62 24578 6477 97  2  1  0  0
33  0  62768 404016 329084 6315444    0    0     0   348 25252 7493 95  2  2  1  0
34  0  62768 401508 329088 6315560    0    0     0    46 25392 7085 97  2  1  0  0
32  0  62768 400996 329088 6315576    0    0     0     0 25860 7565 97  2  1  0  0
33  0  62768 385920 329088 6315588    0    0     0    62 25969 7512 96  2  2  0  0
38  0  62768 375628 329092 6315596    0    0     0    62 25362 6995 97  2  1  0  0
37  0  62768 319960 329092 6315704    0    0     0     2 24897 6506 98  2  0  0  0
37  0  62768 355300 329092 6315664    0    0     0     0 26884 8337 95  2  2  1  0
34  3  62768 353408 329092 6315704    0    0     0   116 30260 11883 91  2  5  2  0</pre>
		</div>

Và page này cũng không xử lí gì với phía Database

Nhờ mọi người tư vấn dùm mình có thể làm gì để tuning tình trạng này, cảm ơn mọi người]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45838.html#281730</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45838.html#281730</link>
				<pubDate><![CDATA[Wed, 24 Sep 2014 03:17:17]]> GMT</pubDate>
				<author><![CDATA[ quangteospk]]></author>
			</item>
			<item>
				<title>CPU tăng cao khi traffic tăng</title>
				<description><![CDATA[ did you try  limit_req & limit_conn when I didn't limit reg & conn nginx uses cpu quite alot, after limit reg & conn cpu reduces significantly ok]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45838.html#281744</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45838.html#281744</link>
				<pubDate><![CDATA[Sat, 18 Oct 2014 05:51:53]]> GMT</pubDate>
				<author><![CDATA[ blackwidow]]></author>
			</item>
	</channel>
</rss>
