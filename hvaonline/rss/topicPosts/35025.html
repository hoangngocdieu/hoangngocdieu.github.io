<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Nhờ các anh chị giúp đỡ về RMI"]]></title>
		<link>/hvaonline/posts/list/36.html</link>
		<description><![CDATA[Latest messages posted in the topic "Nhờ các anh chị giúp đỡ về RMI"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ Chào các anh chị trên diễn đàn,
em xây dựng một chương trình đơn giản về RMI như sau:
<font color='red'>file Ball.java</font>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>import java.rmi.*;
import java.io.*;
public class Ball implements Serializable, Remote {
	private int weight;
	public Ball&#40;int w&#41;{
		this.weight=w;
	}
	public int getWeight&#40;&#41;{
		return weight;
	}
	public void setWeight&#40;int w&#41;{
		this.weight=w;
	}
}</pre>
		</div>
<font color='red'>file ServerSide.java</font>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>import java.rmi.*;
public interface ServerSide extends Remote {
	public void ping&#40;Ball b&#41; throws RemoteException;
}</pre>
		</div>
<font color='red'>file ServerSideImpl.java</font>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>import java.rmi.*;
public class ServerSideImpl implements ServerSide {
	
	public void ping&#40;Ball b&#41; throws RemoteException {
		b.setWeight&#40;b.getWeight&#40;&#41;+15&#41;;
	}
}</pre>
		</div>
<font color='red'>file Setup.java</font>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>import java.rmi.*;
import java.rmi.server.*;
public class Setup{
	public static void main&#40;String args&#91;&#93;&#41; throws Exception {
		ServerSide server=new ServerSideImpl&#40;&#41;;
		UnicastRemoteObject.exportObject&#40;server&#41;;
		Naming.rebind&#40;"rmi://localhost/server",server&#41;;
		System.out.println&#40;"Waiting for client..."&#41;;
	}
}</pre>
		</div>
<font color='red'>file Client.java</font>
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>import java.rmi.*;
import java.rmi.server.*;
public class Client{
	public static void main&#40;String args&#91;&#93;&#41; throws Exception {
		Ball ball=new Ball&#40;20&#41;;
		UnicastRemoteObject.exportObject&#40;ball&#41;;
		ServerSide server=&#40;ServerSide&#41;Naming.lookup&#40;"rmi://localhost/server"&#41;;
		System.out.println&#40;"------before-----"&#41;;
		System.out.println&#40;ball.getWeight&#40;&#41;&#41;;
		System.out.println&#40;"------before-----"&#41;;
		server.ping&#40;ball&#41;;
		System.out.println&#40;"------after------"&#41;;
		System.out.println&#40;ball.getWeight&#40;&#41;&#41;;
		System.out.println&#40;"------after------"&#41;;
		//System.out.println&#40;"------new------"&#41;;
		//System.out.println&#40;newBall.getWeight&#40;&#41;&#41;;
		//System.out.println&#40;"------new------"&#41;;
	}
}</pre>
		</div>
em biên dịch toàn bộ các file java và rmic tất cả các file có Remote.
Theo em hiểu về tham chiếu trong RMI là những đối tượng nào implements Remote thì có khả năng tham chiếu từ xa.
Nhưng khi em chạy java Client thì bị quăng ra một mớ Exception.
Không biết có phải em hiểu sai về RMI không nữa nhờ các anh chị giải thích giúp.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215106</guid>
				<link>/hvaonline/posts/list/35025.html#215106</link>
				<pubDate><![CDATA[Sun, 11 Jul 2010 13:11:28]]> GMT</pubDate>
				<author><![CDATA[ karamata]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ Những exceptions ấy cụ thể là gì? Bồ nên đưa lên các exceptions ấy thì dễ định bệnh hơn.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215109</guid>
				<link>/hvaonline/posts/list/35025.html#215109</link>
				<pubDate><![CDATA[Sun, 11 Jul 2010 18:19:24]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>Exception in thread "main" java.lang.IllegalArgumentException: argument type mis
match
        at sun.reflect.NativeMethodAccessorImpl.invoke0&#40;Native Method&#41;
        at sun.reflect.NativeMethodAccessorImpl.invoke&#40;Unknown Source&#41;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke&#40;Unknown Source&#41;
        at java.lang.reflect.Method.invoke&#40;Unknown Source&#41;
        at sun.rmi.server.UnicastServerRef.dispatch&#40;Unknown Source&#41;
        at sun.rmi.transport.Transport$1.run&#40;Unknown Source&#41;
        at java.security.AccessController.doPrivileged&#40;Native Method&#41;
        at sun.rmi.transport.Transport.serviceCall&#40;Unknown Source&#41;
        at sun.rmi.transport.tcp.TCPTransport.handleMessages&#40;Unknown Source&#41;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0&#40;Unknown Sou
rce&#41;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run&#40;Unknown Sour
ce&#41;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask&#40;Unknown Source
&#41;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run&#40;Unknown Source&#41;
        at java.lang.Thread.run&#40;Unknown Source&#41;
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer&#40;Unknow
n Source&#41;
        at sun.rmi.transport.StreamRemoteCall.executeCall&#40;Unknown Source&#41;
        at sun.rmi.server.UnicastRef.invoke&#40;Unknown Source&#41;
        at ServerSideImpl_Stub.ping&#40;Unknown Source&#41;
        at Client.main&#40;Client.java:11&#41;</pre>
		</div>
theo như những gì em học được và em hiểu thì đối tượng Ball vừa có khả năng tham chiếu vừa có khả năng tham trị. Nếu ta đăng ký với máy chủ java rằng nó có khả năng gọi từ xa bằng lệnh UnicastRemoteObject.exportObject(...) thì nó có thể được tham chiếu. Em làm tất cả rồi mà không biết sao bị lỗi. Mong các anh chị giải thích giúp.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215130</guid>
				<link>/hvaonline/posts/list/35025.html#215130</link>
				<pubDate><![CDATA[Sun, 11 Jul 2010 21:56:11]]> GMT</pubDate>
				<author><![CDATA[ karamata]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ Mấy cái exceptions trên không đủ để kết luận gì hết. Chỉ thấy có đoạn này đáng ngờ:

<b>Naming.rebind("rmi://localhost/server",server);</b>

Thử thêm default rmi port (1099) đằng sau localhost xem sao?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215133</guid>
				<link>/hvaonline/posts/list/35025.html#215133</link>
				<pubDate><![CDATA[Sun, 11 Jul 2010 22:24:04]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Mấy cái exceptions trên không đủ để kết luận gì hết. Chỉ thấy có đoạn này đáng ngờ:

<b>Naming.rebind("rmi://localhost/server",server);</b>

Thử thêm default rmi port (1099) đằng sau localhost xem sao?&nbsp;
		</blockquote>
Cái lỗi của em bị quăng ra do Client nên ko liên quan gì đến Server cả. Nếu em bỏ dòng lệnh UnicastRemoteObject.exportObject(ball) trong file Client.java đi thì chương trình chạy đúng nhưng chỉ tham trị mà thôi.
Điều mà em muốn là khi phương thức ping(ball) được gọi bên ServerSideImpl thì đối tượng ball bị thay đổi.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215174</guid>
				<link>/hvaonline/posts/list/35025.html#215174</link>
				<pubDate><![CDATA[Mon, 12 Jul 2010 05:07:55]]> GMT</pubDate>
				<author><![CDATA[ karamata]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">karamata wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Mấy cái exceptions trên không đủ để kết luận gì hết. Chỉ thấy có đoạn này đáng ngờ:

<b>Naming.rebind("rmi://localhost/server",server);</b>

Thử thêm default rmi port (1099) đằng sau localhost xem sao?&nbsp;
		</blockquote>
Cái lỗi của em bị quăng ra do Client nên ko liên quan gì đến Server cả. Nếu em bỏ dòng lệnh UnicastRemoteObject.exportObject(ball) trong file Client.java đi thì chương trình chạy đúng nhưng chỉ tham trị mà thôi.
Điều mà em muốn là khi phương thức ping(ball) được gọi bên ServerSideImpl thì đối tượng ball bị thay đổi.&nbsp;
		</blockquote>

À, ra vậy. 

Tớ vừa xem kỹ lại và nghĩ bồ nên xem lại cách "call" Ball object cũng như cách chuẩn bị Ball object phía server.

Ball cần implement một BallInterface và BallInterface này cần Extends Remote. Trên Client program, bồ cần cast BallInterface và lookup RMI. Ví dụ:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>public static void main &#40;String&#91;&#93; argv&#41; {
    try {
      Ballnterface ball = &#40;BallInterface&#41; Naming.lookup&#40;"rmi://localhost/server"&#41;;
      System.out.println &#40;ball.getWeight&#40;&#41;&#41;;
    } catch &#40;Exception e&#41; {
      System.out.println &#40;"BallClient exception: " + e&#41;;
    }</pre>
		</div>

Làm như vậy, "ball" object được lấy từ xa xuyên qua RMI chớ không phải là object được khởi tạo locally (như bồ đã làm).

Bồ nên đọc kỹ lại <b>UnicastRemoteObject</b> để hiểu rõ tinh thần của nó:<span class="link"> http://download.oracle.com/docs/cd/E17476_01/javase/1.5.0/docs/api/java/rmi/server/UnicastRemoteObject.html</span>

"Ball" của bồ ở đây không hề extends Remote. Hơn nữa, bồ đã instantiate "ball" ngay trên Client rồi lại sử dụng <b>UnicastRemoteObject</b> để export "ball" remotely bằng chính "ball" bồ đã instantiated locally thì "ball" chẳng có giá trị gì hết.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215199</guid>
				<link>/hvaonline/posts/list/35025.html#215199</link>
				<pubDate><![CDATA[Mon, 12 Jul 2010 17:27:44]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">karamata wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>Mấy cái exceptions trên không đủ để kết luận gì hết. Chỉ thấy có đoạn này đáng ngờ:

<b>Naming.rebind("rmi://localhost/server",server);</b>

Thử thêm default rmi port (1099) đằng sau localhost xem sao?&nbsp;
		</blockquote>
Cái lỗi của em bị quăng ra do Client nên ko liên quan gì đến Server cả. Nếu em bỏ dòng lệnh UnicastRemoteObject.exportObject(ball) trong file Client.java đi thì chương trình chạy đúng nhưng chỉ tham trị mà thôi.
Điều mà em muốn là khi phương thức ping(ball) được gọi bên ServerSideImpl thì đối tượng ball bị thay đổi.&nbsp;
		</blockquote>

À, ra vậy. 

Tớ vừa xem kỹ lại và nghĩ bồ nên xem lại cách "call" Ball object cũng như cách chuẩn bị Ball object phía server.

Ball cần implement một BallInterface và BallInterface này cần Extends Remote. Trên Client program, bồ cần cast BallInterface và lookup RMI. Ví dụ:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>public static void main &#40;String&#91;&#93; argv&#41; {
    try {
      Ballnterface ball = &#40;BallInterface&#41; Naming.lookup&#40;"rmi://localhost/server"&#41;;
      System.out.println &#40;ball.getWeight&#40;&#41;&#41;;
    } catch &#40;Exception e&#41; {
      System.out.println &#40;"BallClient exception: " + e&#41;;
    }</pre>
		</div>

Làm như vậy, "ball" object được lấy từ xa xuyên qua RMI chớ không phải là object được khởi tạo locally (như bồ đã làm).

Bồ nên đọc kỹ lại <b>UnicastRemoteObject</b> để hiểu rõ tinh thần của nó:<span class="link"> http://download.oracle.com/docs/cd/E17476_01/javase/1.5.0/docs/api/java/rmi/server/UnicastRemoteObject.html</span>

"Ball" của bồ ở đây không hề extends Remote. Hơn nữa, bồ đã instantiate "ball" ngay trên Client rồi lại sử dụng <b>UnicastRemoteObject</b> để export "ball" remotely bằng chính "ball" bồ đã instantiated locally thì "ball" chẳng có giá trị gì hết.&nbsp;
		</blockquote>
OK men, được rồi. Cảm ơn anh nhiều.
Nhưng có một vài thắc mắc em vẫn chưa hiểu lắm.
1. Tại sao em phải implement một BallInterface và BallInterface này phải extends Remote(trong trường hợp này của em thì em extends cả Remote và Serializable luôn).
2. Theo những gì em hiểu thì ball object được lấy xuyên qua RMI thông qua stub của nó. muốn làm được điều này thì phải cast nó vì lệnh UnicastRemoteObject.exportObject(...) sẽ load cái thằng stub để làm việc thông qua RMI.
Những gì em biết chỉ có thế. anh xem có phải ko?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215241</guid>
				<link>/hvaonline/posts/list/35025.html#215241</link>
				<pubDate><![CDATA[Tue, 13 Jul 2010 02:42:29]]> GMT</pubDate>
				<author><![CDATA[ karamata]]></author>
			</item>
			<item>
				<title>Nhờ các anh chị giúp đỡ về RMI</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">karamata wrote:</cite><br>
		<blockquote>
OK men, được rồi. Cảm ơn anh nhiều.
Nhưng có một vài thắc mắc em vẫn chưa hiểu lắm.
1. Tại sao em phải implement một BallInterface và BallInterface này phải <font color='red'>extends</font> Remote(trong trường hợp này của em thì em extends cả Remote và Serializable luôn).
2. Theo những gì em hiểu thì ball object được lấy xuyên qua RMI thông qua stub của nó. muốn làm được điều này thì phải cast nó vì lệnh UnicastRemoteObject.exportObject(...) sẽ load cái thằng stub để làm việc thông qua RMI.
Những gì em biết chỉ có thế. anh xem có phải ko?&nbsp;
		</blockquote>

Bồ không extends mà implements Remote interface. Nếu bồ đọc kỹ javadoc của Remote interface thì sẽ thấy:

<blockquote>The Remote interface serves to identify interfaces whose methods may be invoked from a non-local virtual machine. <font color='red'>Any object that is a remote object must directly or indirectly implement this interface</font>. Only those methods specified in a "remote interface", an interface that extends java.rmi.Remote are available remotely.

Implementation classes can implement any number of remote interfaces and can extend other remote implementation classes. <font color='red'>RMI provides some convenience classes that remote object implementations can extend which facilitate remote object creation. These classes are java.rmi.server.UnicastRemoteObject and java.rmi.activation.Activatable</font>. &nbsp;
		</blockquote>

Nếu bồ extends Remote interface trực tiếp, bồ không thể lấy được object từ xa. Bồ chỉ có thể extends một class đã implement Remote interface mà thôi.

Tài liệu này giải thích rất rõ:<span class="link"> http://download.oracle.com/docs/cd/E17476_01/javase/1.4.2/docs/guide/rmi/spec/rmiTOC.html</span>

Have fun.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/35025.html#215362</guid>
				<link>/hvaonline/posts/list/35025.html#215362</link>
				<pubDate><![CDATA[Wed, 14 Jul 2010 20:55:54]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
	</channel>
</rss>
