<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Chào mọi người trong gia đình *nix,

Mình đã vĩnh biệt Windows rồi, mới đây thôi, dù chưa làm được gì nhiều với Linux (chỉ có thể gõ văn bản, duyệt web, nghe nhạc MP3 - điều mà khởi động xong Ubuntu là có thể dễ dàng sử dụng). Chỉ mới cài Ubuntu được chừng 10 ngày và nhu cầu không nhiều nên hài lòng với nó và không có ý định trở lại Windows.

Mình cũng đang "truyền bá" tình yêu Cánh Cụt của mình tới bạn bè. Sự hăng hái này hơi thái quá và gặp nạn. Nhờ các bạn cứu giúp:

Tình hình là tập cho thằng bạn dùng Ubuntu trên máy ảo VirtualBOX. Nhưng chạy chậm quá nó chê quá trời. Mà cài lại thì mất công vì mạng nó quá chậm, mỗi lần <b>apt-get </b>thì đợi dài cổ. Thế là mình nghĩ ra trò Ghost máy ảo ra máy thật.

Nó yêu cầu là không được đụng đến trạng thái bình thường của Windows hoặc có biểu hiện gì lạ. Tức không được nạp LILO hay GRUB đè vào MBR và sector 0, track 0 để làm thay đổi các khởi động và không được gây phiền toái kiểu phải bỏ đĩa CD hoặc USB để khởi động Ubuntu.

Mình phải cầu cứu các bạn đây:
- Máy ảo chỉ có một HDD duy nhất, cài <b>Ubuntu 8.04 LTS</b> mặc định, để tự Ubuntu phân chia partition.
- Đã dùng máy ảo ghost qua ghost lại lấy được image 2 phân vùng: vùng chính của Ubuntu và vùng swap của nó.
- Cũng đã ghost thành công vào máy thật.

Giờ thì hiện trạng như sau:

<br>
			<div align="center" class="limitview"><img src='http://img522.imageshack.us/img522/9831/myubuntuyx3.gif' border="0" onload="maxImg(this, 500px);" /></div>

Bây giờ nhờ các bạn hướng dẫn chi tiết để có thể Boot Ubuntu lên. Thỏa mãn các yêu cầu sau:

- Không được phép nạp LILO / GRUB hoặc boot loader nào khác thay thế cái menu mặc định chọn khởi động DOS hoặc Windows XP đang dùng.

- Bổ sung gì đó vào <b>boot.ini</b> và <b>NTLDR</b> để có thể xuất hiện một dòng chọn khởi động Ubuntu trong menu khởi động của Windows kia. Và chọn thì phải khởi động được chứ không báo lỗi là không tìm thấy file.

- Không dùng đĩa mềm hoặc USB , cũng không CD để boot máy mà boot ngay từ ổ cứng

- Được phép chép file ghi cấu hình khởi động LINUX vào bất kỳ partition nào trên ổ cứng để phòng trường hợp boot.ini hay NTLDR trỏ tới để gọi Ubuntu khởi động.

- Không ngồi cài lại Ubuntu từ máy thật với đĩa LiveCD.

Những gì mình có:
- Một máy ảo đang chạy Ubuntu ngon lành có thể gõ các lệnh như máy thật
- Có ổ đĩa mềm và có đĩa trắng để có thể chứa các file khởi động (cần thiết khi tạo đĩa CD boot cần các file .bin)
- Cái không có: đĩa LiveCD Ubuntu 8.04 khởi động live trên máy thật báo lỗi gì đó lâu lắc (có lẽ nó không mount được phân vùng Linux đang nằm kia hay sao ấy). Đã thử cả LiveCD Ubuntu 6.10 và 7.04 đều thất bại. Nhưng khi thay một ổ cứng khác vào thì có thể khởi động ngon lành

Cám ơn các bạn đã nhiệt tình trợ giúp. Đây chính là điều mình đánh giá Linux cao hơn Windows :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152086</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152086</link>
				<pubDate><![CDATA[Fri, 19 Sep 2008 15:18:06]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Mình chỉ thắc mắc cái này, bạn bảo:
<blockquote> Cám ơn các bạn đã nhiệt tình trợ giúp. Đây chính là điều mình đánh giá Linux cao hơn Windows&nbsp;
		</blockquote>

Nhưng cuối cùng vẫn dùng boot.ini của M$ :-/

<blockquote>- Không được phép nạp LILO / GRUB hoặc boot loader nào khác thay thế cái menu mặc định chọn khởi động DOS hoặc Windows XP đang dùng.

- Bổ sung gì đó vào boot.ini và NTLDR để có thể xuất hiện một dòng chọn khởi động Ubuntu trong menu khởi động của Windows kia. Và chọn thì phải khởi động được chứ không báo lỗi là không tìm thấy file. &nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152122</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152122</link>
				<pubDate><![CDATA[Fri, 19 Sep 2008 19:57:23]]> GMT</pubDate>
				<author><![CDATA[ nlfb]]></author>
			</item>
			<item>
				<title>Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>Chào mọi người trong gia đình *nix,

Mình đã vĩnh biệt Windows rồi, mới đây thôi, dù chưa làm được gì nhiều với Linux (chỉ có thể gõ văn bản, duyệt web, nghe nhạc MP3 - điều mà khởi động xong Ubuntu là có thể dễ dàng sử dụng). Chỉ mới cài Ubuntu được chừng 10 ngày và nhu cầu không nhiều nên hài lòng với nó và không có ý định trở lại Windows.
&nbsp;
		</blockquote>
Welcome to penguin's world.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Mình cũng đang "truyền bá" tình yêu Cánh Cụt của mình tới bạn bè. Sự hăng hái này hơi thái quá và gặp nạn. Nhờ các bạn cứu giúp:

Tình hình là tập cho thằng bạn dùng Ubuntu trên máy ảo VirtualBOX. Nhưng chạy chậm quá nó chê quá trời. Mà cài lại thì mất công vì mạng nó quá chậm, mỗi lần <b>apt-get </b>thì đợi dài cổ. Thế là mình nghĩ ra trò Ghost máy ảo ra máy thật.
&nbsp;
		</blockquote>
- Bạn cài qua mạng à?
- Bạn ghost bằng cái gì?
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Nó yêu cầu là không được đụng đến trạng thái bình thường của Windows hoặc có biểu hiện gì lạ. Tức không được nạp LILO hay GRUB đè vào MBR và sector 0, track 0 để làm thay đổi các khởi động và không được gây phiền toái kiểu phải bỏ đĩa CD hoặc USB để khởi động Ubuntu.
&nbsp;
		</blockquote>
Yêu sách nhỉ?
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Mình phải cầu cứu các bạn đây:
- Máy ảo chỉ có một HDD duy nhất, cài <b>Ubuntu 8.04 LTS</b> mặc định, để tự Ubuntu phân chia partition.
- Đã dùng máy ảo ghost qua ghost lại lấy được image 2 phân vùng: vùng chính của Ubuntu và vùng swap của nó.
- Cũng đã ghost thành công vào máy thật.

Giờ thì hiện trạng như sau:

<br>
			<div align="center" class="limitview"><img src='http://img522.imageshack.us/img522/9831/myubuntuyx3.gif' border="0" onload="maxImg(this, 500px);" /></div>
&nbsp;
		</blockquote>
Bạn ghost bằng cái gì?
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Bây giờ nhờ các bạn hướng dẫn chi tiết để có thể Boot Ubuntu lên. Thỏa mãn các yêu cầu sau:

- Không được phép nạp LILO / GRUB hoặc boot loader nào khác thay thế cái menu mặc định chọn khởi động DOS hoặc Windows XP đang dùng.

- Bổ sung gì đó vào <b>boot.ini</b> và <b>NTLDR</b> để có thể xuất hiện một dòng chọn khởi động Ubuntu trong menu khởi động của Windows kia. Và chọn thì phải khởi động được chứ không báo lỗi là không tìm thấy file.
&nbsp;
		</blockquote>
Tại sao lại thích dùng boot loader của Windows?
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
- Không dùng đĩa mềm hoặc USB , cũng không CD để boot máy mà boot ngay từ ổ cứng
&nbsp;
		</blockquote>
Nghe như một câu đố?
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
- Được phép chép file ghi cấu hình khởi động LINUX vào bất kỳ partition nào trên ổ cứng để phòng trường hợp boot.ini hay NTLDR trỏ tới để gọi Ubuntu khởi động.
&nbsp;
		</blockquote>
Nếu cấm nốt cái này chắc boot bằng "niềm tin".
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Những gì mình có:
- Một máy ảo đang chạy Ubuntu ngon lành có thể gõ các lệnh như máy thật
- Có ổ đĩa mềm và có đĩa trắng để có thể chứa các file khởi động (cần thiết khi tạo đĩa CD boot cần các file .bin)
- Cái không có: đĩa LiveCD Ubuntu 8.04 khởi động live trên máy thật báo lỗi gì đó lâu lắc (có lẽ nó không mount được phân vùng Linux đang nằm kia hay sao ấy). Đã thử cả LiveCD Ubuntu 6.10 và 7.04 đều thất bại. Nhưng khi thay một ổ cứng khác vào thì có thể khởi động ngon lành

Cám ơn các bạn đã nhiệt tình trợ giúp. <font color='orange'>Đây</font> chính là điều mình đánh giá Linux cao hơn Windows :)&nbsp;
		</blockquote>
<i>"lỗi gì đó"</i> là lỗi gì? <i>"Thất bại"</i> thế nào?
<font color='orange'>--&gt;</font> cụ thể là điều gì nhỉ?

Tóm lại:
<blockquote><span class="link"> http://www.google.com.vn/search?hl=vi&q=%22dd+if%3D%22+site%3Ahvaonline.net&btnG=T%C3%ACm+ki%E1%BA%BFm&meta=</span>&nbsp;
		</blockquote>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152125</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152125</link>
				<pubDate><![CDATA[Fri, 19 Sep 2008 20:09:39]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Đọc qua cái link này xem thử bồ:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>http://www.tprthai.net/bootmgr.htm</pre>
		</div>
và:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>http://highlandsun.com/hyc/linuxboot.html</pre>
		</div>

Good luck]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152126</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152126</link>
				<pubDate><![CDATA[Fri, 19 Sep 2008 20:38:43]]> GMT</pubDate>
				<author><![CDATA[ FaL]]></author>
			</item>
			<item>
				<title>Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
- Bạn cài qua mạng à?
- Bạn ghost bằng cái gì?
&nbsp;
		</blockquote>

Mình mang đĩa LiveCD đến máy bạn mình, cài vào máy ảo của nó và có dùng một vài lệnh apt-get để cài bổ sung / cập nhật vài gói từ mạng (máy ảo thông ra Internet được).

Mình ghost từ máy ảo ra USB Flash Disk (bạn mình có USB 8 GB) vì máy ảo có thể truy xuất USB từ máy thật như là một thiết bị của nó, và khởi động máy ảo bằng Hiren's Boot có thể truy xuất được USB. Ghost dạng Partition to image.

Sau đó lại Ghost từ USB vào máy thật như trên hình minh họa của mình.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Yêu sách nhỉ?
&nbsp;
		</blockquote>
Để chinh phục được những người đã quá quen với Windows, phải dần dần từng bước để him không Linux mà sợ bỏ chạy mất.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Bạn ghost bằng cái gì?
&nbsp;
		</blockquote>
Norton Ghost 8.3 trên đĩa Hiren's Boot 6.0

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Tại sao lại thích dùng boot loader của Windows?
&nbsp;
		</blockquote>
Vì nó không làm bạn mình hoang mang, và cậu ấy chịu tiếp tục con đường đến với Linux.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Nghe như một câu đố?
&nbsp;
		</blockquote>

Không phải câu đố, mà các thiết bị đó không sẵn (đĩa mềm hay hỏng), và đĩa CD mắt kém đọc chập chờn.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Nếu cấm nốt cái này chắc boot bằng "niềm tin".
&nbsp;
		</blockquote>
Thằng bạn mình cũng hơi "ác" nhưng hắn vẫn còn chừa lối đi cho mình.

<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<i>"lỗi gì đó"</i> là lỗi gì? <i>"Thất bại"</i> thế nào?
<font color='orange'>--&gt;</font> cụ thể là điều gì nhỉ?
&nbsp;
		</blockquote>

Đó là lỗi là Ubuntu nằm lặng lẽ trên Partition của nó mà không được chương trình boot ngó ngàng gì tới, nghĩa là nó nằm như data bình thường chỉ khác là trên phân vùng ext2 nên Windows XP không mở được bằng Explorer thông thường. Không khởi động được tí nào. Hình hài ra sao cả.

Cám ơn cái link tìm kiếm với Google của <b><font color='orange'>quanta</font></b>. Mong được bạn tiếp sức trong bước kế tiếp.

@FaL: cám ơn bồ nhiều nhiều. Để mình thử và báo kết quả lại.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152149</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152149</link>
				<pubDate><![CDATA[Fri, 19 Sep 2008 23:41:14]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Để chinh phục được những người đã quá quen với Windows, phải dần dần từng bước để him không Linux mà sợ bỏ chạy mất.
&nbsp;
		</blockquote>
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Tại sao lại thích dùng boot loader của Windows?
&nbsp;
		</blockquote>
Vì nó không làm bạn mình hoang mang, và cậu ấy chịu tiếp tục con đường đến với Linux.
&nbsp;
		</blockquote>
Có một điều tớ muốn chia sẻ: Nếu bạn của bạn là người kiên nhẫn, làm công việc có dính dáng đến CNTT, chịu khó tìm tòi, học hỏi ... thì bạn nên tiếp tục "dụ dỗ". Ngược lại, tớ nghĩ là nên nghỉ cho khoẻ.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
<p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
<i>"lỗi gì đó"</i> là lỗi gì? <i>"Thất bại"</i> thế nào?
<font color='orange'>--&gt;</font> cụ thể là điều gì nhỉ?
&nbsp;
		</blockquote>

Đó là lỗi là Ubuntu nằm lặng lẽ trên Partition của nó mà không được chương trình boot ngó ngàng gì tới, nghĩa là nó nằm như data bình thường chỉ khác là trên phân vùng ext2 nên Windows XP không mở được bằng Explorer thông thường. Không khởi động được tí nào. Hình hài ra sao cả.
&nbsp;
		</blockquote>
Uh, có thằng nào động đến nó đâu mà nó chả nằm im.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152155</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152155</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 00:02:20]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Thử theo cách của quanta là ổn. Cài GRUB hoặc LILO lên 1 boot sector của partition chứ đừng cài vào MBR. Xong dd cái boot loader ra rồi add vào boot.ini là ok.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152159</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152159</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 00:32:52]]> GMT</pubDate>
				<author><![CDATA[ LeVuHoang]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Mình chịu thua rồi <b>quanta</b> ơi. Cái cách mà sử dụng boot.ini dường như là thua. Lấy được các file rồi nhưng không biết chỉnh đường dẫn thế nào? Đường dẫn hiểu theo hệ điều hành nào? (Ký tự ổ đĩa đó). Cho nên bây giờ thành bạn mình nó chịu cho dùng GRUB, miễn là vấn có thể boot Windows bình thường và menu không quá rắc rối, yêu cầu là chỉ có 2 mục chọn: Ubuntu và Windows XP, thời gian đợi 15 hoặc 30 giây để mặc định là Ubuntu khởi động.

Sau đây là vài "thông số" mình có (khởi động với LiveCD Ubuntu 8.04):

<br>
			<div align="center" class="limitview"><img src='http://img520.imageshack.us/img520/7015/error1yl9.png' border="0" onload="maxImg(this, 500px);" /></div>

Và nội dung menu.lst như sau:

<blockquote>
# menu.lst - See: grub(8), info grub, update-grub(8)
#            grub-install(8), grub-floppy(8),
#            grub-md5-crypt, /usr/share/doc/grub
#            and /usr/share/doc/grub-doc/.

## default num
# Set the default entry to the entry number NUM. Numbering starts from 0, and
# the entry number 0 is the default if the command is not used.
#
# You can specify 'saved' instead of a number. In this case, the default entry
# is the entry saved with the command 'savedefault'.
# WARNING: If you are using dmraid do not use 'savedefault' or your
# array will desync and will not let you boot your system.
default		0

## timeout sec
# Set a timeout, in SEC seconds, before automatically booting the default entry
# (normally the first entry defined).
timeout		3

## hiddenmenu
# Hides the menu by default (press ESC to see the menu)
hiddenmenu

# Pretty colours
#color cyan/blue white/blue

## password ['--md5'] passwd
# If used in the first section of a menu file, disable all interactive editing
# control (menu entry editor and command-line)  and entries protected by the
# command 'lock'
# e.g. password topsecret
#      password --md5 $1$gLhU0/$aW78kHK1QfV3P2b2znUoe/
# password topsecret

#
# examples
#
# title		Windows 95/98/NT/2000
# root		(hd0,0)
# makeactive
# chainloader	+1
#
# title		Linux
# root		(hd0,1)
# kernel	/vmlinuz root=/dev/hda2 ro
#

#
# Put static boot stanzas before and/or after AUTOMAGIC KERNEL LIST

### BEGIN AUTOMAGIC KERNELS LIST
## lines between the AUTOMAGIC KERNELS LIST markers will be modified
## by the debian update-grub script except for the default options below

## DO NOT UNCOMMENT THEM, Just edit them to your needs

## ## Start Default Options ##
## default kernel options
## default kernel options for automagic boot options
## If you want special options for specific kernels use kopt_x_y_z
## where x.y.z is kernel version. Minor versions can be omitted.
## e.g. kopt=root=/dev/hda1 ro
##      kopt_2_6_8=root=/dev/hdc1 ro
##      kopt_2_6_8_2_686=root=/dev/hdc2 ro
# kopt=root=UUID=cf96a88d-d5e6-415d-981f-7af12fab521e ro

## Setup crashdump menu entries
## e.g. crashdump=1
# crashdump=0

## default grub root device
## e.g. groot=(hd0,0)
# groot=(hd0,0)

## should update-grub create alternative automagic boot options
## e.g. alternative=true
##      alternative=false
# alternative=true

## should update-grub lock alternative automagic boot options
## e.g. lockalternative=true
##      lockalternative=false
# lockalternative=false

## additional options to use with the default boot option, but not with the
## alternatives
## e.g. defoptions=vga=791 resume=/dev/hda5
# defoptions=quiet splash

## should update-grub lock old automagic boot options
## e.g. lockold=false
##      lockold=true
# lockold=false

## Xen hypervisor options to use with the default Xen boot option
# xenhopt=

## Xen Linux kernel options to use with the default Xen boot option
# xenkopt=console=tty0

## altoption boot targets option
## multiple altoptions lines are allowed
## e.g. altoptions=(extra menu suffix) extra boot options
##      altoptions=(recovery) single
# altoptions=(recovery mode) single

## controls how many kernels should be put into the menu.lst
## only counts the first occurence of a kernel, not the
## alternative kernel options
## e.g. howmany=all
##      howmany=7
# howmany=all

## should update-grub create memtest86 boot option
## e.g. memtest86=true
##      memtest86=false
# memtest86=true

## should update-grub adjust the value of the default booted system
## can be true or false
# updatedefaultentry=false

## should update-grub add savedefault to the default options
## can be true or false
# savedefault=false

## ## End Default Options ##

title		Ubuntu 8.04.1, kernel 2.6.24-19-generic
root		(hd0,0)
kernel		/boot/vmlinuz-2.6.24-19-generic root=UUID=cf96a88d-d5e6-415d-981f-7af12fab521e ro quiet splash
initrd		/boot/initrd.img-2.6.24-19-generic
quiet

title		Ubuntu 8.04.1, kernel 2.6.24-19-generic (recovery mode)
root		(hd0,0)
kernel		/boot/vmlinuz-2.6.24-19-generic root=UUID=cf96a88d-d5e6-415d-981f-7af12fab521e ro single
initrd		/boot/initrd.img-2.6.24-19-generic

title		Ubuntu 8.04.1, memtest86+
root		(hd0,0)
kernel		/boot/memtest86+.bin
quiet

### END DEBIAN AUTOMAGIC KERNELS LIST&nbsp;
		</blockquote>

Với file trên, hiện tại lỗi Error 17 đang xuất hiện. Nhờ <b>quanta</b> và các bạn hướng dẫn chi tiết giúp nhé. Kể cả nếu phải đánh lệnh để nạp lại GRUB hay làm gì đó (sửa file,...), cần phải mount ra sao luôn nhé, để có thể khởi động được vào Ubuntu, Windows.

Cám ơn <b>quanta</b> các bạn rất nhiều. Yêu mọi người thuộc hệ phái Cánh Cụt  :x ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152197</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152197</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 13:09:12]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Chào superthin,

Sao cái fdisk -l và cái Disk Manager lại report khác nhau ta? Swap nằm gần chót thì fdisk -l lại thông báo ở sda3?

File menu.lst của bạn cấu hình không chính xác. File menu.lst đặt tại /boot nằm trên một partition. Khoai đoán là nó nằm trên partition chứa linux (/dev/sda9) vì chỉ thấy fdisk report cái đó là ext2 hoặc ext3 mà thôi. Bạn chỉnh lại menu.lst, thay đổi <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>root &#40;hd0,0&#41;</pre>
		</div> trở thành <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>root &#40;hd0,8&#41;</pre>
		</div>

Và, trong menu.lst không có một entry nào để boot windows. Bạn thêm các dòng sau để có thể boot vào windows từ GRUB:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>title Windows
rootnoverify &#40;hd0,0&#41;
makeactive
chainloader +1
boot</pre>
		</div>

khoai
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152207</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152207</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 14:30:56]]> GMT</pubDate>
				<author><![CDATA[ Mr.Khoai]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <blockquote> Sao cái fdisk -l và cái Disk Manager lại report khác nhau ta? Swap nằm gần chót thì fdisk -l lại thông báo ở sda3? &nbsp;
		</blockquote>
Có thể vì nó là Primary chăng? Mình cũng không hiểu được tại sao thằng phân vùng chính chứa Linux lại là Logical, mà cái Swap lại là Primary? Liệu việc này có phải là nguyên nhân gây lỗi về sau?

Cám ơn <b>Mr.Khoai</b> đã tham gia hỗ trợ. Mình đã làm theo. Và GRUB đã xuất hiện, chọn Windows XP thì đã có thể khởi động được vào Windows ngon lành. Tuy nhiên, khi chọn Linux thì nảy nòi ra như sau:

Sau khi chạy hàng loạt thông báo liên quan đến quá trình khởi động. Cuối đoạn đó là:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>rio0/input/input1
&#91;   34 139237&#93;VFS: Cannot open root device "sda9" or unknown-block&#40;0,0&#41;
&#91;   34 139322&#93;Please append a correct "root=" boot options; here are the available partitions:
&#91;   34 139418&#93;Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block&#40;0,0&#41;</pre>
		</div>

Rồi thì máy treo đứng đực như ngỗng, bấm tất cả các phím trên bàn phím đều vô tác dụng, chỉ có thể bấm reset trên thùng case máy.

Theo như đoạn chát với một thằng người Rumani, thì nó cắt cụt hết file <b>menu.lst</b> của mình còn như thế này (tức việc khởi động gây lỗi bên trên là đang dùng file menu.lst này đấy, và mình đang dùng file này cho việc khởi động GRUB, file:

<blockquote>
timeout=15

title Ubuntu 8.04 LTS (Hardy Heron)
root (hd0,8)
kernel /boot/vmlinuz-2.6.24-19-generic  root=/dev/sda9

title Windows XP Professional SP2
root (hd0,0)
makeactive
chainloader +1
&nbsp;
		</blockquote>

Nhờ các bạn tiếp tục tiếp sức mình trên con đường chăn chim Cánh Cụt. Xin cám ơn!

--------
<b>Ghi chú:</b> mình chắc rằng tải file ISO image của Ubuntu 8.04 về đúng, có kiểm MD5 chính xác, và đốt  đĩa là thành công, kiểm CRC là ngon lành. Quá trình cài đặt cũng ngon lành, không hề có việc bị treo máy / cúp điện giữa chừng. Đã  từng khởi động vào xài máy ngon. Đĩa cứng cũng không hề bị bad tí nào? (Đã kiểm tra kỹ và đĩa cứng còn rất mới, mua mới vài tháng, máy nằm cố định không va đập / côn trùng bò vào). Cho nên <b>kernel panic</b> gì ấy là có lẽ do cấu hình sai chi đó.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152217</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152217</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 17:05:14]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote><blockquote> Sao cái fdisk -l và cái Disk Manager lại report khác nhau ta? Swap nằm gần chót thì fdisk -l lại thông báo ở sda3? &nbsp;
		</blockquote>
Có thể vì nó là Primary chăng? 
&nbsp;
		</blockquote>
Đúng vậy. 

<br>
			<div align="center" class="limitview"><img src='http://img522.imageshack.us/img522/9831/myubuntuyx3.gif' border="0" onload="maxImg(this, 500px);" /></div>

<br>
			<div align="center" class="limitview"><img src='http://img520.imageshack.us/img520/7015/error1yl9.png' border="0" onload="maxImg(this, 500px);" /></div>

@khoai: Nó report thế là đúng ấy chứ.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Mình cũng không hiểu được tại sao thằng phân vùng chính chứa Linux lại là Logical, mà cái Swap lại là Primary? 
&nbsp;
		</blockquote>
Do bạn chia partition chứ sao.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Liệu việc này có phải là nguyên nhân gây lỗi về sau?
&nbsp;
		</blockquote>
Chính xác. grub phải được cài trên primary partition. Nếu bạn để <b>/boot</b> là một partition riêng biệt thì <b>/boot</b> phải là primary partiton. Nếu bạn để <b>/boot</b> nằm trên <b>/</b> thì <b>/</b> phải là primary partition.

Cái partition table của bạn đang khá "nát". Thường thì người ta dồn hết primary partition về trước, sau đó đến extended và trong extended là logical. Đằng này bạn lại để một chú primary ở sau (swap), rồi lại có cả FAT16 và unallocated partition.

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152227</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152227</link>
				<pubDate><![CDATA[Sat, 20 Sep 2008 18:17:19]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Cái partition table của bạn đang khá "nát". Thường thì người ta dồn hết primary partition về trước, sau đó đến extended và trong extend là logical. Đằng này bạn lại để một chú primary ở sau (swap), rồi lại có cả FAT16 và unallocated partition.
&nbsp;
		</blockquote>
Bây giờ thì mình vào DOS chỉnh sửa đôi chút để các phân vùng mình bớt "nát" như quanta nói. Bây giờ nó như thế này:

<br>
			<div align="center" class="limitview"><img src='http://img379.imageshack.us/img379/4592/hddvn4.png' border="0" onload="maxImg(this, 500px);" /></div>

Đau khổ nhất lúc này là đụng độ cái lỗi gọi là kernel panic. Mà cũng kỳ nhé, đĩa mình (ATA Maxtor 40GB) và  của bạn mình đều là loại cũ, tức là Seagate Baracuda IDE 7.200 vòng / phút, làm gì có SATA hay SCSI thì lẽ ra khi <b>fdisk -l </b>nó phải thể hiện là /dev/hdax chứ sao lại là /dev/sdax nhỉ? Cái này có lẽ là cái gây ra kernel panic.

Bây giờ thế này các bạn ạ, có lẽ là tìm một giải pháp thuộc loại "mang tính thỏa hiệp" một chút, chứ cứ muốn phải giải quyết cho bằng được thì mình không đủ khả năng, đọc tiếng Anh cũng lõm bà lõm bõm, kiểu đó thì thằng bạn nó... chạy mất dép vì thấy mình cũng đã chào thua.

Việc kernel panic kia có lẽ là lỗi nặng nề, đòi hỏi phải compile / reinstall kernel =&gt; cái này thì mình bó tay  :-( 

Mình mong muốn như này: <b>backup tất cả lại hiện trang đang được cài đặt</b>, trừ những gì liên quan đến kernel và / hoặc GRUB. Mục đích là như thế này: mình muốn tiết kiệm thời gian cho việc cài đặt lại các phần mềm vì 2 lý do: 1. Máy bạn mình mạng quá chậm, khu vực điện không thực ổn định =&gt; dễ bị die nửa chừng; 2. Chưa chắc cài lại phần mềm đã thành công - tiện ích đánh tiếng Việt ấy (trước đây khi cài Ubuntu 8.04 lên máy của mình - và lấy bản ghost mang qua máy anh bạn, Ubuntu có đề nghị update đến 39 gói gì ấy, và có những phần mềm mình đã từng cài với lệnh apt-get lên đến vài trăm MB, giờ mà cài máy lại từ đầu thì chết chắc luôn).

Như vậy, việc backup không mang theo cấu hình hệ thống và các thiết lập liên quan đến lỗi kernal panic kể trên nhưng đầy đủ tất cả phần mềm và cấu hình phần mềm, thư mục cá nhân.

Mình mong được các bạn chỉ giúp các câu lệnh để backup ra rồi dùng đĩa CD Ubuntu cài đặt mới lại, sau đó phục hồi các phần mềm được cài đặt, file trong /home,... với vài câu lệnh.

Tiếp tục tiếp sức mình nhé, các bạn. Chân thành gửi lời cám ơn đến các bạn.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152267</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152267</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 00:32:30]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Chính xác. grub phải được cài trên primary partition. Nếu bạn để <b>/boot</b> là một partition riêng biệt thì <b>/boot</b> phải là primary partiton. Nếu bạn để <b>/boot</b> nằm trên <b>/</b> thì <b>/</b> phải là primary partition.
&nbsp;
		</blockquote>
Cái này có bắt buộc ko bác. Từ xưa đến giờ em để tất cả các partition của linux (/boot,/,swap,/home) đều là logical trong Extend. Giờ em ko dùng /boot nữa thì em vẫn chia (swap,/,/home) là logical để trong Extend. Cài các loại FC, SuSE, Slackware, Gentoo, Ubuntu vẫn ngon mà. Có sao đâu ạ!!! format theo cách bác nói thì tốt hơn như thế nào so với cách của em ạ? Chúc mọi người vui!!!

<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Như vậy, việc backup không mang theo cấu hình hệ thống và các thiết lập liên quan đến lỗi kernal panic kể trên nhưng đầy đủ tất cả phần mềm và cấu hình phần mềm, thư mục cá nhân.
&nbsp;
		</blockquote>
Mình có ý này: Bạn dùng APTonCD ấy. Tiện ích này giúp bạn ghi tất cả các phần mềm mà bạn đã download ( nó ở trong /var/cache/apt/ar.../) lên CD. Sau đó bạn bỏ cái CD này sang máy mới cài Ubuntu của your friend. Nó sẽ là một Thirdparty và khi update hoặc cài đặt các phần mềm đã từng cài trên máy cũ sẽ ko cần phải download từ Internet nữa mà nó copy từ CD.

Còn vụ <b>cấu hình phần mềm, thư mục cá nhân </b> thì có lẽ bạn nên copy toàn bộ thư mục /home sang máy mới.
Chúc bạn thành công.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152268</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152268</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 00:42:58]]> GMT</pubDate>
				<author><![CDATA[ little_fire]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">little_fire wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Chính xác. grub phải được cài trên primary partition. Nếu bạn để <b>/boot</b> là một partition riêng biệt thì <b>/boot</b> phải là primary partiton. Nếu bạn để <b>/boot</b> nằm trên <b>/</b> thì <b>/</b> phải là primary partition.
&nbsp;
		</blockquote>
Cái này có bắt buộc ko bác. Từ xưa đến giờ em để tất cả các partition của linux (/boot,/,swap,/home) đều là logical trong Extend. Giờ em ko dùng /boot nữa thì em vẫn chia (swap,/,/home) là logical để trong Extend. Cài các loại FC, SuSE, Slackware, Gentoo, Ubuntu vẫn ngon mà. Có sao đâu ạ!!! format theo cách bác nói thì tốt hơn như thế nào so với cách của em ạ? Chúc mọi người vui!!!
&nbsp;
		</blockquote>
Vấn đề là bạn cài boot loader lên đâu?
Bạn lập một chủ đề mới để thảo luận thêm về vấn đề này. Trước đó, vui lòng đọc thêm về một <span class="link"> http://www.hvaonline.net/hvaonline/posts/list/20/11603.html#133565</span> của tớ để hiểu rõ hơn ý tớ định nói.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152291</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152291</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 02:19:25]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>Mình chịu thua rồi quanta ơi. Cái cách mà sử dụng boot.ini dường như là thua. Lấy được các file rồi nhưng không biết chỉnh đường dẫn thế nào? Đường dẫn hiểu theo hệ điều hành nào? (Ký tự ổ đĩa đó). 
&nbsp;
		</blockquote>
Bạn chưa đọc kỹ rồi. Dump cái boot sector xong thì copy nó sang ổ C và chỉnh lại boot.ini trỏ vào file đó thôi. Tham khảo: 
<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/9088.html</span>
<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/0/19870.html</span>
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Cho nên bây giờ thành bạn mình nó chịu cho dùng GRUB, miễn là vấn có thể boot Windows bình thường và menu không quá rắc rối, yêu cầu là chỉ có 2 mục chọn: Ubuntu và Windows XP, thời gian đợi 15 hoặc 30 giây để mặc định là Ubuntu khởi động.
&nbsp;
		</blockquote>
Ơ, kể cả là khi bạn chỉnh boot.ini thì bạn vẫn dùng grub đấy chứ, nhưng có điều nó được cài lên 1st sector của / partition (chứ không phải là MBR).
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>Mà cũng kỳ nhé, đĩa mình (ATA Maxtor 40GB) và  của bạn mình đều là loại cũ, tức là Seagate Baracuda IDE 7.200 vòng / phút, làm gì có SATA hay SCSI thì lẽ ra khi <b>fdisk -l </b>nó phải thể hiện là /dev/hdax chứ sao lại là /dev/sdax nhỉ? 
&nbsp;
		</blockquote>
<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/11571.html</span>
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Cái này có lẽ là cái gây ra kernel panic.
&nbsp;
		</blockquote>
Tớ nghĩ là không phải. Tham khảo: <span class="link"> http://www.siphos.be/node/25</span>

Tớ nghĩ là nên giải quyết dứt điểm theo cách đầu tiên đi. Bạn vui lòng thử lại và cho biết kết quả cũng như các bước đã làm.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152299</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152299</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 03:19:37]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Sao superthin phức tạp quá nhỉ. Chỉ cần như cách quanta nói là edit lại boot.ini để trỏ vào file dump là xong mà. Ngoài ra Ubuntu cũng detect tốt Windows (ngay cả Windows Vista cũng detected), nếu cần thì bạn cứ install lại grub xem.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152303</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152303</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 03:43:53]]> GMT</pubDate>
				<author><![CDATA[ LeVuHoang]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Bạn chưa đọc kỹ rồi. Dump cái boot sector xong thì copy nó sang ổ C và chỉnh lại boot.ini trỏ vào file đó thôi.
&nbsp;
		</blockquote>
Mình không thể nắm bắt được cái <b>ổ C</b> mà <b>quanta</b> đề cập là đứng trên góc độ nhìn nhận từ đâu? (hệ điều hành nào)
Bởi lẽ nó xảy ra các trường hợp rối rắm sau:
- Trên Windows XP, khi khởi động vào, ổ hệ thống là <b>G:</b> dùng phân vùng NTFS, tức nó là <b>/dev/sda1</b> khi xem với Linux khởi động bằng đĩa LiveCD. Trong Windows XP không tồn tại ổ C:, chỉ tồn tại khi mình gắn đĩa USB Flash disk.
- Khởi động ở DOS 6.22 thì ổ C: lại tương đương với /dev/sda7
- Khởi động ở đĩa Boot Windows 98 thì ổ C: tương đương với /dev/sda5

Cám ơn <b>quanta</b> đã nhiệt tình và chu đáo. Nhưng giờ có lẽ chuyển hướng bài toán đi (mình sẽ trình bày sau), vì mình cảm thấy rối rắm quá rồi, không thoát khỏi tình trạng <b>Kernel panic</b> được. Mình không nghĩ rằng sẽ...đủ tỉnh táo để chép cài file lưu boot sector khởi động kia vào tất cả các phân vùng mà Windows có thể truy suất và giả định nó là C: rồi sau đó khởi động lên xuống nhiều lần để xóa đi từng "em" một để phát hiện ra phân vùng C: thực sự là "em" nào. Còn cứ để ngồn ngộn file chứa boot sector ấy khắp các partition =&gt; bạn mình lại tưởng virus nhiễm vào máy :(

<p></p>
		<cite class="blockquote">LeVuHoang wrote:</cite><br>
		<blockquote>Sao superthin phức tạp quá nhỉ. Chỉ cần như cách quanta nói là edit lại boot.ini để trỏ vào file dump là xong mà. Ngoài ra Ubuntu cũng detect tốt Windows (ngay cả Windows Vista cũng detected), nếu cần thì bạn cứ install lại grub xem.&nbsp;
		</blockquote>
Mình cũng muốn đơn giản vấn đề <b>LeVuHoang</b> à, nhưng mà kiến thức chưa đủ để xoay xở với các tình huống, nhiều chỗ là bí rị.

Các vấn đề loằng ngoằng trên giờ chuyển thành bài toán sau đây: di chuyển Ubuntu từ một máy này (Máy A) sang máy khác (Máy B), hai máy là khác nhau về cấu hình và thứ tự bố trí phân vùng. Mình ký hiệu <b>Máy A</b> và <b>Máy B</b> để các bạn dễ theo dõi và giúp sức.

<b>Máy A:</b>
- Duy nhất một hệ điều hành duy nhất: Linux Ubuntu 8.04 LTS.  Chỉ có 1 user duy nhất tên gigabyte.
- Được cài đặt mặc định, Linux tự quản lý phân vùng. Chỉ có /dev/sda1 : chứa tất cả các /boot, /home, /etc và /dev/sda2 là swap
- GRUB có lẽ là nằm ở MBR (cài mặc định, không chỉnh gì mà chỉ forward) nên không nhớ Ubuntu làm thế nào.
- Máy có nối mạng ADSL
- Tình trạng Ubuntu 8.04: đã update tự động theo đề nghị ở khay hệ thống 39 gói (hình như kernel có tự động nâng cấp thì phải - vì phải khởi động lại máy) và cài thêm nhiều phần mềm, trong đó có hai cái cần lưu ý là <b>apt-get install kubuntu-desktop</b> và <b>apt-get install java</b> (cài đặt thanh công), và gần chục phần mềm khác chạy trên GNOME, KDE. Cũng là một LAMP localhost.
- Ổ cứng sau khi cài thì vẫn còn chỗ trống đủ để <b>tar</b> toàn bộ hiện trạng thành 1 file .gz
- Hệ điều hành + các phần mềm đã được cài đặt + file do người dùng tạo,... khoảng 7GB (chưa nén)

<b>Máy B:</b>
- Đã tồn tại sẵn hệ điều hành Windows XP SP2 nằm trên phân vùng đầu tiên Primary dùng NTFS
- Phân vùng Extended gồm có theo thứ tự: 2 phân vùng FAT 32, 2 phân vùng FAT 16, 1 phân vùng ext2, 1 phân vùng swap, 1 phân vùng FAT 16. Tất cả phân vùng trong Extended này đều là Logical. Xem hình nhìn từ LiveCD Ubuntu:
<br>
			<div align="center" class="limitview"><img src='http://img142.imageshack.us/img142/9800/hdd4pb2.png' border="0" onload="maxImg(this, 500px);" /></div>
- Không có nối mạng.
- Phân vùng ext2 dành cho Linux và swap lớn hơn 2 phân vùng ấy ở máy A (tức lớn hơn 7GB + swap khoảng 300MB)

Mainboard, VGA Card, ổ cứng,... hai máy trên là khác nhau. Cả 2 máy không có ổ đĩa mềm.

Bây giờ ta sẽ mang toàn bộ Ubuntu từ <b>Máy A</b> sang <b>Máy B</b> với giả định là hiện nay Ubuntu ở Máy A vẫn đang hoạt động tốt nhưng ta sẽ không khởi động bằng chính Ubuntu tốt đó mà dùng một LiveCD Ubuntu để thao tác. Máy có ổ USB 8GB / có thể ghi ra CD để có thể lấy dữ liệu backup ra để mang qua máy B.

Ta sẽ chuyển toàn bộ từ <b>máy A</b> sang <b>máy B</b> với các yêu cầu:

- Không được làm hỏng Windows XP đang có ở máy B. Có thể cho phép GRUB quản lý khởi động cho cả Linux lẫn Windows và nạp vào MBR. Nhưng tốt hơn là để boot.ini và NTLDR của Windows XP quản lý khởi động, và GRUB không nạp vào MBR mà để ở file nào đó trên một Partition mà Windows có thể đọc khi khởi động để trao quyền cho Linux.

- Không lấy ổ cứng máy A gắn sang máy B và ghost sang hoặc clone nào đó tương tự ghost. Sử dụng đĩa LiveCD Ubuntu cho các thao tác, không khởi động máy A bằng Ubuntu ở đĩa cứng.

- Đầu tiên sẽ  chuyển nguyên cả Ubuntu + các cài đặt phần mềm, file người dùng,... từ A sang B cài vào phân vùng ext2, và swap đã dành sẵn. Nếu thành công 100% thì tốt =&gt; dừng việc và mở tiệc ăn mừng  :D 

- Trường hợp không thành công thì ta sẽ dùng LiveCD cài hệ điều hành vào máy B trước, rồi sẽ di chuyển các dữ liệu, các gói đã cài đặt khác từ máy A sang.

- Dùng chủ yếu các phần mềm có sẵn của Ubuntu hoặc apt-get được mà không cài thêm các phần mềm phức tạp nào khác, cũng không cài phần mềm từ repository đặc biệt nào ngoài các mirror chính.

- Dĩ nhiên là chuyển qua thành công là máy B phải chạy ngon lành cả GNOME / KDE như máy A, không được chỉ còn chạy vào kernel  ;-) rồi đứng đó chơi. 

"Bài toán" trên chính là việc viết lại cái chuyện mà mình đang loay hoay giữa máy mình và máy bạn mình.

Các bạn sẽ giúp mình giải toán chứ. Nhớ nhắc lại vụ này khi có offline nhé, sẽ hậu tạ chầu cà phê / beer tươi Đức với các thành viên trong vai trò thầy giáo tốt của mình.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152308</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152308</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 05:27:16]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Anh quanta, fdisk + disk manager report đều đúng, nhưng mà partition table của superthin có vẻ lung tung quá :)

superthin,

Nhiều máy quá làm khoai choáng luôn. Nói tóm lại hiện giờ kernel bị panic nên bạn không thể boot vào Ubuntu. Bạn xem lại trong /boot có cái initrd nào không? Rất có thể kernel của bạn cần có initrd để load các module cần thiết trước khi nhận ra phần cứng.

khoai]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152310</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152310</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 07:09:03]]> GMT</pubDate>
				<author><![CDATA[ Mr.Khoai]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>
Bạn chưa đọc kỹ rồi. Dump cái boot sector xong thì copy nó sang ổ C và chỉnh lại boot.ini trỏ vào file đó thôi.
&nbsp;
		</blockquote>
Mình không thể nắm bắt được cái <b>ổ C</b> mà <b>quanta</b> đề cập là đứng trên góc độ nhìn nhận từ đâu? (hệ điều hành nào)
Bởi lẽ nó xảy ra các trường hợp rối rắm sau:
- Trên Windows XP, khi khởi động vào, ổ hệ thống là <b>G:</b> dùng phân vùng NTFS, tức nó là <b>/dev/sda1</b> khi xem với Linux khởi động bằng đĩa LiveCD. Trong Windows XP không tồn tại ổ C:, chỉ tồn tại khi mình gắn đĩa USB Flash disk.
- Khởi động ở DOS 6.22 thì ổ C: lại tương đương với /dev/sda7
- Khởi động ở đĩa Boot Windows 98 thì ổ C: tương đương với /dev/sda5
&nbsp;
		</blockquote>
OK, tớ viết hơi vội vì cứ mặc định là Windows được cài trên ổ C, quên không nhìn kỹ lại cái screenshot từ Disk Management. Bạn mắc thêm một cái "tội" là để Drive Letter lung tung.

Xin được thay cái <b>"ổ C"</b> bằng <b>"phân vùng cài Windows"</b> (thế là đơn giản nhất). Chỉ lưu ý bạn một điểm là: <b>Grub phải có mặt trên 1st sector của /dev/sda9 rồi</b>, nếu không thì dump ra nó chả có cái quái gì đâu.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Cám ơn <b>quanta</b> đã nhiệt tình và chu đáo. Nhưng giờ có lẽ chuyển hướng bài toán đi (mình sẽ trình bày sau), vì mình cảm thấy rối rắm quá rồi, không thoát khỏi tình trạng <b>Kernel panic</b> được. 
&nbsp;
		</blockquote>
Kệ nó. Tớ <b>không</b> muốn chuyển hướng khi chưa giải quyết xong vụ này.
<p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
Mình không nghĩ rằng sẽ...đủ tỉnh táo để chép cài file lưu boot sector khởi động kia vào tất cả các phân vùng mà Windows có thể truy suất và giả định nó là C: rồi sau đó khởi động lên xuống nhiều lần để xóa đi từng "em" một để phát hiện ra phân vùng C: thực sự là "em" nào. Còn cứ để ngồn ngộn file chứa boot sector ấy khắp các partition =&gt; bạn mình lại tưởng virus nhiễm vào máy :(
&nbsp;
		</blockquote>
Sao lại tự làm khó mình thế? Chỉ cần copy nó qua phân vùng cài Windows thôi. Tóm lại thực hiện tuần tự các bước sau:
- Cài grub lên 1st sector của <b>/dev/sda9</b>
- Chạy lệnh <b>dd</b>
- Copy qua phân vùng cài Windows
- Chỉnh <b>boot.ini</b>

PS: Phần dưới chưa đọc vì quá dài  :P ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152315</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152315</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 09:27:17]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Bây giờ các bạn hướng dẫn dựa theo hiện trạng mới nhé. Hướng cũ đã đi vào ngõ cụt vì sau hơn một đêm (đã ôm máy thằng bạn về nhà nghịch) vắt kiệt sức vì vấn đề kernel panic.

<p></p>
		<cite class="blockquote">Mr.Khoai wrote:</cite><br>
		<blockquote>Rất có thể kernel của bạn cần có initrd để load các module cần thiết trước khi nhận ra phần cứng. &nbsp;
		</blockquote>
Đêm qua, mình đã mò mẫm trên cộng đồng ubuntu thế giới tại www.ubuntuforums.org và có nghịch đến cái <font size='+1'><b>initrd </b></font>như bác<b> Mr.Khoai</b> đề cập. Rồi thì sau đó khởi động máy lên sau hàng loạt thông báo có chữ OK cuối câu là đến <font color='red'>fail </font>và Ubuntu dừng lại tại dấu nhắc lệnh và buộc ta phải chạy <b>fsck </b>bằng tay, mình trả lời <b>yes</b> đến vài nghìn lần vẫn không xong (không nhớ lỗi, đại khái là nó bảo có nhiều cái gì ấy mồ côi, và xung đột fs, và nên là 0, hiển thị vài nghìn câu thông báo giống nhau, mình đã fsck -y để tự động trả lời Yes với tất cả các câu hỏi, đến 5 giờ sáng nay không xong -&gt; bỏ cuộc vì có lẽ 2 máy khác nhau về phần cứng quá, và bố trí partition khác nhau nên lạc hết trơn)

Bây giờ tình hình mới là như thế này: trước khi kịp thực hiện việc gắn <b>initrd</b> vào file <b>menu.lst</b> đêm qua, mình đã kịp tar tất cả hệ thống file của Ubuntu thành một file .bz2 (theo bài hướng dẫn ở đây:<span class="link"> http://ubuntuforums.org/showthread.php?t=35087</span> - cũng không backup các thư mục proc, lost+found,... như đề nghị ở bài viết).

Giờ đây, mình đang ngồi trên máy thằng bạn đặt tại nhà mình và gõ bài này với Ubuntu mới cài xong đây. Bây giờ máy đã được cài mới Ubuntu 8.04 LTS từ LiveCD =&gt; chạy ngon lành đây. Mình không còn quan tâm GRUB nữa, nó đã nạp luôn vào MBR và quản lý khởi động được Windows ngon lành. Ubuntu chưa có bất kỳ cập nhật / sửa chữa / cũng không cài thêm gì (dù ở khay hệ thống báo <i>There are 121 updates available</i>)

Khi <b>fdisk -l</b> thì hiện trạng là giống như cũ:

<br>
			<div align="center" class="limitview"><img src='http://img379.imageshack.us/img379/4592/hddvn4.png' border="0" onload="maxImg(this, 500px);" /></div>

Nghĩa là tất cả hệ thống file Ubuntu nằm dưới thư mục gốc <b>/</b> là đếu nằm ở <b>/dev/sda9</b> như hình trên.

Giờ thì vấn đề đã <b>đơn giản hơn rất nhiều</b> rồi. Nhờ các bạn hướng dẫn mình theo hướng sau:

- File <b>backup.tar.bz2</b> hôm qua mình save ở <font size='+1'><b>/dev/sda6</b></font> là toàn bộ cái Ubuntu cũ mà Ghost từ máy mình qua máy thằng bạn gây ra mớ lùm xùm kể trên.

Bây giờ các bạn chỉ mình cách mount <b>/dev/sda6</b> lên ở Ubuntu hiện tại để mình có thể untar (không rõ có lệnh này không - ý mình là làm sao extract cái file backup.tar.bz2 vừa kể) lấy những thư mục, file cần thiết từ <b>backup.tar.bz2</b> để merge vào hệ thống hiện tại. Mục đích việc làm này: mình muốn phục hồi các phần mềm đã cài: KDE, StarDict, xvnkb, Java, SciTE, bộ LAMP,... vào hệ thống Ubuntu đang chạy ngon lành đây.

Mình mong muốn là: việc merge và / hoặc restore này là giữ nguyên cấu hình hệ thống hiện tại mà không được mang cái mớ hỏng rối rắm kể ở các bài trước kia trả về hệ thống đang có, vì nếu lại trả về cả cấu hình hệ thống thì :-(  :-(  ngất xỉu mất.

Cám ơn các bạn rất nhiều, đặc biệt là <b>Mr.Khoai</b> và <b>quanta</b>. ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152329</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152329</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 11:53:38]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Theo mình thì bạn nên extract các package trong thư mục /var/cache/apt/arr..../ ở hệ thống cũ mà bạn đã nén thành tệp tin .tar.bz2 ấy. Sau đó đưa các packages này vào trong /var/cache/apt/arr.../ ở Ubuntu bạn mới cài. Rồi tiến hành cài đặt và update giống như mới cài ấy. Như thế sẽ tránh được các lỗi ở hệ thống cũ mà lại ko phải download từ internet. Còn các thiết lập thì có thể thiết lập lại cũng được. 

Chúc bạn vui!]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152334</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152334</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 12:13:31]]> GMT</pubDate>
				<author><![CDATA[ little_fire]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">superthin wrote:</cite><br>
		<blockquote>
...
Bây giờ các bạn chỉ mình cách mount <font color='orange'>/dev/sda9</font> lên ở Ubuntu hiện tại để mình có thể untar (không rõ có lệnh này không - ý mình là làm sao extract cái file backup.tar.bz2 vừa kể) lấy những thư mục, file cần thiết từ <b>backup.tar.bz2</b> để merge vào hệ thống hiện tại. Mục đích việc làm này: mình muốn phục hồi các phần mềm đã cài: KDE, StarDict, xvnkb, Java, SciTE, bộ LAMP,... vào hệ thống Ubuntu đang chạy ngon lành đây.
...
&nbsp;
		</blockquote>
<font color='orange'>--&gt;</font> /dev/sda6 chứ? Bạn thử:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>$ sudo mkdir /mnt/E
$ sudo mount -t vfat -o iocharset=utf8,umask=000 /dev/sda6 /mnt/E</pre>
		</div>
hoặc thêm dòng sau vào /etc/fstab:
<blockquote>/dev/sda6 /mnt/E vfat iocharset=utf8,umask=000 0 0&nbsp;
		</blockquote>

Phần restore thì đọc hướng dẫn ở đường link bạn đã đưa phía trên.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152335</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152335</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 12:14:27]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ <blockquote>
<font color='orange'>--&gt;</font> /dev/sda6 chứ? Bạn thử:
&nbsp;
		</blockquote>
Đúng là  <b>/dev/sda6</b> chữ không phải  /dev/sda9, mình gõ nhầm. Cám ơn quanta.
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152344</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152344</link>
				<pubDate><![CDATA[Sun, 21 Sep 2008 13:02:21]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Tình hình là máy hiện đang hoạt động rất tốt (sau khi cài lại lần thứ 2 vì lệnh tar nói sau)

 Giờ thì nảy sinh một vấn đề: dùng lệnh tar để nghịch không thành công (đã xem bài hướng dẫn có link ở post trước, nhưng mình quên --exclude các file lưu cấu hình khởi động -&gt; đã làm chết máy và phải cài lại Ubuntu).

Giờ này, mình đã dùng tar để giải nén tất cả ra môt thư mục /home/myname/oldubuntu/ . Các bạn chỉ xem, làm thế nào để mình bới trong đống này ra các phần mềm đã cài đặt và chép vào thư mục tương ứng để có thể chạy các phần mềm mà không phải apt-get install cài đặt lại hoặc phải tải về rồi lại compile với vài phần mềm khác.

Yêu cầu là chép thế nào để không làm chêt Ubuntu hiện tại (vì chép nhầm file hệ thống đè qua một cái là... tiêu điều).]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152432</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152432</link>
				<pubDate><![CDATA[Mon, 22 Sep 2008 01:43:38]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Rắc rối nhỉ! Khoai thấy hiện giờ bạn đã có một máy Ubuntu hoạt động tốt rồi. Vì sao không cài lại các phần mềm cần thiết một cách "sạch sẽ" mà phải sử dụng tar như thế?

Khoai không nghĩ ra cách gì để có thể dùng các file cũ (gồm các các file config) để có thể có một hệ thống tương đối clean được. Ví dụ, bồ cài lại KDE bằng cách copy các files, thì bồ biết files nào là cần thiết? Rồi còn database của dep thì sao? Còn các library, các dependency vân vân? Bồ copy files như thế còn tốn thời gian hơn việc dùng apt-get mà install lại từ đầu rất nhiều.

Vài ý kiến,
khoai]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152593</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152593</link>
				<pubDate><![CDATA[Tue, 23 Sep 2008 03:56:46]]> GMT</pubDate>
				<author><![CDATA[ Mr.Khoai]]></author>
			</item>
			<item>
				<title>Re: Vui mừng với Ubuntu nhưng... cần nhờ mọi người cứu về boot loader</title>
				<description><![CDATA[ Đã chấp nhận đau thương và nghe theo đề nghị của Mr.Khoai, cài lại mới tất cả các phần mềm chạy cho good, dù sao cũng thêm một lần thực hành việc cài đặt, điều này là cần thiết.

Mọi việc xem như giải quyết xong. Đề nghị mod nào khóa giúp topic lại. Xin chân thành cám ơn các bạn, nhất là Mr.Khoai & Mr. Quanta (Plus?) :)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/25128.html#152678</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/25128.html#152678</link>
				<pubDate><![CDATA[Tue, 23 Sep 2008 15:50:15]]> GMT</pubDate>
				<author><![CDATA[ superthin]]></author>
			</item>
	</channel>
</rss>
