<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "cho e hỏi chút về bash shell mới ạ"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "cho e hỏi chút về bash shell mới ạ"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Dear Ae forum!
Mình có 1 đoạn bash shell viết check loadavg và băng thông như dưới.
tuy nhiên đến đoạn check loadavg &gt;=15 thì bào lỗi:
+ '[' 0.02 -ge 15 ']'
./checkserver.sh: line 12: [: 0.02: integer expression expected
+ '[' 48.00 -ge 960 ']'
./checkserver.sh: line 16: [: 48.00: integer expression expected
Lỗi này có lẽ do export 1 biến để lấy kết quả lệnh ko phải là kiểu int.
Mình ko biết phải sửa thế nào. cũng ko ép được kiểu trong bash shell
script của mình như dưới đây:

#!/bin/bash -vx
redis=&quot;/mnt/redis/redis-bash-cli&quot;
redis_ip=&quot;127.0.0.1&quot;
host=&quot;127.0.0.1&quot;
export _loadavg=$(cat /proc/loadavg | awk '{ print $1 }');
export _net=$(vnstat -tr | grep tx| awk '{ print $2 }');

######check loadavg and net bandwidth######
if [ $_loadavg -ge 15 ] ;
then
        $redis -h $redis_ip SET &quot;$host&quot; 1

elif [ $_net -ge 960 ] ;
then
        $redis -h $redis_ip SET &quot;$host&quot; 1

else
        $redis -h $redis_ip SET &quot;$host&quot; 0

fi
$redis -h $redis_ip GET &quot;$host&quot;

Bác nào biết xin chỉ giáo ạ
thanks so much!]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279709</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279709</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 05:10:45]]> GMT</pubDate>
				<author><![CDATA[ thuank51cc]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Bash không có kiểu float, bạn có thể dùng <b>bc</b> để so sánh:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>if &#40;&#40; $&#40;bc &lt;&lt;&lt; &quot;$_loadavg &gt;= 15&quot;&#41; == 1 &#41;&#41;
then
    ....
elif &#40;&#40; $&#40;bc &lt;&lt;&lt; &quot;$_net &gt;= 960&quot;&#41; == 1 &#41;&#41;
then
    ....
else
    ....
fi</pre>
		</div>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279711</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279711</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 08:17:40]]> GMT</pubDate>
				<author><![CDATA[ bino1810]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Bash không có kiểu float, bạn có thể dùng <b>bc</b> để so sánh:

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>if &#40;&#40; $&#40;bc &lt;&lt;&lt; &quot;$_loadavg &gt;= 15&quot;&#41; == 1 &#41;&#41;
then
    ....
elif &#40;&#40; $&#40;bc &lt;&lt;&lt; &quot;$_net &gt;= 960&quot;&#41; == 1 &#41;&#41;
then
    ....
else
    ....
fi</pre>
		</div>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279712</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279712</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 08:17:40]]> GMT</pubDate>
				<author><![CDATA[ bino1810]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Sao ko trim đi dấu . rồi làm phép so sánh ko dễ hơn ah]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279715</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279715</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 11:26:44]]> GMT</pubDate>
				<author><![CDATA[ p.n.t]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Thanks bino1810!
Mình dùng bc như bạn bảo ok r:).
hi p.n.t! dùng trim như thế nào bạn. mình đã thử cả expr r nhưng vẫn sai???
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279720</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279720</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 20:51:41]]> GMT</pubDate>
				<author><![CDATA[ thuank51cc]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">thuank51cc wrote:</cite><br>
		<blockquote>Thanks bino1810!
Mình dùng bc như bạn bảo ok r:).
hi p.n.t! dùng trim như thế nào bạn. mình đã thử cả expr r nhưng vẫn sai???
&nbsp;
		</blockquote>

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>${_loadavg%%.*}</pre>
		</div>

Trong trường hợp chỉ so sánh lớn hơn, thì cách này tạo ra bug. Ví dụ 15.5 &gt; 15, nếu dùng trim thì cho kết quả bằng.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279728</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279728</link>
				<pubDate><![CDATA[Tue, 11 Feb 2014 23:29:29]]> GMT</pubDate>
				<author><![CDATA[ bino1810]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ Ok! 
Thanks mọi người rất nhiều. ]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279741</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279741</link>
				<pubDate><![CDATA[Wed, 12 Feb 2014 21:08:41]]> GMT</pubDate>
				<author><![CDATA[ thuank51cc]]></author>
			</item>
			<item>
				<title>cho e hỏi chút về bash shell mới ạ</title>
				<description><![CDATA[ hi bino1810!

Mình gửi pm sang cho bạn. Ae mình trao đổi một chú nhé?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/45443.html#279742</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/45443.html#279742</link>
				<pubDate><![CDATA[Wed, 12 Feb 2014 21:10:55]]> GMT</pubDate>
				<author><![CDATA[ thuank51cc]]></author>
			</item>
	</channel>
</rss>
