<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Gặp trục trặc với Rsync + SSH"]]></title>
		<link>http://www.hvaonline.net/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "Gặp trục trặc với Rsync + SSH"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Tôi gặp trục trặc với việc đồng bộ dữ liệu qua RSYNC nhờ bà con giúp đở cái lỗi, tôi dùng bài viết sau để đồng bộ<span class="link"> http://www.howtoforge.com/mirroring_with_rsync</span>

Tôi có 2 con server :
- Ở con A (chính) có dùng WHM/CPanel, trên con server này SELINUX đã được tắt, trong con A có thư mục /home chứa thông tin của khách hàng, do đó thư mục này là thư mục mà tôi cần chuyển tất cả những thư mục con, tập tin con trong thư mục này sang con B ở đường dẫn /var/www chẳng hạn
- Ở con B (dự phòng) không dùng WHM/CPanel trên con server này SELINUX chưa được tắt 

Khi tôi chạy dòng sau trên con B 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#rsync -avz --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /root/rsync/mirror-rsync-key" phuoc@IP của con A:/home /var/www/</pre>
		</div>

Trong đó : 6567 là cổng SSH của con server A
phuoc : tên tài khoản mà tôi tạo trên con A
/home : thư mục mà tôi muốn đồng bộ sang con B
/var/www : thư mục trên con B mà tôi muốn đây là nơi mà nó lưu trữ từ con A

Thì nó báo lỗi như thế này ở thư mục /home
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>receiving incremental file list
rsync: opendir "/home" failed: Permission denied &#40;13&#41;</pre>
		</div>

Permission thư mục /home trên con A
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>drwxr-xr-x  5 root     root     4096 Mar 21  2011 .cpan/
drwxr-xr-x  3 root     root     4096 Dec 15 23:55 .cpanm/
drwx------  6 root     root     4096 Dec 15 23:55 .cpcpan/
drwx------  3 root     root     4096 Oct 17  2009 cpeasyapache/
drwxr-xr-x  3 root     root     4096 Nov 30  2010 cprubybuild/
drwxr-xr-x  3 root     root     4096 Nov 30  2010 cprubygemsbuild/
drwx--x--x 13 tan  tan  4096 Apr  9  2010 tan/
drwx--x--x 10 nghia nghia 4096 Jan 29  2011 nghia/</pre>
		</div>

Thông tin log trên con A
<blockquote>
Dec 16 13:13:59 <font color='red'>server su: pam_unix(su:session): session closed for user phuoc</font>
Dec 16 21:01:22 server sshd[32758]: Accepted publickey for phuoc from IP của con B ssh2
&nbsp;
		</blockquote>
Tôi thử xây dựng mô hình lab khác (không dùng Cpanel) thì mọi việc tiến hành bình thường mà không gặp trục trặc gì hết. 

Cám ơn bà con đã đọc.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251190</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251190</link>
				<pubDate><![CDATA[Fri, 16 Dec 2011 21:10:58]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ User "phuoc" làm gì có quyền thay đổi thư mục /home đâu em? Em rsync xuyên qua SSH bằng user "phuoc"?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251193</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251193</link>
				<pubDate><![CDATA[Fri, 16 Dec 2011 23:48:02]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Chào anh, 

Vâng đúng là em xuyên qua SSH bằng user mang tên là "phuoc" , Em tìm được câu trả lời bằng cách dùng chown

Cám ơn anh trợ giúp]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251197</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251197</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 00:19:11]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote>Chào anh, 

Vâng đúng là em xuyên qua SSH bằng user mang tên là "phuoc" , Em tìm được câu trả lời bằng cách dùng chown

Cám ơn anh trợ giúp&nbsp;
		</blockquote>

Mình cũng đang tiến hành thực nghiệm rsync giữa 2 server.

Nhưng mình chỉ có thể đồng bộ source data, có cách nào khác hay rsync có thể đồng bộ mysql database luôn không bồ ???]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251203</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251203</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 08:52:24]]> GMT</pubDate>
				<author><![CDATA[ Kcmonline]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Hello Kcmonline 

Mình nhớ rsync có thể đồng bộ được 2 database Mysql, với điều kiện cấu hình theo mô hình Master - Slave . Bạn tham khảo ở đây 
<blockquote>
MySQL has a nice feature called replication that usually keeps a slave database in sync with a master. Except when it doesn't &nbsp;
		</blockquote>
<span class="link"> http://mah.everybody.org/docs/mysql-rsync</span>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251204</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251204</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 09:49:44]]> GMT</pubDate>
				<author><![CDATA[ Ikut3]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Kcmonline wrote:</cite><br>
		<blockquote>Mình cũng đang tiến hành thực nghiệm rsync giữa 2 server.

Nhưng mình chỉ có thể đồng bộ source data, có cách nào khác hay rsync có thể đồng bộ mysql database luôn không bồ ???&nbsp;
		</blockquote>

- Thì kiếm 1 cái script backup database sau đó nhét qua cron tab dùng rsync đẩy nó qua bên server B. 
- Dùng MySQL Replication khi có sự thay đổi dữ liệu ở A thì MySQL ở nơi nào đó sẽ thay đổi giống như A

Các cách khác xin bổ sung.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251208</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251208</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 11:50:23]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">Kcmonline wrote:</cite><br>
		<blockquote>có cách nào khác hay rsync có thể đồng bộ mysql database luôn không bồ ???&nbsp;
		</blockquote>
Tham khảo:<span class="link"> http://dev.mysql.com/doc/refman/5.1/en/drbd-mysql-replication-scale.html</span>]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251210</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251210</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 12:06:29]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Bồ thừ dùng quyền root backup thư mục /home/ về /var/www sau đó dùng rsync chuyển qua con server backup thử dc không ?

Regards, 
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251221</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251221</link>
				<pubDate><![CDATA[Sat, 17 Dec 2011 21:12:13]]> GMT</pubDate>
				<author><![CDATA[ zero0_0]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Nếu dùng rsync qua SSH với account root thì không nói gì, tuy nhiên nếu dùng rsync để đồng bộ qua SSH với 1 user chẳng hạn mang tên là phuoc thì sẽ gặp nhiều vấn đề.
- Trên server có nhiều account thì phải chown lại cho nó hết
- Trên server có nhiều dịch vụ như FTP, MAIL (Webmail) thì cũng phải chown lại cho nó, sau khi chown lại phải chmod lại thư mục public_home của từng user thì visitor ở bên ngoài họ mới truy cập được vào website của từng người dùng trong public_home 

Ý tưởng" của mình lúc này sẽ "nâng" account "phuoc" lên...root (thay đổi trong /etc/passwd thành 0 cho UID và GID cũng là 0 hoặc sudo) sau đó làm lại các bước như trong bài hướng dẫn từ http://www.howtoforge.com/mirroring_with_rsync như thế không biết có thể thực thi được không, mình chưa thử qua cách làm này.

Nếu server A người có quyền quản trị họ change password root hay người dùng "phuoc" thì việc rsync có thực hiện diễn ra hay không ?

Cám ơn anh em theo dỏi
]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251227</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251227</link>
				<pubDate><![CDATA[Sun, 18 Dec 2011 00:03:49]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Phước ơi,

Có 2 chuyện em cần xét:

1. Sở hữu thư mục trên máy chủ có đích để sync.
2. Tài khoản để ssh xuyên qua rsync.

Để sync từ A đến B thì từ A em phải ssh bằng account có chủ quyền sử hữu thư mục trên máy đích. Nếu không, không thể sync bởi vì trên B nó không có đủ chủ quyền để write. 

rsync có chức năng bảo tồn owner (option -o) và group (option -g). Tất nhiên account nào đó dùng để sync vẫn phải có chủ quyền write trên thư mục ở máy chủ đích.

Ví dụ, 

Server A có thư mục /home/ và dưới /home là x, y và z (/home/x, /home/y, /home/z) do user x, user y và user z làm chủ.

Server B cũng tương tự như server A.

Muốn sync trọn bộ từ /home của A sang /home của B thì:

- phải có chủ quyền write trên tất cả cả sub-directories trên B
- áp dụng -o và -g trong command để rsync

]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251228</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251228</link>
				<pubDate><![CDATA[Sun, 18 Dec 2011 02:15:57]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Em có quyền write trên tất cả máy nguồn A lẫn máy đích B do vậy em rsync qua SSH thành công nhưng em lại không hiểu như thế này khi em dùng 1 tài khoản user non-root như user "phuoc" . Em thử dùng<b> chown -R phuoc /home/cuti</b>
Lúc này thì thông tin permission của <b>/home/cuti</b> kể cả sub-directories  ở trong nó như sau
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>drwx--x--x 11 phuoc  cuti  4096 Apr  9  2010 cuti/</pre>
		</div>

Lúc này em rsync ở /home/cuti đến máy B chứa dữ liệu chẳng hạn em quy định đường dẫn /var/www thì thành công . 

Tuy nhiên khi đó trên server dùng WHM/Cpanel các dịch vụ FTP, Web đều bị ảnh hưỡng (người dùng không truy cập được Webmail hoặc Upload/Download thông qua FTP-lỗi permission) mặc dù thông tin permission cũng xuất hiện tương tự như trên cho các sub-directories  do đó em thử chmod 755 cho public_html thì  bình thường trở lại. Trong khi đó em dùng 2 máy tính khác để làm LAB thì bình thường (không hiểu lý do tại vì sao phải thêm bước chmod). 

Mặc dù em rsync thành công nhưng em không muốn dùng tài khoản root mà dùng 1 tài khoản nào đó ví dụ như non-root , em nãy sinh ra "tối kiến"-chưa được thử nghiệm, chỉ là phán đoán :D là điều chỉnh trong <b>visudo</b> ví dụ như 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ibmthinkpad ALL=&#40;ALL&#41; ALL</pre>
		</div>

Thì vẫn có thể đồng bộ và lấy tất cả các người dùng trong /home mà không cần phải "sở hữu" thư mục đó ! Mục đích cuối cùng của em, hạn chế sử dụng root ở mức thấp nhất. Mong anh trai cho ý kiến để em út về phần này.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251237</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251237</link>
				<pubDate><![CDATA[Sun, 18 Dec 2011 06:50:17]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote>
Tuy nhiên khi đó trên server dùng WHM/Cpanel các dịch vụ FTP, Web đều bị ảnh hưỡng (người dùng không truy cập được Webmail hoặc Upload/Download thông qua FTP-lỗi permission) mặc dù thông tin permission cũng xuất hiện tương tự như trên cho các sub-directories  do đó em thử chmod 755 cho public_html thì  bình thường trở lại. 
&nbsp;
		</blockquote>
FTP của anh chạy dưới quyền user nào? FTP users là system user (có trong /etc/passwd) hay virtual users? Thông báo lỗi chính xác như nào? Khi bị lỗi thì public_html đang có permission là bao nhiêu? 711?

<p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote>
Mặc dù em rsync thành công nhưng em không muốn dùng tài khoản root mà dùng 1 tài khoản nào đó ví dụ như non-root , em nãy sinh ra "tối kiến"-chưa được thử nghiệm, chỉ là phán đoán :D là điều chỉnh trong <b>visudo</b> ví dụ như 
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ibmthinkpad ALL=&#40;ALL&#41; ALL</pre>
		</div>

Thì vẫn có thể đồng bộ và lấy tất cả các người dùng trong /home mà không cần phải "sở hữu" thư mục đó !&nbsp;
		</blockquote>
Thế này thì vẫn <b>không</b> được anh à, vì owner là người khác và khi rsync với `ibmthinkpad` anh có dùng được `sudo` gì đâu.

<blockquote>Ý tưởng" của mình lúc này sẽ "nâng" account "phuoc" lên...root (thay đổi trong /etc/passwd thành 0 cho UID và GID cũng là 0 hoặc sudo) sau đó làm lại các bước như trong bài hướng dẫn từ<span class="link"> http://www.howtoforge.com/mirroring_with_rsync</span> như thế không biết có thể thực thi được không, mình chưa thử qua cách làm này.&nbsp;
		</blockquote>
Nhưng như này thì lại được. Đây cũng là một "dirty trick" khi muốn rsync sang một thư mục mà user mình đang dùng không phải là owner (hoặc không có quyền write).]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251238</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251238</link>
				<pubDate><![CDATA[Sun, 18 Dec 2011 07:11:50]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Hãy đưa ra một ví dụ cụ thể như sau.

- Sever có nguồn dữ liệu (A)

- Server cần được sync (B)

- Server A có: /home/cuti (do account cuti owns), /home/cuteo (do account cuteo owns) và /home/caihim (do acount caihim owns).

- Server B cũng có: /home/cuti (do account cuti owns), /home/cuteo (do account cuteo owns) và /home/caihim (do acount caihim owns).

Có 2 cách thực hiện để sync.


Cách 1: sync từ cronjob của mỗi account "cuti", "cuteo" và "caihim" từ /home/cuti đến /home/cuti, từ /home/cuteo đến /home/cuteo và từ /home/caihim đến /home/caihim.

<b>$ rsync -avz --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /home/<font color='red'>cuti</font>/mirror-rsync-key" /home/<font color='red'>cuti</font> <font color='red'>cuti</font>@IP:/home/<font color='red'>cuti/</font>

$ rsync -avz --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /home/<font color='orange'>cuteo</font>/mirror-rsync-key" /home/<font color='orange'>cuteo</font> <font color='orange'>cuteo</font>@IP:/home/<font color='orange'>cuteo/</font>

$ rsync -avz --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /home/<font color='#6699CC'>caihim</font>/mirror-rsync-key" /home/<font color='#6699CC'>caihim</font> <font color='#6699CC'>caihim</font>@IP:/home/<font color='#6699CC'>caihim/</font></b>

Không cần chmod hay chown gì hết vì từ A sang B nếu thực thi đúng account thì nó sẽ viết data xuống được và giữ nguyên chủ quyền.

Cách 2: sync từ cronjon của root từ /home đến /home và áp dụng -o -g cho rsync command:
<b>$ rsync -avz<font color='red'>og</font> --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /<font color='yellow'>root</font>/rsync/mirror-rsync-key" /home/ <font color='yellow'>root</font>@IP:/home/</b>

Tránh chown, chgrp vì rất phiền nếu sub-directories có những thư mục và files do nhiều người làm chủ.


Cũng có thể thực hiện cách 1 ở trên bằng root account nhưng thay đổi một tí, ví dụ:

<b><font color='violet'>su - cuti -c</font> <font color='violet'>"</font>rsync -avz --delete --exclude=**/stats --exclude=**/error --exclude=**/files/pictures -e "ssh -p 6567 -i /home/<font color='red'>cuti</font>/mirror-rsync-key" /home/<font color='red'>cuti</font> <font color='red'>cuti</font>@IP:/home/<font color='red'>cuti/</font><font color='violet'>"</font></b>

Phần <font color='violet'>su - cuti -c</font> <font color='violet'>""</font> là phần root thực thi rsync với user "cuti".]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251260</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251260</link>
				<pubDate><![CDATA[Sun, 18 Dec 2011 15:48:47]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Anh trai cho nhiều ví dụ hết sức quá cụ thể , em hiểu dụng ý của anh phân tích rồi và kết quả như em mong muốn, cám ơn anh và anh em khác trợ giúp, thảo luận rất nhiều.]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251298</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251298</link>
				<pubDate><![CDATA[Mon, 19 Dec 2011 04:59:33]]> GMT</pubDate>
				<author><![CDATA[ tranhuuphuoc]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">tranhuuphuoc wrote:</cite><br>
		<blockquote>Anh trai cho nhiều ví dụ hết sức quá cụ thể , em hiểu dụng ý của anh phân tích rồi và kết quả như em mong muốn, cám ơn anh và anh em khác trợ giúp, thảo luận rất nhiều.&nbsp;
		</blockquote>

Giải thích làm sao mà đối tượng nắm được mình muốn nói cái gì thì mới không uổng công em à ;).]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251316</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251316</link>
				<pubDate><![CDATA[Mon, 19 Dec 2011 14:46:27]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ Anh conmale,

Em nghĩ tình huống là thế này thì sẽ lý thú hơn:

- server nguồn (A)
- server đích (B)

A có một thư mục: `/var/www/html` owner là apache, group owner là nobody.

Trên B, anh không có root's password mà chỉ có một account `cuti` với quyền `sudo`:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>cuti	ALL=&#40;ALL&#41;	ALL</pre>
		</div>
B cũng có thư mục `/var/www/html` với owner tương ứng. Làm thế nào để sync `/var/www/html` từ A sang B mà vẫn giữ được owner + permission và không được đổi root's password trên B?]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251333</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251333</link>
				<pubDate><![CDATA[Mon, 19 Dec 2011 23:32:47]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Gặp trục trặc với Rsync + SSH</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">quanta wrote:</cite><br>
		<blockquote>Anh conmale,

Em nghĩ tình huống là thế này thì sẽ lý thú hơn:

- server nguồn (A)
- server đích (B)

A có một thư mục: `/var/www/html` owner là apache, group owner là nobody.

Trên B, anh không có root's password mà chỉ có một account `cuti` với quyền `sudo`:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>cuti	ALL=&#40;ALL&#41;	ALL</pre>
		</div>
B cũng có thư mục `/var/www/html` với owner tương ứng. Làm thế nào để sync `/var/www/html` từ A sang B mà vẫn giữ được owner + permission và không được đổi root's password trên B?&nbsp;
		</blockquote>

Nếu trên (A) account nào đó dùng để đọc thông tin rồi sync qua (B) mà không có quyền "x" cho thư mục và quyền "r" cho files thì bó tay con gà quay vì ngay trên (A) đã không thể thực thi rồi.

Nếu trên (A) account nào đó dùng để đọc thông tin rồi sync qua (B) mà có quyền "x" cho thư mục và quyền "r" cho files và trên (B) thì có quyền sudo thì trên (B) nó chạy với quyền hạn root. Bởi thế, phải dùng options -og.

:)]]></description>
				<guid isPermaLink="true">http://www.hvaonline.net/hvaonline/posts/list/40819.html#251336</guid>
				<link>http://www.hvaonline.net/hvaonline/posts/list/40819.html#251336</link>
				<pubDate><![CDATA[Tue, 20 Dec 2011 00:18:06]]> GMT</pubDate>
				<author><![CDATA[ conmale]]></author>
			</item>
	</channel>
</rss>
