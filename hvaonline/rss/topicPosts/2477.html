<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
	<channel>
		<title><![CDATA[Latest posts for the topic "Tóm tắt Linux Shell Programming"]]></title>
		<link>/hvaonline/posts/list/24.html</link>
		<description><![CDATA[Latest messages posted in the topic "Tóm tắt Linux Shell Programming"]]></description>
		<generator>JForum - http://www.jforum.net</generator>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ <b> Tóm tắt Linux Shell Programming</b>


<b>Tạo file script</b>

    * Soạn thảo file text, đặt tên file shellfile (có đuôi bất kỳ), dòng đầu tiên có dòng sau: <b>#!/bin/sh</b>, sau đó là các lệnh Shell hoặc các lệnh Linux.
    * Chạy các lệnh sau để có thể chạy được <font color='orange'>chmod +x shellfile</font> , sau đó có thể chạy bằng lệnh <font color='orange'>./shellfile</font>

<b>Ý nghĩa các ký tự</b>

    * Bắt đầu bằng dấu '<b>#</b>'- ký hiệu rằng dòng đấy là comment.
    * Dấu ngoặc đơn 'a' sẽ in nguyên văn đoạn text trong ngoặc.
    * Dấu "a", sẽ in nguyên văn đoạn text, trong đó biến có thể được thay giá trị.

<b>Các biến</b>

    * Biến không cần phải khai báo trước, bắt đầu bằng chữ cái (ví dụ là var), khi tham chiếu thì thêm dấu <b>$</b> ở trước, ví dụ <b>$var</b>. (gán var=2; thì khi echo $var, sẽ cho kết quả là 2).
    * có thể dùng biến và nối với ký tự như sau: <b>${var}nd</b> thì kết quả trả về 2nd.

<b>Pipes, wwwection and backtick</b>

    * pipes (|) gửi đầu ra output (stdout) của một tiến trình sang đầu vào (stdin) của mộ tiến trình khác.

      <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>grep "hello" file.txt | wc -l</pre>
		</div>

    * wwwection: ghi đầu ra output của mọt chương trình ra một file khác hoặc nối vào file khác
      > ghi ra file, nếu nó đã tồn tại thì ghi đè nó
      >> Nối vào file cũ nếu đã tồn tại hoặc nếu chưa có thì tạo ra file mới và ghi dữ liệu vào đó.

    * Backtick
      Đầu ra của một chương trình được sử dụng làm tham số cho chương trình khác (không phải như đầu vào stdin như ở trên) cho một lệnh khác. Bạn cũng có thể dùng đầu ra output như là biến, tham số của chương trình khác.
      Lệnh

     <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>find . -mtime -1 -type f -print</pre>
		</div>

      sẽ tìm tất cả các file được thay đổi trong vòng 24 giờ qua (-mtime -2 sẽ là 48). Nếu bạn muốn nén lại thành một file để lưu trữ thì lệnh có thể được sử dụng như:

   <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>tar xvf file.tar infile1 infile2 ...</pre>
		</div>

      Bạn có thể gộp hai lệnh đó và dùng dấu (<b>`</b>), không phảit dấu ngoặc đơn ('):

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
      # Sử dụng dấu &#40;`&#41;  không phải dấu &#40;'&#41;:
      tar -zcvf lastmod.tar.gz `find . -mtime -1 -type f -print`</pre>
		</div>

Lệnh có cấu trúc

    * Lệnh "<font color='orange'>if</font>": kiểm tra điều kiện đúng :

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>if ....; then
      ....
      elif ....; then
      ....
      else
      ....
      fi</pre>
		</div>

    * Lệnh "<font color='orange'>test</font>" thường được viết như " <b>[ ]</b> ". Lưu ý là phải có dấu cách sau và trước dấu "<b>[ ]</b>". Ví dụ:

      <font color='orange'>[ -f "somefile" ]</font>  : Test if somefile is a file.
     <font color='orange'> [ -x "/bin/ls" ] </font>  : Test if /bin/ls exists and is executable.
      <font color='orange'>[ -n "$var" ] </font>     : Test if the variable $var contains something
     <font color='orange'> [ "$a" = "$b" ]</font>    : Test if the variables "$a" and  "$b" are equal

      Gõ lệnh "<font color='orange'>man test</font>" để có thêm các tham số.

    * Gõ tắt bằng các dấu <b>&&</b> và <b>||</b>:

      [ -f "/etc/shadow" ] && echo "This computer uses shadow passwors"

      Dấu && được sử dụng như điều kiện và. Trong ví dụ trên : "Nếu /etc/shadow tồn tại và (AND) lệnh echo sẽ được thực hiện". Toán tử OR (||) cũng được sử dụng như ví dụ sau:

    <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
      mailfolder=/var/spool/mail/james
      &#91; -r "$mailfolder" &#93; || { echo "Can not read $mailfolder" ; exit 1; }
      echo "$mailfolder has mail from:"
      grep "^From " $mailfolder</pre>
		</div>

      Nếu có thư thì hiện các thư, còn không thì thông báo là không đọc được và kết thúc.

    * Lệnh <font color='orange'>Case</font>: kiểm tra thoả mãn (using shell wildcards such as * and ?).

      <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>case ... in
      ...&#41; do something here;;
      esac</pre>
		</div>

      Ví dụ chúng ta có thể viết một chương trình smartzip có thể giải nén một cách tự động với các dạng:
<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
      ftype=`file "$1"`
      case "$ftype" in
      "$1: Zip archive"*&#41;
       unzip "$1" ;;
      "$1: gzip compressed"*&#41;
       gunzip "$1" ;;
      "$1: bzip2 compressed"*&#41;
       bunzip2 "$1" ;;
      *&#41; error "File $1 can not be uncompressed with smartzip";;
      esac</pre>
		</div>
      Ở đây <b>$1</b> là tham số (có thể đến $9, $* là tất cả các tham số) ví dụ
      smartzip articles.zip.

    * Lệnh <font color='orange'>select </font>được sử dụng để tương tác lựa chọn các phương án khác nhau:

   <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>select var in ... ; do
      break
      done
      .... now $var can be used ....</pre>
		</div>

      Ví dụ:

   <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
      echo "What is your favourite OS?"
      select var in "Linux" "Gnu Hurd" "Free BSD" "Other"; do
           break
      done
      echo "You have selected $var"</pre>
		</div>
      Chương trình sẽ in ra màn hình:

    <blockquote>  What is your favourite OS?
      1) Linux
      2) Gnu Hurd
      3) Free BSD
      4) Other
      #? 1
      You have selected Linux
&nbsp;
		</blockquote>
    * Lệnh <font color='orange'>while-loop</font>

   <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>while ...; do
      ....
      done</pre>
		</div>

    * Lệnh <font color='orange'>for-loop</font>

   <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>for var in ....; do
      ....
      done</pre>
		</div>


Nguồn :<span class="link"> http://vkopensource.blogspot.com/</span>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#13241</guid>
				<link>/hvaonline/posts/list/2477.html#13241</link>
				<pubDate><![CDATA[Tue, 8 Aug 2006 11:43:50]]> GMT</pubDate>
				<author><![CDATA[ tranvanminh]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ anh cho em hỏi. shell, script có thể kết nối với csdl sql ? giả sử in giá trị nào đó trong csdl thì có làm được không?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209221</guid>
				<link>/hvaonline/posts/list/2477.html#209221</link>
				<pubDate><![CDATA[Sat, 17 Apr 2010 13:28:11]]> GMT</pubDate>
				<author><![CDATA[ actuladn]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">actuladn wrote:</cite><br>
		<blockquote>anh cho em hỏi. shell, script có thể kết nối với csdl sql ? giả sử in giá trị nào đó trong csdl thì có làm được không?&nbsp;
		</blockquote>
Làm được. Bạn có thể đọc option <b>-e</b> trong <b>man mysql</b> hoặc đọc về Here Document:<span class="link"> http://tldp.org/LDP/abs/html/here-docs.html</span>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209228</guid>
				<link>/hvaonline/posts/list/2477.html#209228</link>
				<pubDate><![CDATA[Sat, 17 Apr 2010 22:58:49]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ cám ơn anh quanta.em thử như thế này
<blockquote>mysql snort -p&lt;&lt;EOFMYSQL
SELECT * from signature;
EOFMYSQL&nbsp;
		</blockquote>
thì vẫn hiện ra csdl nhưng khi thực thi đòi pass, có cách nào điền pass luôn không hay phải bỏ pass đi?&gt;]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209302</guid>
				<link>/hvaonline/posts/list/2477.html#209302</link>
				<pubDate><![CDATA[Mon, 19 Apr 2010 02:25:35]]> GMT</pubDate>
				<author><![CDATA[ actuladn]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">actuladn wrote:</cite><br>
		<blockquote>em thử như thế này
<blockquote>mysql snort -p&lt;&lt;EOFMYSQL
SELECT * from signature;
EOFMYSQL&nbsp;
		</blockquote>
thì vẫn hiện ra csdl nhưng khi thực thi đòi pass, có cách nào điền pass luôn không hay phải bỏ pass đi?&gt;&nbsp;
		</blockquote>
Bạn có thể gọi luôn password từ command hoặc lưu nó <b>vào đâu đó</b>. 

PS: thử ngâm cứu thằng Expect xem:<span class="link"> http://expect.nist.gov/</span>
]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209314</guid>
				<link>/hvaonline/posts/list/2477.html#209314</link>
				<pubDate><![CDATA[Mon, 19 Apr 2010 04:15:53]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ cám ơn anh quanta, đã khắc phục được nhưng với đoạn script khác. anh quanta có tài liệu nào về cách lấy từng dòng dữ liệu không? bên PHP có lệnh như thế này <b>mysql_fetch_assoc</b>]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209404</guid>
				<link>/hvaonline/posts/list/2477.html#209404</link>
				<pubDate><![CDATA[Tue, 20 Apr 2010 04:15:04]]> GMT</pubDate>
				<author><![CDATA[ actuladn]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ <p></p>
		<cite class="blockquote">actuladn wrote:</cite><br>
		<blockquote>cám ơn anh quanta, đã khắc phục được nhưng với đoạn script khác. anh quanta có tài liệu nào về cách lấy từng dòng dữ liệu không? bên PHP có lệnh như thế này <b>mysql_fetch_assoc</b>&nbsp;
		</blockquote>
Bạn thử cách này xem được không (mình chưa test):

<span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>RESULT=`mysql -u&lt;USERNAME&gt; -p&lt;PASSWORD&gt; -e "use &lt;YOUR_DATABASE&gt;; select * from &lt;YOUR_TABLE&gt;;"`
for ROW in $RESULT; do
    echo $ROW
done</pre>
		</div>

Tuy nhiên, mình đang tự hỏi là nếu bạn biết PHP sao bạn không dùng PHP luôn, hoặc Python hay Perl cũng được.]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209414</guid>
				<link>/hvaonline/posts/list/2477.html#209414</link>
				<pubDate><![CDATA[Tue, 20 Apr 2010 07:03:55]]> GMT</pubDate>
				<author><![CDATA[ quanta]]></author>
			</item>
			<item>
				<title>Tóm tắt Linux Shell Programming</title>
				<description><![CDATA[ hì em làm đề tài về tích hợp snort với iptable nên định viết module lấy csdl từ snort sau đó tạo rule cho iptables drop truy cập đó. Cách này làm bằng tay nhưng có còn hơn không. Anh có phương pháp nào khác không?]]></description>
				<guid isPermaLink="true">/hvaonline/posts/list/2477.html#209424</guid>
				<link>/hvaonline/posts/list/2477.html#209424</link>
				<pubDate><![CDATA[Tue, 20 Apr 2010 08:05:58]]> GMT</pubDate>
				<author><![CDATA[ actuladn]]></author>
			</item>
	</channel>
</rss>
