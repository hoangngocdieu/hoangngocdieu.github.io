<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Bài cũ:Socket và lập trình Socket. TG: LQV0604, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Bài cũ:Socket và lập trình Socket. TG: LQV0604 - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="" title="[Logo]">
								<img src="/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<!-- navigator -->
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="center">
	<tr>
		<td valign="baseline" align="left" colspan="0">
			<span class="nav">
			<a class="nav" href="/hvaonline/forums/list.html">Forum Index </a> 
			<img src="/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/forums/show/12.html">Thảo luận thâm nhập </a>
			<img src="/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/posts/list/5967.html" name="top" id="top">Bài cũ:Socket và lập trình Socket. TG: LQV0604</a>
				&nbsp;<a href="/hvaonline/rss/topicPosts/5967.html"><img src="/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML"></a>
			</span>
		
		</td>

		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- poll show -->

  <!-- POST LISTING -->


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Bài cũ:Socket và lập trình Socket. TG: LQV0604<a name="35050" id="35050"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">09/01/2007 00:08:51 (+0700) | <a href="/hvaonline/posts/list/5967.html#35050">#1</a> | 35050 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/134406.html"><b>komodo01</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 08/01/2007 07:01:49<br>
		Messages: 24<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/134406.html" class="icon_profile"><img src="/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/134406.html" class="icon_pm"><img src="/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">SOCKET và LẬP TRÌNH SOCKET<br/> <br/> Khái niệm socket<br/> Socket tiếng Anh là cái ổ cắm . Nhưng trong tin học khi người ta nói đến giao tiếp socket thì nó lại có ý nghĩa là một phương pháp dùng để giao tiếp giữa các tiến trình khác nhau trong mạng máy tính hay là trên một máy đơn . Socket là một trong những phương thức giao tiếp giữa các quá trình (inter-process communication) như pipe , message queue .... Trong các ứng dụng được viết ngày nay người ta sử dụng công cụ socket này rất nhiều như các Web , FTP .... Trong phần này chúng ta sẽ xem xét vấn đề trên môi trường Windows .<br/> Bây giờ chúng ta sẽ nói rõ hơn về socket . Giả sử ta muốn thiết kế một hệ thống trao đổi file . Hệ thống này hoạt động như sau : Tất cả dữ liệu được lưu trữ trên một máy chủ mạnh để bảo đảm an toàn và dễ quản lý . Nhưng những người làm IT thì là những người rất khoái đi chơi nên it khi nào họ ở gần server đó , với lại họ cũng bị hạn chế lại gần server và có mức độ giới hạn truy cập . Thế thì làm sao mà truy cập khi không ở ngay tại máy server đó . Giải pháp đưa ra là ta sẽ nối cái máy chủ đó ra mạng (LAN , WAN hay internet ) và mọi người truy cập thông qua mạng . Như vậy ta có thể hình dung mô hình truy cập sau : máy chủ có chương trình chạy trên đó tiếp nhận các yêu cầu (server) . Những người nào muốn lấy dữ liệu (client) thì cứ kết nối với máy chủ đó thông qua môi trường mạng để lấy dữ liệu về trên máy của mình . Đây chính là mô hình client / server . <br/> Giao tiếp socket giúp chúng ta hiện thực mô hình client / server dễ dàng hơn . VD A muốn tới nhà B chơi thì trước hết A phải mở cửa để bước ra ngoài đường .Sau đó thì A có thể đón taxi mà đi không cần quan tâm đến việc phải đi như thế nào để đến nhà B , Khi tới nhà B thì A phải bấm chuông để  B ra mở cửa . Quá trình kết nối giữa 2 ứng dụng trên mạng cũng giống như vậy , client mở một socket vô danh ( khái niệm trừu tượng để chỉ mở "cái cửa" ) , sau đó nó sẽ nhờ các lớp mạng tạo ra kết nối tới server (không cần quan tâm đến nó kết nối như thế nào cả ) . Song song đó thì server cũng tạo một socket khác có đia chỉ hẳn hoi ( một cái cửa thứ hai , nhưng có chuông , số nhà ....  ) Khi có kết nối tới đúng server dựa vào thông tin trên socket của server ( giống như client tìm đúng số nhà , bấm chuông ...) thì server sẽ mở cổng ra và client / server sẽ bắt đầu quá trình truyền dữ liệu . <br/> Bây gìơ ta sẽ nói đến địa chỉ IP và port . IP là địa chỉ trên mạng của thiết bị như PC , router .... . Port là một khái niệm ảo được xây dựng trên lớp Application trong mô hình OSI để phân biệt một gói tin được nhận thì của process nào  . VD như gói tin A ( khi lên tới lớp application )là cho ứng dụng FTP thì hệ điều hành lại cho nó vào ứng dụng web  Vì vậy ở lớp Application cần có sự phân biệt gói  tin nào là của ứng dụng nào . Port chính là thông tin để biết được gói tin nào là cuả ứng dụng nào . Khi ta nói Web server chạy ở port 80 tức là khi các gói tin được nhận thì hệ điều hành sẽ lấy các gói tin gửi tới port 80 truyền cho Web server . <br/> <br/> Tìm hiểu các thuộc tính của socket<br/>                       Socket có 3 thuộc tính sau :<br/>   +Domain : vùng giao tiếp của socket . Nếu socket hoạt động trên môi trường internet thì nó sẽ có giá trị là AF_INET (tức là hoạt động dựa theo chuẩn internet và dùng IP để xác định địa chỉ vật lý . ) Nếu socket hoạt động trên môi trường mạng cục bộ thì ta có thể dùng giao tiếp theo chuẩn : AF_UNIX (dùng đường dẫn và hệ thống file để đặt tên và xác định kết nối giữa hai hay nhiều ứng dụng . Trong môi trường Linux thì các thiết bị cũng được coi như hệ thống file đặc biệt và socket cũng được coi như vậy )<br/> <br/>   +Kiểu socket type : <br/>   SOCK_STREAM :  tạo ra kết nối bền vững (kết nối dạng TCP ) . Nói nôm na thì kết nối này đảm bảo gói tin này đến đích an toàn và không bị mất mát , nhưng nó có nhược điểm là chậm và tốn nhiều tài nguyên , <br/>   SOCK_DGRAM : cách gửi nhận dữ liệu một chiều (kết nối UDP) , client gửi dữ liệu đi mà không cần biết là server có nhân đựơc dữ liệu hay không . Server khi nhận được dữ liệu cũng không cần phải xác nhận với client là đã nhận dữ liệu  . Tuy không an toàn nhưng nó nhanh và được sử dụng nhiều trong môi trường multimeida <br/>   (còn một loại socket nữa là raw -socket nhưng ít dùng ) <br/>   +Giao thức của  socket (protocol ): <br/>   Giao thức là cách quy ước gửi nhận dữ liệu trong quá trình trao đổi thông tin (VD ai gửi trước , ai nhận , gửi nhận theo thứ tự nào ....) Có nhiều giao thức đối với mỗi loại socket , nhưng dùng nhiều là TCP và UDP . <br/> <br/> MỘT SỐ HÀM THÔNG DỤNG CỦA SOCKET<br/> Hàm tạo socket :<br/> SOCKET socket( int af, int type, int protocol);    <br/>                 af : domain . Có thể lấy các giá trị sau : AF_INET , AF_UNIX , AF_IPX , AF_ISO , AF_NS ...<br/>     type : SOCK_STREAM , SOCK_DGRAM <br/>     protocol : lấy giá trị 0 để sử protocol mặc định cho mỗi loại socket<br/> Giá trị trả về là sokcet discriptor , là một con số dùng để mô tả socket mình vừa tạo ra .<br/> <br/> Hàm đóng socket :<br/> closesocket(SOCKET sk ) ;<br/> <br/> Hàm bind<br/> int bind(SOCKET s, const struct sockaddr* name, int namelen);<br/>     Trước khi gọi hàm bind bạn phải tạo một socket trước bằng hàm socket() . Sau khi tạo socket là tới lúc mình sẽ dùng hàm bind gán cho nó các thông tin như port và địa chỉ <br/>     Thông tin này đựơc lưu trữ trong struct sockaddr* name <br/> <br/> Hàm listen<br/> int listen( SOCKET s,  int backlog);<br/>     Hàm này dùng để tạo hàng đợi các kết nối . backlog là số kết nối tối đa trong hàng đợi . Do một server thì một lúc có thể có nhiều kết nối tới do đó cần phải có một hàng đợi để lưu trữ các kết nối này . Socket s sẽ đóng vai trò lắng nghe các kết nối và đưa nó vào hàng đợi<br/> <br/> Hàm accept<br/> SOCKET accept(  SOCKET s,  struct sockaddr* addr,  int* addrlen);<br/> Cách hoạt động của hàm accept là như sau:<br/>     Khi ta gọi hàm accept nó sẽ đưa thread mà hàm accept đang hoạt động vào trạng thái blocking . Khi có một kết nối ở trong hàng đợi thì hàm accept sẽ kết thúc và thread sẽ thoát khỏi trạng thái blocking . Khi này hàm accept đã tạo ra một socket mới ( thông tin về socket này chúng ta không thể biết ) và đặt các địa chỉ của client vào struct sockaddr* addr . Socket mới này chính là kết quả trả về của hàm accept . Ta sẽ dùng socket mới này để liên lạc với client chứ không dùng socket cũ là s .<br/> <br/> Hàm select<br/> int select(  int nfds,  fd_set* readfds,  fd_set* writefds,  fd_set* exceptfds,  const struct timeval* timeout);<br/> Đây là một hàm quan trọng . Hàm này dùng để thay đổi trạng thái của socket từ blocking sang non-blocking và ngược lại . Bình thường thì các socket được tạo ra từ các hàm trên sẽ tạo ra một socket dạng blocking , tức là nó sẽ đưa thread vào trạng thái blocking khi chưa có dữ liệu hoặc chưa có kết nối . Ta có thể dùng hàm select để thay đổi các trạng thái đó ,<br/> Hàm select sẽ trả về nếu như có một socket nào đó trong danh sách các socket readfds và writefds phát sinh tín hiệu là sẵn sàng hoạt động. Nếu như chưa có tín hiệu nào thì hàm listen sẽ đưa thread vào trạng thái ngủ ( hổng có gì làm thì ngủ là khỏe nhất )  Ta có thể lợi dụng điều này để có thể viết chương trình mà không cần phải tạo nhiều thread để quản lý từng kết nối <br/> Các macro phụ trợ cho hàm select là <br/> FD_CLR(s, *set) <br/>   Removes the descriptor s from set. <br/> FD_ISSET(s, *set) <br/>   Nonzero if s is a member of the set. Otherwise, zero. <br/> FD_SET(s, *set) <br/>   Adds descriptor s to set. <br/> FD_ZERO(*set) <br/>   Initializes the set to the null set. <br/> <br/> *set ứng với các biến thuộc kiểu fd_set* <br/> <br/> typedef struct <br/> fd_set {  <br/>   u_int fd_count;  <br/>   SOCKET fd_array[FD_SETSIZE];<br/> } fd_set;<br/> <br/> chúng ta có thể xem xét nó kĩ hơn trong phần VD của nó <br/> <br/> Các hàm send và recv<br/> int send(  SOCKET s,  const char* buf,  int len,  int flags);<br/> int recv(  SOCKET s,  char* buf,  int len,  int flags);<br/>     <br/> Đây là các hàm dùng để trao đổi thông tin giữa client và server (dạng kết nối TCP )<br/>   int recvfrom(  SOCKET s,  char* buf,  int len,  int flags,  struct sockaddr* from,  int* fromlen);<br/>       int sendto(  SOCKET s,  const char* buf,  int len,  int flags,  const struct sockaddr* to,  int tolen);<br/> Đây là các hàm dùng để trao đổi thông tin giữa client và server (dạng kết nối UDP )<br/> <br/> Các bạn tham khảo thêm trong MSDN . Mình dùng quote để giữ định dạng .<br/> Còn tiếp  . <br/> <br/> Phần Server<br/> int main() <br/> {<br/> ................<br/> ................<br/> SOCKET sk = socket(AF_INET,SOCK_STREAM,0) ;<br/> if ( sk == SOCKET_ERROR )<br/> {<br/>           MessageBox("Không thể tạo socket") ;<br/> }<br/> <br/> int server_port  = 1000 ; //port của server<br/> char server_ip[] = "127.0.0.1" ; //địa chỉ IP dạng chuỗi <br/>                 <br/> ////Tạo thông tin cho socket<br/> <br/> SOCKADDR_IN addr , client_add; <br/> addr.sin_family = AF_INET ;<br/> addr.sin_port = htons(server_port) ;<br/> addr.sin_addr.s_addr = inet_addr(server_ip);<br/> if(bind(sk,(LPSOCKADDR)&addr,sizeof(addr))==SOCKET_ERROR)<br/>                               MessageBox("Không thể bind socket") ;<br/> if(listen(sk,SOMAXCONN)==SOCKET_ERROR)  <br/>   MessageBox("Server không thể lắng nghe kết nối " );<br/> <br/> SOCKET newsk ;<br/> while(true)<br/> {  <br/>   newsk = accept(sk,(struct sockaddr*)&client_add,&len);<br/>   if(newsk== INVALID_SOCKET) MessageBox("Không nhận biết được kết nối"); <br/>   else {    <br/>   DWORD threadid ;<br/>   HANDLE hthread ; <br/>   hthread = CreateThread(NULL,0,Xu_Ly_Ket_Noi,&newsk ,0,&threadid) ;<br/>   if(hthread== NULL) MessageBox("Lỗi trong việc tạo thread");<br/>   }  <br/> }<br/> .................................<br/> <br/> DWORD WINAPI Xu_Ly_Ket_Noi(LPVOID lpParam)<br/> {<br/>   //////////Xử lý các dữ liệu truyền qua lại giữa server và client thông qua kết nối này<br/> .............................<br/> ////VD : Server nhận từ client chuỗi dạng chữ thường thì sẽ reply chuỗi dạng chữ hoa<br/> ///  char buf[80 ] ;<br/> ///  SOCKET * sk = (SOCKET*)lpParam ; <br/> ///  int byte_read = recv(*sk , buf,sizeof(buf),0)  ;<br/> ///  if ( byte_read == SOCKET_ERROR) <br/> ///  {<br/> ///          MessageBox("Không nhận được dữ liệu từ client ") ;<br/> ///  }<br/> ///  sprintf(buf , UPPERSTRING(buf) ) ;<br/> ///  send(*sk, buf , strlen(buf) ,0) ;<br/>         return 0 ;<br/> }<br/> <br/> Phần client<br/> int main()<br/> {<br/> .................<br/> ..................<br/> <br/> char server_ip[] = "127.0.0.1" ;<br/> SOCKADD_IN server_add ;<br/> server_add.sin_family = AF_INET ;<br/> server_add.sin_port = htons(2000) ;<br/> server_add.sin_addr.s_add = inet_add(server_ip) ;<br/> <br/> SOCKET Client_sk = socket(AF_INET, SOCK_STREAM , 0) ;<br/> if ( connect(Client_sk , (LPSOCKADDR)&server_add,sizeof(server_add)) ==SOCKET_ERROR) <br/> {<br/>                   MessageBox("Không thể kết nối tới server") ;<br/> }<br/> <br/> ////Đoạn code tiếp theo là phần gửi và nhận dữ liệu , xử lý thông tin ;<br/> ////VD : client gửi thông điệp chữ thường --&gt; server sẽ chuyển thành chữ hoa<br/> /// char buf[80] ; <br/> /// sprintf(buf , "hello word") ;<br/> /// if( send( Client_sk , buf , strlen(buf) ,0) == SOCKET_ERROR) <br/> /// {<br/> ///                Message("Không thể gửi dữ liệu") ;<br/> ////              return  ;<br/> ///}<br/> /// int byte_read = recv(Client_sk , buf  , sizeof(buf) , 0 ) ;<br/> /// if( byte_read == SOCKET_ERROR) <br/> /// {<br/> ////                      MessageBox("Không thể nhận dữ liệu<br/> ////                      return ;      <br/> ////}<br/> //// sprintf(buf , "Chuỗi nhận được từ client là %s " , buf) ;<br/> //// MessageBox( buf ) ;<br/> }<br/> <br/> Giải thuật cho chương trình client<br/> Xác định địa chỉ server <br/> Tạo socket <br/> Kết nối đến server <br/> Gởi / nhận dữ liệu theo giao thức lớp ứng dụng đã thiết kế <br/> Đóng kết nối <br/> <br/> <br/> Giải thuật cho chương trình server <br/> <br/> +Chương trình server có hai loại đơn giản : lặp và đồng thời <br/> +Hai dạng giao thức mà chương trình server có thể sử dụng là connection-oriented (TCP ) và connectionless (UDP)<br/> <br/> Giải thuật cho dạng lặp <br/> Đặc điểm : tại một thời điểm chỉ xử lý một kết nối từ server<br/> + Tạo socket , đăng kí địa chỉ socket với hệ thống <br/> + Đặt socket ở trạng thái lắng nghe , chờ và sẵn sàng cho việc kết nối từ client<br/> + Chấp nhận kết nối từ client , gới nhận dữ liệu theo giao thức lớp ứng dụng đã thiết kế <br/> + Đóng kết nối sau khi hoàn thành , trở lại trạng thái lắng nghe và chờ kết nối mới <br/> <br/> Giải thuật cho chương trình server dạng đồng thời ( concurrent) Đặc điểm : tại một thời điểm có thể xử lý nhièu kết nối từ client <br/> Tạo socket , đăng kí nó với hệ thống ( hàm bind)<br/> Đặt socket ở chế độ chờ , lắng nghe kết nối <br/> Khi có request từ client , chấp nhận kết nối , tạo một process con để xử lý . quay lại trạng thái chờ lắng nghe kết nối mới .<br/> Công việc của process mới gồm <br/> + Nhận thông tin kết nối của client<br/> + Giao tiếp với client theo giao thức lớp ứng dụng đã thiết kế <br/> + Đóng kết nối và kết thúc process con <br/> <br/> Thiết kế chương trình server dạng multi-protocol server ( gồm cả TCP và UDP ) <br/> Dùng một chương trình , mở một master socket cho cả TCP và UDP <br/> Dùng một hàm hệ thống (select để chọn lựa TCP hay UDP socket ) <br/> Tùy vào protocol mà xử lý gởi nhận thông điệp giao thức của lớp ứng dụng <br/> Tham khảo RFC 1060<br/> <br/> Thiết kế chương trình server dạng multi-service server ( gồm cả TCP và UDP ) <br/> Tạo một điểm giao tiếp chung <br/> Với mỗi request , xem loại dịch vụ cần xử lý <br/> Với mỗi loại dịch vụ , xử lý riêng biệt <br/> Có thể kết hợp multi-protocol và multi-service cho chương trình server<br/> <br/>  Hai phần trước là do mình viết nên có phần lung tung . Còn phần giải thuật này tham khảo từ slide bài giảng của ĐHBK <br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- quick reply -->
<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0" align="center">
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left">
			<!-- watch - unwatch -->
			<!-- add bookmark -->

		</td>
		<td align="right" valign="bottom">			
		</td>
	</tr>
</table>

<!-- mod -->

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- combo navigator -->
<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left"><a href="http://digg.com/submit?phrase=2&url=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=/hvaonline/posts/list/5967.html"><img src="/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
		<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<span class="gensmall">Go to:&nbsp;</span>
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/forums/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Select a forum</option>				
							<option value="0">-------------</option>
									<option value="2" >Thông báo từ HVA</option>
									<option value="41" >FAQ - Các câu hỏi thường gặp</option>
									<option value="5" >Góp ý và Hỏi đáp thắc mắc chung</option>
									<option value="6" >Kiểm tra bảo mật</option>
							<option value="0">-------------</option>
									<option value="8" >Thảo luận bảo mật</option>
									<option value="12" selected="selected">Thảo luận thâm nhập</option>
									<option value="28" >Thảo luận virus, trojan, spyware, worm...</option>
									<option value="36" >Thủ thuật reverse engineering</option>
									<option value="13" >Thông tin new bugs và exploits</option>
									<option value="51" >Case Studies</option>
							<option value="0">-------------</option>
									<option value="23" >Thảo luận hệ điều hành Windows</option>
									<option value="24" >Thảo luận hệ điều hành *nix</option>
									<option value="26" >Thảo luận các loại thiết bị máy tính</option>
									<option value="31" >Thảo luận mạng và thiết bị mạng</option>
									<option value="27" >Thông tin về các địa chỉ và tài liệu hữu ích</option>
							<option value="0">-------------</option>
									<option value="44" >Người tìm việc - Việc tìm người</option>
									<option value="21" >Thảo luận việc định hướng</option>
									<option value="19" >Những thảo luận khác</option>
									<option value="50" >Hình minh họa</option>
									<option value="33" >Trash</option>
							<option value="0">-------------</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- list users in -->
<table class="forumline" cellspacing="3" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<th class="thright"  nowrap="nowrap" height="26" valign="middle">&nbsp;Users currently in here&nbsp;</th>
	</tr>
		<tr>
			<td class="gensmall" valign="middle" align="left">
				1 Anonymous 
				
			</td>	
		</tr>
</table>
<a name="quick"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0"  align="center">

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.html" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
</table>

<script type="text/javascript" src="/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript" src="/hvaonline/templates/viet/js/avim.js"></script>
<script type="text/javascript">
<!--
function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}




function maxImg(foto, maxSize){
w = foto.width;
if (w > maxSize){
	foto.width = maxSize;
	}
} 

-->
</script>
