<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="[Help] kswapd sử dụng 100% CPU (Centos 5.2), jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>[Help] kswapd sử dụng 100% CPU (Centos 5.2) - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<!-- navigator -->
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="center">
	<tr>
		<td valign="baseline" align="left" colspan="0">
			<span class="nav">
			<a class="nav" href="/hvaonline/forums/list.html">Forum Index </a> 
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix </a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/posts/list/29076.html" name="top" id="top">[Help] kswapd sử dụng 100% CPU (Centos 5.2)</a>
				&nbsp;<a href="/hvaonline/rss/topicPosts/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML"></a>
			</span>
		
		</td>

		<td valign="middle" align="right" class="nav">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/list/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/29076' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" selected="selected">1</option>	
								<option value="2" >2</option>	
						</select>
						
							<a href="/hvaonline/posts/list/30/29076.html">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 2" title="Page 2"/>
							</a>
						
						<a href="/hvaonline/posts/list/30/29076.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (2)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
	</tr>
</table>

<!-- poll show -->

  <!-- POST LISTING -->


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="179195" id="179195"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">03/05/2009 01:47:11 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#179195">#1</a> | 179195 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">Em có con server chạy Centos 5.2 (Core2 Quad 6600, 8GB RAM, 16 GB swap). Gần đây xuất hiện tình trạng kswapd sử dụng 100% CPU, RAM free chỉ còn hơn 10MB. Server treo không làm gì được. Reboot thi lại chạy bình thường. Không biết vấn đề do đâu?. Mọi người tư vấn giùm em với.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="179199" id="179199"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">03/05/2009 02:31:00 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#179199">#2</a> | 179199 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Em có con server chạy Centos 5.2 (Core2 Quad 6600, 8GB RAM, 16 GB swap). Gần đây xuất hiện tình trạng kswapd sử dụng 100% CPU, RAM free chỉ còn hơn 10MB. Server treo không làm gì được. Reboot thi lại chạy bình thường. Không biết vấn đề do đâu?. Mọi người tư vấn giùm em với.&nbsp;
		</blockquote><br/> <br/> Trước tiên cần xác định những process nào tạo tình trạng này. Xem "top" thử process nào nuốt memory như vậy rồi từ đó mới xét đến giải pháp.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="179213" id="179213"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">03/05/2009 05:41:31 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#179213">#3</a> | 179213 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/122389.html"><b>mR.Bi</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 22/03/2006 13:17:49<br>
		Messages: 812<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/122389.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/122389.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
			<a href="http://vndev.net" target="_new"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_www.gif" alt="[WWW]" title="[www]"></a>
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">Anh conmale cho em hỏi liệu có cần tới 16GB swap hay không? Trước giờ em luôn dùng Swap MAX là 2GB bất kể cấu hình server mạnh cỡ nào, ram nhiều thế nào. Một tại liệu nào đó em đọc được thì thiết lập hơn 2GB Swap là không cần thiết. Không biết là đúng hay sai?</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall"> All of my life I have lived by a code and the code is simple: "honour your parent, love your woman and defend your children"</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180357" id="180357"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 01:00:49 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180357">#4</a> | 180357 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Em có con server chạy Centos 5.2 (Core2 Quad 6600, 8GB RAM, 16 GB swap). Gần đây xuất hiện tình trạng kswapd sử dụng 100% CPU, RAM free chỉ còn hơn 10MB. Server treo không làm gì được. Reboot thi lại chạy bình thường. Không biết vấn đề do đâu?. Mọi người tư vấn giùm em với.&nbsp;
		</blockquote><br/> <br/> Trước tiên cần xác định những process nào tạo tình trạng này. Xem "top" thử process nào nuốt memory như vậy rồi từ đó mới xét đến giải pháp.&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Sau khi tìm hiểu, có nhiều khả năng có thể dẫn đến tình trạng trên. Trong đó vấn đề từ kernel cũng có thể xảy ra. Em đã thử update kernel, chạy ổn định được 3 ngày rồi tình trạng nõ vẫn trở lại như cũ.<br/> <br/> Tại thời điểm treo CPU, xem "top" process có thông tin chú ý:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 11:34:30 up 3 days,  2:24,  5 users,  load average: 143.30, 108.64, 56.17
Tasks: 319 total,  11 running, 299 sleeping,   0 stopped,   9 zombie
Cpu&#40;s&#41;: 45.6%us, 10.3%sy,  0.2%ni, 41.9%id,  1.4%wa,  0.0%hi,  0.6%si,  0.0%st
Mem:   8310272k total,  7419692k used,   890580k free,   448252k buffers
Swap: 16482680k total,       76k used, 16482604k free,  5509184k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
  205 root      11  -5     0    0    0 R 101.1  0.0   8:13.03 kswapd0
27209 root      18   0  2028  728  592 R 101.1  0.0   8:17.19 repquota
28935 root      15   0  2324 1048  712 R  1.9  0.0   0:00.01 top
    1 root      15   0  2064  636  548 S  0.0  0.0   0:05.90 init</pre>
		</div><br/> <br/> Tại thời điểm này tất cả service trên server đều bị stop.<br/> <br/> Theo anh và mọi người có thể do đâu?<br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180359" id="180359"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 01:50:04 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180359">#5</a> | 180359 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Em có con server chạy Centos 5.2 (Core2 Quad 6600, 8GB RAM, 16 GB swap). Gần đây xuất hiện tình trạng kswapd sử dụng 100% CPU, RAM free chỉ còn hơn 10MB. Server treo không làm gì được. Reboot thi lại chạy bình thường. Không biết vấn đề do đâu?. Mọi người tư vấn giùm em với.&nbsp;
		</blockquote><br/> <br/> Trước tiên cần xác định những process nào tạo tình trạng này. Xem "top" thử process nào nuốt memory như vậy rồi từ đó mới xét đến giải pháp.&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Sau khi tìm hiểu, có nhiều khả năng có thể dẫn đến tình trạng trên. Trong đó vấn đề từ kernel cũng có thể xảy ra. Em đã thử update kernel, chạy ổn định được 3 ngày rồi tình trạng nõ vẫn trở lại như cũ.<br/> <br/> Tại thời điểm treo CPU, xem "top" process có thông tin chú ý:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 11:34:30 up 3 days,  2:24,  5 users,  load average: 143.30, 108.64, 56.17
Tasks: 319 total,  11 running, 299 sleeping,   0 stopped,   9 zombie
Cpu&#40;s&#41;: 45.6%us, 10.3%sy,  0.2%ni, 41.9%id,  1.4%wa,  0.0%hi,  0.6%si,  0.0%st
Mem:   8310272k total,  7419692k used,   890580k free,   448252k buffers
Swap: 16482680k total,       76k used, 16482604k free,  5509184k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
  205 root      11  -5     0    0    0 R 101.1  0.0   8:13.03 kswapd0
27209 root      18   0  2028  728  592 R 101.1  0.0   8:17.19 repquota
28935 root      15   0  2324 1048  712 R  1.9  0.0   0:00.01 top
    1 root      15   0  2064  636  548 S  0.0  0.0   0:05.90 init</pre>
		</div><br/> <br/> Tại thời điểm này tất cả service trên server đều bị stop.<br/> <br/> Theo anh và mọi người có thể do đâu?<br/> &nbsp;
		</blockquote><br/> <br/> Em chạy top và sort theo "memory" (nhấn shift-m) rồi gởi thông tin lên anh xem thử. Kết quả top ở trên của em chí có thông tin CPU sử dụng; anh cần thông tin Mem được sử dụng.<br/> <br/> <br/> Mr.Bi: swap thường được chỉnh gấp đôi hoặc gấp ba lần số lượng physical memory. Thật ra, thiết đặt swap quá lớn cũng chẳng giúp gì mấy nếu đã có nhiều memory. swap được dùng cho một số trường hợp khá cá biệt và không đòi hỏi dung lượng lớn nhưng nếu như nó đã được dùng một cách liên tục thì hệ thống ấy có vấn đề nghiêm trọng (như tình trạng của azteam ở đây).</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180367" id="180367"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 02:42:31 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180367">#6</a> | 180367 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">Hi anh,<br/> <br/> Vấn đề là khi tình trạng trên xẩy ra em không thể làm gì được, nên không show được thông tin như anh yêu cầu.<br/> "top" process trên là do em để sẵn shell trước khi server bị treo.<br/> Hiện tại em đã phải reboot server để chạy dịch vụ. Thường thì chạy sau vài ngày mới bị lại tình trạng trên.<br/> Em sẽ gửi anh thông tin anh cần sau, nhưng với tình trạng trên thì có thể do đâu?.<br/> <br/> Thanks,</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180372" id="180372"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 03:06:35 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180372">#7</a> | 180372 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Hi anh,<br/> <br/> Vấn đề là khi tình trạng trên xẩy ra em không thể làm gì được, nên không show được thông tin như anh yêu cầu.<br/> "top" process trên là do em để sẵn shell trước khi server bị treo.<br/> Hiện tại em đã phải reboot server để chạy dịch vụ. Thường thì chạy sau vài ngày mới bị lại tình trạng trên.<br/> Em sẽ gửi anh thông tin anh cần sau, nhưng với tình trạng trên thì có thể do đâu?.<br/> <br/> Thanks,&nbsp;
		</blockquote><br/> <br/> Trên máy chủ ấy em chạy những ứng dụng nào với những biên bản nào? (apache, mysql...) . Hồ sơ cấu hình của chúng ra sao?<br/> <br/> Tình trạng trên thường do bị memory leak khiến cho physical memory bị cạn kiệt nên phải nhảy sang dùng swap (bởi thế kswapd0 mới bận rộn mà nuốt quá nhiều CPU như thế). Muốn fix tình trạng này thì cần xác định xem ứng dụng nào nuốt quá nhiều memory.<br/> <br/> Thông tin top anh cần không nhất thiết phải ngay lúc server bị crash mà chỉ cần 2 cái cách nhau chừng 30 phút.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180379" id="180379"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 04:50:14 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180379">#8</a> | 180379 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/99357.html"><b>myquartz</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 04/01/2005 04:58:30<br>
		Messages: 563<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/99357.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/99357.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">Theo như top đưa lên thì thực sự swap không bị sử dụng (chỉ có 76k).<br/> Do đó kswapd chạy như thế là bất thường, có thể lỗi vì bug hoặc swap quá to?<br/> Bạn thử xem trong dmesg log và /var/log/messages xem có thông báo gì đặc biệt.<br/> <br/> Theo kinh nghiệm và những gì tớ đọc được ở đâu đó, thì swap nên chỉ để tối đa 2GB (Fedora/Centos khi cài đặt chế độ tạo partition mặc định, thì nó luôn tạo swap max 2GB, cho dù RAM = 8GB).<br/> Tại sao thế, vì khi cần memory, một máy 8GB RAM mà OS phải hoán đổi 8GB đó xuống đĩa thì ... vô cùng tệ hại. Đĩa đọc/ghi bị giới hạn tốc độ, như tớ gặp thì nhanh nhất với local disk cỡ 100MB/s, với 8GB hoán đổi mất 80 second là toi hết ứng dụng.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180384" id="180384"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 05:29:15 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180384">#9</a> | 180384 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/122389.html"><b>mR.Bi</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 22/03/2006 13:17:49<br>
		Messages: 812<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/122389.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/122389.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
			<a href="http://vndev.net" target="_new"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_www.gif" alt="[WWW]" title="[www]"></a>
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">myquartz wrote:</cite><br>
		<blockquote>Theo kinh nghiệm và những gì tớ đọc được ở đâu đó, thì swap nên chỉ để tối đa 2GB (Fedora/Centos khi cài đặt chế độ tạo partition mặc định, thì nó luôn tạo swap max 2GB, cho dù RAM = 8GB).<br/> Tại sao thế, vì khi cần memory, một máy 8GB RAM mà OS phải hoán đổi 8GB đó xuống đĩa thì ... vô cùng tệ hại. Đĩa đọc/ghi bị giới hạn tốc độ, như tớ gặp thì nhanh nhất với local disk cỡ 100MB/s, với 8GB hoán đổi mất 80 second là toi hết ứng dụng.&nbsp;
		</blockquote><br/> Mình không hiểu từ "hoán đổi" của bạn lắm? ý bạn nói nếu hệ thống hết memory (ứng dụng sử dụng hết ram) thì lúc này hệ thống sẽ tự động đẩy các ứng dụng chiếm ram cho Swap? Mình không nghĩ thế.<br/> máy mình đang ngồi hiện tại, chạy khoảng hơn 1 ngày, ram sử dụng gần hết, thì Swap được dùng chỉ có 4MB:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>total       used       free     shared    buffers     cached
Mem:          2004       1946         57          0        592        775
-/+ buffers/cache:        578       1425
Swap:          807          4        803</pre>
		</div><br/> như vậy mình đoán hệ thống sẽ lựa chọn swap sử dụng cho ứng dụng nào rồi đẩy sang cho swap gánh ứng dụng đó (theo tiêu chí nào thì mình thật sự chưa rõ). và lúc này máy mình vậy chạy rất mượt mà dù ram sử dụng gần hết. (theo mình nghĩ chỉ là thông số tương đối, không phản ánh thực tế lắm).<br/> <br/> câu hỏi của mình: nếu swap được chia nhiều (8gb như trường hợp của azteam) thì nếu như đĩa cứng hoạt động kém do vấn đề gì đó + việc cơ sở dữ liệu hoặc ứng dụng nào tương tự làm việc dựa trên tốc độ đọc ghi của đĩa cứng làm việc quá nhiều thì ảnh hưởng thế nào? swap rõ ràng không thể nhanh bằng ram được.<br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall"> All of my life I have lived by a code and the code is simple: "honour your parent, love your woman and defend your children"</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180390" id="180390"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 06:28:30 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180390">#10</a> | 180390 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Hi anh,<br/> <br/> Vấn đề là khi tình trạng trên xẩy ra em không thể làm gì được, nên không show được thông tin như anh yêu cầu.<br/> "top" process trên là do em để sẵn shell trước khi server bị treo.<br/> Hiện tại em đã phải reboot server để chạy dịch vụ. Thường thì chạy sau vài ngày mới bị lại tình trạng trên.<br/> Em sẽ gửi anh thông tin anh cần sau, nhưng với tình trạng trên thì có thể do đâu?.<br/> <br/> Thanks,&nbsp;
		</blockquote><br/> <br/> Trên máy chủ ấy em chạy những ứng dụng nào với những biên bản nào? (apache, mysql...) . Hồ sơ cấu hình của chúng ra sao?<br/> <br/> Tình trạng trên thường do bị memory leak khiến cho physical memory bị cạn kiệt nên phải nhảy sang dùng swap (bởi thế kswapd0 mới bận rộn mà nuốt quá nhiều CPU như thế). Muốn fix tình trạng này thì cần xác định xem ứng dụng nào nuốt quá nhiều memory.<br/> <br/> Thông tin top anh cần không nhất thiết phải ngay lúc server bị crash mà chỉ cần 2 cái cách nhau chừng 30 phút.&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Server của em chạy các ứng dụng web. Version:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>PHP 5.2.9 &#40;cli&#41; &#40;built: Mar 10 2009 02:32:23&#41;
Copyright &#40;c&#41; 1997-2009 The PHP Group
Zend Engine v2.2.0, Copyright &#40;c&#41; 1998-2009 Zend Technologies
    with the ionCube PHP Loader v3.1.32, Copyright &#40;c&#41; 2002-2007, by ionCube Ltd., and
    with Zend Extension Manager v1.2.2, Copyright &#40;c&#41; 2003-2007, by Zend Technologies
    with Suhosin v0.9.27, Copyright &#40;c&#41; 2007, by SektionEins GmbH
    with Zend Optimizer v3.3.3, Copyright &#40;c&#41; 1998-2007, by Zend Technologies
--------
Server version: Apache/2.2.11 &#40;Unix&#41;
Server built:   Mar 10 2009 02:03:31
--------
mysql  Ver 14.12 Distrib 5.0.67, for redhat-linux-gnu &#40;i686&#41; using readline 5.1</pre>
		</div><br/> <br/> Ngoài ra còn chạy cpanel, modsec2, apf firewall, với một số ứng dụng khác đi kèm.<br/> <br/> Kết quả em "top" process khi server đang bình thường:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 17:04:41 up  5:25,  1 user,  load average: 21.17, 17.83, 15.31
Tasks: 184 total,   3 running, 176 sleeping,   1 stopped,   4 zombie
Cpu&#40;s&#41;: 63.4%us, 20.7%sy,  0.0%ni, 15.1%id,  0.1%wa,  0.0%hi,  0.8%si,  0.0%st
Mem:   8310272k total,  6167988k used,  2142284k free,   407008k buffers
Swap: 16482680k total,        0k used, 16482680k free,  4953304k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 5392 mysql     10  -5  640m 255m 3724 S 80.5  3.1  96:37.16 mysqld
10259 root      18   0 37076  33m 2508 S  0.0  0.4   0:11.88 spamd
 6960 root      17   0 36556  33m 2508 S  0.0  0.4   0:13.77 spamd
26518 nobody    18   0  322m  29m 2152 S  1.7  0.4   0:04.94 httpd
19723 nobody    18   0  321m  29m 2224 S  1.3  0.4   0:07.62 httpd
23291 nobody    24   0  261m  29m 2220 S  0.0  0.4   0:04.89 httpd
 5493 root      15   0 31668  28m 2500 S  0.0  0.4   0:01.65 spamd
28423 nobody    18   0  321m  28m 2224 S  1.0  0.3   0:03.05 httpd
13240 nobody    18   0  290m  28m 2228 S  0.0  0.3   0:07.97 httpd
27906 nobody    18   0  320m  27m 2192 S  1.3  0.3   0:04.15 httpd
29667 nobody    18   0  319m  26m 1996 S  1.3  0.3   0:02.99 httpd
30573 nobody    18   0  319m  26m 1996 S  1.7  0.3   0:02.52 httpd
  723 nobody    18   0  318m  26m 1992 S  0.7  0.3   0:01.19 httpd
32145 nobody    18   0  319m  25m 1988 S  1.0  0.3   0:01.86 httpd
31994 nobody    18   0  317m  25m 1976 S  1.0  0.3   0:02.02 httpd
 2179 nobody    18   0  317m  24m 1988 S  1.7  0.3   0:00.56 httpd
  999 nobody    18   0  176m  24m 1992 S  0.0  0.3   0:01.04 httpd
 2531 nobody    18   0  317m  24m 1996 S  2.0  0.3   0:00.41 httpd
 8799 root      18   0 43860  20m 2476 S  0.0  0.3   0:01.34 httpd
 8805 nobody    20   0 43408  18m 1000 S  0.0  0.2   0:00.00 httpd
 8811 root      18   0 43276  18m  472 S  0.0  0.2   0:00.00 httpd
 3606 usera      17   0 42520  16m 6216 S  4.7  0.2   0:00.14 php
 6391 gdm       19   0 32232  15m 7744 S  0.0  0.2   0:00.48 gdmgreeter
24554 root      37  19 22564  13m 2948 S  0.0  0.2   0:12.26 cpanellogd
14104 anhthe    34  19 22564  11m  880 S  0.0  0.1   0:00.00 cpanellogd
 3563 userx   17   0 35956  11m 5516 S  1.3  0.1   0:00.04 php
 1921 usery   16   0 35668  10m 5480 S  0.0  0.1   0:00.04 php
 2111 userz   17   0 35668  10m 5476 S  0.0  0.1   0:00.04 php
 6051 root      34  19 26500 9.9m 2136 S  0.0  0.1   0:00.03 yum-updatesd</pre>
		</div><br/> <br/> 20 mins sau:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 17:26:53 up  5:47,  1 user,  load average: 9.85, 16.56, 20.80
Tasks: 189 total,  23 running, 160 sleeping,   1 stopped,   5 zombie
Cpu&#40;s&#41;: 78.7%us, 21.3%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   8310272k total,  6443084k used,  1867188k free,   415072k buffers
Swap: 16482680k total,        0k used, 16482680k free,  5116000k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 5392 mysql     10  -5  643m 259m 3724 S 43.2  3.2 116:39.42 mysqld
 3976 nobody    18   0  359m  66m 2204 S  1.3  0.8   0:06.65 httpd
11027 nobody    18   0  347m  55m 2180 S  2.5  0.7   0:02.46 httpd
10259 root      15   0 37076  33m 2508 S  0.0  0.4   0:12.63 spamd
 6960 root      16   0 36556  33m 2512 S  0.0  0.4   0:20.97 spamd
 5493 root      15   0 31668  28m 2500 S  0.0  0.4   0:01.71 spamd
 8407 nobody    18   0  320m  28m 2788 S  2.5  0.3   0:03.29 httpd
 2605 nobody    18   0  319m  27m 2212 S  3.8  0.3   0:05.85 httpd
 1512 nobody    18   0  319m  26m 2212 S  3.8  0.3   0:06.35 httpd
10669 nobody    18   0  318m  26m 2180 S  2.5  0.3   0:02.31 httpd
13113 nobody    18   0  317m  25m 2192 S  3.8  0.3   0:01.04 httpd
14185 nobody    18   0  317m  23m 2176 S  1.3  0.3   0:00.50 httpd
13789 nobody    18   0  316m  23m 2196 S  3.8  0.3   0:00.60 httpd
14920 userg  18   0 46568  22m 6468 R 42.0  0.3   0:00.33 php
14689 nobody    18   0  313m  21m 1964 S  0.0  0.3   0:00.09 httpd
 8799 root      18   0 43860  20m 2476 S  0.0  0.3   0:01.46 httpd
14941 nobody    19   0  313m  19m  452 R  0.0  0.2   0:00.00 httpd
 8805 nobody    17   0 43408  18m 1000 S  0.0  0.2   0:00.00 httpd
 8811 root      18   0 43276  18m  472 S  0.0  0.2   0:00.00 httpd
14933 userf      17   0 43304  17m 6176 R 19.1  0.2   0:00.15 php
14922 usere    18   0 41172  17m 6132 R 20.3  0.2   0:00.16 php
14931 usere    18   0 40928  16m 6104 R 16.5  0.2   0:00.13 php
 6391 gdm       17   0 32232  15m 7744 S  0.0  0.2   0:00.49 gdmgreeter
14921 userd   17   0 38704  14m 6100 R 14.0  0.2   0:00.11 php
14935 userc   17   0 39152  14m 6264 R 26.7  0.2   0:00.21 php
24554 root      37  19 22564  13m 2948 S  0.0  0.2   0:12.26 cpanellogd
14944 usera   18   0 37252  13m 5816 R  8.9  0.2   0:00.07 php
14945 userb      18   0 39260  12m 5556 R  8.9  0.2   0:00.07 php
14943 userb      18   0 38236  11m 5468 R  6.4  0.1   0:00.05 php</pre>
		</div><br/> <br/> Thanks,<br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180392" id="180392"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 06:38:34 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180392">#11</a> | 180392 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">myquartz wrote:</cite><br>
		<blockquote>Theo như top đưa lên thì thực sự swap không bị sử dụng (chỉ có 76k).<br/> Do đó kswapd chạy như thế là bất thường, có thể lỗi vì bug hoặc swap quá to?<br/> Bạn thử xem trong dmesg log và /var/log/messages xem có thông báo gì đặc biệt.<br/> <br/> Theo kinh nghiệm và những gì tớ đọc được ở đâu đó, thì swap nên chỉ để tối đa 2GB (Fedora/Centos khi cài đặt chế độ tạo partition mặc định, thì nó luôn tạo swap max 2GB, cho dù RAM = 8GB).<br/> Tại sao thế, vì khi cần memory, một máy 8GB RAM mà OS phải hoán đổi 8GB đó xuống đĩa thì ... vô cùng tệ hại. Đĩa đọc/ghi bị giới hạn tốc độ, như tớ gặp thì nhanh nhất với local disk cỡ 100MB/s, với 8GB hoán đổi mất 80 second là toi hết ứng dụng.&nbsp;
		</blockquote><br/> <br/> Mình đã check messages log, không có gì đặc biết.<br/> Theo mình tìm hiểu lỗi mình gặp phải có thể do bug vủa kernel, nhưng mình đã upgrade kernel, build lại rồi vẫn không giải quyết được vấn đề.<br/> Không biết bạn có nhầm lẫn khi setup không, nếu bạn setup default bao giờ nõ cũng chia swap = 2xRAM.<br/> Tớ không nghĩ vẫn đề ở đây là do partition swap chia to hay bé.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180394" id="180394"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 07:13:45 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180394">#12</a> | 180394 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote>Hi anh,<br/> <br/> Vấn đề là khi tình trạng trên xẩy ra em không thể làm gì được, nên không show được thông tin như anh yêu cầu.<br/> "top" process trên là do em để sẵn shell trước khi server bị treo.<br/> Hiện tại em đã phải reboot server để chạy dịch vụ. Thường thì chạy sau vài ngày mới bị lại tình trạng trên.<br/> Em sẽ gửi anh thông tin anh cần sau, nhưng với tình trạng trên thì có thể do đâu?.<br/> <br/> Thanks,&nbsp;
		</blockquote><br/> <br/> Trên máy chủ ấy em chạy những ứng dụng nào với những biên bản nào? (apache, mysql...) . Hồ sơ cấu hình của chúng ra sao?<br/> <br/> Tình trạng trên thường do bị memory leak khiến cho physical memory bị cạn kiệt nên phải nhảy sang dùng swap (bởi thế kswapd0 mới bận rộn mà nuốt quá nhiều CPU như thế). Muốn fix tình trạng này thì cần xác định xem ứng dụng nào nuốt quá nhiều memory.<br/> <br/> Thông tin top anh cần không nhất thiết phải ngay lúc server bị crash mà chỉ cần 2 cái cách nhau chừng 30 phút.&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Server của em chạy các ứng dụng web. Version:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>PHP 5.2.9 &#40;cli&#41; &#40;built: Mar 10 2009 02:32:23&#41;
Copyright &#40;c&#41; 1997-2009 The PHP Group
Zend Engine v2.2.0, Copyright &#40;c&#41; 1998-2009 Zend Technologies
    with the ionCube PHP Loader v3.1.32, Copyright &#40;c&#41; 2002-2007, by ionCube Ltd., and
    with Zend Extension Manager v1.2.2, Copyright &#40;c&#41; 2003-2007, by Zend Technologies
    with Suhosin v0.9.27, Copyright &#40;c&#41; 2007, by SektionEins GmbH
    with Zend Optimizer v3.3.3, Copyright &#40;c&#41; 1998-2007, by Zend Technologies
--------
Server version: Apache/2.2.11 &#40;Unix&#41;
Server built:   Mar 10 2009 02:03:31
--------
mysql  Ver 14.12 Distrib 5.0.67, for redhat-linux-gnu &#40;i686&#41; using readline 5.1</pre>
		</div><br/> <br/> Ngoài ra còn chạy cpanel, modsec2, apf firewall, với một số ứng dụng khác đi kèm.<br/> <br/> Kết quả em "top" process khi server đang bình thường:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 17:04:41 up  5:25,  1 user,  load average: 21.17, 17.83, 15.31
Tasks: 184 total,   3 running, 176 sleeping,   1 stopped,   4 zombie
Cpu&#40;s&#41;: 63.4%us, 20.7%sy,  0.0%ni, 15.1%id,  0.1%wa,  0.0%hi,  0.8%si,  0.0%st
Mem:   8310272k total,  6167988k used,  2142284k free,   407008k buffers
Swap: 16482680k total,        0k used, 16482680k free,  4953304k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 5392 mysql     10  -5  640m 255m 3724 S 80.5  3.1  96:37.16 mysqld
10259 root      18   0 37076  33m 2508 S  0.0  0.4   0:11.88 spamd
 6960 root      17   0 36556  33m 2508 S  0.0  0.4   0:13.77 spamd
26518 nobody    18   0  322m  29m 2152 S  1.7  0.4   0:04.94 httpd
19723 nobody    18   0  321m  29m 2224 S  1.3  0.4   0:07.62 httpd
23291 nobody    24   0  261m  29m 2220 S  0.0  0.4   0:04.89 httpd
 5493 root      15   0 31668  28m 2500 S  0.0  0.4   0:01.65 spamd
28423 nobody    18   0  321m  28m 2224 S  1.0  0.3   0:03.05 httpd
13240 nobody    18   0  290m  28m 2228 S  0.0  0.3   0:07.97 httpd
27906 nobody    18   0  320m  27m 2192 S  1.3  0.3   0:04.15 httpd
29667 nobody    18   0  319m  26m 1996 S  1.3  0.3   0:02.99 httpd
30573 nobody    18   0  319m  26m 1996 S  1.7  0.3   0:02.52 httpd
  723 nobody    18   0  318m  26m 1992 S  0.7  0.3   0:01.19 httpd
32145 nobody    18   0  319m  25m 1988 S  1.0  0.3   0:01.86 httpd
31994 nobody    18   0  317m  25m 1976 S  1.0  0.3   0:02.02 httpd
 2179 nobody    18   0  317m  24m 1988 S  1.7  0.3   0:00.56 httpd
  999 nobody    18   0  176m  24m 1992 S  0.0  0.3   0:01.04 httpd
 2531 nobody    18   0  317m  24m 1996 S  2.0  0.3   0:00.41 httpd
 8799 root      18   0 43860  20m 2476 S  0.0  0.3   0:01.34 httpd
 8805 nobody    20   0 43408  18m 1000 S  0.0  0.2   0:00.00 httpd
 8811 root      18   0 43276  18m  472 S  0.0  0.2   0:00.00 httpd
 3606 usera      17   0 42520  16m 6216 S  4.7  0.2   0:00.14 php
 6391 gdm       19   0 32232  15m 7744 S  0.0  0.2   0:00.48 gdmgreeter
24554 root      37  19 22564  13m 2948 S  0.0  0.2   0:12.26 cpanellogd
14104 anhthe    34  19 22564  11m  880 S  0.0  0.1   0:00.00 cpanellogd
 3563 userx   17   0 35956  11m 5516 S  1.3  0.1   0:00.04 php
 1921 usery   16   0 35668  10m 5480 S  0.0  0.1   0:00.04 php
 2111 userz   17   0 35668  10m 5476 S  0.0  0.1   0:00.04 php
 6051 root      34  19 26500 9.9m 2136 S  0.0  0.1   0:00.03 yum-updatesd</pre>
		</div><br/> <br/> 20 mins sau:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>top - 17:26:53 up  5:47,  1 user,  load average: 9.85, 16.56, 20.80
Tasks: 189 total,  23 running, 160 sleeping,   1 stopped,   5 zombie
Cpu&#40;s&#41;: 78.7%us, 21.3%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   8310272k total,  6443084k used,  1867188k free,   415072k buffers
Swap: 16482680k total,        0k used, 16482680k free,  5116000k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 5392 mysql     10  -5  643m 259m 3724 S 43.2  3.2 116:39.42 mysqld
 3976 nobody    18   0  359m  66m 2204 S  1.3  0.8   0:06.65 httpd
11027 nobody    18   0  347m  55m 2180 S  2.5  0.7   0:02.46 httpd
10259 root      15   0 37076  33m 2508 S  0.0  0.4   0:12.63 spamd
 6960 root      16   0 36556  33m 2512 S  0.0  0.4   0:20.97 spamd
 5493 root      15   0 31668  28m 2500 S  0.0  0.4   0:01.71 spamd
 8407 nobody    18   0  320m  28m 2788 S  2.5  0.3   0:03.29 httpd
 2605 nobody    18   0  319m  27m 2212 S  3.8  0.3   0:05.85 httpd
 1512 nobody    18   0  319m  26m 2212 S  3.8  0.3   0:06.35 httpd
10669 nobody    18   0  318m  26m 2180 S  2.5  0.3   0:02.31 httpd
13113 nobody    18   0  317m  25m 2192 S  3.8  0.3   0:01.04 httpd
14185 nobody    18   0  317m  23m 2176 S  1.3  0.3   0:00.50 httpd
13789 nobody    18   0  316m  23m 2196 S  3.8  0.3   0:00.60 httpd
14920 userg  18   0 46568  22m 6468 R 42.0  0.3   0:00.33 php
14689 nobody    18   0  313m  21m 1964 S  0.0  0.3   0:00.09 httpd
 8799 root      18   0 43860  20m 2476 S  0.0  0.3   0:01.46 httpd
14941 nobody    19   0  313m  19m  452 R  0.0  0.2   0:00.00 httpd
 8805 nobody    17   0 43408  18m 1000 S  0.0  0.2   0:00.00 httpd
 8811 root      18   0 43276  18m  472 S  0.0  0.2   0:00.00 httpd
14933 userf      17   0 43304  17m 6176 R 19.1  0.2   0:00.15 php
14922 usere    18   0 41172  17m 6132 R 20.3  0.2   0:00.16 php
14931 usere    18   0 40928  16m 6104 R 16.5  0.2   0:00.13 php
 6391 gdm       17   0 32232  15m 7744 S  0.0  0.2   0:00.49 gdmgreeter
14921 userd   17   0 38704  14m 6100 R 14.0  0.2   0:00.11 php
14935 userc   17   0 39152  14m 6264 R 26.7  0.2   0:00.21 php
24554 root      37  19 22564  13m 2948 S  0.0  0.2   0:12.26 cpanellogd
14944 usera   18   0 37252  13m 5816 R  8.9  0.2   0:00.07 php
14945 userb      18   0 39260  12m 5556 R  8.9  0.2   0:00.07 php
14943 userb      18   0 38236  11m 5468 R  6.4  0.1   0:00.05 php</pre>
		</div><br/> <br/> Thanks,<br/> <br/> &nbsp;
		</blockquote><br/> <br/> Nhìn qua 2 cái top này thì thấy ngay mức độ "grow" của mem dùng cho httpd quá nhanh. Nếu apache không triệt tiêu các processes đã được dùng để lấy lại mem kịp thời thì cứ đà này, sau 3 ngày server sẽ hết mem. Đến lúc server hết physical mem thì không có socket nào có thể spawn được nữa (vì chúng dùng physical mem chớ không phải virtual mem). Bởi thế, việc truy cập vào server lúc ấy là việc không thể được (không còn mem để spawn socket mới).<br/> <br/> Em thảy lên cái apache config, cụ thể cái httpd-mpm để anh xem thử. Sẵn thảy lên cái php.ini luôn.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180435" id="180435"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 14:28:00 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180435">#13</a> | 180435 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> Nhìn qua 2 cái top này thì thấy ngay mức độ "grow" của mem dùng cho httpd quá nhanh. Nếu apache không triệt tiêu các processes đã được dùng để lấy lại mem kịp thời thì cứ đà này, sau 3 ngày server sẽ hết mem. Đến lúc server hết physical mem thì không có socket nào có thể spawn được nữa (vì chúng dùng physical mem chớ không phải virtual mem). Bởi thế, việc truy cập vào server lúc ấy là việc không thể được (không còn mem để spawn socket mới).<br/> <br/> Em thảy lên cái apache config, cụ thể cái httpd-mpm để anh xem thử. Sẵn thảy lên cái php.ini luôn.&nbsp;
		</blockquote><br/> <br/> Apache em build mpm worker với các tham số:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ServerLimit 40
StartServers 2
MaxClients 1000
MinSpareThreads 25
MaxSpareThreads 75
ThreadsPerChild 25
MaxRequestsPerChild 1000</pre>
		</div><br/> <br/> Còn php.ini của server không biết anh cần những tham số nào trong đấy vì nếu em thảy hết lên thì rất dài <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">. Có những tham số không cần thiết.<br/> <br/> Thanks,</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180439" id="180439"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 17:36:12 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180439">#14</a> | 180439 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/158.html"><b>mrro</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 27/12/2001 05:07:00<br>
		Messages: 745<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/158.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/158.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">nhiều thầy quá mà không thầy nào thấy đúng bệnh hết. mình cho bạn azteam một cái keyword nè: "không phải cứ hàng khủng là tốt".<br/> <br/> vấn đề của bạn đơn giản là nhiều RAM quá, làm tăng số lượng page, khiến cho kswapd nó phải tốn rất nhiều thời gian quý báu của CPU để quét cái page table, khi mà server chạy được một thời gian, RAM bắt đầu giảm xuống. giải pháp tốt nhất là giảm số lượng page trong page table. <br/> <br/> còn làm thế nào thì bạn thử xài cái keyword ở trên. mình nghĩ tự làm sẽ hay đó, hiểu thêm về cách linux quản lý bộ nhớ. nhưng nếu mà cần gấp, thì bạn có thể thuê mình, trong vòng 24h sẽ giải quyết xong vấn đề, giá cả phải chăng lol.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">http://tinsang.net<br><br>TetCon 2013 http://tetcon.org<br><br>Làm an toàn thông tin thì học gì?http://www.hvaonline.net/hvaonline/posts/list/42133.html</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180446" id="180446"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 21:23:00 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180446">#15</a> | 180446 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/fd39ef8ecd438a7e44adbb949bd19969.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/154619.html"><b>maithangbs</b></a><br>
	<font color="#33CC33">Elite Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 28/11/2007 21:39:53<br>
		Messages: 567<br>
	
		Location: Д.и.Р<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/154619.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/154619.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>


				<a href="#" onclick="document.location = 'mailto:' + showEmail('maithangbs', 'yahoo.com');"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_email.gif" alt="[Email]" title="[E-mai]"></a>
		
		
			<a href="http://edit.yahoo.com/config/send_webmesg?.target=MAITHANGBS&amp;.src=pg"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_yim.gif" alt="[Yahoo!]" title="[YIM]"></a>
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">mrro wrote:</cite><br>
		<blockquote>nhiều thầy quá mà không thầy nào thấy đúng bệnh hết. mình cho bạn azteam một cái keyword nè: "không phải cứ hàng khủng là tốt".<br/> <br/> vấn đề của bạn đơn giản là nhiều RAM quá, làm tăng số lượng page, khiến cho kswapd nó phải tốn rất nhiều thời gian quý báu của CPU để quét cái page table, khi mà server chạy được một thời gian, RAM bắt đầu giảm xuống. giải pháp tốt nhất là giảm số lượng page trong page table. <br/> <br/> còn làm thế nào thì bạn thử xài cái keyword ở trên. mình nghĩ tự làm sẽ hay đó, hiểu thêm về cách linux quản lý bộ nhớ. nhưng nếu mà cần gấp, thì bạn có thể thuê mình, trong vòng 24h sẽ giải quyết xong vấn đề, giá cả phải chăng lol.&nbsp;
		</blockquote><br/> <br/> Vào blog của mrro mà đọc nhỉ. <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom"></span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180455" id="180455"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/05/2009 23:26:17 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180455">#16</a> | 180455 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> Nhìn qua 2 cái top này thì thấy ngay mức độ "grow" của mem dùng cho httpd quá nhanh. Nếu apache không triệt tiêu các processes đã được dùng để lấy lại mem kịp thời thì cứ đà này, sau 3 ngày server sẽ hết mem. Đến lúc server hết physical mem thì không có socket nào có thể spawn được nữa (vì chúng dùng physical mem chớ không phải virtual mem). Bởi thế, việc truy cập vào server lúc ấy là việc không thể được (không còn mem để spawn socket mới).<br/> <br/> Em thảy lên cái apache config, cụ thể cái httpd-mpm để anh xem thử. Sẵn thảy lên cái php.ini luôn.&nbsp;
		</blockquote><br/> <br/> Apache em build mpm worker với các tham số:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ServerLimit 40
StartServers 2
MaxClients 1000
MinSpareThreads 25
MaxSpareThreads 75
ThreadsPerChild 25
MaxRequestsPerChild 1000</pre>
		</div><br/> <br/> Còn php.ini của server không biết anh cần những tham số nào trong đấy vì nếu em thảy hết lên thì rất dài <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">. Có những tham số không cần thiết.<br/> <br/> Thanks,&nbsp;
		</blockquote><br/> <br/> Thử chạy:<br/> <br/> <b>sysctl -a | grep shmmax</b><br/> <br/> và<br/> <br/> <b>sysctl -a | grep huge</b><br/> <br/> rồi gởi thông tin lên đây xem?</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180462" id="180462"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 00:10:23 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180462">#17</a> | 180462 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> Nhìn qua 2 cái top này thì thấy ngay mức độ "grow" của mem dùng cho httpd quá nhanh. Nếu apache không triệt tiêu các processes đã được dùng để lấy lại mem kịp thời thì cứ đà này, sau 3 ngày server sẽ hết mem. Đến lúc server hết physical mem thì không có socket nào có thể spawn được nữa (vì chúng dùng physical mem chớ không phải virtual mem). Bởi thế, việc truy cập vào server lúc ấy là việc không thể được (không còn mem để spawn socket mới).<br/> <br/> Em thảy lên cái apache config, cụ thể cái httpd-mpm để anh xem thử. Sẵn thảy lên cái php.ini luôn.&nbsp;
		</blockquote><br/> <br/> Apache em build mpm worker với các tham số:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>ServerLimit 40
StartServers 2
MaxClients 1000
MinSpareThreads 25
MaxSpareThreads 75
ThreadsPerChild 25
MaxRequestsPerChild 1000</pre>
		</div><br/> <br/> Còn php.ini của server không biết anh cần những tham số nào trong đấy vì nếu em thảy hết lên thì rất dài <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">. Có những tham số không cần thiết.<br/> <br/> Thanks,&nbsp;
		</blockquote><br/> <br/> Thử chạy:<br/> <br/> <b>sysctl -a | grep shmmax</b><br/> <br/> và<br/> <br/> <b>sysctl -a | grep huge</b><br/> <br/> rồi gởi thông tin lên đây xem?&nbsp;
		</blockquote><br/> <br/> <br/> Hi anh,<br/> <br/> Thông tin anh cần như như sau:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># sysctl -a | grep shmmax
kernel.shmmax = 4294967295
# sysctl -a | grep huge
vm.hugetlb_shm_group = 0
vm.nr_hugepages = 0</pre>
		</div><br/> <br/> @mrro: Thanks, tớ đang đọc và tìm hiểu thêm về  "không phải cứ hàng khủng là tốt"<img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">, hy vọng sẽ cho kêt quả sớm.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180463" id="180463"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 00:34:55 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180463">#18</a> | 180463 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><br/> <br/> Hi anh,<br/> <br/> Thông tin anh cần như như sau:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># sysctl -a | grep shmmax
kernel.shmmax = 4294967295
# sysctl -a | grep huge
vm.hugetlb_shm_group = 0
vm.nr_hugepages = 0</pre>
		</div><br/> <br/> @mrro: Thanks, tớ đang đọc và tìm hiểu thêm về  "không phải cứ hàng khủng là tốt"<img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">, hy vọng sẽ cho kêt quả sớm.&nbsp;
		</blockquote><br/> <br/> Copy nội dung sau vào file <b>setPage.sh</b>:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/bash
# Check for the kernel version
KERN=`uname -r | awk -F. '{ printf&#40;"%d.%d\n",$1,$2&#41;; }'`

# Find out the HugePage size
HPG_SZ=`grep Hugepagesize /proc/meminfo | awk {'print $2'}`

# Start from 1 pages to be on the safe side and guarantee 1 free HugePage
NUM_PG=1

# Cumulative number of pages required to handle the running shared memory segments
for SEG_BYTES in `ipcs -m | awk {'print $5'} | grep "&#91;0-9&#93;&#91;0-9&#93;*"`
do
MIN_PG=`echo "$SEG_BYTES/&#40;$HPG_SZ*1024&#41;" | bc -q`
if &#91; $MIN_PG -gt 0 &#93;; then
NUM_PG=`echo "$NUM_PG+$MIN_PG+1" | bc -q`
fi
done

# Finish with results
case $KERN in
'2.4'&#41; HUGETLB_POOL=`echo "$NUM_PG*$HPG_SZ/1024" | bc -q`;
echo "Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL" ;;
'2.6'&#41; echo "Recommended setting: vm.nr_hugepages = $NUM_PG" ;;
*&#41; echo "Unrecognized kernel version $KERN. Exiting." ;;
esac

# End</pre>
		</div><br/> <br/> <br/> Sau đó, chmod +x setPage.sh<br/> <br/> Rồi chạy: ./setPage.sh<br/> <br/> Sau đó gởi info lên đây.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180466" id="180466"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 01:04:16 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180466">#19</a> | 180466 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> <br/> Sau đó, chmod +x setPage.sh<br/> <br/> Rồi chạy: ./setPage.sh<br/> <br/> Sau đó gởi info lên đây.&nbsp;
		</blockquote><br/> <br/> <br/> Hi anh,<br/> <br/> Em đọc bài của mrro và cũng thử chạy đoạn script(như csript anh hướng dẫn trên). Cho kết quả:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>./setPage.sh
Recommended setting: vm.nr_hugepages = 1</pre>
		</div><br/>  <br/> Em mở /etc/sysctl.conf<br/> <br/> Thêm vào dòng:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># hugepages
vm.nr_hugepages = 1</pre>
		</div><br/> <br/> Em đang theo dõi thêm xem thế nào.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180468" id="180468"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 01:15:51 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180468">#20</a> | 180468 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> <br/> Sau đó, chmod +x setPage.sh<br/> <br/> Rồi chạy: ./setPage.sh<br/> <br/> Sau đó gởi info lên đây.&nbsp;
		</blockquote><br/> <br/> <br/> Hi anh,<br/> <br/> Em đọc bài của mrro và cũng thử chạy đoạn script(như csript anh hướng dẫn trên). Cho kết quả:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>./setPage.sh
Recommended setting: vm.nr_hugepages = 1</pre>
		</div><br/>  <br/> Em mở /etc/sysctl.conf<br/> <br/> Thêm vào dòng:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># hugepages
vm.nr_hugepages = 1</pre>
		</div><br/> <br/> Em đang theo dõi thêm xem thế nào.&nbsp;
		</blockquote><br/> <br/> <br/> Thêm dòng ấy vào sysctl.conf mà không làm gì khác thì chẳng có tác dụng gì đâu.<br/> <br/> Em có thể load nó thẳng vào kernel bằng cách:<br/> <b>echo 1 &gt; /proc/sys/vm/nr_hugepages</b><br/> <br/> hoặc chạy:<br/> <b>sysctl -p</b><br/> <br/> Để system load cái sysctl.conf mới lên.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180469" id="180469"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 01:22:47 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180469">#21</a> | 180469 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><br/> <br/> Sau đó, chmod +x setPage.sh<br/> <br/> Rồi chạy: ./setPage.sh<br/> <br/> Sau đó gởi info lên đây.&nbsp;
		</blockquote><br/> <br/> <br/> Hi anh,<br/> <br/> Em đọc bài của mrro và cũng thử chạy đoạn script(như csript anh hướng dẫn trên). Cho kết quả:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>./setPage.sh
Recommended setting: vm.nr_hugepages = 1</pre>
		</div><br/>  <br/> Em mở /etc/sysctl.conf<br/> <br/> Thêm vào dòng:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># hugepages
vm.nr_hugepages = 1</pre>
		</div><br/> <br/> Em đang theo dõi thêm xem thế nào.&nbsp;
		</blockquote><br/> <br/> <br/> Thêm dòng ấy vào sysctl.conf mà không làm gì khác thì chẳng có tác dụng gì đâu.<br/> <br/> Em có thể load nó thẳng vào kernel bằng cách:<br/> <b>echo 1 &gt; /proc/sys/vm/nr_hugepages</b><br/> <br/> hoặc chạy:<br/> <b>sysctl -p</b><br/> <br/> Để system load cái sysctl.conf mới lên.&nbsp;
		</blockquote><br/> <br/> Okies thanks anh,<br/> <br/> Lúc thêm vào, chưa chạy load lại file sysctl.conf.<br/> <br/> Chạy <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># cat /proc/meminfo | grep Huge
HugePages_Total:     0
HugePages_Free:      0
HugePages_Rsvd:      0
Hugepagesize:     2048 kB</pre>
		</div><br/> <br/> Thấy HugePages_Total:     0. Đang loay hoay tìm thi anh post luôn.<br/> <br/> Chạy lại thấy kết quả ngay:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># cat /proc/meminfo | grep Huge
HugePages_Total:     1
HugePages_Free:      1
HugePages_Rsvd:      0
Hugepagesize:     2048 kB</pre>
		</div></span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180479" id="180479"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 03:40:36 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180479">#22</a> | 180479 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/158.html"><b>mrro</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 27/12/2001 05:07:00<br>
		Messages: 745<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/158.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/158.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">@azteam: có lẽ bạn chưa đọc kỹ rồi, thêm vào như thế chẳng có tác dụng gì hết, nếu mà không có ứng dụng nó sử dụng mấy cái page đó. vả lại bạn thêm vào có 1 page = 2M thì chẳng bổ béo gì đâu.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">http://tinsang.net<br><br>TetCon 2013 http://tetcon.org<br><br>Làm an toàn thông tin thì học gì?http://www.hvaonline.net/hvaonline/posts/list/42133.html</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180482" id="180482"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 04:25:22 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180482">#23</a> | 180482 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">azteam, em đang chạy kernel version mấy vậy?</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180484" id="180484"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 04:38:11 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180484">#24</a> | 180484 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>azteam, em đang chạy kernel version mấy vậy?&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Version kernel của server: <b>2.6.18-128.1.6.el5PAE</b>.<br/> <br/> @mrro: Quả thật với trường hợp của mình cũng chưa thấy có gì rõ ràng. Nếu bạn có chút tư vấn nào để minh tìm hiểu thêm. Mình cũng có 4 server cùng cấu hinh như trên. Trước chạy rất ổn., thời gian gần đây mới bị vấn đề trên. Hơn nữa không phải server nào cũng bị.<br/> <br/> Thanks,<br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180488" id="180488"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 05:14:17 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180488">#25</a> | 180488 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/158.html"><b>mrro</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 27/12/2001 05:07:00<br>
		Messages: 745<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/158.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/158.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">@azteam: mình thấy mình viết ở đây với trên blog rõ lắm rồi mà? nếu bạn đọc mà không thấy rõ ràng, thì mình cũng bó tay, mình không có thời gian và cũng không có động lực để ngồi giảng giải chi tiết cho bạn hiểu những gì mình viết.<br/> <br/> giờ muốn rõ hơn thì phải ngồi coi server của bạn nó thế nào, rồi tính toán các thông số cho nó thích hợp, mà cái đó thì mình không có làm free. <br/> <br/> về thắc mắc của bạn, trước đây chạy ổn vì bạn chưa có thêm RAM vào, mình thấy gần đây bạn mới thêm 4G RAM vào server này, phải hông? vả lại tùy thuộc vào loại ứng dụng đang chạy nữa, mà server mặc dù có cùng cấu hình thì cũng chưa chắc gì có biểu hiện giống nhau.<br/> <br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">http://tinsang.net<br><br>TetCon 2013 http://tetcon.org<br><br>Làm an toàn thông tin thì học gì?http://www.hvaonline.net/hvaonline/posts/list/42133.html</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180489" id="180489"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 05:19:06 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180489">#26</a> | 180489 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">mrro wrote:</cite><br>
		<blockquote>@azteam: mình thấy mình viết ở đây với trên blog rõ lắm rồi mà? nếu bạn đọc mà không thấy rõ ràng, thì mình cũng bó tay, mình không có thời gian và cũng không có động lực để ngồi giảng giải chi tiết cho bạn hiểu những gì mình viết.<br/> <br/> giờ muốn rõ hơn thì phải ngồi coi server của bạn nó thế nào, rồi tính toán các thông số cho nó thích hợp, mà cái đó thì mình không có làm free. <br/> <br/> về thắc mắc của bạn, trước đây chạy ổn vì bạn chưa có thêm RAM vào, mình thấy gần đây bạn mới thêm 4G RAM vào server này, phải hông? vả lại tùy thuộc vào loại ứng dụng đang chạy nữa, mà server mặc dù có cùng cấu hình thì cũng chưa chắc gì có biểu hiện giống nhau.<br/> <br/> <br/> &nbsp;
		</blockquote><br/> <br/> Mình đang đọc kỹ bài viết của cậu. Và tìm hiểu thêm các vấn đề được đề cập trong đấy.<br/> Server tớ trước giwof vẫn chạy 8 GB RAM <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom">, không phải mới thêm.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180491" id="180491"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 05:59:18 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180491">#27</a> | 180491 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.html"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>azteam, em đang chạy kernel version mấy vậy?&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Version kernel của server: <b>2.6.18-128.1.6.el5PAE</b>.<br/> <br/> @mrro: Quả thật với trường hợp của mình cũng chưa thấy có gì rõ ràng. Nếu bạn có chút tư vấn nào để minh tìm hiểu thêm. Mình cũng có 4 server cùng cấu hinh như trên. Trước chạy rất ổn., thời gian gần đây mới bị vấn đề trên. Hơn nữa không phải server nào cũng bị.<br/> <br/> Thanks,<br/> <br/> &nbsp;
		</blockquote><br/> <br/> Em cho biết thêm dữ kiện cuối. Thử grep cái kernel config:<br/> <br/> <b>grep CONFIG_HIGHMEM /path/to/kernel/config</b><br/> <br/> xem nó báo cái gì?</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180493" id="180493"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 06:13:22 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180493">#28</a> | 180493 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/99357.html"><b>myquartz</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 04/01/2005 04:58:30<br>
		Messages: 563<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/99357.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/99357.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">Mình thì cho là vấn đề nhiều RAM (8GB) khiến nhiều page quá chưa hẳn khiến kswapd bị overload. 8GB chưa phải là lớn, với kernel 32bit-PAE, vì mình đã từng cho chạy vài con web server IBM x3650 với 8GB, khai thác hết RAM cũng ko vấn đề gì cả. Trường hợp của MrRo nó là 32GB RAM, gấp tới 4 lần cơ.<br/> HugePage trong trường hợp này không giúp ích, vì nếu ứng dụng không thèm dùng nó thì chả có tác dụng gì.<br/> Nếu do nhiều page, có thể nâng cấp lên 64bit, page nó sẽ to hơn (nếu nhớ ko nhầm thì với Intel nó là 16k) và giảm số lượng page đi.<br/> Hoặc bạn thử chạy lệnh swapoff -a coi, nếu có khả năng thì xoá partition swap cũ, tạo 1 partition swap nhỏ hơn (2GB thôi) vào đó, thử coi xem còn hiện tượng như thế.<br/> <br/> P/S: nhắn cho bạn gì đó thắc mắc: hoán đổi RAM/swap là việc OS làm nếu ứng dụng xin thêm RAM mà Physic RAM đã cấp hết. OS sẽ write data 1 lượng RAM ko đc truy cấp tới xuống đĩa, giải phóng chỗ, đủ chỗ cho ứng dụng xin thêm, và cho ứng dụng phần trống này. Nếu phần RAM bị write xuống lại được ứng dụng khác cần, thì OS lại write 1 số chỗ khác xuống, rồi lại load lên cái phần lưu trong swap lên RAM cho ứng dụng. Việc này rất chậm vì đĩa truy cập chậm, kswapd là tiến trình phụ trách việc này.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180495" id="180495"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 06:23:22 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180495">#29</a> | 180495 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/e7c9302fbc4ad04c3a143dec8951a279.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/138233.html"><b>azteam</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 17/03/2007 21:12:46<br>
		Messages: 177<br>
	
		Location: /dev/null<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/138233.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/138233.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody"><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">azteam wrote:</cite><br>
		<blockquote><p></p>
		<cite class="blockquote">conmale wrote:</cite><br>
		<blockquote>azteam, em đang chạy kernel version mấy vậy?&nbsp;
		</blockquote><br/> <br/> Hi anh,<br/> <br/> Version kernel của server: <b>2.6.18-128.1.6.el5PAE</b>.<br/> <br/> @mrro: Quả thật với trường hợp của mình cũng chưa thấy có gì rõ ràng. Nếu bạn có chút tư vấn nào để minh tìm hiểu thêm. Mình cũng có 4 server cùng cấu hinh như trên. Trước chạy rất ổn., thời gian gần đây mới bị vấn đề trên. Hơn nữa không phải server nào cũng bị.<br/> <br/> Thanks,<br/> <br/> &nbsp;
		</blockquote><br/> <br/> Em cho biết thêm dữ kiện cuối. Thử grep cái kernel config:<br/> <br/> <b>grep CONFIG_HIGHMEM /path/to/kernel/config</b><br/> <br/> xem nó báo cái gì?&nbsp;
		</blockquote><br/> <br/> Hi anh, kết quả cho:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># CONFIG_HIGHMEM4G is not set
CONFIG_HIGHMEM64G=y
CONFIG_HIGHMEM=y</pre>
		</div><br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: [Help] kswapd sử dụng 100% CPU (Centos 5.2)<a name="180505" id="180505"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">14/05/2009 09:00:09 (+0700) | <a href="/hvaonline/posts/list/0/29076.html#180505">#30</a> | 180505 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/158.html"><b>mrro</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 27/12/2001 05:07:00<br>
		Messages: 745<br>
	
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/158.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/158.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody">@myquartz: theo mình biết thì PAE không thay đổi page size, mà còn làm tăng overhead của việc map từ physical page sang virtual memory nữa. <br/> <br/> Bạn azteam thử chạy lệnh <b>getconf PAGE_SIZE</b> xem có phải là 4K không. Nếu là 4K, với 8G RAM, bạn sẽ có đến 2^21 page, bằng với số lượng page mà một server 64bit với 32G RAM và page size là 16K (là trường hợp của mình).</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">http://tinsang.net<br><br>TetCon 2013 http://tetcon.org<br><br>Làm an toàn thông tin thì học gì?http://www.hvaonline.net/hvaonline/posts/list/42133.html</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td valign="middle" align="right" class="nav">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/list/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/29076' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" selected="selected">1</option>	
								<option value="2" >2</option>	
						</select>
						
							<a href="/hvaonline/posts/list/30/29076.html">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 2" title="Page 2"/>
							</a>
						
						<a href="/hvaonline/posts/list/30/29076.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (2)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
	</tr>
</table>

<!-- quick reply -->
<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0" align="center">
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left">
			<!-- watch - unwatch -->
			<!-- add bookmark -->

		</td>
		<td align="right" valign="bottom">			
		</td>
	</tr>
</table>

<!-- mod -->

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- combo navigator -->
<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/29076.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
		<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<span class="gensmall">Go to:&nbsp;</span>
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/forums/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Select a forum</option>				
							<option value="0">-------------</option>
									<option value="2" >Thông báo từ HVA</option>
									<option value="41" >FAQ - Các câu hỏi thường gặp</option>
									<option value="5" >Góp ý và Hỏi đáp thắc mắc chung</option>
									<option value="6" >Kiểm tra bảo mật</option>
							<option value="0">-------------</option>
									<option value="8" >Thảo luận bảo mật</option>
									<option value="12" >Thảo luận thâm nhập</option>
									<option value="28" >Thảo luận virus, trojan, spyware, worm...</option>
									<option value="36" >Thủ thuật reverse engineering</option>
									<option value="13" >Thông tin new bugs và exploits</option>
									<option value="51" >Case Studies</option>
							<option value="0">-------------</option>
									<option value="23" >Thảo luận hệ điều hành Windows</option>
									<option value="24" selected="selected">Thảo luận hệ điều hành *nix</option>
									<option value="26" >Thảo luận các loại thiết bị máy tính</option>
									<option value="31" >Thảo luận mạng và thiết bị mạng</option>
									<option value="27" >Thông tin về các địa chỉ và tài liệu hữu ích</option>
							<option value="0">-------------</option>
									<option value="44" >Người tìm việc - Việc tìm người</option>
									<option value="21" >Thảo luận việc định hướng</option>
									<option value="19" >Những thảo luận khác</option>
									<option value="50" >Hình minh họa</option>
									<option value="33" >Trash</option>
							<option value="0">-------------</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- list users in -->
<table class="forumline" cellspacing="3" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<th class="thright"  nowrap="nowrap" height="26" valign="middle">&nbsp;Users currently in here&nbsp;</th>
	</tr>
		<tr>
			<td class="gensmall" valign="middle" align="left">
				1 Anonymous 
				
			</td>	
		</tr>
</table>
<a name="quick"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0"  align="center">

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
</table>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/avim.js"></script>
<script type="text/javascript">
<!--
function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}




function maxImg(foto, maxSize){
w = foto.width;
if (w > maxSize){
	foto.width = maxSize;
	}
} 

-->
</script>
