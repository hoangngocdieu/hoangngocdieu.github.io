<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="OpenSSH, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>OpenSSH - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<!-- navigator -->
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="center">
	<tr>
		<td valign="baseline" align="left" colspan="0">
			<span class="nav">
			<a class="nav" href="/hvaonline/forums/list.html">Forum Index </a> 
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix </a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/posts/list/734.html" name="top" id="top">OpenSSH</a>
				&nbsp;<a href="/hvaonline/rss/topicPosts/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML"></a>
			</span>
		
		</td>

		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- poll show -->

  <!-- POST LISTING -->


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; OpenSSH<a name="2606" id="2606"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">01/07/2006 01:21:33 (+0700) | <a href="/hvaonline/posts/list/734.html#2606">#1</a> | 2606 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/79e18dc12a0f395163777837553df8ec.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/124757.html"><b>8x80</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 26/06/2006 14:13:54<br>
		Messages: 41<br>
	
		Location: unreachable host<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/124757.html" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/124757.html" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">Post của bác <b>hacnho</b>, <br/> <br/> <b>GIỚI THIỆU</b><br/> <br/> OpenSSH là một chương trình mã nguồn mở (Open Source) được sử dụng để mã hoá (encrypt) các giao dịch giữa các host với nhau bằng cách sử dụng Secure Shell (SSH). Nó là một sự thay thế an toàn cho những chương trình được sử dụng để kết nối như: Telnet, rlogin, rsh...Bởi nó luôn luôn mã hoá (encrypt) tất cả các giao dịch, ẩn đi, che dấu username và password được sử dụng cho những phiên đăng nhập từ xa. Sau khi phiên đăng nhập được thực hiện, nó sẽ tiếp tục mã hoá (encrypt) tất cả những dữ liệu giao dịch giữa 2 host<br/> <br/> Dự án OpenSSH được phát triển dựa trên nền tảng của dự án Open BSD (một OS thuộc họ Unix). Nó được thiết kế để sử dụng những thuật toán mã hoá mạnh để nâng cao tính an toàn và ngăn chặn sự phá hoại của các hacker. Mặc dù được xây dựng và phát triển bởi nền tảng OpenBSD, nó cũng có khả năng tương thích và có thể hoạt động trên hầu hết các OS thuộc dòng họ Unix: Linux, HP-UX, AIX, Irix, SCO, MacOS X, Cygwin, Digital Unix/Tru64/OSF, SNI/Reliant Unix, NeXT, Solaris...<br/> <br/> OpenSSH không phải là một chương trình. Nó là một bộ các chương trình kết nối an toàn:<br/> <br/> - OpenSSH Client (ssh): Chương trình được sử dụng cho các đăng nhập từ xa. Với sự an toàn và mã hoá (encrypt) trong mỗi phiên đăng nhập ở mức độ cao. Nó là sự thay thế an toàn cho: rlogin và telnet đã tỏ ra lỗi thời và kém an toàn.<br/> - Secure Copy Program (scp): Được sử dụng cho việc copy file từ xa, copy các file từ các host khác nhau trên Internet. Nó hỗ trợ username và password.<br/> - Secure File Transfer Program (sftp): Được sử dụng để phục các yêu cầu FTP một cách an toàn.<br/> - OpenSSH Deadmon (shhd): Đặt OpenSSH chạy ở chế độ daemon trên các hệ thống Unix.<br/> …………….<br/> <br/> Trên đây là những Tools chính không thể thiếu trong bộ OpenSSH. Ngoài ra còn rất nhiều Tools, Plugin, Addin nữa...<br/> <br/> <b>CÀI ĐẶT</b><br/> <br/> Để lấy OpenSSH bạn lên Homepage chính của nó:http://www.openssh.org<br/> <br/> Download một version phù hợp với hệ thống của mình. Tôi dùng Linux nên tôi sẽ download gói *.rpm. Sau đó sử dụng lệnh<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>root@domain.com#: rpm -Uvh *.rpm</pre>
		</div><br/> <br/> Nếu bạn sử dụng các hệ thống khác thì việc cài đặt nó cũng tương tự. Bạn download gói phù hợp với hệ thống của mình. Nó có thể là *.tar, *.tar.gz, *.gz...etc. Bung nén nó vào một thư mục.<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>root@domain.com #: ./configure
&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt; #: make
&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt; #: make install</pre>
		</div><br/> <br/> Tiếp đó theo làm theo các chỉ dẫn của script. Công việc cài đặt không mấy khó khăn. Chúng ta hãy dành thời gian và công sức cho công việc cấu hình.<br/> <br/> <br/> <b>CÁC TÍNH NỔI BẬT CỦA OPEN SSH</b><br/> <br/> Open SSH cung cấp khá nhiều tính năng để giúp cho việc truyền thông giữa 2 host trở lên an toàn. Dưới đây là một số tính nổi bật:<br/> <br/> 1) Khả năng mã hoá mạnh bởi việc sử dụng chuẩn mã hoá 3 DES và Blowfish: Cả 2 chuẩn mã hoá trên đều đuợc cung cấp miễn phí và sử dụng rộng rãi ở nhiều nước trên thế giới. 3DES cung cấp khả năng mã hoá chứng thực thời gian. Blowfish cung cấp khả năng mã hoá nhanh hơn. Cũng như những chuẩn mã hoá khác cả 2 chuẩn nêu trên đều cung cấp khả năng mã hoá các dữ liệu trước khi nó được đưa vào đường truyền một cách an toàn.<br/> 2) Khả năng chứng thực mạnh bởi việc sử dụng các cơ chế Public Key, OPTs (One Time Password), Kerberos: Có tác dụng bảo vệ chống lại tính dễ tổn thương trong quá trình chứng thực bởi việc khai thác và sử dụng các kỹ thuật như: IP Spoof, DNS Spoof, Fake Router…Có 4 phương pháp chứng thực được Open SSH sử dụng :<br/> - Chỉ chứng thực Public Key<br/> - Sự chứng thực host bởi việc sử dụng Public Key kết hợp với .rhost<br/> - Sự chứng thực dựa trên OPTs kết hợp với s/key<br/> - Sự chứng thực dựa trên cơ chế Kerberos<br/> 3) Mã hoá giao thức X11 cho việc sử dụng X Window: Mã hoá dữ liệu trong quá trình sử dụng X Window giữa 2 host. Được sử dụng để chống lại những cuộc tấn công từ xa nhằm vào xterm như Snooping, Hjacking…<br/> 4) Mã hoá cho quá trình chuyển đổi cổng (Port Forwarding): Cho phép quá trình chuyển đổi các port TCP/IP tới một hệ thống khác thông qua một kênh được mã hoá. Nó được sử dụng cho những giao thức Internet chuẩn không cung cấp khả năng mã hoá dữ liệu trên đường truyền như: SMTP, POP, FTP, Telnet…<br/> 5) Đại diện chuyển tiếp cho những đăng nhập vào các mạng đơn: Một Key chứng thực của người dùng có thể và thường được lưu giữ trên PC của họ, nó có thể trở thành một trạm đại diện chứng thực. Khi người sử dụng hệ thống truy cập từ một hệ thống mạng khác. Kết nối của họ sẽ được chuyển tới cho trạm đại diện chứng thực này. Nó có tác dụng cho phép người sử dụng truy cập đến hệ thống của bạn một cách an toàn từ bất kỳ hệ thống nào.<br/> 6) Nén dữ liệu: Cung cấp khả năng nén dữ liệu một cách an toàn. Nó rất có ý nghĩa trên những hệ thống mạng không được nhanh.<br/> 7) Chứng thực chung cho Kerberos và Andrew File System bằng cách sử dụng Ticket: Những người sử dụng Kerberos và AFS sẽ được cung cấp một password chung để sử dụng và truy cập 2 dịch vụ trên trong một thời gian nhất định.<br/> <br/> <br/> <b>NGUYÊN LÝ HOẠT ĐỘNG CỦA OPEN SSH</b><br/> <br/> Trước hết chúng ta cùng tìm hiểu về cơ chế chứng thực cho các lệnh r* (rlogin, rsh, rcp). Khi sử dụng rlogin, điều kiện đầu tiên là người dùng đó phải có một account trên hệ thống mà họ muốn đăng nhập từ xa đó. Chẳng hạn trên hệ thống từ xa đã có account binhnx2000. Nếu từ hệ thống cục bộ tôi kết nối tới một hệ thống từ xa, thì sẽ không có bất cứ yêu cầu hỏi password nào khi tôi truy nhập vào hệ thống từ xa này. Đơn giản bởi account binhnx2000 của tôi đã được xác nhận bởi file .rhost đươc đặt trong thư mục /home/binhnx2000 trên hệ thống từ xa.<br/> <br/> <br/> File .rhost chứa đựng hostname và username yêu cầu cho các account cần để sử dụng đăng nhập tới hệ thống. Chẳng hạn hostname của tôi là vnzone.net và username của tôi là binhnx2000. Để truy cập đến hệ thống không cần Passowd thì các thông tin về tôi trong file .rhost có dạng như sau:<br/> <br/> <b>Hostname Username</b><br/> <br/> Đối với hostname phải là hostname đầy đủ của hệ thống. Đối với username phải là các username hợp lệ đang tồn tại trên hệ thống mà bạn muốn login vào.<br/> <br/> <br/> Một ví dụ cụ thể: nếu tôi muốn sử dụng rlogin. Thì admin phải tạo một file .rhost trong /home/binhnx2000 với nội dung:<br/> <br/> <b>domain.com binhnx2000</b><br/> <br/> Mọi việc xong xuôi! Bây giờ khi tôi muốn đăng nhập vào hệ thống tôi chỉ việc phát lệnh:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>binhnx2000@domain.com$: rlogin -l binhnx2000 vnzone.net</pre>
		</div><br/> <br/> Hạn chế của giao thức này là các dữ liệu thông tin đi đến host không hề được mã hoá. Nó rất có thể bị đánh hơi được bởi các chương trình sniffer. Đặc biệt là rất dễ bị tổn thương bởi các cuộc tấn công: IP Spoof, DNS Spoof, Router Spoof…<br/> <br/> Vì những tính dễ tổn thương trên các chuyên gia security khuyến cáo bạn lên loại bỏ (disable) các r* service (rlogin, rsh…) trên hệ thống. Thông thường thì trên các hệ thống Linux cấu hình tổng thể hoạt động chung cho các service được cấu hình trong file /etc/xinet.d , để vô hiệu hoá các r* service:<br/> <br/> - Bạn dùng vi, emacs…hay bất cứ trình soạn thảo văn bản nào mà bạn muốn để mở /etc/init.d/xinet.d<br/> - Tìm đoạn “service login“ xoá chúng đi. Ghi lại mọi sự thay đổi và thoát trình soạn thảo.<br/> - Khởi động lại xinetd.d daemon : /etc/init.d/xinet.d restart<br/> - Nếu có thể bạn hãy vô hiệu hoá luôn telnet service bằng cách trên. Sau đó thay thế chúng bằng Open SSH.<br/> <br/> <br/> Chúng ta đã tìm hiểu qua nguyên lý hoạt động của r* service. Bây giờ chúng ta sẽ tìm hiểu về nguyên lý hoạt động của Open SSH. Điều đầu tiên mà tôi có thể khẳng định với bạn là : Open SSH cung cấp một cơ chế chứng thực khá an toàn bởi việc sử dụng những Public Key và Private Key. Các Private Key chỉ được sử dụng bởi người sở hữu, còn Public Key có thể được sử dụng bởi mọi người .<br/> <br/> <br/> Muốn Open SSH tạo ra các DSA Private/Public Key bạn dùng lệnh:<br/> <br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>shh-keygen -d</pre>
		</div><br/> <br/> <br/> Các DSA Private Key thường được lưu trữ ở <b>$HOME/.ssh/id_dsa file</b>. Còn các DSA Public Key thường được lưu trữ ở <b>$HOME/.ssh/id_dsa.pub</b> … Các Public Key cần phải được đổi tên và copy đến thư mục thích hợp trên hệ thống ở xa muốn sử dụng Open SSH.<br/> <br/> <br/> Dưới đây liệt kê vị trí cũng những Public Key mà Open SSH sử dụng trong quá trình chứng thực:<br/> <br/> <br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>SSH Version 2 Keys Local System Default Location
Remote Host Location

Private Key
$HOME/.ssh/id_dsa


Public Key
$HOME/.ssh/id_dsa.pub
$HOME/.ssh/authorized_keys2




SSH Version 1 Key Local System Default Location Remote Host Location

Private Key
$HOME/.ssh/identity


Public Key
$HOME/.ssh/identity.pub
$HOME/.ssh/authorized_keys</pre>
		</div><br/> <br/> Dưới đây là những file quan trọng được Open SSH sử dụng để xác định những Public Key:<br/> <br/> <b>- $HOME/.ssh/known_hosts</b>: Danh sách các Public Key cho tất cả các host có user đăng nhập. Thường thì các danh sách các host Public Key được liệt kê ở <b>/etc/ssh_known_hosts</b><br/> <b>- /etc/ssh_known_hosts:</b> Chứa danh sách các RSA Generated Public Key cho tất cả các host mà hệ thống được biết. Bất cứ host nào muốn đăng nhập đến hệ thống đều phải có Public Key được liệt kê trong file này. Admin trên hệ thống của bạn cần phải liệt kê các Public Key của những người sử dụng trong hệ thống mạng đó<br/> <b>- /etc/ssh_known_hosts2:</b> Cũng như ssh_know_host nó chứa danh sách các DSA Generated Public Key cho tất cả các host mà hệ thống biết.<br/> <b>- $HOME/.ssh/config: </b>File cấu hình cho mỗi người sử dụng. Trong một số hệ thống lớn, mỗi người sử dụng sẽ có một file cấu hình đặc biệt. Nó sẽ được sử dụng bởi SSH Client.<br/> <b>- /etc/ssh/ssh_config:</b> File cấu hình cho toàn bộ hệ thống. Nó cũng có thể được sử dụng cho những người sử dụng không có File cấu hình hay tạm thời chưa có file cấu hình. Nó tự động được khởi tạo khi cài đặt Open SSH lần đầu và được gọi để sử dụng mỗi khi Open SSH daemon chạy.<br/> <b>- $HOME/.ssh/rc</b>: Liệt kê những lệnh đã được thực thi trong suốt quá trình người dùng đăng nhập, những lệnh này được thực thi trước khi shell của người dùng được mở.<br/> - /etc/sshrc: Tương tự như /.ssh/rc nó được dùng trên những hệ thống lớn.<br/> <br/> <br/> <br/> <b>SỬ DỤNG OPEN SSH ĐỂ ĐẢM BẢO AN TOÀN DỮ LIỆU TRÊN MỘT HỆ THỐNG MẠNG KHÔNG AN TOÀN</b><br/> <br/> Trước khi sử dụng Open SSH bạn phải chắc chắn rằng hệ thống cục bộ của bạn và hệ thống ở xa có cài đặt Open SSH.<br/> Lệnh ssh-keygen được sử dụng để tạo và quản lý sự chứng thực các SSH Key. Để sử dụng Open SSH trước hết bạn phải tạo các DSA hay RSA Private Key, Public Key…Tiếp đến bạn thực hiện theo các chỉ dẫn dưới đây. Bản thân tôi sử dụng hệ thống Debian Linux v 2.5.2<br/> <br/> <br/> Đầu tiên bạn hãy tạo một user trên hệ thống<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt;#: useradd binhnx2000</pre>
		</div><br/> Đừng quên thiết lập password cho user này<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt;#: passwd binhnx2000
Changing password for user binhnx2000
New UNIX password: *****
Retype new UNIX password: *****
passwd: all authentication tokens updated successfully</pre>
		</div><br/> <br/> <br/> Đăng nhập vào account binhnx2000 mà tôi vừa tạo:<br/> Bây giờ tôi sẽ tiếp tục tạo các Private Key và Public Key.<br/> <br/> <br/> Lưu ý: Từ Open SSH v 2.0 trở đi khi bạn yêu cầu tạo Key mới. Mặc định nó sẽ tạo cho bạn các Key RSA. Nếu muốn tạo Key DSA bạn phải sử dụng tuỳ chọn -d<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&lt;a href="mailto:binhnx2000@domain.com"&gt;binhnx2000@domain.com&lt;/a&gt;$: ssh-keygen -d
Generating DSA parameter and key.
Enter file in which to save the key &#40;/home/binhnx2000/.ssh/id_dsa&#41;:

Nhấn Enter nếu bạn muốn lưu Key vào thư mục mặc định của nó:
Created directory '/home/binhnx2000/.ssh'.
Enter passphrase &#40;empty for no passphrase&#41;:


Bạn nhập vào passphrase &#40;đây là password sẽ được mã hoá bằng thuật toán 3 DES để kiểm soát Private Key&#41;.</pre>
		</div><br/> Lưu ý: pasphrase không thể phục hồi. Nếu bạn quên, bạn sẽ phải tạo và phân phối lại các Key. Điều này rất phiền phức.<br/> <br/> <br/> Nhấn Enter khi mọi việc đã hoàn thành.<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>Your identification has been saved in /home/binhnx2000/.ssh/id_dsa.
Your public key has been saved in /home/binhnx2000/.ssh/id_dsa.pub.
The key fingerprint is:
ca:3b:f9:80:5a:91:e5:c1:1e:5b:30:02:2f:d5:53:13
&lt;a href="mailto:binhnx2000@domain.com"&gt;binhnx2000@domain.com&lt;/a&gt;</pre>
		</div><br/> <br/> Xem qua nội dung Private Key bạn sẽ thấy :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>-----BEGIN DSA PRIVATE KEY-----

Proc-Type: 4,ENCRYPTED

DEK-Info: DES-EDE3-CBC,D40D902FF5666C7B



DlyufhXG5shn/JblF4iY67nMAHG5AUtBvpdBZKiMnq6bKLPQ5nFmDBVxZ9jb86BT

p/XL6IoJOeyeHDf3txtCkFymujibeO203uMwQ/yvH1VrENkywj1uglAYBxF5FdPt

44Y5Mab04tQPVKLd1Jgxs/O/23bghYNJyCw9j9uP/G/6dkrYB5EAMZ/HnD6OG0/5

UPSrOTLwxfIOq7RbJGthgejosVvSFCEfNOu1OyhTF0FqM9po6uGbzVra36Lk13M+

EnNbG7Bs0Z91v9hgyb0w0TwA4jnX/uP2lUdYxuCgpRyg3jDoYZFsa37GBZm5WeOY

4TjsuSKuE4oNLnr6Kx5dcg6ZedHRx+ggaSRZ+4VTP43RgEj0CsqY9wB8kN1wXEWM

z7oj4o8EtrN4xFcT3C9Jl2sd+nJA085wFCFktdtI6zN7i6gMXMhTvTi/w/gPF+vM

4pAzP9Z5NHN5v8/UHBmkytwx4f5uofYovM8hHQzUZGs/3yEsUPBrxCQgW/MMC5jd

XyZyF0ryleid62feGNbbvgLEIZMZvNSCmJpYgD60CFskBemg/02htaIVwdlg85lW

JoZuLBBKpkRb4UXNb0IRG2NvtZKQ8h98



-----END DSA PRIVATE KEY-----



Đây là nội dung của Public Key :

ssh-dss AAAAB3NzaC1kc3MAAACBAL4qF1YLu6l/zhhmgBJfFOgAqc635u/DRes/bXiSrCbuV1
Rey5nZb2AA8rdCZzwMyMdreCD34HRCVSblirirhSZ3r9qld1fipT6NPsOr+AMct13oPirlWAF0
1euJoPYEm62+subVKWHQoNAwb7gIjNlMqNjaRuwNyBCLPwb7EcUjAAAAFQD9L07yMF
CTQ5bmP7ztr1LME/UjMQAAAIEAlyiJs4CazMnGB6mguefOZHI1BJPmPdOZeee9cvFRSQ1
nDoLK6ScxPpclQu0uwh8CEFuIjl/oMBf1rIHwONC7kxIIY6U82B3cZcBOL7SXt2wnPg8mg4I7
quG2Mq23lWsPeAH3ElfijOr15rgb4PQPV1bYoNlQPmb3zb6n4uoe3WQAAACBAKiamld09b
mHk3GCqn40u1WKtMLzpwowCtv24VZ/v4yQV4fY3CvrbgsAEnBD3mSEpOea7tSNDTxY83D
6ayJ40ZS2zN3bhBZos+Jp53tq8Eni1pSELS5wlw5NkkoY+F4lmda+sK5gTOOExI2tWyA0z5V
7hkOQuxcLbvc9GR+ywibz &lt;a href="mailto:binhnx2000@domain.com"&gt;binhnx2000@domain.com&lt;/a&gt;





Tất cả thông tin quan trọng đã được mã hoá bằng thuật toán DSA

Lưu ý: binhnx2000 Public Key có thể được phân phát tuỳ thích. Bất cứ ai, hệ thống nào muốn truyền thông một cách an toàn với binhnx2000 đều có thể nhận Public Key. Bạn có thể đổi tên của Public Key thoải mái. Cho mục đích an toàn các Security khuyên bạn lên thường xuyên đổi tên Public Key trước khi phân phát cho từng người.

SỬ DỤNG Private Key & Public Key

Sử dụng Public Key, trước hết bạn phải phân phát nó. Hay nói một cách dễ hiểu là bạn phải kích hoạt các Public Key này vào các vị trí thích hợp trên remote server. Như đã nói ở trên Public Key có thể được phân phát tuỳ thích và miễn phí. Bởi vậy bạn có thể send nó đến bất cứ hệ thống nào mà bạn muốn truyền thông bằng Open SSH.

Ví dụ như VeriSign một hãng chuyên cung cấp Digital ID để mã hoá và bảo mật các E-mail cho khách hàng. Digital ID thực chất là các Public Key được nhúng các thông tin ID cơ bản ở trong đó. VeriSign sẽ tự động gửi Public Key của người sử dụng lên Site của nó. Bất kỳ người sử dụng nào muốn truy cập Public Key của một người sử dụng khác. Họ có thể tải xuống Digital ID của người dùng từ site của VeriSign:
<span class="link"> https://digitalid.verisign.com/services/client/index.html.</span>


Đối với Private Key. Tôi sẽ Upload nó lên Web server của tôi. Các host từ xa sẽ Download Public Key xuống và tự động kích hoạt chúng.
Bạn tiếp tục thực hiện các bước sau nếu như hệ thống của bạn đã cài đặt Apache Web server:

- Tạo thư mục Public Key ở thư mục gốc của Apache:
&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt;#: mkdir /var/html/pubkeys

- Copy Binhnx2000’s Public Key vào thư mục vừa tạo và đổi tên chúng:
&lt;a href="mailto:root@domain.com"&gt;root@domain.com&lt;/a&gt;#: cp /home/binhnx2000/.ssh/id_dsa.pub var/html/pubkeys/binhnx2000.pub

- Trên hệ thống host ở xa: Bạn cần tham chiếu các thông số như trên host của bạn. Bạn đăng nhập với tư cách root và tạo tiếp một account binhnx2000:
&lt;a href="mailto:root@domain2.com"&gt;root@domain2.com&lt;/a&gt;#: useradd binhnx2000
passwd binhnx2000
Changing password for user binhnx2000
New UNIX password: *****
Retype new UNIX password: *****
passwd: all authentication tokens updated successfully

- Tiếp đến tạo một thư mục con “.ssh” trong thư mục chủ của acc binhnx2000:
&lt;a href="mailto:root@domain2.com"&gt;root@domain2.com&lt;/a&gt;#: mkdir /home/binhnx2000/.ssh

Bạn lên địa chỉ đã upload binhnx2000’s Public Key và download nó về ở:
Lưu nó vào /home/binhnx2000/.ssh = = &gt; Đây chính là Public Key của domain.com. Nó chứa các thông tin về ID được mã hoá bằng thuật toán DSA. Mọi việc đã ổn, bây giờ bạn thử ssh từ hệ thống 2 qua hệ thống 1 bằng Public Key xem sao:

&lt;a href="mailto:binhnx2000@domain2.com"&gt;binhnx2000@domain2.com&lt;/a&gt;$: ssh domain.com

Nếu mọi việc ổn định bạn có thể ssh vào hệ thống 1 từ xa qua Open SSH một cách an toàn. Tất cả các giao dịch giữa hệ thống 1 và 2 đều được nén và mã hoá nhằm đảm bảo an toàn trên đường truyền

Tuy nhiên! cuộc sống không phải lúc nào cũng tốt đẹp như chúng ta tưởng ;-&#40; Bạn sẽ gặp phải thông báo:


The authenticity of host domain.com' can't be established.
DSA key fingerprint is ca:3b:f9:80:5a:91:e5:c1:1e:5b:30:02:2f:d5:53:13.
Are you sure you want to continue connecting &#40;yes/no&#41; ?


Thông báo trên nói rằng bạn chưa thể thiết lập một kết nối an toàn từ hệ thống 2 đến hệ thống 1 bằng Open SSH. Bạn tiếp tục nhấn Yes nối như muốn tiếp tục kết nối. Sẽ có một thông báo nói rằng Public Key của hệ thống từ xa đã được thêm vào một vị trí hợp lý trên hệ thống cục bộ. Công việc cập nhật Public Key đã thành công. Lần sau bạn sẽ không phải gặp thông báo khó chịu này nữa. Bạn thử ssh đến hệ thống từ xa lại một lần nữa xem sao &#40;Sẽ không có bất cứ yêu cầu đòi hỏi password nào cả, vì nó đã sử dụng và chứng thực Public Key&#41;


/home/binhnx2000/.ssh/know_host .
Warning: Permanently added ‘domain.com,24.130.8.170'
&#40;DSA&#41; to the list of known hosts.
&#91;binhnx2000@domain.com binhnx2000&#93;$


Nếu các thông tin về Public Key không chính xác. Hay nói một cách khác là quá trình chứng thực Public Key bị thất bại. Open SSH sẽ yêu cầu bạn cung cấp password của người sử dụng binhnx2000:


&lt;a href="mailto:binhnx2000@domain.com"&gt;binhnx2000@domain.com&lt;/a&gt;'s password:


Password ở đây chính là password của account binhnx2000 được tạo trên hệ thống từ xa. Khi bạn nhập username và password tương tự như Telnet nhưng điểm khác là nó đã được mã Encrypt bởi Open SSH. Nếu bạn gặp phải yêu cầu truy vấn password, hãy xem lại quá trình cấp phát và sử dụng Public Key.



VẤN ĐỀ AN TOÀN DỮ LIỆU

Cho đến nay các RSA và DSA Key được coi là có tính an toàn và khả năng mã hoá dữ liệu khá cao &#40;Key RSA hiện đã lên đến độ dài mã hoá 256 bit&#41;. Trung tuần tháng 7 cộng đồng Security đã phát hiện được một Bug về khai thác tính dễ tổn thương của những passphrases ngắn dưới 2 ký tự. Nhưng nó đã nhanh chóng được khắc phục và tính thực dụng của Bug này cũng không cao. Open SSH vẫn được cộng đồng *nix coi là một phương tiện truyền thông có tính an toàn cao.


Lưu ý: Bài viết này chỉ mang tính chất học hỏi và trao đổi kinh nghiệm. Các bạn có thể tự do sử dụng nó, nhưng mong các bạn tôn trọng Copyright một chút. Khi cần trích dẫn ở chỗ nào trong tài liệu vui lòng ghi rõ nguồn và tên người viết…Rất cảm ơn bạn đã quan tâm đến bài viết của tôi.
&#40;Power by: binhnx2000==&#40;=========&gt; ^&#40;$&#41;^ Supporter Of VTF&#41;
&#40;E-mail: &lt;a href="mailto:binhnx2000@yahoo.com"&gt;binhnx2000@yahoo.com&lt;/a&gt; | Home:<span class="link"> http://www.vieteam.com/&#41;</span>


Tài liệu tham khảo
- Using OpenSSH to Encrypt Network Traffic between Two Hosts
- Deutsch Unix/Linux Gruppen &#40;DUG&#41;
- Information Bibliothek Frei Universität Berlin &#40;FU Berlin&#41;





Copyright © 2001 - 2003 VISC Ltd. All rights reserved.</pre>
		</div><br/> xem thêm:<br/><span class="link"> http://www.vnsecurity.net/articles/17</span><br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- quick reply -->
<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0" align="center">
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left">
			<!-- watch - unwatch -->
			<!-- add bookmark -->

		</td>
		<td align="right" valign="bottom">			
		</td>
	</tr>
</table>

<!-- mod -->

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- combo navigator -->
<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/734.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
		<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<span class="gensmall">Go to:&nbsp;</span>
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/forums/show/'+ this.options[this.selectedIndex].value +'.html'; }" name="select">
						<option value="0" selected="selected">Select a forum</option>				
							<option value="0">-------------</option>
									<option value="2" >Thông báo từ HVA</option>
									<option value="41" >FAQ - Các câu hỏi thường gặp</option>
									<option value="5" >Góp ý và Hỏi đáp thắc mắc chung</option>
									<option value="6" >Kiểm tra bảo mật</option>
							<option value="0">-------------</option>
									<option value="8" >Thảo luận bảo mật</option>
									<option value="12" >Thảo luận thâm nhập</option>
									<option value="28" >Thảo luận virus, trojan, spyware, worm...</option>
									<option value="36" >Thủ thuật reverse engineering</option>
									<option value="13" >Thông tin new bugs và exploits</option>
									<option value="51" >Case Studies</option>
							<option value="0">-------------</option>
									<option value="23" >Thảo luận hệ điều hành Windows</option>
									<option value="24" selected="selected">Thảo luận hệ điều hành *nix</option>
									<option value="26" >Thảo luận các loại thiết bị máy tính</option>
									<option value="31" >Thảo luận mạng và thiết bị mạng</option>
									<option value="27" >Thông tin về các địa chỉ và tài liệu hữu ích</option>
							<option value="0">-------------</option>
									<option value="44" >Người tìm việc - Việc tìm người</option>
									<option value="21" >Thảo luận việc định hướng</option>
									<option value="19" >Những thảo luận khác</option>
									<option value="50" >Hình minh họa</option>
									<option value="33" >Trash</option>
							<option value="0">-------------</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- list users in -->
<table class="forumline" cellspacing="3" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<th class="thright"  nowrap="nowrap" height="26" valign="middle">&nbsp;Users currently in here&nbsp;</th>
	</tr>
		<tr>
			<td class="gensmall" valign="middle" align="left">
				1 Anonymous 
				
			</td>	
		</tr>
</table>
<a name="quick"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0"  align="center">

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
</table>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/avim.js"></script>
<script type="text/javascript">
<!--
function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}




function maxImg(foto, maxSize){
w = foto.width;
if (w > maxSize){
	foto.width = maxSize;
	}
} 

-->
</script>
