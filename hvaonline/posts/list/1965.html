<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Cài đặt nhanh và cấu hình qmail + vpopmail + procmail + daemontools, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Cài đặt nhanh và cấu hình qmail + vpopmail + procmail + daemontools - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.hva?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.hva">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.hva">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.hva">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.hva">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.hva">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.hva"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.hva">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.hva">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.hva">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<!-- navigator -->
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="center">
	<tr>
		<td valign="baseline" align="left" colspan="0">
			<span class="nav">
			<a class="nav" href="/hvaonline/forums/list.hva">Forum Index </a> 
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/forums/show/24.hva">Thảo luận hệ điều hành *nix </a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/posts/list/1965.hva" name="top" id="top">Cài đặt nhanh và cấu hình qmail + vpopmail + procmail + daemontools</a>
				&nbsp;<a href="/hvaonline/rss/topicPosts/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML"></a>
			</span>
		
		</td>

		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- poll show -->

  <!-- POST LISTING -->


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#FF3333">[Article]</font></span>&nbsp;&nbsp; Cài đặt nhanh và cấu hình qmail + vpopmail + procmail + daemontools<a name="9962" id="9962"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">26/07/2006 04:57:01 (+0700) | <a href="/hvaonline/posts/list/1965.hva#9962">#1</a> | 9962 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/37c429609aa5ffe35484714281ebcb23.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/25267.hva"><b>tranvanminh</b></a><br>
	<font color="#3366CC">HVA Friend</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 04/06/2003 06:36:35<br>
		Messages: 516<br>
	
		Location: West coast<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/25267.hva" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/25267.hva" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">bmuht_gpj.76252_a9753dd0257efecf683ccbc63f641a2a/6/8/6002/daolpu/enilnoavh/052.831.141.302//:ptth<br/> <b>Cài đặt nhanh và cấu hình qmail + vpopmail+procmail +  daemontools </b><br/> <br/> Bài viết này dành cho những bạn reinstall qmail và các thiết bị quản lý qmail .<br/> thực hiện theo quá trình trong bài viết bạn có thể sử dụng được qmail , vpopmail , procmail , daemontools  nhanh chóng mà không cần phải đi kiếm link hoặc các patch và đọc documents . tuy nhiên ý nghĩa của từng chương trình và lệnh sẽ không có dính kèm giải thích nào . nếu bạn chưa cài đặt qmail lần nào xin đọc bài  viết &quot;Qmail as a Mail Gateway&quot; để biết thêm chi tiếc và cơ cấu cu. thể của qmail tại các link sau . <br/> <br/> Phần 1 :<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/119.hva</span><br/> Phần 2 :<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/120.hva</span><br/> Phần 3 :<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/121.hva</span><br/> Phần 4 :<span class="link"> http://www.hvaonline.net/hvaonline/posts/list/122.hva</span><br/> <br/> <br/> <b>1. Qmail </b><br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/qmail-1.03.tar.gz</span><br/> <b>2. Tcpserver </b><br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/ucspi-tcp-0.88.tar.gz</span><br/> <b>3. Vpopmail</b><br/><span class="link"> http://www.inter7.com/index.php?page=vpopmail</span><br/> <b>qmail-smtpd-relay-reject</b><br/><span class="link"> http://www.qmail.org/qmail-smtpd-relay-reject</span><br/> <b>4. Patch files </b><br/><span class="link"> http://www.qmail.org/rpms/</span><br/> <b>5. Procmail</b><br/><span class="link"> http://www.procmail.org/</span><br/> <b>6.  daemontools</b><br/><span class="link"> http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</span><br/> <br/> <b>Tạo các thư mục cần thiết cho qmail </b><br/> <br/> [root　]# mkdir /var/qmail<br/> [root ]# groupadd -g 710 nofiles<br/> [root ]# useradd -M -u 710 -g nofiles -s /bin/false -d /var/qmail/alias alias<br/> [root ]# useradd -M -u 711 -g nofiles -s /bin/false -d /var/qmail qmaild<br/> [root ]# useradd -M -u 712 -g nofiles -s /bin/false -d /var/qmail qmaill<br/> [roott]# useradd -M -u 713 -g nofiles -s /bin/false -d /var/qmail qmailp<br/> [root ]# groupadd -g 711 qmail<br/> [root ]# useradd -M -u 714 -g qmail -s /bin/false -d /var/qmail qmailq<br/> [root ]# useradd -M -u 715 -g qmail -s /bin/false -d /var/qmail qmailr<br/> [root ]# useradd -M -u 716 -g qmail -s /bin/false -d /var/qmail qmails<br/> <br/> <b>Vpopmail User and group </b><br/> [root ]# groupadd -g 721 vchkpw<br/> [root ]# useradd -g vchkpw -u 721 vpopmail -M -s /bin/false<br/> [root ]# mkdir /home/vpopmail<br/> [root ]# chown vpopmail:vchkpw /home/vpopmail<br/> <br/> <br/> <b>Patch and compile qmail</b><br/> [root src]# tar zxvf qmail-1.03.tar.gz<br/> [root src]# cd qmail-1.03<br/> [root src]# wget<span class="link"> http://www.qmail.org/rpms/patches/qmail-1.03.errno.patch</span><br/> [root src]# wget<span class="link"> http://www.qmail.org/qmail-smtpd-relay-reject</span><br/> [root qmail-1.03]# patch -p1 &lt; ../qmail-smtpd-relay-reject<br/> [root qmail-1.03]# patch -p1 &lt; ../qmail-1.03.errno.patch<br/> [root qmail-1.03]# make setup check<br/> [root qmail-1.03]# ./config-fast <font color='red'>mail.example.jp</font><br/> <br/> <br/> <b>Cài đặt tcpserver </b><br/> <br/> # tar xvfz ../ucspi-tcp-0.88.tar.gz<br/> # cd ucspi-tcp-0.88/<br/> #wget<span class="link"> http://www.qmail.org/rpms/patches/ucspi-tcp-0.88.errno.patch</span><br/> #patch -p1 &lt; ucspi-tcp-0.88.errno.patch<br/> patching file error.h<br/> # make setup check<br/> <br/> <br/> <b>Cài đặt vpopmail</b><br/> <br/> [root src]# tar zxvf vpopmail-5.3.20.tar.gz<br/> [root src]# cd vpopmail-5.3.20<br/> [rootvpopmail-5.3.20]#./configure \<br/> --enable-roaming-users=y \<br/> --enable-relay-clear-minutes=10 \<br/> --enable-tcpserver-file=/home/vpopmail/etc/tcp.smtp \<br/> --enable-logging=y \<br/> [root vpopmail-5.3.20]# make<br/> [root vpopmail-5.3.20]# make install-strip<br/> <br/> Khi chạy configure nếu bị <font color='red'>error  </font> <br/> <blockquote>configure: error: Unable to find your tcp.smtp file, specify --enable-tcpserver-path=/full/path/to/tcp.smtp&nbsp;
		</blockquote><br/> <br/> dùng lệnh sau để giải quyết <br/> <font color='red'># cp /etc/tcpserver/tcp.smtp /home/vpopmail/etc/</font><br/> <br/> <b>Create virtual domain for vpopmail</b><br/> <br/> [root etc]# cd /home/vpopmail/bin<br/> [root bin]# <font color='red'>./vadddomain example.jp</font><br/> Please enter password for postmaster:<br/> enter password again:<br/> <br/> your virtual domain was create into /home/vpopmail/domains/example.jp<br/> <br/> <b>Tạo default domain cho vpopmail </b><br/> # echo 'example.jp' &gt;<font color='red'> /home/vpopmail/etc/defaultdomain</font><br/> <br/> <b>Create user for vpopmail</b><br/> <br/> [root bin]# <font color='red'>./vadduser <a href="mailto:test@example.jp">test@example.jp</a></font><br/> Please enter password for <a href="mailto:test@example.jp">test@example.jp</a>:<font color='red'>*****</font><br/> enter password again:<font color='red'>******</font><br/> <br/> <b>POP before SMTP</b><br/> <br/> Create file tcp.smtp.cdb for access control <br/> <br/> # touch /home/vpopmail/etc/tcp.smtp<br/> <br/> File : /home/vpopmail/etc/tcp.smtp<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>127.:allow,RELAYCLIENT=&quot;&quot;</pre>
		</div><br/> <br/> [root etc]# tcprules /home/vpopmail/etc/tcp.smtp.cdb <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>/home/vpopmail/etc/tcp.smtp.tmp &lt; /home/vpopmail/etc/tcp.smtp</pre>
		</div><br/> <br/> [root etc]# crontab -e　 <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>0,10,20,30,40,50 * * * * /home/vpopmail/bin/clearopensmtp 2&gt;&1 &gt; /dev/null</pre>
		</div><br/> <br/> <br/> <b>Cài đặt Daemontools </b><br/> <br/> # mkdir -p /package<br/> # chmod 755 /package<br/> # chmod +t /package<br/> <br/> # cd /package<br/> # wget<span class="link"> http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</span><br/> # tar xvpfz  daemontools-0.76.tar.gz<br/> # cd daemontools-0.76/src<br/> # wget<span class="link"> http://www.qmail.org/rpms/patches/daemontools-0.76.errno.patch</span><br/> # patch -p1 &lt; daemontools-0.76.errno.patch<br/>   (error.h)<br/> # cd admin/daemontools-0.76<br/> # ./package/install<br/> <br/> <blockquote>Creating /service...<br/> Adding svscanboot to inittab...<br/> init should start svscan now.&nbsp;
		</blockquote><br/> <br/> chương trình sẽ tự động thêm dòng sau vào /etc/initab để khi khởi động linux svscan có thể tự động chạy .<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>SV:123456:respawn:/usr/local/bin/svscanboot</pre>
		</div><br/> <br/> <br/> <b>Tạo directory cho svscan </b><br/> <br/> # mkdir -p /var/service<br/> # chmod 0755 /var/service<br/> <br/> File : <b>/usr/local/bin/svscanboot</b> ( không cần thay đổi các dấu <font color='red'>.......</font>)<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
# WARNING: This file was auto-generated. Do not edit!

PATH=:/usr/local/bin:/usr/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/X11R6/bin

exec &lt;/dev/null
exec &gt;/dev/null
exec 2&gt;/dev/null

svc -dx /var/service/* /var/service/*/log

env - PATH=$PATH svscan /var/service 2&gt;&1 | \
env - PATH=$PATH readproctitle service errors: .........................&#40;kéo dài &#41;</pre>
		</div><br/> <br/> <br/> <b>Cấu hình cho daemontools</b> : setup chương trình cho deamontơols giám sát<br/> <br/> mkdir -p /var/qmail/supervise/<font color='red'>qmail</font><br/> mkdir /var/qmail/supervise/<font color='red'>pop3d</font><br/> mkdir /var/qmail/supervise/<font color='red'>smtpd</font><br/> chmod +t /var/qmail/supervise/<font color='red'>qmail</font><br/> chmod +t /var/qmail/supervise/<font color='red'>pop3d</font><br/> chmod +t /var/qmail/supervise/<font color='red'>smtpd</font><br/> <br/> File : <b>/var/qmail/supervise/qmail/run</b><br/> # cp /usr/local/src/qmail-1.03/home /var/qmail/supervise/qmail/run<br/> <br/> Chuyển file rc của qmail từ <font color='red'>./Mailbox t</font>hành <font color='red'>./Maildir/</font> (/var/qmail/rc)<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh

# Using splogger to send the log through syslog.
# Using qmail-local to deliver messages to ~/Mailbox by default.

exec env - PATH=&quot;/var/qmail/bin:$PATH&quot; \
qmail-start ./Maildir/ splogger qmail</pre>
		</div><br/> <br/> File : <b>/var/qmail/supervise/smtpd/run</b><br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/bash
#
# smtpd/run : qmail-smtpd starting script
#
exec env - PATH=&quot;/var/qmail/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot; \
/usr/local/bin/tcpserver -v -x /home/vpopmail/etc/tcp.smtp.cdb -R -H -l0 -u `id -u qmaild` -g `id -g qmaild` 0 smtp \
/var/qmail/bin/qmail-smtpd 2&gt;&1</pre>
		</div><br/> <br/> Tạo quyền thi hành cho file run <br/> # chmod +x /var/qmail/supervise/smtpd/run<br/> <br/> file : <b>/var/qmail/supervise/pop3d/run</b><br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/bash
#
# pop3d/run : qmail-pop3d starting script
#
exec env - PATH=&quot;/var/qmail/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot; \
tcpserver -v -x /etc/tcpserver/tcp.pop3.cdb -R -H 0 pop3 qmail-popup mail.example.jp \
/home/vpopmail/bin/vchkpw \
qmail-pop3d Maildir 2&gt;&1</pre>
		</div><br/> <br/> Tạo quyền thi hành cho file run <br/> # chmod +x /var/qmail/supervise/pop3d/run<br/> <br/> Tạo symlink<br/> # ln -s /var/qmail/supervise/qmail /var/service/qmail<br/> # ln -s /var/qmail/supervise/smtpd /var/service/smtpd<br/> # ln -s /var/qmail/supervise/pop3d /var/service/pop3d<br/> <br/> Khỏi động lại init để enable svscan bằng lệnh sau <br/> # kill -HUP 1<br/> <br/> Kiểm tra các service có hoạt động hay không <br/> <font color='red'># svstat /var/service/*</font><br/> /var/service/pop3d: up (pid 5021) <font color='red'>4 seconds</font><br/> /var/service/qmail: up (pid 5022) <font color='red'>4 seconds</font><br/> /var/service/smtpd: up (pid 5023) <font color='red'>4 seconds</font><br/> <br/> <font color='red'>*</font> up seconds chỉ  báo <font color='red'>0 </font>hay <font color='red'>1</font> thì check lại permission của run scripts  hoặc syntax của chúng . <br/> <br/> <b>Qmail configuration </b><br/> /var/qmail/control/locals<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>localhost　　　　　　　　　　&#40;add&#41;
mail.example.jp
example.jp　　　　　　　　　&#40;add&#41;</pre>
		</div><br/> <br/> /var/qmail/control/rcpthosts<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>localhost　　　　　　　　　　&#40;add&#41;
mail.example.jp
example.jp　　　　　　　　　&#40;add&#41;</pre>
		</div><br/> <br/> <br/> <b>Start up scirpt cho qmail</b><br/> <br/> <blockquote>#!/bin/sh<br/> <br/> [ -f /var/qmail/rc ] || exit 0<br/> PATH=$PATH:/var/qmail/bin:/usr/local/bin<br/> <br/> case &quot;$1&quot; in<br/>     start)<br/>         echo -n &quot;Starting... qmail&quot;<br/>         csh -cf '/var/qmail/rc &'<br/> <br/> ################ SMTP #####################<br/> <br/>         /usr/local/bin/tcpserver -H -R -l <font color='red'>mail.example.jp</font> -v \<br/>         -x /home/vpopmail/etc/tcp.smtp.cdb -u 711 -g 710 0 smtp \<br/>         /var/qmail/bin/qmail-smtpd 2&gt;&1 | /var/qmail/bin/splogger smtpd 2 &<br/> <br/> ################ POP #####################<br/> <br/>         /usr/local/bin/tcpserver -H -R -l <font color='red'>mail.example.jp</font> -v 0 pop3 \<br/>         /var/qmail/bin/qmail-popup <font color='red'>mail.example.jp </font>/home/vpopmail/bin/vchkpw \<br/>         /var/qmail/bin/qmail-pop3d Maildir 2&gt;&1 | /var/qmail/bin/splogger pop3d 2 &<br/> <br/>         touch /var/lock/qmail<br/>         ;;<br/>     stop)<br/>         echo &quot;Shutting down qmail.&quot;<br/>         PID=`/bin/ps -aefw | grep qmail | awk '{print $2}'`<br/>         if [ ! -z &quot;$PID&quot; ] ; then<br/>             /bin/kill ${PID} 1&gt; /dev/null 2&gt;&1<br/>         fi<br/>         rm -f /var/lock/qmail<br/>         ;;<br/>     *)<br/>         echo &quot;Usage: &quot;$0&quot; {start|stop}&quot;<br/>         exit 1<br/> esac<br/> exit 0&nbsp;
		</blockquote><br/> <br/> [root init.d]# chmod +x qmail<br/> [root init.d]# cd ../rc3.d/<br/> [root rc3.d]# ln -s ../init.d/qmail S84qmail<br/> <br/> <i>Check process tree </i><br/> <br/> <blockquote><br/> <u><b>pstree -ah</b></u><br/> <br/>   |-svscanboot /usr/local/bin/svscanboot<br/>   |   |-readproctitle service errors: ...<br/>   |   `-svscan /var/service<br/>   |       |-supervise qmail <br/>   |       |   `-qmail-send<br/>   |       |       |-qmail-clean<br/>   |       |       |-qmail-lspawn ./Maildir/<br/>   |       |       |-qmail-rspawn<br/>   |       |       `-splogger qmail<br/>   |       |-supervise smtpd<br/>   |       |   `-tcpserver -v -x /home/vpopmail/etc/tcp.smtp.cdb -R -H -l0 -u ...&nbsp;
		</blockquote><br/> <br/> <b>Remove sendmail </b><br/> <br/> [root root]# rm /usr/lib/sendmail<br/> [root root]# rm /usr/sbin/sendmail<br/> [root root]# ln -s /var/qmail/bin/sendmail /usr/sbin/sendmail<br/> [root root]# ln -s /var/qmail/bin/sendmail /usr/lib/sendmail<br/> <br/> <b>Install procmail</b><br/> <br/> # cd /usr/local/src<br/> # tar xfvz procmail-3.21.tar.gz<br/> # cd procmail-3.21<br/> # make<br/> # make install<br/> # make install-suid<br/> <br/> Tạo file .qmail vào <i>~vpopmail/domains/example.jp/777/.qmail</i> với nội dung sau <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>| /usr/bin/procmail -m ./.procmailrc</pre>
		</div><br/> <br/> chú ý khi thêm vào không được thêm <font color='red'>space</font> vào trước dấu <font color='red'>|</font>  . <br/> <br/> <br/> Tại file .procmailrc vào <i>~vpopmail/domains/example.jp/777/.procmailrc</i> với nội dung sau <br/> <br/> <blockquote>PATH=/usr/bin:/bin:/usr/local/bin<br/> HOME=/var/vpopmail/domains/<font color='red'>example.jp</font>/777<br/> MAILDIR=$HOME/Maildir<br/> DEFAULT=$HOME/Maildir/<br/> LOGFILE=$MAILDIR/procmail.log<br/> LOCKFILE=$MAILDIR/procmail.lock<br/> <br/> &nbsp;
		</blockquote><br/> <br/> =================================<br/> <br/> <font color='green'>06/07/25</font> :<br/> Thêm bước patch error cho qmail <br/> Thêm bước  patch cho tcpserver (ucspi-tcp-0.88.errno.patch )<br/> <br/> <font color='green'>06/07/27</font> :<br/> Chỉnh sửa và thêm chi tiếc cấu hình daemontools<br/> Sửa đổi start up script cho qmail <br/> <br/> Tác giả : 777<br/> Nguồn  : www.vnhacker.org<br/> <br/> <br/> </span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- quick reply -->
<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0" align="center">
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left">
			<!-- watch - unwatch -->
			<!-- add bookmark -->

		</td>
		<td align="right" valign="bottom">			
		</td>
	</tr>
</table>

<!-- mod -->

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- combo navigator -->
<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/1965.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
		<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<span class="gensmall">Go to:&nbsp;</span>
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/forums/show/'+ this.options[this.selectedIndex].value +'.hva'; }" name="select">
						<option value="0" selected="selected">Select a forum</option>				
							<option value="0">-------------</option>
									<option value="2" >Thông báo từ HVA</option>
									<option value="41" >FAQ - Các câu hỏi thường gặp</option>
									<option value="5" >Góp ý và Hỏi đáp thắc mắc chung</option>
									<option value="6" >Kiểm tra bảo mật</option>
							<option value="0">-------------</option>
									<option value="8" >Thảo luận bảo mật</option>
									<option value="12" >Thảo luận thâm nhập</option>
									<option value="28" >Thảo luận virus, trojan, spyware, worm...</option>
									<option value="36" >Thủ thuật reverse engineering</option>
									<option value="13" >Thông tin new bugs và exploits</option>
									<option value="51" >Case Studies</option>
							<option value="0">-------------</option>
									<option value="23" >Thảo luận hệ điều hành Windows</option>
									<option value="24" selected="selected">Thảo luận hệ điều hành *nix</option>
									<option value="26" >Thảo luận các loại thiết bị máy tính</option>
									<option value="31" >Thảo luận mạng và thiết bị mạng</option>
									<option value="27" >Thông tin về các địa chỉ và tài liệu hữu ích</option>
							<option value="0">-------------</option>
									<option value="44" >Người tìm việc - Việc tìm người</option>
									<option value="21" >Thảo luận việc định hướng</option>
									<option value="19" >Những thảo luận khác</option>
									<option value="50" >Hình minh họa</option>
									<option value="33" >Trash</option>
							<option value="0">-------------</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- list users in -->
<table class="forumline" cellspacing="3" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<th class="thright"  nowrap="nowrap" height="26" valign="middle">&nbsp;Users currently in here&nbsp;</th>
	</tr>
		<tr>
			<td class="gensmall" valign="middle" align="left">
				1 Anonymous 
				
			</td>	
		</tr>
</table>
<a name="quick"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0"  align="center">

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
</table>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/avim.js"></script>
<script type="text/javascript">
<!--
function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.hva', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}




function maxImg(foto, maxSize){
w = foto.width;
if (w > maxSize){
	foto.width = maxSize;
	}
} 

-->
</script>
