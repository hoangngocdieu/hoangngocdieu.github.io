<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="tcpserver úcpi, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>tcpserver úcpi - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.hva?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.hva">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.hva">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.hva">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.hva">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.hva">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.hva"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.hva">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.hva">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.hva">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<!-- navigator -->
<table cellspacing="2" cellpadding="2" width="100%" border="0" align="center">
	<tr>
		<td valign="baseline" align="left" colspan="0">
			<span class="nav">
			<a class="nav" href="/hvaonline/forums/list.hva">Forum Index </a> 
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/forums/show/24.hva">Thảo luận hệ điều hành *nix </a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"> <a class="nav" href="/hvaonline/posts/list/14145.hva" name="top" id="top">tcpserver úcpi</a>
				&nbsp;<a href="/hvaonline/rss/topicPosts/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML"></a>
			</span>
		
		</td>

		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- poll show -->

  <!-- POST LISTING -->


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; tcpserver úcpi<a name="84578" id="84578"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">12/09/2007 06:00:04 (+0700) | <a href="/hvaonline/posts/list/14145.hva#84578">#1</a> | 84578 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/47abd3082bbb189aeab1014b324741b7.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/127930.hva"><b>PureMoon</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 21/07/2006 12:16:07<br>
		Messages: 41<br>
	
		Location: FullMoon<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/127930.hva" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/127930.hva" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
			<a href="http://edit.yahoo.com/config/send_webmesg?.target=roboconhn&amp;.src=pg"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_yim.gif" alt="[Yahoo!]" title="[YIM]"></a>
		
			<a href="/hvaonline/user/profile/127930.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_msnm.gif" alt="[MSN]" title="[MSN]"></a>
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">Chào mọi người<br/> <br/> Mình setup 1 qmail server , đến đoạn setup tcpserver<br/> <br/> Cài đặt tcpserver<br/> # tar xvfz ../ucspi-tcp-0.88.tar.gz<br/> # cd ucspi-tcp-0.88/<br/> #wget<span class="link"> http://www.qmail.org/rpms/patches/ucspi-tcp-0.88.errno.patch</span><br/> #patch -p1 &lt; ucspi-tcp-0.88.errno.patch<br/> patching file error.h<br/> # make setup check <br/> <br/> Sau khi setup xong thì phải cấu hình /etc/tcp.smtp và /etc/tcp.pop3 .<br/> <br/> 2 File này không có trong /etc . Mình lên Google tìm được 2 file mẫu:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#------------------------------------------------------
# DESCRIPTION OF THE RULES TO REMIND ME OF HOW THIS FILE WORKS
#
# If you set 'allow', this means that our mail server will allow
# the specified IP range to make a TCP connection to our server
#
# If you set 'deny', this means that our mail server will not allow
# the specified IP range to make a TCP connection to our server
#
# If you set RELAYCLIENT="", this means that the listed IP range is 
# allowed to relay mail through our server
#
# If you dont set RELAYCLIENT="", this means that the listed IP range
# will not be able to relay mail through our server
#
# If you set RBLSMTPD="", this means that the listed IP ranges will
# not be checked against any of the RBL databases
#
# If you set RBLSMTPD="some text here", this means that an RBL lookup
# wont be performed, but the mail will be rejected with the specified
# text as a 4xx temp error message
#
# If you set RBLSMTPD="-some text here", this means that an RBL lookup
# wont be performed, but the mail will be rejected with the specified
# text as a 5xx perm error message
#
# If you do not set RBLSMTPD="" or ="some text", then an RBL lookup
# will be performed. If the lookup is successful, then RBLSMTPD will
# return your custom error message &#40;as specified in the -r parameter
# in smtpd supervise script&#41;
#
#-----------------------------------------------------
# HERE ARE THE RULES! :
#-----------------------------------------------------
# BYPASS OPEN RELAY CHECKING FOR THESE IPS :
#
# These IPs are ones that we have setup so that they arent RBL checked.
# We have done this because these particular servers are RBL listed,
# and for whatever reason they can't/won't fix their open relay problem,
# and we still want to be able to receive mail from them.
# 
# reminder text goes here for this entry so we know the story...
111.111.111.111:allow,RBLSMTPD=""
# reminder text goes here for this entry so we know the story...
222.222.222.222:allow,RBLSMTPD=""
#
#-----------------------------------------------------------------
# DONT ALLOW THESE IPS TO SEND MAIL TO US :
#
# mailXX.offermail.net connecting regularly and sending invalid
# format messages causing exit with status 256 &#40;bare linefeed normally&#41;
# entry added 15/12/2001
# after looking at the mail coming from these servers it was found to be spam
216.242.75.100-116:allow,RBLSMTPD="-Connections from this IP have been banned."
#
# heaps of spam from replyto of *@freeamateurhotties.com dec2001
64.228.127.:allow,RBLSMTPD="-Connections refused due to spam from freeamateurhotties.com"
154.20.94.:allow,RBLSMTPD="-Connections refused due to spam from freeamateurhotties.com"
209.151.132.:allow,RBLSMTPD="-Connections refused due to spam from freeamateurhotties.com"
216.18.85.:allow,RBLSMTPD="-Connections refused due to spam from freeamateurhotties.com"
#
#-----------------------------------------------------------------
# ALLOW THESE IPS TO RELAY MAIL THROUGH OUR SERVER
#
# Local class-c's from our LAN are allowed to relay,
# and we wont bother doing any RBL checking.
123.123.123.:allow,RELAYCLIENT="",RBLSMTPD=""
123.111.111.:allow,RELAYCLIENT="",RBLSMTPD=""
#
# Connections from localhost are allowed to relay 
# &#40;because the WebMail server runs on localhost&#41;,
# and obviously there is no point trying to perform an RBL check.
127.0.0.1:allow,RELAYCLIENT="",RBLSMTPD=""
#
#-----------------------------------------------------------------
# ALLOW EVERYONE ELSE TO SEND US MAIL
#
# Everyone else can make connections to our server,
# but not allowed to relay
# RBL lookups are performed
:allow</pre>
		</div><br/> <br/> và tcp.pop3:<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre># Allow any client to connect to us via POP3
# If people are abusing POP3 such as denial-of-service on POP3, 
# you can add their ips here to block them out
:allow</pre>
		</div><br/> <br/> Các bạn cho mình hỏi 2 file cấu hình trên có đúng không ?<br/> <br/> Bước tiếp theo phải làm gì ? ( Thấy nó bảo dùng cái scripts : qmailctl để tạo file cdb nhưng mình ko tìm thấy ở đâu )<br/> <br/> Theo bài của anh conmale:<br/> <br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>exec /usr/local/bin/softlimit -m 32000000 \
/usr/local/bin/tcpserver -v -H -R -l 0 -P -x /etc/tcp.smtp.cdb -c "$MAXSMTPD" \
-u "$QMAILDUID" -g "$NOFILESGID" 0 25 /usr/local/bin/rblsmtpd -b -r sbl-xbl.spamhaus.org -b -r dnsbl.njabl.org /var/qmail/bin/qmail-smtpd &gt;&gt; /var/log/qmail/rblsmtpd.log 2&gt;&1</pre>
		</div><br/> <br/> Có phải chống spam thực hiện ở trên TCP server ucspi ? Và đoạn script của anh có phải là qmailctl mà em đang tìm ?<br/> <br/> Cảm ơn mọi người quan tâm trả lời</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; tcpserver úcpi<a name="84678" id="84678"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">12/09/2007 21:26:00 (+0700) | <a href="/hvaonline/posts/list/14145.hva#84678">#2</a> | 84678 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/089f41810321eefc3f4eef5d4a388e42.png" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/67588.hva"><b>conmale</b></a><br>
	<font color="#FF3333">Administrator</font></span>
<br>

<span class="uprofile">
		
</span>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 07/05/2004 23:43:15<br>
		Messages: 9353<br>
	
		Location: down under<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/67588.hva" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/67588.hva" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
		
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row2">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row2"><span class="postbody"><p></p>
		<cite class="blockquote">PureMoon wrote:</cite><br>
		<blockquote>...<br/> <br/> Các bạn cho mình hỏi 2 file cấu hình trên có đúng không ?<br/> &nbsp;
		</blockquote><br/> Đúng nhưng phải chỉnh lại cho phù hợp với cấu hình và mô hình mạng cụ thể của mình. Để chỉnh lại, cần phải hiểu cấu trúc và cú pháp của smtprule. Đọc thêm ở đây:<span class="link"> http://cr.yp.to/ucspi-tcp/tcprules.html</span><br/> <br/> <p></p>
		<cite class="blockquote">PureMoon wrote:</cite><br>
		<blockquote><br/> Bước tiếp theo phải làm gì ? ( Thấy nó bảo dùng cái scripts : qmailctl để tạo file cdb nhưng mình ko tìm thấy ở đâu )<br/> &nbsp;
		</blockquote><br/> Em làm được tới đây dựa vào tài liệu nào thế?<br/> <br/> <p></p>
		<cite class="blockquote">PureMoon wrote:</cite><br>
		<blockquote><br/> Theo bài của anh conmale:<br/> <br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>exec /usr/local/bin/softlimit -m 32000000 \
/usr/local/bin/tcpserver -v -H -R -l 0 -P -x /etc/tcp.smtp.cdb -c "$MAXSMTPD" \
-u "$QMAILDUID" -g "$NOFILESGID" 0 25 /usr/local/bin/rblsmtpd -b -r sbl-xbl.spamhaus.org -b -r dnsbl.njabl.org /var/qmail/bin/qmail-smtpd &gt;&gt; /var/log/qmail/rblsmtpd.log 2&gt;&1</pre>
		</div><br/> <br/> Có phải chống spam thực hiện ở trên TCP server ucspi ? Và đoạn script của anh có phải là qmailctl mà em đang tìm ?<br/> <br/> Cảm ơn mọi người quan tâm trả lời&nbsp;
		</blockquote><br/> - không, đoạn trên chỉ là 1 script có tên là <b>run</b>, được qmail-smtp dùng.<br/> <br/> - qmailctl đại khái là một run level script có dạng như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
# This bootscript for qmail is only used with daemontools installed
# it won't run at all
# chkconfig: 2345 80 30
# description: qmail as MTA

PATH=/var/qmail/bin:/usr/local/bin:/usr/bin:/bin
export PATH

case "$1" in
start&#41;
    echo "Starting qmail"
    if svok /service/qmail-send ; then
      svc -u /service/qmail-send /service/qmail-send/log
    else
      echo "qmail-send supervise not running"
    fi
    if svok /service/qmail-smtpd ; then
      svc -u /service/qmail-smtpd /service/qmail-smtpd/log
    else
      echo "qmail-smtpd supervise not running"
    fi
    if &#91; -d /var/lock/subsys &#93;; then
      touch /var/lock/subsys/qmail
    fi
    ;;
  stop&#41;
    echo "Stopping qmail..."
    echo "  qmail-smtpd"
    svc -d /service/qmail-smtpd /service/qmail-smtpd/log
    echo "  qmail-send"
    svc -d /service/qmail-send /service/qmail-send/log
    if &#91; -f /var/lock/subsys/qmail &#93;; then
      rm /var/lock/subsys/qmail
    fi
    ;;
  stat&#41;
    svstat /service/qmail-send
    svstat /service/qmail-send/log
    svstat /service/qmail-smtpd
    svstat /service/qmail-smtpd/log
    qmail-qstat
    ;;
  doqueue|alrm|flush&#41;
    echo "Flushing timeout table and sending ALRM signal to qmail-send."
    /var/qmail/bin/qmail-tcpok
    svc -a /service/qmail-send
    ;;
  queue&#41;
    qmail-qstat
    qmail-qread
    ;;
  reload|hup&#41;
    echo "Sending HUP signal to qmail-send."
    svc -h /service/qmail-send
    ;;
  pause&#41;
    echo "Pausing qmail-send"
    svc -p /service/qmail-send
    echo "Pausing qmail-smtpd"
    svc -p /service/qmail-smtpd
    ;;
  cont&#41;
    echo "Continuing qmail-send"
    svc -c /service/qmail-send
    echo "Continuing qmail-smtpd"
    svc -c /service/qmail-smtpd
    ;;
  restart&#41;
    echo "Restarting qmail:"
    echo "* Stopping qmail-smtpd."
    svc -d /service/qmail-smtpd /service/qmail-smtpd/log
    echo "* Sending qmail-send SIGTERM and restarting."
    svc -t /service/qmail-send /service/qmail-send/log
    echo "* Restarting qmail-smtpd."
    svc -u /service/qmail-smtpd /service/qmail-smtpd/log
    ;;
  cdb&#41;
    echo "Don't forget to modify the /etc/smtprules/qmail-rules.txt first or it will use the old cdb"
    cat /etc/smtprules/qmail-rules.txt | tcprules /etc/tcp.smtp.cdb /tmp/tcp.smtp.tmp
    chmod 644 /etc/tcp.smtp*
    echo "Reloaded /etc/tcp.smtp.cdb"
    ;;
  help&#41;
    cat &lt;&lt;HELP
   stop -- stops mail service &#40;smtp connections refused, nothing goes out&#41;
  start -- starts mail service &#40;smtp connection accepted, mail can go out&#41;
  pause -- temporarily stops mail service &#40;connections accepted, nothing leaves&#41;
   cont -- continues paused mail service
   stat -- displays status of mail service
    cdb -- rebuild the tcpserver cdb file for smtp
restart -- stops and restarts smtp, sends qmail-send a TERM & restarts it
doqueue -- sends qmail-send ALRM, scheduling queued messages for delivery
 reload -- sends qmail-send HUP, rereading locals and virtualdomains
  queue -- shows status of queue
   alrm -- same as doqueue
    hup -- same as reload
HELP
    ;;
  *&#41;
    echo "Usage: $0 {start|stop|restart|doqueue|reload|stat|pause|cont|cdb|queue|help}"
    exit 1
    ;;
esac

exit 0</pre>
		</div><br/> <br/> - việc chống spam thực hiện xuyên qua <b>rblsmtpd</b>, một chương trình đi theo qmail. tcpserver chỉ "pass" việc kiểm tra spam (xuyên qua cơ chế RBL [realtime blacklist]) đến <b>rblsmtpd</b> chớ chính nó không làm việc này.<br/> <br/> Thân mến.</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>

		  <tr>
			<td height="20" colspan="2" valign="bottom" class="rowButton"><span class="gensmall">What bringing us together is stronger than what pulling us apart.</span></td>
		  </tr>

			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		


<table cellspacing="0" cellpadding="0" width="100%" align="center" border="1">
	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr>

		

		<th nowrap="nowrap" class="thright" height="20" valign="middle" align="left">&nbsp;&nbsp;<span class="posttype"><font color="#777777">[Question]</font></span>&nbsp;&nbsp; Re: tcpserver úcpi<a name="84790" id="84790"></a></th>
        <th class="thleft" nowrap="nowrap" width="300" height="20" valign="middle" align="right">13/09/2007 12:20:52 (+0700) | <a href="/hvaonline/posts/list/14145.hva#84790">#3</a> | 84790 </th>
		
      </tr>
	</table>

	<table cellspacing="0" cellpadding="3" width="100%" align="center" border="0">
      <tr> 
		<!-- Username & profile -->
          	<td class="rowButton" valign="top">
<table cellspacing="3" cellpadding="3" width="100%" align="left" border="0">
<tr>
<td width="20">
		<img src="http://www.hvaonline.net/hvaonline/images/avatar/47abd3082bbb189aeab1014b324741b7.jpg" border="0" alt="[Avatar]" title="[Avatar]"><br>
	</td>

<td align="left">
<span class="uprofile"><a href="/hvaonline/user/profile/127930.hva"><b>PureMoon</b></a><br>
	<font color="#CCCCCC">Member</font></span>
<br>

<span class="uprofile">
		
</span>
	<table cellspacing="0" cellpadding="0" border="0" width="20" height="8">
		<tr>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/minus.gif" alt="[Minus]" title="[Minus]"></a>	</td>
			<td height="4" width="16">
				<span class="warn">&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;</span>	</td>
			<td>
				<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/plus.gif" alt="[Plus]" title="[Plus]"></a>
			</td>
		</tr>
	</table>

<!-- --></td>
	<td align="left" class="gen" width="180">
		Joined: 21/07/2006 12:16:07<br>
		Messages: 41<br>
	
		Location: FullMoon<br>
	
	
			<span class="offline">Offline </span>
	<br>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
  <tr>
	<td valign="middle" nowrap="nowrap"> 
		<a href="/hvaonline/user/profile/127930.hva" class="icon_profile"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_profile.gif" alt="[Profile]" title="[Profile]"></a>
		<a href="/hvaonline/pm/sendTo/127930.hva" class="icon_pm"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_pm.gif" alt="[PM]" title="[PM]"></a>

		
		
			<a href="http://edit.yahoo.com/config/send_webmesg?.target=roboconhn&amp;.src=pg"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_yim.gif" alt="[Yahoo!]" title="[YIM]"></a>
		
			<a href="/hvaonline/user/profile/127930.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_msnm.gif" alt="[MSN]" title="[MSN]"></a>
		
	</td>
</tr>
  <tr>
    <td valign="middle" nowrap="nowrap">
	
</td>
  </tr>
</table>
	</td>
</tr>
</table>
</td>
      </tr>
	</table>
	
	<table cellspacing="1" cellpadding="3" width="100%" align="center" border="0">
      <tr>
        <!-- Message -->
        <td colspan="2" valign="top" class="row1">
				<!-- should view editeBy or not -->
			  <!-- which to view -->
                <table cellspacing="3" cellpadding="3" width="100%" align="center" border="0">
                  <tr>
                    <td valign="top" class="row1"><span class="postbody">Cảm ơn anh conmale đã quan tâm trả lời <br/> <br/> Về phần smtprule em đã hiểu và làm được. Cấu trúc và cú pháp không phức tạp lắm .<br/> <br/> <blockquote> Em làm được tới đây dựa vào tài liệu nào thế? &nbsp;
		</blockquote><br/> <br/> Em dựa vào 6 bài viết của anh tranvanminh trong mục các bài có giá trị và tài liệu ở 2 site này :<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>http://www.lifewithqmail.org/lwq.html#start-qmail</pre>
		</div><br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>http://www.bowe.id.au/michael/isp/webmail-server.htm#QMAIL</pre>
		</div><br/> <br/> Em đã làm theo như hướng dẫn .<br/> <br/> Cấu trúc thư mục :<br/> <br/> /var/qmail/supervise/qmail-send/log<br/> /var/qmail/supervise/qmail-smtpd/log<br/> /var/qmail/supervise/qmail-pop3d<br/> <br/> /var/log/qmail/pop3d<br/> /var/log/qmail/smtpd<br/> <br/> Thư mục /var/qmail/control<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux control&#93;# ls -la
total 56
drwxr-xr-x    2 root     qmail        4096 Sep 11 00:57 .
drwxr-xr-x   14 root     qmail        4096 Sep 10 21:56 ..
-rw-r--r--    1 root     root           11 Sep 10 16:40 bouncefrom
-rw-r--r--    1 root     root            3 Sep 10 21:58 concurrencyincoming
-rw-r--r--    1 root     root            9 Sep 10 19:54 databytes
-rw-r--r--    1 root     root           11 Sep 10 16:42 defaultdelivery
-rw-r--r--    1 root     root           10 Sep  9 23:00 defaultdomain
-rw-r--r--    1 root     root           10 Sep 10 16:40 doublebouncehost
-rw-r--r--    1 root     root           13 Sep 10 16:40 doublebounceto
-rw-r--r--    1 root     root           20 Sep  9 23:01 locals
-rw-r--r--    1 root     root           48 Sep 11 00:57 me
-rw-r--r--    1 root     root           10 Sep  9 23:00 plusdomain
-rw-r--r--    1 root     root            7 Sep 10 19:54 queuelifetime
-rw-r--r--    1 root     root           20 Sep  9 23:01 rcpthosts</pre>
		</div><br/> <br/> Em sử dụng deamontool để quản lý qmail .<br/> <br/> Các run scripts :<br/> <br/> thư mục supervise :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux supervise&#93;# ls -la
total 20
drwxr-xr-x    5 root     root         4096 Sep 10 20:55 .
drwxr-xr-x   14 root     qmail        4096 Sep 10 21:56 ..
drwxr-xr-t    4 root     root         4096 Sep 10 21:45 qmail-pop3d
drwxr-xr-t    4 root     root         4096 Sep 10 21:49 qmail-send
drwxr-xr-t    4 root     root         4096 Sep 11 00:58 qmail-smtpd</pre>
		</div><br/> <br/> Các run scripts của em :<br/> <br/> /var/qmail/supervise/qmail-pop3d/run<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
exec /usr/local/bin/softlimit -m 2000000 \
    /usr/local/bin/tcpserver -v -R -H -l 0 0 110 /var/qmail/bin/qmail-popup \
        mydomain.local /bin/checkpassword /var/qmail/bin/qmail-pop3d Maildir 2&gt;&1</pre>
		</div><br/> <br/> /var/qmail/supervise/qmail-pop3d/log/run<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t \
    /var/log/qmail/pop3d</pre>
		</div><br/> <br/> /var/qmail/supervise/qmail-send<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
exec /var/qmail/rc</pre>
		</div><br/> <br/> /var/qmail/supervise/qmail-send/log/run<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t s5000000000 /var/log/qmail</pre>
		</div><br/> <br/> /var/qmail/supervise/qmail-smtpd/run<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh

QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`
MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`
LOCAL=`head -1 /var/qmail/control/me`

if &#91; -z "$QMAILDUID" -o -z "$NOFILESGID" -o -z "$MAXSMTPD" -o -z "$LOCAL" &#93;; then
    echo QMAILDUID, NOFILESGID, MAXSMTPD, or LOCAL is unset in
    echo /var/qmail/supervise/qmail-smtpd/run
    exit 1
fi

if &#91; ! -f /var/qmail/control/rcpthosts &#93;; then
    echo "No /var/qmail/control/rcpthosts!"
    echo "Refusing to start SMTP listener because it'll create an open relay"
    exit 1
fi

exec /usr/local/bin/softlimit -m 2000000 \
    /usr/local/bin/tcpserver -v -R -l "$LOCAL" -x /etc/tcp.smtp.cdb -c "$MAXSMTPD" \
        -u "$QMAILDUID" -g "$NOFILESGID" 0 smtp /var/qmail/bin/qmail-smtpd 2&gt;&1</pre>
		</div><br/> <br/> /var/qmail/supervise/qmail-smtpd/log/run<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
/usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail/smtpd</pre>
		</div><br/> <br/> <br/> Và file rc :<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh

# Using stdout for logging
# Using control/defaultdelivery from qmail-local to deliver messages by default

exec env - PATH="/var/qmail/bin:$PATH" \
qmail-start "`cat /var/qmail/control/defaultdelivery`"</pre>
		</div><br/> <br/> defaultdelivery của em là ./Maildir/<br/> <br/> file qmailctl<br/> <br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>#!/bin/sh
# description: the qmail MTA
PATH=/var/qmail/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin
export PATH

QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`

case "$1" in
start&#41;
echo "Starting qmail"
if svok /service/qmail-send ; then
svc -u /service/qmail-send /service/qmail-send/log
echo "qmail-send started"
else
echo "qmail-send supervise not running"
fi
if svok /service/qmail-pop3d ; then
   svc -u /service/qmail-pop3d /service/qmail-pop3d/log
   echo "qmail-pop3d started"
else
   echo "qmail-pop3d supervise not running"
fi
if svok /service/qmail-smtpd ; then
   svc -u /service/qmail-smtpd /service/qmail-smtpd/log
   echo "qmail-smtpd started"
else
   echo "qmail-smtpd supervise not running"
fi
if &#91; -d /var/lock/subsys &#93;; then
touch /var/lock/subsys/qmail
fi
;;
stop&#41;
echo "qmail-pop3d"
    svc -d /service/qmail-pop3d /service/qmail-pop3d/log
echo "Stopping qmail..."
echo " qmail-smtpd"
svc -d /service/qmail-smtpd /service/qmail-smtpd/log
echo " qmail-send"
svc -d /service/qmail-send /service/qmail-send/log
if &#91; -f /var/lock/subsys/qmail &#93;; then
rm /var/lock/subsys/qmail
fi
;;
stat&#41;
svstat /service/qmail-pop3d
svstat /service/qmail-pop3d/log
svstat /service/qmail-send
svstat /service/qmail-send/log
svstat /service/qmail-smtpd
svstat /service/qmail-smtpd/log
qmail-qstat
;;
doqueue|alrm|flush&#41;
echo "Flushing timeout table and sending ALRM signal to qmail-send."
/var/qmail/bin/qmail-tcpok
svc -a /service/qmail-send
;;
queue&#41;
qmail-qstat
qmail-qread
;;
reload|hup&#41;
echo "Sending HUP signal to qmail-send."
svc -h /service/qmail-send
;;
pause&#41;
echo "Pausing qmail-pop3d"
svc -p /service/qmail-pop3d
echo "Pausing qmail-send"
svc -p /service/qmail-send
echo "Pausing qmail-smtpd"
svc -p /service/qmail-smtpd
;;
cont&#41;
echo "Continuing qmail-pop3d"
svc -c /service/qmail-pop3d
echo "Continuing qmail-send"
svc -c /service/qmail-send
echo "Continuing qmail-smtpd"
svc -c /service/qmail-smtpd
;;
restart&#41;
echo "* Restarting qmail-pop3d."
svc -t /service/qmail-pop3d /service/qmail-pop3d/log
echo "Restarting qmail:"
echo "* Stopping qmail-smtpd."
svc -d /service/qmail-smtpd /service/qmail-smtpd/log
echo "* Sending qmail-send SIGTERM and restarting."
svc -t /service/qmail-send /service/qmail-send/log
echo "* Restarting qmail-smtpd."
svc -u /service/qmail-smtpd /service/qmail-smtpd/log
;;
cdb&#41;
tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp
chmod 644 /etc/tcp.smtp.cdb
echo "Reloaded /etc/tcp.smtp."
;;
help&#41;
cat &lt;&lt;HELP
stop -- stops mail service &#40;smtp connections refused, nothing goes out&#41;
start -- starts mail service &#40;smtp connection accepted, mail can go out&#41;
pause -- temporarily stops mail service &#40;connections accepted, nothing leaves&#41;
cont -- continues paused mail service
stat -- displays status of mail service
cdb -- rebuild the tcpserver cdb file for smtp
restart -- stops and restarts smtp, sends qmail-send a TERM & restarts it
doqueue -- schedules queued messages for immediate delivery
reload -- sends qmail-send HUP, rereading locals and virtualdomains
queue -- shows status of queue
alrm -- same as doqueue
flush -- same as doqueue
hup -- same as reload
HELP
;;
*&#41;
echo "Usage: $0 {start|stop|restart|doqueue|flush|reload|stat|pause|cont|cdb|queue|help}"
exit 1
;;
esac

exit 0</pre>
		</div><br/> <br/> Các thông số như chmod chown và tham số đa được cấu hình như mod tranvanminh chỉ dẫn .<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux bin&#93;# ps -waux | grep qmail
root      1489  0.0  0.0  1376  236 ?        S    Sep10   0:08 readproctitle service errors: ...al: unable to lock directory /var/log/qmail/smtpd: temporary failure?multilog: fatal: unable to lock directory /var/log/qmail/smtpd: temporary failure?multilog: fatal: unable to lock directory /var/log/qmail/smtpd: temporary
root      6734  0.0  0.1  1384  280 ?        S    Sep10   0:04 supervise qmail-pop3d
root      7739  0.0  0.1  1384  280 ?        S    Sep10   0:00 supervise qmail-send
root      7797  0.0  0.1  1384  280 ?        S    Sep10   0:06 supervise qmail-smtpd
qmaill   10776  0.0  0.1  1516  340 ?        S    Sep10   0:01 /usr/local/bin/multilog t /var/log/qmail/smtpd
qmaild   22362  0.0  0.1  1596  484 ?        S    Sep10   0:00 tcpserver -v -u 711 -g 710 0 smtp relay-ctrl-check qmail-smtpd
qmaill   10507  0.0  0.1  1512  340 ?        S    01:25   0:00 /usr/local/bin/multilog t /var/log/smtpd</pre>
		</div><br/> <br/> Show Control :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux bin&#93;# /var/qmail/bin/qmail-showctl
qmail home directory: /var/qmail.
user-ext delimiter: -.
paternalism &#40;in decimal&#41;: 2.
silent concurrency limit: 120.
subdirectory split: 23.
user ids: 710, 711, 712, 0, 713, 714, 715, 716.
group ids: 710, 711.

badmailfrom: &#40;Default.&#41; Any MAIL FROM is allowed.

bouncefrom: Bounce user name is postmaster.

bouncehost: &#40;Default.&#41; Bounce host name is mailsvr.mydomain.local.

concurrencylocal: &#40;Default.&#41; Local concurrency is 10.

concurrencyremote: &#40;Default.&#41; Remote concurrency is 20.

databytes: SMTP DATA limit is 10000000 bytes.

defaultdomain: Default domain name is mydomain.local.

defaulthost: &#40;Default.&#41; Default host name is mailsvr.mydomain.local.

doublebouncehost: 2B recipient host: mydomain.local.

doublebounceto: 2B recipient user: doublebounce.

envnoathost: &#40;Default.&#41; Presumed domain name is mailsvr.mydomain.local.

helohost: &#40;Default.&#41; SMTP client HELO host name is mailsvr.mydomain.local.

idhost: &#40;Default.&#41; Message-ID host name is mailsvr.mydomain.local.

localiphost: &#40;Default.&#41; Local IP address becomes mailsvr.mydomain.local.

locals: 
Messages for localhost are delivered locally.
Messages for mydomain.local are delivered locally.

me: My name is mailsvr.mydomain.local.

percenthack: &#40;Default.&#41; The percent hack is not allowed.

plusdomain: Plus domain name is mydomain.local.

qmqpservers: &#40;Default.&#41; No QMQP servers.

queuelifetime: Message lifetime in the queue is 345600 seconds.

rcpthosts: 
SMTP clients may send messages to recipients at localhost.
SMTP clients may send messages to recipients at mydomain.local.

morercpthosts: &#40;Default.&#41; No effect.

morercpthosts.cdb: &#40;Default.&#41; No effect.

smtpgreeting: &#40;Default.&#41; SMTP greeting: 220 mailsvr.mydomain.local.

smtproutes: &#40;Default.&#41; No artificial SMTP routes.

timeoutconnect: &#40;Default.&#41; SMTP client connection timeout is 60 seconds.

timeoutremote: &#40;Default.&#41; SMTP client data timeout is 1200 seconds.

timeoutsmtpd: &#40;Default.&#41; SMTP server data timeout is 1200 seconds.

virtualdomains: &#40;Default.&#41; No virtual domains.

defaultdelivery: I have no idea what this file does.

concurrencyincoming: I have no idea what this file does.</pre>
		</div><br/> <br/> Em gặp vấn đề là : <br/> <br/> khi thực hiện lệnh :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>qmailctl stop</pre>
		</div><br/> thì lại view được kết quả :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux bin&#93;# qmailctl stat
/service/qmail-pop3d: down 2935 seconds, normally up
/service/qmail-pop3d/log: down 2935 seconds, normally up
/service/qmail-send: down 2935 seconds, normally up
/service/qmail-send/log: down 2935 seconds, normally up
/service/qmail-smtpd: down 2935 seconds, normally up
/service/qmail-smtpd/log: down 2935 seconds, normally up
messages in queue: 2
messages in queue but not yet preprocessed: 2</pre>
		</div><br/> <br/> và khi thực hiện lệnh :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>qmailctl start</pre>
		</div><br/> <br/> thì kết quả :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
		<div class="coded"">
		<pre>&#91;root@linux bin&#93;# qmailctl stat
/service/qmail-pop3d: up &#40;pid 7504&#41; 20 seconds
/service/qmail-pop3d/log: up &#40;pid 7505&#41; 20 seconds
/service/qmail-send: up &#40;pid 7500&#41; 20 seconds
/service/qmail-send/log: up &#40;pid 7501&#41; 20 seconds
/service/qmail-smtpd: up &#40;pid 7659&#41; 1 seconds
/service/qmail-smtpd/log: up &#40;pid 7657&#41; 1 seconds
messages in queue: 0
messages in queue but not yet preprocessed: 0</pre>
		</div><br/> <br/> qmail-smtpd không thể start lên được cứ 1s lại về 0s .<br/> <br/> Trong hệ thống không có MTA nào cả .<br/> <br/> Khi em qmailctl stop thì người dùng OE có thể xác thực POP3 . Còn khi qmailctl start thì không thể xác thực.<br/> <br/> Và gửi mail thì cả 2 trường hợp đều ok delivered được đến Maildir . nhưng dù thế nào người dùng cũng không thể nhận được .<br/> <br/> Em cài các packet sau :<br/> 1. Qmail<br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/qmail-1.03.tar.gz</span><br/> 2. Tcpserver<br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/ucspi-tcp-0.88.tar.gz</span><br/> 3. Patch files<br/><span class="link"> http://www.qmail.org/rpms/</span><br/> 4. daemontools<br/><span class="link"> http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</span><br/> 5. checkpw<br/><span class="link"> http://checkpw.sourceforge.net/checkpw/</span>  (checkpw-1.02)<br/> <br/> Cảm ơn anh lần nữa</span></td>
                  </tr>
                </table>
          <!-- Attachments -->
			  		</td>
      </tr>


			<tr>
		        <td valign="bottom" class="row1" align="center"><div class="action" align="center">
	<table width="100%" border="0">
  		<tr>
		<td align="left">
					</td>
		<td align="right">
			<!--  -->
			
		


		
		
		<a class="nav" href="#top"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_up.gif" alt="[Up]" title="[Up]"></a>
			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/icon_print.gif" alt="[Print Copy]" title="[Print Copy]"></a>
		</td>
  	</tr>
	</table>
</div></td>
		  </tr>
	</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
	<tr>
    	<td class="catbottomslim" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="5"></td>
  	</tr>
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="20"></td>
	</tr>
</table>

		

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td valign="middle" align="right" class="nav"></td>
	</tr>
</table>

<!-- quick reply -->
<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0" align="center">
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left">
			<!-- watch - unwatch -->
			<!-- add bookmark -->

		</td>
		<td align="right" valign="bottom">			
		</td>
	</tr>
</table>

<!-- mod -->

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- combo navigator -->
<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td align="left"><a href="http://digg.com/submit?phrase=2&url=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/digg.gif" align="texttop" alt="[digg]" title="[digg]"></a>
<a href="http://del.icio.us/post?url=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/delicious.gif" align="texttop" alt="[delicious]" title="[delicious]"></a>
<a href="http://www.google.com/bookmarks/mark?op=edit&output=popup&bkmk=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/google.gif" align="texttop" alt="[google]" title="[google]"></a>
<a href="http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/yahoo.gif" align="texttop" alt="[yahoo]" title="[yahoo]"></a>
<a href="http://technorati.com/faves?add=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/technorati.gif" align="texttop" alt="[technorati]" title="[technorati]"></a>
<a href="http://reddit.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/reddit.gif" align="texttop" alt="[reddit]" title="[reddit]"></a>
<a href="http://www.stumbleupon.com/submit?url=http://www.hvaonline.net/hvaonline/posts/list/14145.hva"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/stumbleupon.gif" align="texttop" alt="[stumbleupon]" title="[stumbleupon]"></a></td>
		<td align="right">	<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap">
				<form action="" name="f" id="f" accept-charset="UTF-8">
					<span class="gensmall">Go to:&nbsp;</span>
					<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/forums/show/'+ this.options[this.selectedIndex].value +'.hva'; }" name="select">
						<option value="0" selected="selected">Select a forum</option>				
							<option value="0">-------------</option>
									<option value="2" >Thông báo từ HVA</option>
									<option value="41" >FAQ - Các câu hỏi thường gặp</option>
									<option value="5" >Góp ý và Hỏi đáp thắc mắc chung</option>
									<option value="6" >Kiểm tra bảo mật</option>
							<option value="0">-------------</option>
									<option value="8" >Thảo luận bảo mật</option>
									<option value="12" >Thảo luận thâm nhập</option>
									<option value="28" >Thảo luận virus, trojan, spyware, worm...</option>
									<option value="36" >Thủ thuật reverse engineering</option>
									<option value="13" >Thông tin new bugs và exploits</option>
									<option value="51" >Case Studies</option>
							<option value="0">-------------</option>
									<option value="23" >Thảo luận hệ điều hành Windows</option>
									<option value="24" selected="selected">Thảo luận hệ điều hành *nix</option>
									<option value="26" >Thảo luận các loại thiết bị máy tính</option>
									<option value="31" >Thảo luận mạng và thiết bị mạng</option>
									<option value="27" >Thông tin về các địa chỉ và tài liệu hữu ích</option>
							<option value="0">-------------</option>
									<option value="44" >Người tìm việc - Việc tìm người</option>
									<option value="21" >Thảo luận việc định hướng</option>
									<option value="19" >Những thảo luận khác</option>
									<option value="50" >Hình minh họa</option>
									<option value="33" >Trash</option>
							<option value="0">-------------</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</td>
	</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="10"></td>
	</tr>
</table>

<!-- list users in -->
<table class="forumline" cellspacing="3" cellpadding="0" width="100%" border="0" align="center">
	<tr>
		<th class="thright"  nowrap="nowrap" height="26" valign="middle">&nbsp;Users currently in here&nbsp;</th>
	</tr>
		<tr>
			<td class="gensmall" valign="middle" align="left">
				1 Anonymous 
				
			</td>	
		</tr>
</table>
<a name="quick"></a>

<table cellspacing="0" cellpadding="0" width="100%" border="0"  align="center">

	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
</table>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/avim.js"></script>
<script type="text/javascript">
<!--
function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.hva', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}




function maxImg(foto, maxSize){
w = foto.width;
if (w > maxSize){
	foto.width = maxSize;
	}
} 

-->
</script>
