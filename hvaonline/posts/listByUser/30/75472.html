<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Messages posted by facialz, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Messages posted by facialz - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript">
<!--

function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}

-->
</script>

<table cellspacing="0" cellpadding="10" width="98%" align="center" border="0">
	<tr>
		<td class="bodyline">
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					<td valign="middle" align="left" colspan="2">
						<span class="maintitle"><a href="/hvaonline/posts/listByUser/75472.html" name="top" class="maintitle" id="top">Messages posted by: facialz</a></span>
						&nbsp;<a href="/hvaonline/rss/showPostsByUser/75472.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML" /></a>
					</td>
				</tr>
			</table>
			
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						<a href="/hvaonline/user/profile/75472.html">Profile for facialz</a> 
            			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"><a href="/hvaonline/posts/listByUser/75472.html">Messages posted by facialz</a>
						</span>
					</td>
										
					<td valign="middle" align="right">
						<span class="nav">[ number of posts not being displayed on this page: <span class="moderator">3</span> ]</span>
					</td>
				</tr>
			</table>

			
      <table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
        <tr>
          <th height="26" nowrap="nowrap" class="thleft">&nbsp;</th>
        </tr>

				
        <!-- POST LISTING -->
         
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/18829.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/18829/204352.html#204352,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tui trước đây dùng desktop Fedora Core, nay thì desktop Ubuntu. Toàn là bị bắt dùng chứ không tự nguyện -- tui làm IT doanh nghiệp, user dùng gì thì mình cũng dùng cái nấy cho quen. Về server thì trước đây CentOS, giờ Ubuntu, cũng vì lý do tui nghĩ rằng cái nào quen thuộc nhất thì dùng. Tui thấy trên Ubuntu desktop dễ hơn FC và Ubuntu server thì dễ hơn CentOS =&gt; công việc thuận lợi hơn.<br/><br/> Mà nếu đã làm server với console tại sao lại là Linux mà không phải là FreeBSD nhỉ?<br/><br/> FreeBSD:<br/><br/> -- rất nhỏ gọn, rất nhẹ, yêu cầu hardware rất ít.<br/><br/> -- rất đơn giản, dễ dùng. Đặc biệt, cài đặt chương trình, upgrade, update dễ dàng và đáng tin cậy.<br/><br/> Nói chung tui đụng vào *nix là công việc đòi hỏi và luôn phải chịu sức ép về tiến độ công việc nên thích sự đơn giản, dễ sử dụng và về mặt này tui nghĩ rằng FreeBSD là số 1. Nếu không có lý do gì ngăn cản thì tui luôn lựa chọn FreeBSD để làm server. Linux và OpenSolaris tất nhiên cũng là cần thiết nhưng tui chỉ dùng chúng khi không có lựa chọn khác mà thôi.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/33190.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/33190/204252.html#204252,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">Michael_Scotfield wrote:</cite><br>
<blockquote> 178.125.31.64 . 178.125.35.128 , 178.125.41.192 lúc đầu em cứ nghĩ nó là 1 ip address<br/> vậy làm cách nào phân biệt dc 1 ip address và 1 network address ,dựa vào subnet mask của nó?.&nbsp;
</blockquote><br/><br/> Ví dụ, với địa chỉ 172.125.41.192:<br/><br/> 172.125.41.192 = 10101100 01111101 00101001 11000000<br/><br/> và với subnet mask /28:<br/><br/> 255.255.255.240 = 11111111 11111111 11111111 11110000<br/><br/> Lấy mặt nạ (mask) che đi phần đầu của địa chỉ, ta được:<br/><br/> 172.125.41.192 = xxxxxxxx xxxxxxxx xxxxxxxx xxxx0000<br/><br/> Phần lộ ra là 0000 = 0, chứng tỏ địa chỉ là một địa chỉ mạng.<br/><br/> Nhưng vẫn địa chỉ ấy, với mặt na /24:<br/><br/> 255.255.255.0 = 11111111 11111111 11111111 00000000<br/><br/> sau khi lấy mặt na che đi phần đầu ta được<br/><br/> 172.125.41.192 = xxxxxxxx xxxxxxxx xxxxxxxx 11000000<br/><br/> Phần lộ ra là 11000000 != 0, chứng tỏ địa chỉ ấy là một địa chỉ host.<br/><br/><br/> <p></p>
<cite class="blockquote">Michael_Scotfield wrote:</cite><br>
<blockquote> Với cách chia ở trên thì với facialz ta có 3 subnet mask còn với win0611 thì chỉ có 1 subnet vậy thì cách là là tôí ưu và hiệu quả nhất&nbsp;
</blockquote><br/><br/> Tui xác định subnet mask cho từng mạng con (được /26) còn bác kia tính subnet mask cho cả mạng lớn (và được /21). Khoan nói đúng sai thế nào, nhưng hai phép tính khác nhau nhằm hai mục đích khác nhau, không thể so sánh với nhau được.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/33190.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/33190/204222.html#204222,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">win0611 wrote:</cite><br>
<blockquote>cảm ơn bác facialz, nhưng em đọc đi đọc lại câu trả lời của bác vẫn chưa hiểu đc hết ý bác muốn nói. Em không biết ở đây tính mặt nạ mạng cho mỗi mạng như thế nào mới đúng ?&nbsp;
</blockquote><br/><br/> Chào bác. Chắc là tui viết vắn tắt quá. (Sorry.) Đây tui cố gắng viết lại rõ ràng hơn:<br/><br/> Mạng nhỏ nhất chứa được 60 máy là mạng có mặt nạ /26. Thật vậy:<br/><br/> 11111111 11111111 11111111 11111111 (= 255.255.255.254 = /32, tức là mạng 1 địa chỉ)<br/> 11111111 11111111 11111111 11111110 (= 255.255.255.254 = /31, tức là mạng 2 địa chỉ)<br/> 11111111 11111111 11111111 11111100 (= 255.255.255.252 = /30, tức là mạng 4 địa chỉ)<br/> 11111111 11111111 11111111 11111000 (= 255.255.255.248 = /29, tức là mạng 8 địa chỉ)<br/> 11111111 11111111 11111111 11110000 (= 255.255.255.240 = /28, tức là mạng 16 địa chỉ)<br/> 11111111 11111111 11111111 11100000 (= 255.255.255.224 = /27, tức là mạng 32 địa chỉ)<br/> 11111111 11111111 11111111 11000000 (= 255.255.255.192 = /26, tức là mạng 64 địa chỉ)<br/> 11111111 11111111 11111111 10000000 (= 255.255.255.128 = /25, tức là mạng 128 địa chỉ)<br/> 11111111 11111111 11111111 00000000 (= 255.255.255.0 = /24, 256 địa chỉ)<br/> ...<br/><br/> Xét mạng thứ nhất 178.125.27.0, viết lại địa chỉ này thành dạng nhị phân:<br/><br/> (1) 178.125.27.0 = xxxxxxxx xxxxxxxx xxxxxxx1 00000000<br/><br/> (Bác có có thể tính hết cả 32 bit, nhưng thật ra không cần thiết. Từ thấp lên cao:<br/> -- Số 0 thì chắc chắn là 0000 0000 rồi.<br/> -- Số 27 là số lẻ nên dạng nhị phận của nó tận cùng bằng 1.<br/> -- Còn tất cả phần đứng trước bit 1 thì không cần phải quan tâm nữa.)<br/><br/> Một địa chỉ mạng có dạng xxx....x000...0, trong đó xxx...x bất kỳ. Mặt nạ mạng tương ứng có dạng 111....1000...0 trong đó phần 000...0 trùng với phần 000...0 của địa chỉ mạng. Bởi vậy đối với địa chỉ mạng (1) thì mặt nạ mạng chỉ có thể là /32, /31,..., /24 chứ không thể là /23, /22,... được. Và như vậy là đã quá đủ rồi: địa chỉ (1) là 1 địa chỉ thích hợp cho 1 mạng tối đa 256 địa chỉ, cho nên thừa sức chứa 64 địa chỉ.<br/><br/> Tương tự như vậy, bác sẽ thấy địa chỉ mạng thứ hai và thứ tư thích hợp cho mạng tối đa 64 địa chỉ, nghĩa là vừa đủ đạt yêu cầu, còn địa chỉ mạng thứ ba thích hợp cho mạng tối đa 128 địa chỉ, nghĩa là vượt yêu cầu.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/33190.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/33190/204185.html#204185,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">win0611 wrote:</cite><br>
<blockquote>Sắp thi mạng máy tính mà hôm nay ôn lại lại không nhớ gì nữa rồi, các bác giúp em giải bài này chi tiết với ạ :<br/> " Với địa chỉ IP 178.125.0.0 kết nối vào mạng Internet được cấp cho mạng của mình,một công ty dự định thiết kế 4 mạng con có tối đa 60 máy tính/mạng.Giả thiết các mạng con có địa chỉ 178.125.27.0 , 178.125.31.64 . 178.125.35.128 , 178.125.41.192.<br/> a,Xác định mặt nạ, dải địa chỉ IP và địa chỉ broadcast của mỗi mạng con<br/> b,Hãy phân tích và đưa ra cấu hình thiết kế nối mạng Internet cho công ty với các mạng con đã cho,biết rằng công ty sử dụng hai router với 2 giao diện mạng và một router với 3 giao diện mạng.Nếu mỗi mạng con có 2 máy tính kết nói vào, hãy định địa chỉ IP phù hợp cho mỗi máy tính đó."<br/> Em cảm ơn !<br/> &nbsp;
</blockquote><br/><br/> Câu a, Thử viết các địa chỉ ra dạng nhị phân, để ý 9 bit thấp:<br/><br/> (1) 178.125.27.0 = ... 1 00000000<br/> (2) 178.125.31.64 = ... 1 01000000<br/> (3) 178.125.35.128 = ... 1 10000000<br/> (4) 178.125.41.192 = ... 1 11000000<br/><br/> Vì một địa chỉ mạng đều phải có dạng xxx...x000...0, nghĩa là một chuỗi bit gì đó theo sau là chuỗi những bit 0, và một mặt nạ sẽ cho biết số bit 'x' của phần "gì đó" kia, nên mặt nạ lớn nhất cho phép đối với mạng (1) là /24, đối với mạng (2) là /26, đối với mạng (3) là /25 và đối với mạng (4) là /26. Mặt nạ này là hợp lý đối với mạng (2) và (4) còn đối với mạng (1) và (3) thì lớn quá, hợp lý cũng chỉ là /26 thôi. Với mặt nạ /26, mạng có 64 địa chỉ, trừ đầu đuôi còn 62, đủ để chứa số máy tính theo yêu cầu của đề bài.<br/><br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/32893.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/32893/203227.html#203227,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">nguyendinhtuanit wrote:</cite><br>
<blockquote>Em đã phân vùng cache như vậy thì có hợp lý như anh nói chưa. Squid của em cấu hình RAID0.<br/><br/> <blockquote>#######################################################################<br/> cache_mem 1024 MB<br/> maximum_object_size 3 MB<br/> maximum_object_size_in_memory 512 KB<br/> cache_dir ufs /opt/squid/cache/d1 20000 16 256<br/> cache_dir ufs /opt/squid/cache/d2 20000 16 256<br/> #######################################################################&nbsp;
</blockquote><br/><br/> Anh có thể nói thêm vài option để quản lý tối ưu phần cứng cho việc sử dụng squid!<br/><br/> Thân.&nbsp;
</blockquote><br/><br/> Chào bác. Tui cũng mới dùng squid một thời gian ngắn (&gt;1 năm nay) tui cảm thấy rằng 2 cache_dir 20000 12 256 như vậy là hợp lý với d1 d2 là 2 ổ cứng 36 - 72 GB. Nói chung L1 L2 chỉ cần làm sao đảm bảo trong mỗi thư mục cache L2 không chứa quá nhiều file. Chừng 200 - 300 file thì hợp lý.<br/><br/> Còn maximum_object_size thì tui nghĩ nên cho lớn hơn nữa để nó cache được file lớn, và maximum_object_size_in_memory thì nên cho nhỏ hơn để bắt nó cache file lớn ra đĩa không cho để trong RAM.<br/><br/> Bác để cache_mem 1024 MB hợp lý khi bác có 8GB RAM còn nếu ít hơn thì nên xem xét lại. Squid dùng nhiều RAM để cache cho ổ cứng (cache của disk cache) nhưng lượng RAM này được cấp tự động và tính vào kernel chứ không tính vào cache_mem; còn cache_mem là dung lượng của mem cache tui nghĩ chỉ nên để chừng 10-20 % dung lượng RAM thôi.<br/><br/> Muốn biết đã tối ưu chưa thì phải từ từ chỉnh và theo dõi hiệu quả. Tui nghĩ nếu có chừng 100 users thì chỉnh chừng đó thông số là đủ nếu có chừng 1000 users thì có thể xem thêm vài thông số khác như replacement_policy, cache_swap, memory_pools, buffered_logs, client_db, half_closed_client,...<br/><br/> Ngoài ra, squid dùng nhiều file và mở nhiều socket nên bác đừng quên chỉnh các thông số kernel để thích ứng. Tui có viết 1 bài ngắn về thiết lập squid cho FreeBSD, gửi trên HVA vài tháng trước, bác tự tìm nhé.<br/><br/> Thân!</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/32893.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/32893/203144.html#203144,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Làm cache thì ổ cứng là quan trọng nhất, vì cache ghi đĩa rất nhiều. Nếu có thể, bác nên dùng vài ổ cứng, hơn là 1 ổ, không những để cho nhanh hơn mà còn để kéo dài tuổi thọ ổ cứng. Không cần làm RAID0. Dùng RAID lỡ chết 1 ổ thì chết cả. Để phân bổ tải đều lên các ổ cứng chỉ cần khai báo vài cache_dir, mỗi cái đặt trên 1 ổ cứng rồi squid sẽ tự biết cách cân bằng tải, lỡ chết 1 ổ ngoài ổ hệ thống thì không sao. <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom"><br/><br/> Nếu có &gt;= 1GB RAM, bác nên dùng hệ thống file ZFS để tăng độ sẵn sàng. Khi mất điện ZFS luôn khởi động lại được vì không bao giờ bị hỏng, và khởi động rất nhanh vì không bao giờ cần check disk.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/32663.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/32663/201556.html#201556,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><font size='+1'><b>THIẾT LẬP DNS SERVER<br/> với DJBDNS trên nền FreeBSD</b></font><br/><br/><br/> <b>1 Vì sao, khi nào dùng DJBDNS</b><br/><br/> Gói <b>djbdns</b>, gói phần mềm DNS server nổi tiếng của Daniel J. Bernstein, có nhiều ưu điểm:<br/> <ul><li>Nhanh: trong một benchmark [6], djbdns mất bình quân 327 ms để giải xong một tên miền, trong khi BIND mất 5179 ms.</li><li> Gọn: djbdns chỉ có 7000 lệnh, BIND có 100000 [6, 8].</li><li> Yêu cầu thấp: djbdns chỉ chiếm dụng khoảng 2 MB khi mới khởi động và khoảng 10 MB sau nửa triệu truy vấn, trong khi ở BIND con số tương ứng lần lượt là 30 MB và 57 MB [6].</li><li> Bảo mật cao: trong suốt lịch sử 19 năm của mình (1991 – 2009) djbdns chỉ có 2 lỗi đã được phát hiện. Còn BIND chỉ trong 19 năm (1983 – 2002) đã có 672 lỗi [9].</li><li> Thông dụng: theo một thống kê tháng 11/2008, Internet có 78,1 triệu tên miền .com, trong đó ít nhất 4,6 triệu được đặt trên các máy chủ sử dụng <b>djbdns</b>. Với số lượng đó, <b>djbdns</b> đứng thứ tư về độ thông dụng, chỉ sau <b>BIND</b> (20,6 triệu), <b>MyDNS</b> (17,8 triệu), và <b>PowerDNS</b> (6,6 triệu) [7].</li></ul><br/> Với các ưu điểm đó, <b>djbdns</b> có thể dùng được trong mọi trường hợp, và đặc biệt thích hợp trong trường hợp phần cứng thấp và tải lớn.<br/><br/><br/><br/> <b>2 Cấu hình tổng thể</b><br/><br/> Gói phần mềm <b>djbdns</b> có vài chương trình, trong đó chúng ta sẽ cài đặt hai chương trình chính: <b>tinydns</b> và <b>dnscache</b>. <u>Tinydns</u> là chương trình chuyên dùng để làm DNS server <u>có thẩm quyền</u> (authoritative), nghĩa là có nhiệm vụ công bố các địa chỉ Internet của miền nào đó mà chúng ta sở hữu, ví dụ, mycompany.com.<u>Dnscache</u> là chương trình chuyên dùng để làm DNS cache, nghĩa là có nhiệm vụ tìm hộ địa chỉ Internet của mọi miền, kể cả mycompany.com.<br/><br/> Hai chương trình này sẽ được cài đặt lên cùng một máy tính có 1 NIC, mà chúng ta sẽ gọi là <u>máy chủ DNS</u>, và sẽ được cấu hình cùng lắng nghe trên cổng 53 nhưng phải là trên các interface khác nhau (nói chính xác hơn, trên các địa chỉ IP khác nhau). Chương trình <b>dnscache</b> sẽ được cấu hình lắng nghe trên interface chính (ví dụ, 192.168.12.10) và chỉ phục vụ các client cục bộ (ví dụ, 192.168.0.0/16 và 10.0.0.0/24). Chương trình <b>tinydns</b> sẽ được cấu hình lắng nghe trên loopback interface (ví dụ, 127.0.0.1).<br/><br/> Mọi DNS client cục bộ, kể cả resolver (DNS client của chính bản thân máy chủ DNS), sẽ được cấu hình để truy vấn địa chỉ Internet ở interface chính. Tại đó, <b>dnscache</b> sẽ tìm kiếm câu trả lời trong cache và nếu không tìm thấy, sẽ lần lượt truy vấn theo dây chuyền bắt đầu từ các DNS server có thẩm quyền giải tên <u>miền gốc</u> (root) lần đến tận DNS server có thẩm quyền giải tên miền cần hỏi để có câu trả lời cuối cùng.<br/><br/> Có một ngoại lệ mà chúng ta sẽ thực hiện là nếu tên miền cần tìm thuộc mycompany.com hoặc nếu địa chỉ IP cần giải (ngược) là địa chỉ IP mạng cục bộ (ví dụ, 192.168.18.10), <b>dnscache</b> sẽ không lần theo dây chuyền các DNS server có thẩm quyền mà sẽ lập tức chuyển truy vấn sang loopback interface (127.0.0.1) cho <b>tinydns</b> giải đáp ngay. Ngoại lệ như thế là không cần thiết nếu như <b>tinydns</b> của chúng ta đã <u>được uỷ quyền</u> (delegated) của nhà đăng ký DNS cho phép quản lý miền mycompany.com. Nhưng thực tế do hợp đồng với nhà đăng ký, chúng ta không được uỷ quyền quản lý miền mycompany.com. <b>Tinydns</b> của chúng ta không tồn tại trong cơ sở dữ liệu của nhà đăng ký và do đó, chính thức mà nói thì nó không phải là DNS server có thẩm quyền giải tên mycompany.com cho bất kỳ DNS client nào. Muốn <b>tinydns</b> có thể phục vụ được thì phải làm ra ngoại lệ. Cũng vì lý do đó, <b>tinydns</b> chỉ phục vụ riêng cho những client trong mạng cục bộ chứ không thể phục vụ công chúng được. Ngoại lệ trên đây là duy nhất. Ta sẽ không cấu hình <b>dnscache</b> dùng bất cứ DNS forwarder nào khác, dù là server của ISP hay là server có uy tín như OpenDNS,...<br/><br/> Do tính năng đã được lập trình sẵn, <b>dnscache</b> sẽ lưu lại mọi câu trả lời trong cache để phục vụ cho những truy vấn về sau và để bảo mật, cache này chỉ nằm trong RAM và sẽ bị xoá khi khởi động. Tuy vậy, trong trường hợp (hết sức đặc biệt) nào đó ta vẫn có thể cho <b>dnscache</b> lưu cache ra đĩa cứng bằng miếng vá tính năng PERSISTENT CACHE.<br/><br/> Bài này ghi chép quy trình cài đặt và cấu hình <b>djbdns v.1.05</b> trên hệ điều hành <b>FreeBSD v.8</b>. Các lý giải sâu về cấu hình tổng thể, các giải thích chi tiết từng bước của quá trình cài đặt, hay các phương pháp kiểm tra và giải quyết trục trặc có thể tìm thấy ở trong những nguồn trực tuyến, rất đầy đủ và phong phú, kể cả bằng tiếng Việt (xem danh mục tài liệu tham khảo).<br/><br/><br/><br/> <b>3 Cài đặt và cấu hình chi tiết</b><br/><br/> <b>3.1. Cài đặt, tạo môi trường</b><br/><br/> 1. Cập nhật port collection.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>portsnap fetch install</pre>
</div><br/><br/> 2. Biên dịch và cài đặt gói hỗ trợ <b>ucspi-tcp</b>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /usr/ports/sysutils/ucspi-tcp/; make install clean</pre>
</div><br/><br/> 3. Biên dịch và cài đặt gói hỗ trợ <b>daemontools</b>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /usr/ports/sysutils/daemontools/; make install clean</pre>
</div><br/><br/> 4. Biên dịch và cài đặt djbdns.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /usr/ports/dns/djbdns
make install clean</pre>
</div><br/><br/> Chú ý, khi <b>make config</b>, có thể chọn một số miếng vá bổ sung tính năng cần thiết. Chẳng hạn như PERSISTENT NMAP, SRV RECORD (hỗ trợ SRV record), PERSISTENT CACHE (hỗ trợ DNS cache trên ổ cứng), IPV6 (hỗ trợ giao thức IP v.6), v.v... mà chúng ta có thể chọn thêm, nếu cần. Bài này hướng dẫn này thực hiện <b>với cấu hình mặc định</b>, không có miếng vá thêm nào.<br/><br/> 5. Cấu hình svscan – bộ quản lý service trong gói phụ trợ daemontools.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>mkdir /var/service
fetch -o /usr/local/etc/rc.d/services.sh \<span class="link"> http://www.tnpi.biz/internet/mail/toaster/start/services.txt</span>
chmod 755 /usr/local/etc/rc.d/services.sh
ln -s /usr/local/etc/rc.d/services.sh /usr/local/sbin/services
rehash</pre>
</div><br/><br/> 6. Khởi động các dịch vụ. Chú ý hiện thời ta chưa cài đặt dịch vụ nào. Lệnh “khởi động” này thuần túy chỉ để kiểm tra rằng svscan đã thực sự hoạt động được. Sau khi kiểm tra ta lại tắt các dịch vụ. Nếu gặp trục trặc với <b>svscan</b> thì giải quyết trục trặc trước khi đi tiếp.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>services start
ps -aux | grep sv
services stop</pre>
</div><br/><br/> 7. Các service sẽ sử dụng ba account khác nhau, mà ta sẽ đặt tên là <b>dnscache</b>, <b>tinydns</b>, <b>dnslog</b>. (Không nhất thiết phải đặt tên account như thế này mà có thể chọn những tên khác bất kỳ.) Mỗi account thuộc nhóm riêng của nó, với tên nhóm cùng tên với account. Hãy tạo ba nhóm này trước, bằng cách viết thêm trong file /etc/group ba dòng<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>dnscache:*:54:
tinydns:*:55:
dnslog:*:56:</pre>
</div><br/><br/> rồi tạo ba account tương ứng bằng lệnh <b>adduser</b>.<br/><br/> Trong đó, 54, 55, 56 là các số hiệu GID và UID mà chúng ta chọn đặt cho các account và nhóm mới. Nếu các số này đã bị chiếm dụng thì chúng ta có thể dùng số khác bất kỳ.<br/><br/> 9. Tạo thư mục làm việc cho <b>djbdns</b>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>mkdir /var/dns</pre>
</div><br/><br/><br/><br/> <b>3.2. Cấu hình dnscache</b><br/><br/> 1. Cấu hình dnscache để nó dùng hai trong số ba account vừa tạo (<b>dnscache</b> và <b>dnslog</b>), làm việc trong thư mục con <b>/var/dns/dnscache</b> (mà nó sẽ tự tạo ra), và lắng nghe trên interface chính (192.168.12.10).<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>dnscache-conf dnscache dnslog /var/dns/dnscache 192.168.12.10</pre>
</div><br/><br/> Chú ý. <b>dnscache-conf</b> là lệnh ngoại trú nằm trong <b>/usr/local/bin</b>. Nếu thư mục đó không nằm trong PATH thì hãy gõ lệnh trên đầy đủ đường dẫn.<br/><br/> 2. Đưa <b>dnscache</b> vào danh mục service quản lý bởi <b>svscan</b> bằng cách tạo trong <b>/var/service</b> một soft link đến <b>/var/dns/dnscache</b>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>ln -s /var/dns/dnscache /var/service</pre>
</div><br/><br/> 3. Trong thư mục <b>/var/dns/dnscache/root/ip</b> đã có một file rỗng tên là <b>127.0.0.1</b>. Ý nghĩa của file này là <b>dnscache</b> đã (mặc định) được phép phục vụ localhost (127.0.0.1). Để cho phép nó phục vụ các client thuộc mạng cục bộ, ví dụ, 192.168.0.0/16 và 10.0.0.0/24, ta cũng tạo ra các file rỗng tương tự như thế.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>touch /var/dns/dnscache/root/ip/192.168
touch /var/dns/dnscache/root/ip/10.0.0</pre>
</div><br/><br/> 4. Cấu hình resolver (tức DNS client trên chính bản thân máy chủ DNS) để nó sử dụng dịch vụ của <b>dnscache</b> bằng cách viết lại file <b>/etc/resolv.conf</b> với nội dung mới như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>nameserver 192.168.12.10</pre>
</div><br/><br/> 5. Khởi động dịch vụ bằng lệnh <b>services start</b> hoặc <b>services restart</b>. Kiểm tra khẳng định rằng <b>dnscache</b> đã hoạt động đúng, nghĩa là đã giải được các tên Internet ngoại trừ các tên mycompany.com và giải ngược được các địa chỉ IP Internet ngoại trừ các địa chỉ IP cục bộ bằng các lệnh như <b>ping</b>, <b>host</b>, <b>dig</b>,... hay các client chuyên dùng khác trong bộ <b>djbdns</b> như <b>dnsip</b>, <b>dnsname</b>,... chạy trên máy chủ DNS và trên mọi máy khác trong mạng cục bộ.<br/><br/><br/><br/> <b>3.3. Cấu hình tinydns</b><br/><br/> 1. Cấu hình tinydns để nó dùng hai trong ba account dịch vụ vừa tạo (<b>tinydns</b> và <b>dnslog</b>), làm việc trong thư mục con <b>/var/dns/tinydns</b> (mà nó sẽ tự tạo ra), và lắng nghe trên loopback interface (127.0.0.1).<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>tinydns-conf tinydns dnslog /var/dns/tinydns 127.0.0.1</pre>
</div><br/><br/> Chú ý. Tương tự như ở đoạn trên, <b>tinydns-conf</b> là lệnh ngoại trú trong <b>/usr/local/bin</b>. Nếu thư mục ấy không nằm trong PATH thì hãy gõ lệnh trên có đường dẫn.<br/><br/> 2. Đưa tinydns vào danh mục dịch vụ quản lý bởi svscan bằng cách tạo trong <b>/var/service</b> một softlink đến <b>/var/dns/tinydns</b>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>ln -s /var/dns/tinydns /var/service</pre>
</div><br/><br/> 3. Soạn thảo file dữ liệu chứa các địa chỉ DNS, có tên là <b>/var/dns/tinydns/root/data</b>. Ví dụ một file dữ liệu sẽ được trình bày trong đoạn tiếp theo.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /var/dns/tinydns/root
le data</pre>
</div><br/><br/> Chú ý. FreeBSD v.8 được cài đặt mặc định với các trình biên tập <b>vi</b> và <b>ee</b>. Còn <b>le</b> là một trong số hàng trăm trình biên tập khác mà muốn dùng thì phải cài riêng.<br/><br/> 4. Dịch file dữ liệu dạng văn bản nói trên thành một file cơ sở dữ liệu dạng nhị phân có tên là data.cdb cất trong cùng thư mục.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>make</pre>
</div><br/><br/> 5. Khởi động dịch vụ bằng lệnh <b>services restart</b>. Kiểm tra khẳng định rằng <b>tinydns</b> đã hoạt động đúng, nghĩa là đã giải được các tên của mycompany.com và giải ngược được các địa chỉ IP tương ứng của miền này bằng một client chạy ngay trên máy chủ DNS.<br/><br/><br/><br/> <b>3.4. Một file dữ liệu cho tinydns</b><br/><br/> Đây là file <b>/var/dns/tinydns/root/data</b> soạn thảo ở bước 3 trong thủ tục 3.3 nói trên. Thay vì viết ra các luật cú pháp dài dòng, ta đưa ra một ví dụ so sánh một BIND zone file với một file dữ liệu tương đương cho <b>tinydns</b>.<br/><br/> Nếu giả sử dùng BIND để thiết lập DNS server cho một vùng mycompany.com mà file dữ liệu <b>/etc/namedb/mycompany.com.hosts</b> có nội dung<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$ttl 38400
mycompany.com. IN SOA ns1.mycompany.com. itdept.mycompany.com. &#40;
1245253211
10800
3600
604800
38400 &#41;
mycompany.com. IN NS ns1.mycompany.com.
mycompany.com. IN MX 10 mx1.mycompany.com.
ns1.mycompany.com. IN A 127.0.0.1
mx1.mycompany.com. IN A 192.168.12.16
dc1.mycompany.com. IN A 192.168.10.11
dc2.mycompany.com. IN A 192.168.10.12
...
web.mycompany.com. IN A 192.168.18.10
www.mycompany.com. IN CNAME web.mycompany.com
ntp.mycompany.com. IN CNAME mx1.mycompany.com</pre>
</div><br/><br/> thì khi dùng tinydns để thiết lập DNS server có thẩm quyền cho miền này, file dữ liệu <b>/var/dns/tinydns/root/data</b> tương đương sẽ có nội dung sau đây.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>.mycompany.com::ns1.mycompany.com:604800
.0.168.192.in-addr.arpa::ns1.mycompany.com:604800
.1.168.192.in-addr.arpa::ns1.mycompany.com:604800
...
.18.168.192.in-addr.arpa::ns1.mycompany.com:604800
@mycompany.com::mx1.mycompany.com:86400
=ns1.mycompany.com:127.0.0.1
=mx1.mycompany.com:192.168.12.16
=dc1.mycompany.com:192.168.10.11
=dc2.mycompany.com:192.168.10.12
...
=web.mycompany.com:192.168.18.10
+www.mycompany.com:192.168.18.10
+ntp.mycompany.com:192.168.12.16</pre>
</div><br/><br/> Trong ví dụ trên, file dữ liệu của <b>djbdns</b> đã chứa cả danh sách các mạng mà <b>tinydns</b> có thẩm quyền giải ngược địa chỉ IP.<br/><br/><br/><br/> <b>3.5. Cấu hình dnscache để chuyển truy vấn mycompany.com sang tinydns</b><br/><br/> 1. Ta sẽ cấu hình <b>dnscache</b> để forward sang <b>tinydns</b> mọi truy vấn liên quan đến các miền mà <b>tinydns</b> phụ trách. Hãy xác định thư mục làm việc.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /var/dns/dnscache/root/servers</pre>
</div><br/><br/> 2. Để forward các truy vấn về tên, ta tạo ra trong thư mục này một file có tên là tên miền cần giải (mycompany.com) và có nội dung là địa chỉ IP của <b>tinydns</b> (127.0.0.1).<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>echo 127.0.0.1 &gt; mycompany.com</pre>
</div><br/><br/> 3. Để forward các truy vấn về địa chỉ IP, ta tạo ra trong thư mục này các file có tên là tên miền cần giải ngược và có cùng nội dung như trên. Chú ý rằng mỗi tên file như thế tận cùng bằng dấu chấm.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>echo 127.0.0.1 &gt; 0.168.192.in-addr.arpa.
echo 127.0.0.1 &gt; 1.168.192.in-addr.arpa.
...
echo 127.0.0.1 &gt; 18.168.192.in-addr.arpa.</pre>
</div><br/><br/> 4. Khởi động các dịch vụ bằng lệnh <b>services restart</b>. Kiểm tra rằng cơ chế forward <b>dnscache</b> → <b>tinydns</b> đã hoạt động đúng, tức là đã giải được các tên của miền mycompany.com và giải ngược được các địa chỉ IP tương ứng của miền này cho tất cả các client trong mạng cục bộ.<br/><br/><br/><br/><br/> <b>4 Tài liệu tham khảo</b><br/><br/> [1] FreeBSD handbook: 29.6 Domain Name System (DNS)<br/> [2] ISC: BIND 9 Administrator Reference Manual (9.3.2)<br/> [3] Simerson M.: DJBDNS on FreeBSD HOW-TO<br/> [4] Wagner G.: Installing djbdns on a FreeBSD server<br/> [5] Hoàng Ngọc Diêu: Thay thế BIND với djbdns<br/> [6] Steniger J.: BIND v DJBDNS: Comparison of Performance, Ease of Config and Security<br/> [7] Bernstein D.J.: DJBDNS Blurbs<br/> [8] Bernstein D.J.: DJBDNS Security<br/> [9] Bernstein D.J.: BIND, the Buggy Internet Name Daemon </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/32586.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/32586/201155.html#201155,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">kiengiaphat wrote:</cite><br>
<blockquote>Chào mọi người,<br/> Mình muốn xin tư vấn về đường truyền internet 1 chút.<br/> Ví dụ công ty mình có khoảng 100 người. Cty có phòng mạng riêng và có khoảng 10 Server cần ra và internet.<br/> Bây giờ mình sử dụng đường truyền <b>internet Leadline của VDC tốc độ 5Mbps</b>. và cấu hình toàn bộ Server và người sử dụng truy cập internet qua đường truyền này.<br/> - Như vậy đường truyền có đáp ứng được không mọi người?<br/> - Sếp mình lại muốn chia 512K để ngườisử dụng cho internet như vậy có ổn không? và về măt kỹ thuật có đáp ứng được ko vậy?<br/> Bác nào biết thì tư vấn giúp em nhé!<br/> Verry thanks,<br/><br/> &nbsp;
</blockquote><br/><br/> Chào bác, bác nên thuê riêng 1 đường FTTH cho users (các ISP lớn như VNPT, Viettel, FPT,... đều có dịch vụ này), khoảng 10 mbps đủ cho 100 người rồi. Còn server thì tùy lượng truy cập, không thể biết trước được.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1358.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1358/201150.html#201150,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tui xin đóng góp 2 dạng VPN nữa giữa m0n0 v.1.3 với thiết bị ipsec khác: Draytek Vigor 29xx và Fortinet Fortigate w/FortiOS v.4<br/><br/> <u>1. m0n0 - Vigor</u><br/><br/> 192.168.0.1/24 m0n0 111.0.0.1 --- INTERNET --- 222.0.0.2 Vigor 172.16.0.1/16<br/><br/> <u>1.1. m0n0</u><br/><br/> Interface: WAN<br/> Enable NAT-T: No<br/> DPD Interval: bỏ trống<br/> Local subnet: LAN subnet<br/> Remote subnet: 172.16.0.0/16<br/> Remote gateway: 222.0.0.2<br/><br/> Phase 1 proposal:<br/> Nego mode: main<br/> My Identifier: My IP address<br/> Encryption Algo: AES<br/> Hash Algo: SHA1<br/> DH key group: 2<br/> Lifetime: 86400 seconds<br/> Auth method: Pre-shared key<br/> Pre-Share Key: 0123456789ABCDEFGHIJKLMN<br/><br/> Phase 2 proposal:<br/> Protocol: ESP<br/> Encryption Algo: 3DES, Rijndael (AES)<br/> Hash Algo: SHA1, MD5<br/> PFS key group: 2<br/> Lifetime: 3600 seconds<br/><br/><br/> <u>1.2. Vigor</u><br/><br/> LAN to LAN<br/><br/> Common settings<br/><br/> Enable this profile: yes<br/> VPN Dial-Out through: WAN1 only (hoặc WAN2 only)<br/> Call Direction: Both<br/> Always on: yes<br/> Enable ping to keep alive: yes<br/> PING to the IP: 192.168.0.1<br/><br/><br/> Dial-Out settings<br/><br/> Type of server I'm calling: IPSec tunnel<br/> Server IP/hostname: 111.0.0.1<br/> IKE auth method: Pre-shared key<br/> Pre-shared key: 0123456789ABCDEFGHIJKLMN<br/> IPsec security method: High (ESP) - AES with auth<br/> Advanced:<br/> IKE phase 1 mode: main mode<br/> IKE phase 1 proposal: AES128_SHA1_G2<br/> IKE phase 2 proposal: AES_SHA1<br/> IKE phase 1 key lifetime: 86400<br/> IKE phase 2 key lifetime: 3600<br/> Perfect Forward Secret: Enable<br/> Local ID: 222.0.0.2<br/><br/><br/> Dial-In settings<br/><br/> Allowed Dial-In type: IPSec tunnel<br/> Specify remote VPN gateway: yes<br/> Peer VPN server IP: 111.0.0.1<br/> IKE auth method: Pre-shared key<br/> IKE pre-shared key: 0123456789ABCDEFGHIJKLMN<br/> IPSec Security method: 3DES, AES<br/><br/><br/> TCP/IP Network settings<br/><br/> My WAN IP: 222.0.0.2<br/> Remote gateway IP: 111.0.0.1<br/> Remote network IP: 192.168.0.0<br/> Remote network mask: 255.255.255.0<br/> Local network IP: 172.16.0.0<br/> Local network mask: 255.255.0.0<br/> RIP direction: disable<br/><br/><br/><br/> <u>2. m0n0 - Fortigate</u><br/><br/> 192.168.0.1/24 m0n0 111.0.0.1 --- INTERNET --- 222.0.0.2 Fortigate 172.16.0.1/16<br/><br/> <u>2.1. m0n0</u><br/><br/> Interface: WAN<br/> Enable NAT-T: No<br/> DPD Interval: bỏ trống<br/> Local subnet: LAN subnet<br/> Remote subnet: 172.16.0.0/16<br/> Remote gateway: 222.0.0.2<br/><br/> Phase 1 proposal:<br/> Nego mode: main<br/> My Identifier: My IP address<br/> Encryption Algo: AES<br/> Hash Algo: SHA1<br/> DH key group: 5<br/> Lifetime: 86400 seconds<br/> Auth method: Pre-shared key<br/> Pre-Share Key: 0123456789ABCDEFGHIJKLMN<br/><br/> Phase 2 proposal:<br/> Protocol: ESP<br/> Encryption Algo: 3DES, Rijndael (AES)<br/> Hash Algo: SHA1, MD5<br/> PFS key group: 5<br/> Lifetime: 3600 seconds<br/><br/><br/> <u>2.2. Fortigate</u><br/><br/> Phase 1<br/><br/> Name: My Home<br/> Remote gateway: Static IP address<br/> IP address: 111.0.0.1<br/> Local interface: WAN1 (hoặc WAN2, WAN3,...)<br/> Mode: Main (ID protection)<br/> Auth method: preshared key<br/> Pre-shared key: 0123456789ABCDEFGHIJKLMN<br/> Advanced...<br/> Enable IPsec Interface mode: yes<br/> IKE version: 1<br/> Local gateway IP: Main Interface IP<br/> P1 proposal: 1-Encryption: AES128, Authentication: SHA1<br/> DH group: 5<br/> Keylife: 86400<br/> Local ID: bỏ trống<br/> XAUTH: disable<br/> NAT Traversal: no<br/> Keepalive frequency: 10<br/> Dead Peer Detection: no<br/><br/> Phase 2<br/><br/> P2 proposal:<br/> 1-Encryption: AES128, Authentication: SHA1<br/> 2-Encryption: AES128, Authentication: MD5<br/> 3-Encryption: 3DES, Authentication: SHA1<br/> 4-Encryption: 3DES, Authentication: MD5<br/> Enable replay detection: no<br/> Enable perfect forward secrecy (PFS): yes<br/> DH group: 5<br/> Keylife: seconds 3600<br/> Autokey Keep Alive: enable<br/><br/> Quick mode selector:<br/> Source addr: 172.16.0.0/16<br/> Source port: 0<br/> Destination addr: 192.168.0.0/24<br/> Destination port: 0<br/> Protocol: 0<br/><br/><br/> <u>Lưu ý:</u><br/><br/> Trường hợp sau Vigor/Fortigate có nhiều subnet (192.168...., 172...., 10....), muốn cho bao nhiêu subnet vào VPN thì:<br/><br/> -- trên Vigor/Fortigate tạo bấy nhiêu phase 2 (trong một phase 1 duy nhất),<br/><br/> -- trên m0n0 tạo bấy nhiêu VPN profile đầy đủ cả phase 1 lẫn phase 2 nhưng các phase 1 đều giống nhau, kể cả pre-shared key cũng phải trùng nhau; mỗi phase 2 cho 1 local subnet.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30782.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30782/200270.html#200270,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Hôm nay tui moi lại topic cũ này vì vừa tìm được 2 cách khác muốn chia sẻ cùng mọi người.<br/><br/> Vấn đề: Làm sao đổi hướng port từ Draytek Vigor 28xx, 29xx vào một server đặt trong mạng nội bộ không liên thông trực tiếp với Vigor mà liên thông gián tiếp qua một gateway/firewall nữa (G) đứng sau con Vigor.<br/><br/> Giải pháp:<br/><br/> Cách 1 (cũ, đã thảo luận ở trên.) NAT tại Vigor và NAT tại G. Như thế sẽ có 2 lần NAT.<br/><br/> Internet ----- (131.0.0.1) Vigor (.1.1) ---- (.1.2) G (.2.1) ---- (.2.10) server<br/><br/><br/> Cách 2 (mới.) Dùng tính năng True-DMZ của Vigor. Và trên G khai báo IP cho interface ngoài trùng với IP ngoài của Vigor.<br/><br/> Internet ----- (131.0.0.1) Vigor (.1.1) ---- (131.0.0.1) G (.2.1) ---- (.2.10) server<br/> trong đó, tại Vigor chỉ route, không NAT.<br/><br/> Ưu điểm: chuẩn mực, dùng tính năng được hỗ trợ bởi thiết bị.<br/><br/> Nhược điểm: không dùng được nếu có 2 đường truyền Internet và G không hỗ trợ khai báo 2 địa chỉ IP cho 1 interface.<br/><br/><br/><br/> Cách 3 (mới.) Trên Vigor khai báo subnet cho LAN interface bao hàm cả mạng nội bộ liên thông trực tiếp lẫn gián tiếp với Vigor<br/><br/> Internet ===== (131.0.0.1, 132.0.0.2) Vigor (.1.1) ---- (.1.2) G (.2.1) ---- (.2.10) server<br/> trong đó, tại G ta khai báo subnet trong .2.0/24 và subnet ngoài .1.0/24, nhưng tại Vigor ta không khai báo subnet trong .1.0/24 như thường lệ, mà khai báo .0.0/22 (bao gồm .0.0/24, .0.1/24, .0.2/24 và .0.3/24). Nhờ vậy ta lừa được Vigor ngon lành. Tại G chỉ route, không NAT.<br/><br/> Ưu điểm: dùng được khi có 2 đường truyền Internet (131.0.0.1 và 132.0.0.2).<br/><br/> Nhược điểm: không chuẩn mực, rất là bá đạo, sẽ có thể gây trở ngại khác.<br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/31089.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/31089/192004.html#192004,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">bln102 wrote:</cite><br>
<blockquote>Link trực tiếp là static? Linh gián tiếp là shared?&nbsp;
</blockquote><br/> Phải đó.<br/><br/> <p></p>
<cite class="blockquote">bln102 wrote:</cite><br>
<blockquote>Tôi có tìm hiểu một số bản quyền mã nguồn mở. Có phải các giấy phép sau đây là có thể sử dụng để thương mại và chỉnh sửa tùy ý:<br/> - Public domain<br/> - BSD<br/> - MIT<br/> - Apache<br/> - LGPL<br/><br/> Đối với GPL thì khi sử dụng, nếu có chính sửa trong mã thì phải open source nó ra?&nbsp;
</blockquote><br/> Public domain, (Free)BSD, Apache cho phép sửa mã nguồn và phân phối lại bằng giấy phép khác bất kỳ. (Ví dụ, phân phối lại chỉ binary không kèm mã nguồn.) GPL và LGPL thì không cho phép như vậy. Còn MIT thì hình như là không có một license nhất định nào.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/31089.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/31089/191834.html#191834,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">bln102 wrote:</cite><br>
<blockquote>Liệu bán đĩa CD chứa phần mềm QT thì có vi phạm không? &nbsp;
</blockquote><br/> Không sao cả.<br/> <p></p>
<cite class="blockquote">bln102 wrote:</cite><br>
<blockquote>Hiện giờ thì bản quyền trả phí của QT có tác dụng gì? Vì mình thấy LGPL đã có thể thương mại hóa được.&nbsp;
</blockquote><br/> Bác cần mua license nếu viết mã nguồn đóng và link trực tiếp vào QT. Còn nếu bác viết mã nguồn mở hoặc mã nguồn đóng link gián tiếp (dynamic link) thì không cần mua.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/31017.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/31017/191581.html#191581,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">B 0 0 B wrote:</cite><br>
<blockquote>Mình muốn tạo ra các seft sertificate dựa trên các công cụ có sẵn trên windows mà chưa biết làm cách nào? bạn nào có kinh nghiệm việc xây dựng server giúp mình với<br/><br/> Cái này mình thử làm trên linux với mod openssl thì đc với khoảng vài dòng lệnh thôi, mà trên windows tìm ko thấy.<br/><br/> &nbsp;
</blockquote><br/><br/> Bác thử cái <span class="link"> http://ziggurat29.com/PortableApps/xcaportable.htm</span> này xem.<br/><br/> Chú ý khi tạo cert, tham số nào chưa rõ nghĩa thì để mặc định thôi, đừng khai báo linh tinh mà gặp lỗi exception đấy.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30837.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30837/190413.html#190413,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Cảm ơn bác mrro đã động viên và chia xẻ kinh nghiệm. Tôi sẽ tìm hiểu dspam và sẽ ứng dụng nó trong những môi trường thích hợp.<br/><br/> Tôi hiểu và đồng tình với bác ở vài điểm. Không hiểu vài điểm khác.<br/><br/> Về DKIM như một công cụ diệt spam không có khả năng cá nhân hóa cho từng người sử dụng cuối, tôi không hiểu. Là một phương pháp xác thực, DKIM không thể là công cụ diệt spam mà chỉ có thể hỗ trợ các công cụ diệt spam (và chỉ hỗ trợ hiệu quả khi DKIM đã được dùng rộng rãi). DKIM không có khả năng cá nhân hóa cho từng người sử dụng cuối vì nó là một phương pháp xác thực miền. Nhưng khi so sánh với các phương pháp xác thực cá nhân, như chữ ký số SMIME hay PGP, thì tôi không thấy chúng có gì hơn DKIM trong việc hỗ trợ chống spam.<br/><br/> Về con gà và quả trứng, tôi đồng tình. Tôi cũng nghĩ rằng DKIM nếu muốn hỗ trợ chống spam hiệu quả thì trước hết phải được dùng rộng rãi. Rộng rãi đến mức mà khi đó, một miền không DKIM hoặc không có chính sách ký DKIM triệt để sẽ có thể được coi như không đứng đắn, có thể lọc bỏ hoàn toàn.<br/><br/> Về tính tất yếu của spam, tôi đồng tình. Dù cá nhân tôi không thích nhận spam và cũng không spam người khác, nhưng đã làm IT ở các công ty một thời gian tôi cũng thấy nhiều người có suy nghĩ "thoáng" hơn, họ chấp nhận quảng cáo, tin đồn, tin vô thưởng vô phạt, tin không liên quan,... ở mức độ nhất định, và họ cũng dùng e-mail để truyền bá các thông tin loại đó. Tôi chỉ có thể khuyên họ không nên spam quá độ chứ không thể khuyên họ tuyệt đối không spam được. Càng không thể cấm họ được. Đó là một phần của công việc, của business.<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30837.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30837/190229.html#190229,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">THÊM TÍNH NĂNG DKIM<br/> cho Postfix với dkim-milter trên nền FreeBSD<br/><br/><br/> <b>1. DKIM là gì</b><br/><br/> DKIM (DomainKeys Identified Mail) là một phương pháp xác thực e-mail bằng chữ ký số <u>của miền</u> gửi thư, trong đó khóa công khai thường được công bố trên DNS dưới dạng một TXT record.<br/><br/> Khi gửi thư, bộ ký thư sẽ chèn lên đầu thư một trường <u>DKIM-Signature</u> [1] có nội dung đại khái như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=mycompany.com; s=sitec; t=1250425543;
bh=qQxSOEYYHCCISqVJ6pi/vUuNCr0EqMNkRSnD0B0TNFQ=;
h=Message-ID:From:To:Subject: Date:MIME-Version:Content-Type;
b=aiL+F+rqOdVxmR1V0bdfwsVOvMpwv1eMcCrX5I2C6U9CX+mkyepL3t0PwkW8pLSFc
CpJ5NvsBGqgOK4f2h89IubyYMFU0BkqZmtlBFlL+wyximVXLtHxO95WOxJX380tCet
XwofYIOK7tx45K41hG4T7+5ylNSuO1HHMpM/WfOM=</pre>
</div><br/> Trong đó có mọi thông tin cần thiết như phiên bản DKIM (<u>v</u>), thuật toán ký (<u>a</u>), thuật toán chuẩn hóa xâu ký tự đưa đi ký ( <u>c</u> ), tên miền ký (<u>d</u>), tên cặp khóa, hay còn gọi là selector (<u>s</u>), dấu ấn thời gian (<u>t</u>), thời hạn hiệu lực của chữ ký (<u>x</u>), phương thức truy vấn để lấy khóa công khai (<u>q</u>), danh sách các trường của phần đầu thư được ký (<u>h</u>), độ dài phần thân thư được ký (<u>l</u>), giá trị hash của nội dung được ký (<u>bh</u>), và chữ ký (<u>b</u>).<br/><br/> Khi nhận thư, bộ kiểm thư sẽ xác định khóa công khai theo phương pháp <u>q</u> (trong ví dụ trên, vốn dĩ không chỉ rõ <u>q</u>, phương pháp mặc định là truy vấn DNS tìm TXT record có tên là <u>sitec._domainkey.mycompany.com.</u>), dựa vào đó kiểm tra chữ ký rồi chèn kết quả kiểm tra vào trường <u>Authentication-Results</u> [2] của thư. Chẳng hạn, kết quả tốt được viết như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>Authentication-Results: ... dkim=pass header.i=@mycompany.com</pre>
</div><br/> Kết quả này xác thực các trường của phần đầu thư đã kể trong mục <u>h</u> (tức Message-ID, From, To, Subject, Date, MIME-Version và Content-Type trong ví dụ trên) cùng với phần thân thư có độ dài kể trong mục <u>l</u> (tức toàn bộ phần thân thư trong ví dụ trên, vốn dĩ với mục <u>l</u> mặc định).<br/><br/> Trong dây chuyền nộp – chuyển – phát thư, bộ ký thư thường đặt tại sending MTA và bộ kiểm thư thường đặt tại receiving MTA. Khi đó DKIM thực chất chỉ xác nhận thư được bảo toàn trên suốt chặng đường <u>chuyển</u> thư. Việc đảm bảo một lá thư From:alice@mycompany.com chắc chắn thuộc về Alice nằm ngoài trách nhiệm của DKIM.<br/><br/> Ngoài ra, tùy theo chính sách kiểm tra chữ ký DKIM của mình, bộ kiểm thư có thể tìm hiểu chính sách ký DKIM (tức ADSP, Author Domain Signing Practices [3]) của mycompany.com bằng cách truy vấn DNS tìm TXT record tên là <u>_adsp._domainkey.mycompany.com.</u>, căn cứ vào đó (và tùy theo kết quả kiểm tra chữ ký) để quyết định có chấp nhận lá thư hay không.<br/><br/><br/> <b>2. Vì sao, khi nào dùng DKIM</b><br/><br/> Nói một cách vắn tắt, nên dùng DKIM bởi vì một lá thư không có chữ ký DKIM dễ bị hiểu là spam.<br/><br/> DKIM là một phương pháp xác thực chứ không phải là một phương pháp chống spam. Nhưng nó hỗ trợ việc chống spam bởi vì nó đảm bảo thư là thật (địa chỉ người gửi, hay ít nhất tên miền gửi thư là thật) trong khi thực tế đa số spam đều là thư giả mạo (mạo tên người khác, tên miền khác). Với DKIM, <i>ai muốn spam thì cứ thoải mái, nhưng phải spam một cách quang minh chính đại</i>; bạn không thể gửi thư từ một tên miền không thuộc sở hữu của mình được.<br/><br/> Phát triển từ phương pháp <u>DK</u> của Yahoo và phương pháp <u>IM</u> của Cisco, với việc được cơ quan IETF cấp tư cách <u>Standards Track</u>, DKIM đã từ một phương pháp xác thực email trẻ nhất trở thành phương pháp có tiềm năng nhất.<br/><br/> Với việc xác thực nội dung hơn là xác thực phong bì, trong các tình huống mà phong bì thay đổi, chẳng hạn, thư được forward qua một đường chuyển thư phức tạp, DKIM cho những lá thư cơ hội sống sót cao hơn so với các phương pháp xác thực địa chỉ server như là <u>SPF</u> hay <u>SIDF</u>. (Nhưng tất nhiên, trong những tình huống nội dung thay đổi, chẳng hạn qua bộ quét virus, các phương pháp kia có thể cho cơ hội sống sót cao hơn.)<br/><br/> Với việc triển khai trên server hơn là trên client, và không đòi hỏi một hạ tầng khóa công khai phức tạp, DKIM gọn nhẹ hơn so với các phương pháp xác thực từ đầu đến cuối như là S/MIME hay PGP. (Nhưng tất nhiên, ý nghĩa xác thực cũng nhẹ hơn, DKIM không thể thay thế hoàn toàn cho các phương pháp kia.)<br/><br/> Hiện nay DKIM chưa được dùng phổ biến. Thư có chữ ký DKIM chỉ mới thấy chủ yếu từ các ngân hàng, tổ chức tài chính (Paypal, eBay,...) và một số nhà cung cấp email (Google, Yahoo, Hotmail,...).<br/><br/> Vì thế, chính sách dùng DKIM tốt nhất hiện nay là <i>ký triệt để mọi lá thư gửi đi từ miền mình và chỉ từ chối những lá thư không hợp lệ đến từ những miền khác có chính sách ký thư triệt để</i>.<br/><br/> Cơ chế an ninh nào cũng có giá của nó. Việc tạo ra một chữ ký hay kiểm tra một chữ ký tiêu tốn hàng triệu clock cycle. Với DKIM, một server có xung nhịp cỡ GHz sẽ tiêu tốn thêm chừng 1 ms cho mỗi lá thư đến hay đi.<br/><br/><br/> <b>3. Phần mềm</b><br/><br/> Các thành phần chính của mail server gồm<br/> <ul><li>FreeBSD operating system v.7.2 – GENERIC kernel.</li><li> Postfix SMTP server v.2.6.</li><li> Gói milter của sendmail, mặc định được cài đặt sẵn (cùng với sendmail) trong FreeBSD.</li><li> Dkim milter v. 2.8.3 với libdkim 1.0.17.</li></ul><br/><br/><br/> <b>4. Môi trường và cấu hình tổng thể</b><br/><br/> Trên cùng một máy với Postfix đã cài đặt và hoạt động như một sending MTA đồng thời như một receiving MTA, ta sẽ cài đặt dkim-milter và cấu hình nó thành bộ ký thư đồng thời thành bộ kiểm thư, nghĩa là có nhiệm vụ ký các lá thư gửi đi, kiểm tra chữ ký những lá thư nhận được và chặn chúng nếu không hợp lệ.<br/><br/> Trước khi cài đặt dkim-milter, cần có các điều kiện sau.<br/> <ul><li>FreeBSD đã cài đặt và cập nhật những miếng vá mới nhất.</li><li> Ports collection đã cập nhật bản mới nhất.</li><li> Postfix đã cài đặt và hoạt động.</li><li> Firewall cục bộ phải mở một cổng trên lookback interface để qua đó Postfix liên lạc với dkim-milter. Chúng ta sẽ giả sử là cổng 8891 TCP.</li></ul><br/><br/><br/> <b>5. Cài đặt và cấu hình chi tiết</b><br/><br/> 1. Cài đặt libdkim và dkim-milter<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /usr/ports/mail/libdkim
make install clean
cd /usr/ports/mail/dkim-milter
make install clean</pre>
</div><br/><br/> Các chương trình đã cài vào gồm có<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/usr/local/bin/dkim-genkey #chương trình tạo khóa
/usr/local/bin/dkim-testkey #chương trình thử khóa
/usr/local/bin/dkim-testssp
/usr/local/libexec/dkim-filter #chương trình chính
/usr/local/etc/rc.d/milter-dkim #script chạy chương trình chính
/usr/local/share/doc/dkim-milter #tài liệu</pre>
</div><br/><br/> 2. Tạo account dịch vụ, tức là một account không có home và shell, thuộc một group tương ứng cùng tên, chúng ta sẽ đặt tên account này là <u>dkim</u>. Chi tiết của việc này được bỏ qua.<br/><br/> 3. Tạo các thư mục để chứa khóa. Nên đặt tên theo tên miền mail cần xác thực. Chúng ta sẽ giả sử rằng ta có một miền mail cần xác thực là <u>mycompany.com</u>.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>mkdir /etc/mail/dkim
mkdir /etc/mail/dkim/keys
mkdir /etc/mail/dkim/keys/mycompany.com
cd /etc/mail/dkim/keys/mycompany.com</pre>
</div><br/><br/> 4. Tạo một cặp khóa công khai/bí mật cho miền này.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>dkim-genkey -d mycompany.com -s sitec -t</pre>
</div><br/> Trong đó -d (domain) là tên miền mail, -s (selector) là một từ bất kỳ tùy ý, chúng ta đặt là <u>sitec</u>, có tác dụng báo danh cặp khóa, nhờ nó mà có thể tạo ra và dùng đồng thời nhiều cặp khóa cho một miền mail, và -t nói rằng cặp khoá tạo ra dùng để test thử nghiệm; khi làm chính thức thì tạo cặp khoá mới cũng bằng lệnh này nhưng không có tham số -t. Lệnh này sẽ tạo ra trong thư mục hiện thời hai file<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>sitec.private
sitec.txt</pre>
</div><br/> File thứ nhất, <u>sitec.private</u>, chứa khóa bí mật. Ta hãy đổi chủ và phân quyền truy cập nó.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>chown dkim:dkim sitec.private
chmod 600 sitec.private
chown dkim:dkim /etc/mail/dkim/keys/mycompany.com
chmod 700 /etc/mail/dkim/keys/mycompany.com</pre>
</div><br/> File thứ hai, <u>sitec.txt</u>, chứa khóa công khai. File này có nội dung đại khái như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>sitec._domainkey IN TXT "v=DKIM1; g=*; k=rsa;
p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC/tmJXY+kdhPLEIzy8C6Etl+PXlr3zJ8ElX
DUIyT7bBHE9z69igqffuIZ42eXTeJJBXNdrWlO4QBQ6H0knnpIvZid+VwG2GVfO98FT1F4YZGx4Np
plZqebT6YCQLF/T9JGctjsAN197KrCT0ilChgVmekyeT5g8f1iXBWUE4kFXwIDAQAB" ; ----- DKIM sitec for mycompany.com</pre>
</div><br/><br/> 5. Công bố khoá công khai lên DNS bằng cách tạo trong DNS forward lookup zone <u>mycompany.com</u> một TXT record có tên là <u>sitec._domainkey.mycompany.com.</u> và có giá trị là đoạn văn bản <u>v=DKIM1; g=*; k=rsa; p=MIGfM...IDAQAB</u> trong file nói trên. Nếu DNS server của chúng ta là BIND, việc này thực hiện đơn giản bằng cách copy paste toàn bộ nội dung của file trên vào forward lookup zone file; còn nếu là DJBDNS, việc này có thể thực hiện bằng cách copy paste từng phần của file trên vào một trang web có sẵn trên mạng Internet tên là <u>djbdns / tinydns Record Builder</u> (người đọc tự tìm), sau đó copy paste dòng kết quả từ trang web này vào file dữ liệu của DJBDNS.<br/><br/> Ngoài ra, ta hãy công bố chính sách ký lên DNS. Hãy tạo tương tự như trên một TXT record có tên là <u>_adsp._domainkey.mycompany.com.</u> và có giá trị là <u>dkim=all</u> hoặc <u>dkim=discardable</u>; <u>all</u> tuyên bố rằng mọi lá thư của mycompany.com đều được ký, <u>discardable</u> tuyên bố rằng mọi lá thư từ mycompany.com không có chữ ký hợp lệ đều đáng vứt đi.<br/><br/> 6. Sửa file cấu hình của Postfix. Trong file <u>/etc/postfix/main.cf</u> (hoặc /usr/local/etc/postfix/main.cf), viết thêm vài dòng như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>milter_default_action = accept
milter_protocol = 2 # hoặc 3
smtpd_milters = inet:localhost:8891
nonsmtpd_milters = inet:localhost:8891</pre>
</div><br/><br/> 7. Tạo file cấu hình <u>/etc/mail/dkim-filter.conf</u>. Ta có thể sao chép từ cấu hình mẫu /usr/local/etc/mail/dkim-filter.conf.sample rồi sửa đổi vài tham số như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>KeyFile /etc/mail/dkim/keys/mycompany.com/sitec.private
Socket inet:8891@localhost
Domain mycompany.com
Selector sitec</pre>
</div><br/><br/> 8. Sửa file cấu hình boot <u>/etc/rc.cf</u>, viết thêm vài dòng như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>milterdkim_enable="YES"
milterdkim_uid="dkim"
milterdkim_profiles=""
milterdkim_cfgfile="/etc/mail/dkim-filter.conf"</pre>
</div><br/><br/> 9. Khởi động dkim-milter.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/usr/local/etc/rc.d/milter-dkim start</pre>
</div><br/><br/> 10. Khởi động lại Postfix và DNS server.<br/><br/> Nếu mọi bước trên đều làm chính xác, DKIM sẽ hoạt động. Ta có thể thử kiểm tra bằng cách gửi thư đến một địa chỉ chuyên dùng để thử nghiệm DKIM (người đọc tự tìm), hoặc đến một account của bản thân ở gmail.com hay yahoo.com.<br/><br/><br/> <b>6. Các việc nên làm thêm</b><br/><br/> Chúng ta đã cấu hình dkim-milter để ký và kiểm tra chữ ký, nhưng không cản lọc. Ta có thể chỉnh sửa file cấu hình dkim-filter.conf để lọc và cản các thư không có chữ ký DKIM hợp lệ đến từ những miền nhất định (chẳng hạn, những miền có chính sách <u>discardable</u>).<br/><br/><br/> <b>7. Tài liệu tham khảo</b><br/><br/> [1] Allman E. và một số tác giả khác: DomainKeys Identified Mail (DKIM) Signatures. RFC 4871. IETF Standards Track. 2007.<br/> [2] Kucherawy M.: Message Header Field for Indicating Message Authentication Status. RFC 5451. IETF Standards Track. 2009.<br/> [3] Allman E. và một số tác giả khác: DomainKeys Identified Mail (DKIM) Author Domain Signing Practices (ADSP) . RFC 5617. IETF Standards Track. 2009.<br/> [4] Sendmail: FreeBSD man pages: dkim-filter(8), dkim-filter.conf(5), dkim-genkey(8).<br/> [5] Postfix: Postfix before-queue Milter support.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30782.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30782/190023.html#190023,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">rs wrote:</cite><br>
<blockquote>to myquartz, facialz:<br/> <font color='orange'>Con draytek2820 không cho phép wwwect port đến mạng bên trong (10.x.x.x), chỉ wwwect đến 192.168.2.2</font>, phần còn lại là do con R2800 xử lý. Tớ nghĩ hai bạn nhầm chỗ này nên cho rằng không có route vào mạng bên trong?<br/><br/> Host(10.x.x.x) &lt;------&gt; SW &lt;--------&gt; R2800(192.168.2.2)&lt;--------&gt;(192.168.2.1)DrayTek2820<br/> &nbsp;
</blockquote><br/><br/> Một thiết bị cho phép tạo route vào mạng trong mà không cho phép NAT (map port, wwwect port,...) vào mạng trong thì kỳ cục thật... Nhưng thôi, giả sử cái <font color='orange'>đoạn màu cam</font> kia là đúng, tức là con Vigor đó không phù hợp cho cấu trúc mạng của bác. Và bác có 2 lựa chọn:<br/><br/> a. NAT trên Vigor tới Cisco rồi NAT trên Cisco tới PC (cách của bác tmd).<br/><br/> b. Hoặc disable routing trên Vigor và chỉ dùng nó như modem thôi. Còn NAT sẽ thực hiện trên Cisco.<br/><br/> Cách a như thế là NAT hai lần NAT. Tôi đã vài lần bị đau khổ với sơ đồ NAT hai lần kiểu này vì vậy tôi không nghĩ đó có thể là một giải pháp lâu dài. Có thể nó giải quyết vấn đề này cho bác nhưng còn những vấn đề khác sẽ phát sinh thì chưa chắc.<br/><br/> Còn cách b thì tôi không biết có thực hiện được trên các thiết bị của bác không. Tôi chưa làm việc với những thiết bị Vigor và Cisco như của bác lần nào.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30782.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30782/189976.html#189976,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tôi cũng nghĩ giống như bác PXMMRF và myquartz. Chắc chắn routing table của Vigor bị thiếu cái route đi vào mạng trong.<br/><br/> Bác OP thử copy gửi cái routing table lên xem nào.<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30437.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30437/187815.html#187815,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Bác pnco quá khen rồi.<br/><br/> Thật ra, có vài điểm mà tôi vẫn chưa hiểu rõ, vẫn cứ thắc mắc hoài. (Tôi là newbie, mới dùng FreeBSD được khoảng 1/2 năm nay thôi.) Nên tôi gửi bài lên để chia xẻ chút kinh nghiệm nhưng cũng đồng thời để mọi người cho ý kiến chỉ giáo thêm:<br/><br/> - Hai tham số <b>net.inet.ip.forwarding=1</b> trong /etc/sysctl.conf và <b>gateway_enable=”YES”</b> trong /etc/rc.conf có tác dụng như nhau hay là khác nhau? Nếu khác thì khác như thế nào?<br/><br/> - Chế độ diskd (+soft updates) được xem là an toàn hơn aufs. Chúng thật ra hoạt động như thế nào? Khác nhau như thế nào?<br/><br/> - Cứ 1 GB HDD cache thì cần 32 MB RAM để duy trì cache. Con số 32 MB là không thống nhất, có người cho rằng 10 MB và có người khác cho rằng 100 MB. Vậy rút cuộc, bao nhiêu MB mới là đúng?<br/><br/> - Lượng RAM dùng cho squid không nên lớn hơn 50% (hay 100%) lượng RAM của máy. Vì sao 50% (hay 100%) mà không phải là 60% hay 90%?<br/><br/> - FreeBSD tôi chỉ cài đặt phần giao diện text, không cài đặt giao diện đồ họa nào cả. Trong điều kiện đó, nên cài đặt thêm những tiện ích nào để hỗ trợ cho việc quản trị squid?</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/30437.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/30437/187720.html#187720,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">THIẾT LẬP INTERCEPTING WEB CACHE PROXY<br/> với Squid trên nền FreeBSD<br/><br/><br/> <b>1. Intercepting web cache proxy là gì</b><br/><br/> Một <u>proxy</u> là một chương trình mạng hoạt động ở tầng ứng dụng chen ngang vào một loại lưu thông giữa client với server. Proxy chen ngang vào loại lưu thông nào thì sẽ được đặt tên theo loại lưu thông đó, chẳng hạn, DNS proxy, POP3 proxy, FTP proxy, Web proxy, v.v. Vì hoạt động ở tầng ứng dụng, proxy luôn hiểu thấu nội dung của lưu thông và có nhiều tác dụng hỗ trợ lưu thông: kiểm soát truy nhập, giám sát (theo dõi) lưu thông, caching (để tăng hiệu quả khai thác đường truyền). <u>Cache proxy</u> là loại proxy có tác dụng caching. <u>Proxy chặn bắt</u> (intercepting) là proxy có khả năng chặn bắt các gói tin trên đường lưu thông giữa client với server mà không cần sự hợp tác của client – nói cách khác, client không cần biết và không biết đến sự tồn tại của proxy.<br/><br/> Nếu hơn nữa proxy có khả năng chặn bắt không cần sự hợp tác của server thì nó được gọi là <u>proxy trong suốt</u> (transparent). Sở dĩ có tên gọi này vì proxy là trong suốt đối với client và server: cả hai đều không nhìn thấy proxy, client chỉ nhìn thấy server và server chỉ nhìn thấy client. Theo nghĩa này, một proxy chặn bắt có thể được xem như trong suốt <u>một chiều</u>: client nhìn xuyên qua proxy thấy server, nhưng server không nhìn thấy client mà chỉ nhìn thấy proxy.<br/><br/><br/> <b>2. Vì sao, khi nào dùng intercepting web cache proxy</b><br/><br/> Vì hoạt động không cần sự hợp tác của client, một web cache proxy chặn bắt có thể dùng để thực hiện caching mọi lưu thông Web, không phụ thuộc vào chương trình ứng dụng cụ thể tại client: Internet Explorer, Mozilla Firefox, Opera, Safari, Windows Update, Linux Update, F-Secure Antivirus Update,... bất kể ứng dụng nào hễ đã dùng giao thức HTTP là đều đi qua cache cả. Vì vậy, web cache proxy chặn bắt được dùng để áp đặt chính sách web caching.<br/><br/> Có những trường hợp mà proxy chặn bắt không thể dùng được. Ví dụ, khi ta muốn áp đặt chính sách <u>định hình lưu thông</u> (traffic shaping) trên đường truyền Internet lên từng user trong mạng cục bộ của mình. Khi đó, bộ định hình lưu thông, vốn dĩ đặt ở phía ngoài proxy, phải nhận biết chính xác từng client. Với một proxy chặn bắt thì ta không thể nào nhìn xuyên thấu qua nó từ bên ngoài. Khi đó, ta phải dùng đến proxy trong suốt.<br/><br/> Tuy vậy, bản thân Squid, phần mềm web cache proxy mà ta sẽ sử dụng, cũng đã có sẵn một bộ định hình lưu thông web khá ổn. Nhờ vậy ta không cần phải lo ngại về vấn đề định hình lưu thông kể cả khi chạy Squid ở chế độ chặn bắt.<br/><br/><br/> <b>3. Phần mềm và phần cứng</b><br/><br/> Phần mềm được dùng gồm Squid v.3.0 chạy trên nền hệ điều hành FreeBSD v.7.2 – GENERIC kernel. FreeBSD được dùng vì đây là hệ điều hành có network stack và thread scheduler nhanh nhất. Squid được dùng vì đây là phần mềm web cache proxy thông dụng nhất.<br/><br/> Phần cứng, để phục vụ cho 100 – 400 người dùng, cần một máy vi tính PC với 1 NIC, 500 – 2000 MHz CPU, 256 – 1024 MB RAM và 20 – 80 GB HDD.<br/><br/><br/> <b>4. Cấu hình tổng thể</b><br/><br/> Web cache proxy chặn bắt không đặt chen giữa đường truyền Internet mà được đặt ở một nơi bất kỳ trong mạng cục bộ. Một router/firewall chắn ngang đường truyền Internet sẽ được cấu hình để nhận biết mọi lưu thông web và chuyển hướng các lưu thông này sang proxy. Mọi gói tin đổi hướng được truyền nguyên vẹn (không thay đổi) đến proxy bằng WCCP v.2 xuyên qua một GRE tunnel.<br/><br/> Giao thức WCCP v.2 là một kỹ thuật mới của Cisco hỗ trợ hoàn hảo việc đổi hướng IP, tránh được mọi trục trặc và sự cố tắc mạng gây ra bởi các kỹ thuật đổi hướng trước đây. Cấu hình với WCCP này có hai lợi điểm. Thứ nhất, chỉ lưu thông Web phải đi qua proxy còn các lưu thông khác có thể đi thẳng ra Internet, như thế nhanh hơn và ít trở ngại hơn. Thứ hai, nếu vì lý do nào đó mà proxy ngừng hoạt động thì router/firewall sẽ phát hiện được ngay và sẽ cho lưu thông web đi thẳng ra Internet (thay vì đổi hướng sang proxy), nhờ thế mà lưu thông web cũng không bị gián đoạn vì những sự cố proxy nếu có.<br/><br/> Mọi gói tin (web) ra khỏi GRE tunnel ở phía máy proxy sẽ đổ bộ vào interface gre0 của máy này. Firewall pf của máy này sẽ được cấu hình chuyển hướng các gói đó đến cổng 3128 TCP trên loopback interface lo0, nơi Squid sẽ lắng nghe, đón nhận và xử lý.<br/><br/> Như vậy, quy trình cài đặt cấu hình gồm có: cấu hình router/firewall đổi hướng lưu thông web đến máy proxy, cấu hình gre0 interface và GRE tunnel trên máy proxy, cấu hình pf firewall trên máy proxy đổi hướng lưu thông web đến Squid, cài đặt và cấu hình Squid cơ bản để cache bắt đầu hoạt động và cuối cùng, theo dõi hoạt động và tinh chỉnh cấu hình Squid để giảm tiêu thụ tài nguyên, tăng năng lực xử lý.<br/><br/><br/> <b>5. Cấu hình chi tiết</b><br/><br/> Giả sử máy proxy, nơi sẽ cài đặt Squid, có 1 interface duy nhất tên là fxp0 và có địa chỉ IP là 172.16.0.2/24. Trên máy này, FreeBSD phải được cập nhật bản mới nhất và ports collection cũng phải được cập nhật bản mới nhất. (Tuy vậy, ta sẽ sẽ dùng bản mới nhất của Squid v.3.0 chứ không dùng Squid v.3.1.) Máy này phải truy vấn được một DNS server và phải truy cập được Internet.<br/><br/> Giả sử router/firewall chen giữa đường truyền Internet là 1 thiết bị Fortigate firewall với FortiOS firmware v.4, vốn dĩ hỗ trợ giao thức WCCP v.2. Thiết bị này đã có sẵn vài interface, trong đó<br/> <ul><li>U1, U2,..., Un là các interface nối vào các mạng cục bộ của người sử dụng.</li><li> V1, V2,..., Vm là các interface nối vào các đường truyền Internet.</li><li> W là một interface liên thông với cache proxy. W không được trùng với bất cứ Ux, Vy nào. W có địa chỉ IP là 192.168.0.1/24. </li></ul><br/><br/> <u>Chú ý</u><br/> <ul><li>Giao thức WCCP, thiết bị Fortigate và Squid hỗ trợ cả proxy cluster, nhưng trong ví dụ này ta chỉ làm 1 proxy cho đơn giản.</li><li> Trong suốt tài liệu này, từ interface bao hàm cả trường hợp VLAN interface, nhưng không bao hàm trường hợp vlink interface, tức interface ảo kết nối giữa các thiết bị ảo (VDOM) trong một thiết bị Fortigate vật lý. Các vlink interface không cho phép truyền WCCP.</li><li> Trong ví dụ này, hai interface W và fxp0 không cùng subnet, ngụ ý rằng firewall có thể liên thông gián tiếp chứ không nhất thiết phải liên thông trực tiếp với proxy.</li></ul><br/><br/><br/> <b>5.1. Cấu hình Fortigate firewall</b><br/><br/> Ta sẽ cấu hình từ console hay cửa sổ telnet tới Fortigate firewall.<br/><br/> Trước hết, cấu hình WCCP v.2.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>config system wccp
edit 0
set server-list 172.16.0.2 255.255.255.255
next
end</pre>
</div><br/><br/> Tiếp đó, bật WCCP v.2 trên interface W.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>config system interface
edit W
set wccp enable
next
end</pre>
</div><br/><br/> Cuối cùng, bật WCCP v.2 trên các firewall policy cần cache. Ví dụ, nếu muốn cache lưu thông web vào các interface U1, U2 ra interface V3 và biết rằng các firewall policy cho phép lưu thông web từ U1 sang V3, từ U2 sang V3 có số thứ tự (ID) lần lượt là 13 và 23, ta dùng lệnh<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>config firewall policy
edit 13
set wccp enable
next
edit 23
set wccp enable
next
end</pre>
</div><br/><br/><br/> <b>5.2. Cấu hình máy Squid proxy</b><br/><br/> Trước hết, chỉnh tham số FreeBSD kernel để phù hợp với chức năng cache của máy. Chức năng này cũng đòi hỏi máy phải hoạt động như một router (nghĩa là forward IP giữa các interface). Viết thêm vào file /etc/sysctl.conf như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>net.inet.ip.forwarding=1 # Enable IP routing &#40;?&#41;
net.inet.icmp.icmplim=0 # Don't rate limit incoming TCP connections
net.inet.icmp.icmplim_output=0
net.inet.tcp.msl=3000 # Tweak MSL to 30 seconds
net.inet.tcp.recvspace=16384 # Receive TCP window = 16kB
net.inet.tcp.sendspace=16384 # Send TCP window = 16kB
kern.maxfilesperproc=65536 # How many files per process...
kern.maxfiles=262144 # ...and per system?
kern.ipc.maxsockets=131072 # How many sockets?
kern.ipc.somaxconn=1024 # How deep is the incoming queue?
kern.ipc.nmbclusters=32768 # How many mbuf clusters to allow?</pre>
</div><br/><br/> Và viết thêm vào file /etc/rc.conf như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>gateway_enable=”YES” # Enable IP routing &#40;?&#41;</pre>
</div><br/><br/> Thứ hai, chỉnh cấu hình boot để gre0 interface được tự động tạo ra ngay từ khi boot và nhận biết giao thức WCCP v.2. Viết thêm vào file /etc/rc.conf hai dòng như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>ifconfig_gre0=“inet 10.0.0.2/32 10.0.0.1 link0 link2 \
tunnel 172.16.0.2 192.168.0.1 up“
cloned_interfaces=”gre0”</pre>
</div><br/><br/> Trong đó 10.0.0.2 và 10.0.0.1 là hai địa chỉ IP đặt ra tùy ý cho hai đầu GRE tunnel. Phía Squid được đặt địa chỉ là là .0.2 còn phía Fortigate được đặt là .0.1. Đặc tả inet 10.0.0.2/32 10.0.0.1 có thể viết là inet 10.0.0.2 10.0.0.1 netmask 255.255.255.255. Subnet /32 có thể thay bằng /30 hoặc thậm chí /24.<br/><br/> Thứ ba, bật pf firewall và cấu hình cho nó chuyển hướng các gói tin (web) từ gre0 interface đến cổng 3128 TCP trên loopback interface. Trong file /etc/rc.conf, viết thêm<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>pf_enable=”YES”
pf_rules=”/etc/pf.conf”
pf_flags=””
pflog_enable=”YES”
pflog_logfile=”/var/log/pflog”
pflog_flags=””</pre>
</div><br/><br/> rồi tạo file bộ luật lưu thông /etc/pf.conf, ở dạng đơn giản nhất, như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rdr on gre0 inet proto tcp from any to any port www-&gt;127.0.0.1 port 3128
pass all
pass in on fxp0 inet proto tcp from any to 127.0.0.1 port 3128 keep state
pass out on fxp0 inet proto tcp from any to any port www keep state</pre>
</div><br/><br/> <u>Chú ý</u><br/> <ul><li>Luật pass all chỉ là luật tạm, sau này nên bỏ đi và thay thế bằng các luật kiểm soát truy nhập khác chặt chẽ hơn. Đổi hướng không có nghĩa là cho phép, nên luật thứ ba (cho phép đi vào cổng 3128 của loopback interface) là cần thiết. Tuy nhiên luật này chỉ thật sự có tác dụng khi ta loại bỏ luật pass all.</li><li> Ta có thể nạp lại bộ luật lưu thông và khởi động lại firewall pf mà không cần phải reboot bằng câu lệnh</li></ul><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/sbin/pfctl -nf /etc/pf.conf && /etc/rc.d/pf reload</pre>
</div><br/><br/> Thứ tư, biên dịch, cài đặt và cấu hình Squid cơ bản. Từ root shell lần lượt gõ các lệnh như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cd /usr/ports/www/squid30
make config # cấu hình biên dịch
make # biên dịch
make install # cài đặt
make clean # dọn dẹp thư mục tạm
squid -z # khởi tạo cache</pre>
</div><br/><br/> File cấu hình hoạt động của Squid là /usr/local/etc/squid/squid.conf. Trong file này, tìm và sửa hai tham số http_port và wccp2_router như sau.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>http_port 127.0.0.1:3128 transparent
wccp2_router 192.168.0.1</pre>
</div><br/><br/> Trong file /etc/rc.conf, viết thêm 1 dòng cho phép squid khởi động ngay từ khi boot.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>squid_enable=”YES”</pre>
</div><br/><br/> Sau khi reboot, nếu các bước trên đều làm chính xác, web cache proxy sẽ bắt đầu hoạt động.<br/><br/> <u>Chú ý</u><br/> <ul><li>Khi cấu hình biên dịch ta phải chọn WCCP v.2 (bỏ chọn WCCP v.1) và chọn enable pf transparent. Ngoài ra nên chọn enable diskd/aufs, enable delay pools, enable removal policies, những hỗ trợ rất có ích cho việc tinh chỉnh cấu hình Squid sau này.</li><li> Các lệnh để khởi động, dừng và khởi động lại squid mà không cần reboot là</li><li> <span class="quotetxt"><b>Code:</b></span></li><li>
<div class="coded"">
<pre>/usr/local/etc/rc.d/squid &#91;start|stop|restart&#93;</pre>
</div></li><li> Lệnh để kiểm tra file cấu hình Squid</li><li> <span class="quotetxt"><b>Code:</b></span></li><li>
<div class="coded"">
<pre>squid -f /usr/local/etc/squid/squid.conf -k parse</pre>
</div></li><li> Vài lệnh thường dùng để kiểm tra rằng cache proxy hoạt động.</li><li> <span class="quotetxt"><b>Code:</b></span></li><li>
<div class="coded"">
<pre>netstat -i # có lưu thông trên các interface hay không?
tcpdump -n -i gre0 # có lưu thông trên gre0 hay không?
tcpdump port 80 # có lưu thông web hay không?
ps -aux | grep squid # squid có chạy hay không?
dmesg # xem log hệ thống
pftop # xem tình trạng firewall pf</pre>
</div></li><li> Vài lệnh thường dùng để kiểm tra rằng cache proxy hoạt động bình thường, không quá tải, không bị nghẽn cổ chai.</li><li> <span class="quotetxt"><b>Code:</b></span></li><li>
<div class="coded"">
<pre>squidclient mgr:info # xem tình trạng cache
uptime # xem tải
top # xem tổng hợp tình trạng hệ thống</pre>
</div></li><li> Squid log vào các file /usr/local/squid/logs. Trong các log file, access.log chứa đặc biệt nhiều thông tin giúp cho việc gỡ rối.</li></ul><br/><br/> Cuối cùng, sau khi Squid đã bắt đầu hoạt động, ta cần phải hoàn thiện cấu hình để tăng hiệu quả và giảm tải. Dưới đây là vài tham số cấu hình đã được chỉnh theo các giá trị được xem là tối ưu cho máy có 1 GB RAM và 72 GB HDD.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>cache_replacement_policy heap LFUDA # thuật toán cache đĩa
memory_replacement_policy heap GDSF # thuật toán cache RAM
cache_swap_low 90
cache_swap_high 95
maximum_object_size_in_memory 32 KB # file lớn nhất có thể RAM cache
cache_dir aufs /usr/local/squid/cache 30000 16 256
# I/O không đồng bộ và
# cache tối đa 30000 MB
cache_mem 80 MB # lượng bộ nhớ bổ sung
memory_pools off
maximum_object_size 1000 MB # file lớn nhất có thể cache
quick_abort_min 0 KB
quick_abort_max 0 KB
log_icp_queries off
client_db off
buffered_logs on
half_closed_client off</pre>
</div><br/><br/> <u>Chú ý</u><br/> <ul><li>Các thuật toán <u>heap LFUDA</u> và <u>heap GDSF</u> làm tăng hiệu quả cache lên rất nhiều lần so với thuật toán LRU mặc định.</li><li> Chế độ <u>aufs</u>, HDD I/O không đồng bộ với xử lý đa luồng, cũng làm tăng tốc độ truy xuất HDD lên nhiều lần so với chế độ ufs mặc định; aufs nguyên thủy được lập trình trên Linux nhưng trên các phiên bản mới của FreeBSD chạy cũng rất tốt.</li><li> Một chế độ non-blocking HDD I/O khác, hoàn toàn FreeBSD, là chế độ <u>diskd</u>. Khi dùng chế độ này, nên kết hợp với soft updates (mặc định bật sẵn khi cài đặt, xem tài liệu FreeBSD manual) để đạt được hiệu quả tối đa. Chế độ diskd + soft updates bảo toàn dữ liệu tốt hơn chế độ aufs trước các sự cố mất điện.</li><li> Độ lớn cache_dir bao nhiêu là tối ưu còn tùy thuộc vào kích thước RAM của máy. Cứ 1 GB HDD cache thì cần 32 MB RAM để duy trì cache. (Con số 32 MB là không thống nhất, có người cho rằng 10 MB và có người khác cho rằng 100 MB.) Lượng RAM đòi hỏi bởi Squid không nên lớn hơn 50% (có người đưa ra con số 100%) lượng RAM của máy. Do đó cache_dir nên thỏa</li><li> <span class="quotetxt"><b>Code:</b></span></li><li>
<div class="coded"">
<pre>độ lớn cache_dir * 32/1024 + cache_mem + 20 = 0.5 * lượng RAM của máy &#91;MB&#93;</pre>
</div></li><li> Trong đó, vế trái chính là lượng RAM yêu cầu cho Squid. Nếu cache_dir làm vế trái lớn hơn kích thước bộ nhớ RAM của máy thì bộ nhớ ảo sẽ bắt đầu swap, khiến cache chậm lại.</li><li> Ngoài ra, độ lớn cache_dir còn tùy thuộc vào dung lượng HDD. Cache_dir không nên lớn hơn 50% dung lượng HDD. (Con số này cũng không thống nhất, một số người cho rằng 60%, số khác 70% và một số khác nữa kể cả tác giả của squid.conf cho rằng 80%.)</li><li> Maximum_object_size (kích thước đối tượng lớn nhất cho phép cache) bao nhiêu là tối ưu tùy thuộc dung lượng cache. Nói chung, khi đã dùng cache_replacement_policy là một dạng heap nào đó, dùng maximum_object_size thật lớn thì sẽ hiệu quả hơn.</li><li> Giữa maximum_object_size_in_memory và dung lượng RAM cũng có mối liên quan tương tự như thế.</li><li> Khi thay đổi giá trị các tham số của cache, phải chờ một thời gian để nội dung cache thay đổi được một cách đáng kể thì mới thấy tác dụng.</li><li> Mặc định, Squid cache vào vào các thư mục con trong /usr/local/squid/cache. Nếu có nhiều HDD, nên dành riêng HDD cho cache để cải thiện năng lực xử lý. Và HDD nên format bằng một file system có khả năng xử lý tốt rất nhiều file nhỏ.</li></ul><br/><br/><br/> <b>6. Các việc nên làm thêm</b><br/><br/> Sau khi đã cài đặt, cấu hình để Squid chạy chúng ta nên xem xét làm thêm một số việc như sau.<br/> <ul><li>Điều chỉnh lại bộ luật firwall pf.conf, chỉnh lại cấu hình squid.conf để thêm an ninh.</li><li> Thiết đặt delay_pools để định hình lưu thông Web ngay trong Squid.</li><li> Sử dụng module quản trị squid trong Webmin và vài phần mềm phân tích log khác (chẳng hạn Calamaris) để lấy số liệu thống kê, trên cơ sở đó tiếp tục chỉnh cấu hình.</li><li> Cài đặt một số tiện ích khác để hỗ trợ cho việc quản trị Squid.</li></ul><br/><br/><br/> <b>7. Tài liệu tham khảo</b><br/><br/> [1] Fortinet: FortiGate Administration Guide<br/> [2] squid team: Configuring Transparent Interception with FreeBSD and WCCPv2<br/> [3] Deckle: New Squid User Guide<br/> [4] ViSolve: Squid 3.0 Configuration Manual<br/> [5] Duane Wessels: Squid - The Deffinitive Guide<br/> [6] FreeBSD: Kernel Interface Manual - gre(4)<br/> [7] nofee: Setting up Squid in FreeBSD<br/> [8] tony: Squid Optimization Guide<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/26011.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/26011/157864.html#157864,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">moonlight_farewell wrote:</cite><br>
<blockquote><p></p>
<cite class="blockquote">quỷ lệ wrote:</cite><br>
<blockquote><p></p>
<cite class="blockquote">moonlight_farewell wrote:</cite><br>
<blockquote>Ví dụ địa chỉ 10.243.100.56 là một địa chỉ IP lớp A vì octet đầu được biểu diễn dưới dạng nhị phân thành 00001010. Bit đầu tiên là 0 nên địa chỉ đó thuộc về lớp A.<br/><br/> Hic,em mù tịt cái này ,mong các bác giải thích dùm !&nbsp;
</blockquote><br/> Theo qui định lớp A từ 1--&gt; 126, lớp B từ 128--&gt;191, lớp C từ 192--&gt;223<br/> Đổi sang nhị phân lớp A bắt đầu là 0, lớp B bất đầu là 10, lớp C bắt đầu là 110<br/> &nbsp;
</blockquote><br/> Hic em biết các lớp IP là vậy,nhưng chia làm sao mà octet đầu tiên của 10.243.100.56 lại ra 00001010 . Giúp em với&nbsp;
</blockquote><br/><br/> Bạn cần phải tìm hiểu:<br/> 1. Octet là gì.<br/> 2. Đâu là octet đầu tiên của một địa chỉ IP được viết ở dạng thập phân.<br/> 3. Cách dùng calculator để đổi cơ số.<br/><br/> Hiểu xong 3 vấn đề trên thì sẽ tự giải thích được thôi.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/25500.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/25500/154791.html#154791,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Không chỉ FPT cung cấp dịch vụ cáp quang, VNPT cũng có. Ai ở TP HCM có thể liên hệ với công ty điện thoại (Đông, Tây) để hỏi chi tiết.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/25360.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/25360/153487.html#153487,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">bachduong051 wrote:</cite><br>
<blockquote>Xin chào anh em trong HVA!<br/> Mình vừa nhập môn môn Mạng có vấn đề xin anh em chỉ giáo giùm!<br/> Mình có một phòng gồm 20 máy.Mình muốn thành lập một mạng máy chủ và máy trạm trong phòng này.Có thể cài Win server 2003 cho các máy(hoặc Xp cũng được).Vấn đề mình cần hỏi như sau,mong anh e chỉ giáo để mình hình dung rõ cách thiết lập mạng cho phòng máy này:<br/> 1.Làm thế nào để thiết lập phân biệt giữa máy trạm và máy chủ.Máy chủ sẽ quản lí mọi tài nguyên,mỗi máy trạm sẽ cung cấp cho mỗi thành viên một user đăng nhập .Và tất nhiên mỗi user đó khi đăng nhập sẽ sử dụng đựoc tài nguyên chung của mạng do administrator quy định,ma không đựoc phép chỉnh sữa nó.<br/> 2.Với một lượng user lớn (vài chục người chẳng hạn)thì làm thế nào để creat toàn bộ user đó một cách nhanh nhất.<br/> Mình vừa nhập môn winserver 2003.Và thử creat dạng quản lí đó(tức là thành lập các user trong một group và login các user )nhưng chỉ làm trên một máy thôi.Còn nhiều máy với nhau thì mình vẫn chưa hình dung ra cách làm thế nào.<br/> Anh em chỉ giáo cho người mới nhập môn nhé!<br/> Thanks nhìu!Xin chỉ giáo!&nbsp;
</blockquote><br/><br/> Bác nên dùng mô hình domain thay vì workgroup. Khi đó chỉ cần tạo mỗi user một account thôi còn bao nhiêu máy trạm, bao nhiêu máy chủ cũng mặc.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/24309.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/24309/146786.html#146786,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tui nghĩ thế này:<br/> <p></p>
<cite class="blockquote">sunrise_vn wrote:</cite><br>
<blockquote><br/> Thứ nhất: Sự khác biệt giửa SDK và trình biên dich ra HĐH là gì?<br/> Thứ hai: Giả sử đã viết ra được HĐH rồi vậy SDK cho nó dùng cái gì để viết?<br/> Thứ ba: Có sự khác biệt như thế nào giửa SDK và trình biên dich ra HĐH?<br/> &nbsp;
</blockquote><br/> Trình biên dịch để biên dịch, còn SDK bao gồm các công cụ hỗ trợ khác.<br/><br/> <p></p>
<cite class="blockquote">sunrise_vn wrote:</cite><br>
<blockquote>Thứ tư: Ngày xưa khi mới chế tạo ra được máy tính, lúc đó ko có HĐH hay ngôn ngữ lập trình gì hết vậy làm sao mà dùng máy?&nbsp;
</blockquote><br/> H Đ H có thì tốt, nhưng không nhất thiết phải có mới được. Có bộ xử lí tức là có ngôn ngữ máy, có thể lập trình được rồi.<br/><br/> <p></p>
<cite class="blockquote">sunrise_vn wrote:</cite><br>
<blockquote>Đục như thế nào nhỉ? Rồi nguyên vật liệu là gì? &nbsp;
</blockquote><br/> Đục bằng 1 cái máy giống như máy chữ. Vật liệu là những tấm bìa có nhiều hàng nhiều cột. Mỗi cột nhiều ô, mỗi ô là 1 bit, không đục là 0, đục là 1. Như thế mỗi cột viết 1 kí tự, mỗi bìa dùng để viết 1 dòng (lệnh hay số liệu). Nếu lỡ tay làm rớt tập bìa thì file chương trình hay số liệu sẽ bị xáo trộn lộn tùng phèo. <img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom"> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/24194.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/24194/146039.html#146039,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">Tic.Tac wrote:</cite><br>
<blockquote>ngắn gọn là vầy, nhà mình có 2 máy, 1 máy đang sử dụng cước trọn gói megaYOU của FPT, 1 máy ko lên net dc, bây h mình muốn cả 2 máy đều có thể kết nối adsl dưới tài khoản của mình <b>nhưng</b> ko sử dụng mạng nội bộ, nói trắng ra là do máy đang sử dụng adsl dc dat trong phòng kín, đi dây âm tường nên ko thể đi dây đến máy kia <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"> (chẳng lẽ khoan tường để nối dây, nhà mới xây mới ngu chứ <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"> ), ko bik còn cách nào ko nữa <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"> , mình cũng đã tham khảo qua việc lắp đặt thiết bị wireless nhưng ko bik là sử dụng loại này có đảm bảo tốc độ hay ko, vả lại 2 máy cách nhau khá là xa ( 20m <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"> ), mong mọi ng` cho ý kiến<br/><br/> thx for reading <img src="/hvaonline/images/smilies/bde7cf9049e122a728d29f2213bb2b67.gif" border="0" alt="smilie" align="absbottom"> &nbsp;
</blockquote><br/><br/> Muốn có thêm 1 máy tính nối mạng Internet thì cách dễ nhất là dùng mạng nội bộ. Nếu trong cùng 1 tầng lầu và không cách nhau quá nhiều bức tường, thiết bị wireless đảm bảo tốc độ đủ để dùng Internet.<br/><br/> Để có thêm 1 kết nối ADSL bác không thể dùng lại tài khoản vì 1 tài khoản chỉ cho phép 1 kết nối ADSL. Bác cần đăng ký tài khoản khác.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23998.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23998/144774.html#144774,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tưởng trong sơ đồ này, một trong hai DHCP server sẽ tự động rút lui (không khởi động) chứ nhỉ.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23881.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23881/144573.html#144573,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">seraphpl wrote:</cite><br>
<blockquote>hêhê, tui ghi<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>plaintext+key+f&#40;&#41; = ciphertext &#40;Với f&#40;&#41; là một hàm để mã hóa&#41;</pre>
</div><br/><br/> nghĩa là dùng hàm f() rồi xào nấu cái key với cái plaintext thế nào đó để ra ciphertext &nbsp;
</blockquote><br/><br/> Hì hì, bây giờ thì rõ rồi.<br/><br/> Nếu định diễn đạt rằng bác định "xào nấu cái key với plaintext thế nào đó để ra ciphertext", bác đừng viết như thế kia. Hãy viết thế này<br/><br/> f( plaintext, key) == ciphertext<br/><br/> hoặc thế này<br/><br/> f( plaintext, key, ciphertext) == 0.<br/><br/> Chỉ là phương trình tượng trưng, ký hiệu tượng trưng, nhưng nếu viết không chính xác thì sẽ gây hiểu lầm.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23881.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23881/144467.html#144467,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Bác seraphl, tui cũng sẽ noi gương bác, cắt bỏ hết những đoạn trên. Đã nói hết ý của mình, tranh luận cũng không còn gì mới.<br/> <p></p>
<cite class="blockquote">seraphpl wrote:</cite><br>
<blockquote><p></p>
<cite class="blockquote">facialz wrote:</cite><br>
<blockquote><p></p>
<cite class="blockquote">seraphpl wrote:</cite><br>
<blockquote>Và tui nghĩ là<br/> plaintext+key+f() = ciphertext (Với f() là một hàm để mã hóa)&nbsp;
</blockquote><br/> Kẻ tấn công biết hàm f. Và f không có đối số thì chỉ là một hằng số. Và nếu giả sử f có đối số mà đối số ấy không phải là key thì kẻ tấn công cũng biết luôn đối số này. Hi vọng bác đã tính đến những điều đó khi phát biểu ý nghĩ trên.&nbsp;
</blockquote><br/><br/> Tại sao kẻ tấn công biết hàm f()?<br/> Cái f() ở bài trước là tui chỉ giả sử đơn giản thôi, còn lại thì có muôn vàn cách để làm ra f(),<br/> Tui đâu có pâhn tích gì cái f(). Tui chưa hiểu rõ ràng ý của bạn về phần này?&nbsp;
</blockquote><br/><br/> Tui đã đề cập 1 lần trước đây. Kẻ tấn công chỉ không biết toàn bộ key, còn lại biết tuốt.<br/><br/> Đây là giả thiết mẫu mực và duy nhất được xét khi sơ bộ tiếp xúc với một thuật toán. Tui không nhớ rõ lắm nhưng chắc chắn đây là một nguyên lý có tên hẳn hoi (hình như là Kirhoff hay Bishop gì đó).<br/><br/> Thực tế, kẻ tấn công có thể biết hay không biết điều này điều nọ. Cho nên an toàn nhất là giả sử hắn biết tuốt mọi điều (ngoại trừ toàn bộ key). Nếu thuật toán của bác an toàn trong giả thiết này, nó sẽ càng an toàn hơn khi có vài tham số nào đó hắn không biết.<br/><br/> Bởi vậy, tui thích công thức trước đây của bác hơn:<br/><br/> plaintext[ i ] ^ ciphertext[ i ] ^ key[ f(i) ] == 0 (1)<br/><br/> Và cũng bởi vậy, tui nghĩ công thức mới của bác nên sửa như thế này thì hợp lý hơn<br/><br/> plaintext + ciphertext + f(key) == 0 (2)<br/><br/> Có thể (1) không an toàn, nhưng vì là trường hợp riêng của (2), nó vẫn là hướng đi có lý để dẫn tới một thuật toán an toàn, có dạng (2).<br/><br/> (Cảnh báo: cả 2 công thức trên đều lạc đề. Đề bài là ciphertext ^ plaintext ^ key == 0.)</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
				
        <!-- END OF POST LISTING -->
			
				

			
      </table>
		
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>					
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						&nbsp;
						</span>
					</td>

					<td valign="middle" align="right">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
						<a href="/hvaonline/posts/listByUser/75472.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_first_page.gif" width="8" height="9" alt="First Page" title="First Page"/>
						</a>
							<a href="/hvaonline/posts/listByUser/0/75472.html">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_prev_page.gif" width="5" height="9" alt="Page 1" title="Page 1"/>
							</a>
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/listByUser/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/75472' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" >1</option>	
								<option value="2" selected="selected">2</option>	
								<option value="3" >3</option>	
								<option value="4" >4</option>	
								<option value="5" >5</option>	
								<option value="6" >6</option>	
								<option value="7" >7</option>	
						</select>
						
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/60/75472.html">3</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/90/75472.html">4</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/120/75472.html">5</a></span>
								<a href="/hvaonline/posts/listByUser/150/75472.html">
									<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 6" title="Page 6"/>
								</a>
						
						<a href="/hvaonline/posts/listByUser/180/75472.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (7)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
				</tr>
				
				<tr>
					<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
				</tr>			
			</table>
		</td>
	</tr>
</table>


	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
