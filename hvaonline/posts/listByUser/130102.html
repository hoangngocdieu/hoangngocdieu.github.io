<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Messages posted by charming, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Messages posted by charming - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="" title="[Logo]">
								<img src="/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<script type="text/javascript" src="/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript">
<!--

function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}

-->
</script>

<table cellspacing="0" cellpadding="10" width="98%" align="center" border="0">
	<tr>
		<td class="bodyline">
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					<td valign="middle" align="left" colspan="2">
						<span class="maintitle"><a href="/hvaonline/posts/listByUser/130102.html" name="top" class="maintitle" id="top">Messages posted by: charming</a></span>
						&nbsp;<a href="/hvaonline/rss/showPostsByUser/130102.html"><img src="/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML" /></a>
					</td>
				</tr>
			</table>
			
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						<a href="/hvaonline/user/profile/130102.html">Profile for charming</a> 
            			<img src="/hvaonline/templates/viet/images/en_US/arrow.gif"><a href="/hvaonline/posts/listByUser/130102.html">Messages posted by charming</a>
						</span>
					</td>
										
					<td valign="middle" align="right">
						<span class="nav">[ number of posts not being displayed on this page: <span class="moderator">0</span> ]</span>
					</td>
				</tr>
			</table>

			
      <table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
        <tr>
          <th height="26" nowrap="nowrap" class="thleft">&nbsp;</th>
        </tr>

				
        <!-- POST LISTING -->
         
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9669.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9669/56376.html#56376,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã cấu hình cho dịch vụ kerberos nhưng chưa bao giờ mình dùng sasl xác thực openldap qua kerberos. Bro có thể nói cho mình biết ưu điểm và khuyết điểm của sasl xác thực openldap qua kerberos được ko? </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9669.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9669/56278.html#56278,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Mình không có dùng sasl xác thực openldap qua kerberos đâu pnco. Mình chỉ dùng loại mã hóa digest-md5 cho sasl của ldap thôi.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8411.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8411/56193.html#56193,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Cán ơn bro bây giờ mình đã gửi và nhận mail ở bên ngoài được rồi. Thank. Để lần khác mình thử dùng Qmail.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55798.html#55798,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Cảm ơn bạn, bây giờ mình đã hiểu. ^_^</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9669.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9669/55666.html#55666,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Hiện giờ mình đang làm sasl của ldap, nhưng nó bị lỗi.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@localhost openldap&#93;#vi slapd.conf
include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema
allow bind_v2
loglevel -1
pidfile /var/run/openldap/slapd.pid
argsfile /var/run/openldap/slapd.args
password-hash {CRYPT}
access to *
by * read
database bdb
suffix "dc=vt04a,dc=com"
rootdn "cn=Manager,dc=vt04a,dc=com"
rootpw {CRYPT}frZ2fNLLQyOMY
sasl-regexp uid=*,cn=mail.vt04a.com,cn=DIGEST-MD5,cn=auth uid=$1,ou=Server,dc=vt04a,dc=com
directory /var/lib/ldap
index objectClass eq,pres
index ou,cn,mail,surname,givenname eq,pres,sub
index uidNumber,gidNumber,loginShell eq,pres
index uid,memberUid eq,pres,sub
index nisMapName,nisMapEntry eq,pres,sub
&#91;root@localhost openldap&#93;# vi ldap.conf
BASE dc=vt04a,dc=com
HOST 192.168.1.5
URI ldap://mail.vt04a.com
&#91;root@localhost openldap&#93;# vi base.ldif
dn: dc=vt04a,dc=com
objectClass: top
objectClass: domain
domainComponent: vt04a
dn: cn=Manager,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalRole
cn: Manager
dn: ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Server
dn: ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Client
dn: uid=dovecot,ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: dovecot
sn: dovecot
uid: dovecot
uidNumber: 301
gidNumber: 300
homeDirectory: /home/dovecot
userPassword: {CRYPT}frj6CQnOtzq3.
mail: &lt;a href="mailto:dovecot@vt04a.com"&gt;dovecot@vt04a.com&lt;/a&gt;
ou: Server
dn: uid=trang,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: trang
sn: xuan trang
uid: trang
uidNumber: 302
gidNumber: 300
homeDirectory: /home/trang
userPassword: {CRYPT}frdadNSivpzlo
mail: &lt;a href="mailto:trang@vt04a.com"&gt;trang@vt04a.com&lt;/a&gt;
ou: Client
dn: uid=quynh,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: quynh
sn: ngoc quynh
uid: quynh
uidNumber: 303
gidNumber: 300
homeDirectory: /home/quynh
userPassword: {CRYPT}frI1Fun0wizMI
mail: &lt;a href="mailto:quynh@vt04a.com"&gt;quynh@vt04a.com&lt;/a&gt;
ou: Client
&#91;root@localhost openldap&#93;# sasldblistusers2
&lt;a href="mailto:dovecot@mail.vt04a.com"&gt;dovecot@mail.vt04a.com&lt;/a&gt;: userPassword
&#91;root@localhost ~&#93;# ldapsearch -U &lt;a href="mailto:dovecot@mail.vt04a.com"&gt;dovecot@mail.vt04a.com&lt;/a&gt; -b 'uid=quynh,ou=Client,dc=vt04a,dc=com' '&#40;objectClass=*&#41;'
ldap_sasl_interactive_bind_s: No such attribute &#40;16&#41;</pre>
</div><br/> Mình ko hiểu rõ về sasl_regexp trong file sldap.conf, sasl-regexp uid=*,cn=mail.vt04a.com,cn=DIGEST-MD5,cn=auth uid=$1,ou=Server,dc=vt04a,dc=com, không biết mình ghi như vậy có đúng ko. Cấu trúc của sasl_regexp như sau: uid=&lt;username&gt;,cn=&lt;realm&gt;,cn=&lt;mech&gt;,cn=auth , với cn=&lt;realm&gt; là domain của mình phải ko? </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55664.html#55664,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">nil wrote:</cite><br>
<blockquote><br/> Ý bạn là <b>binddn=rootdn</b> và <b>credentials=rootpw</b>, bạn chắc chứ? Giả sử mình dùng một user khác rootdn <font color='orange'>có quyền ghi</font> lên cơ sở dữ liệu LDAP thì sao? <b>uid=trang,ou=Client,dc=vt04a,dc=com</b> chẳng hạn?<br/> &nbsp;
</blockquote><br/> Vậy tóm lại là credentials=rootdn_slave_password. ban đầu mình đọc tài liệu,nó chỉ nói là credentials là passwd để master truyền database cho slave, nhưng khi ấy mình đọc hoài mà ko thấy nó nói về credentials là passwd do mình tự cho hay là phải cùng passwd với rootpw master hoặc slave. Cám ơn bạn nhờ bạn mà mình đã hiểu được vấn đề. Cảm ơn vì sự nhiệt tình của mọi người.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55613.html#55613,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã làm được rồi. Đúng như lời bạn nói, đó là do Master xác thực ko thành công với slave.<br/> Mình đã chỉnh file slapd.conf trong master:<br/> replica host=ldapslave.vt04a.com:389<br/> binddn="cn=Manager,dc=vt04a,dc=com"<br/> bindmethod=simple credentials=123456789<br/><br/> Ban đầu mình cứ tưởng là credentials cho thế nào cũng được nên mình cho credentials=123456, bây giờ mình đã hiểu là credentials phải có cùng password với rootpasswd. Nhưng mà credentials phải có cùng password với rootpasswd của Master hay Slave hay là cả Master và slave. Cám ơn mọi người rất nhiều. ^_^. Bây giờ mình sẽ làm sasl và tls cho ldap. Mong mọi người giúp đỡ. </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55602.html#55602,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Vậy mình phải làm sao đây, mình đã tắt iptables rồi.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55535.html#55535,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã làm như hướng dẫn của bạn.<br/> Đối với ldap master:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail ~&#93;# tail -f /var/lib/ldap/replog
replica: 192.168.1.6:389
time: 1176889901
dn: cn=Manager,dc=vt04a,dc=com
changetype: delete
tail: /var/lib/ldap/replog: file truncated
replica: 192.168.1.6:389
time: 1176889916
dn: dc=vt04a,dc=com
changetype: delete
tail: /var/lib/ldap/replog: file truncated
replica: 192.168.1.6:389
time: 1176889954
dn: dc=vt04a,dc=com
changetype: add
objectClass: top
objectClass: domain
dc: vt04a
structuralObjectClass: domain
entryUUID: 46d26226-81de-102b-954c-ed3fbd031f5d
creatorsName: cn=Manager,dc=vt04a,dc=com
createTimestamp: 20070418095234Z
entryCSN: 20070418095234Z#000000#00#000000
modifiersName: cn=Manager,dc=vt04a,dc=com
modifyTimestamp: 20070418095234Z
replica: 192.168.1.6:389
time: 1176889955
dn: cn=Manager,dc=vt04a,dc=com
changetype: add
objectClass: top
objectClass: organizationalRole
cn: Manager
structuralObjectClass: organizationalRole
entryUUID: 474213a0-81de-102b-954d-ed3fbd031f5d
creatorsName: cn=Manager,dc=vt04a,dc=com
createTimestamp: 20070418095235Z
entryCSN: 20070418095235Z#000000#00#000000
modifiersName: cn=Manager,dc=vt04a,dc=com
modifyTimestamp: 20070418095235Z
tail: /var/lib/ldap/replog: file truncated
&#91;root@mail ~&#93;# tail -f /var/log/ldap
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: activity on 1 descriptor
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: activity on:
Apr 18 16:28:03 mail slapd&#91;2430&#93;:
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 16:28:03 mail slapd&#91;2430&#93;: conn=16 op=3 UNBIND
Apr 18 16:28:03 mail slapd&#91;2430&#93;: daemon: removing 12
Apr 18 16:28:03 mail slapd&#91;2430&#93;: conn=16 fd=12 closed
Apr 18 16:50:13 mail slapd&#91;2430&#93;: daemon: activity on 1 descriptor
Apr 18 16:50:13 mail slapd&#91;2430&#93;: daemon: activity on:
Apr 18 16:50:13 mail slapd&#91;2430&#93;:
Apr 18 16:50:13 mail slapd&#91;2430&#93;: daemon: listen=8, new connection on 12
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: added 12r
Apr 18 16:50:14 mail slapd&#91;2430&#93;: conn=17 fd=12 ACCEPT from IP=192.168.1.5:52239 &#40;IP=0.0.0.0:389&#41;
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: activity on 1 descriptor
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: activity on:
Apr 18 16:50:14 mail slapd&#91;2430&#93;: 12r
Apr 18 16:50:14 mail slapd&#91;2430&#93;:
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: read active on 12
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 16:50:14 mail slapd&#91;2430&#93;: conn=17 op=0 BIND dn="" method=128
Apr 18 16:50:14 mail slapd&#91;2430&#93;: conn=17 op=0 RESULT tag=97 err=0 text=
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: activity on 1 descriptor
Apr 18 16:50:14 mail slapd&#91;2430&#93;: daemon: activity on:
Apr 18 16:50:14 mail slapd&#91;2430&#93;: 12r
Apr 18 16:50:14 mail slapd&#91;2430&#93;:
&#91;root@mail ~&#93;# cd /var/lib/ldap/
&#91;root@mail ldap&#93;# ls
alock __db.003 DB_CONFIG log.0000000001 replica uid.bdb
cn.bdb __db.004 dn2id.bdb mail.bdb replog uidNumber.bdb
__db.001 __db.005 gidNumber.bdb objectClass.bdb replog.lock
__db.002 __db.006 id2entry.bdb ou.bdb sn.bdb
&#91;root@mail ldap&#93;# ldapsearch -x
# extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: &#40;objectclass=*&#41;
# requesting: ALL
#
# vt04a.com
dn: dc=vt04a,dc=com
objectClass: top
objectClass: domain
dc: vt04a
# Manager, vt04a.com
dn: cn=Manager,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalRole
cn: Manager
# search result
search: 2
result: 0 Success
# numResponses: 3
# numEntries: 2
&#91;root@mail ldap&#93;#
&#91;root@mail replica&#93;# ls
slurpd.replog slurpd.replog.lock slurpd.status slurpd.status.lock</pre>
</div><br/> Đối với ldap slave:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@ldapslave ~&#93;# tail -f /var/log/ldap
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: conn=61 fd=12 ACCEPT from IP=192.168.1.5:55225 &#40;IP=0.0.0.0:389&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: activity on 1 descriptor
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: activity on:
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: 12r
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;:
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: read active on 12
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: connection_get&#40;12&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: connection_get&#40;12&#41;: got connid=61
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: connection_read&#40;12&#41;: checking for input on id=61
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: ber_get_next on fd 12 failed errno=11 &#40;Resource temporarily unavailable&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: do_bind
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: &gt;&gt;&gt; dnPrettyNormal: &lt;cn=Manager,dc=vt04a,dc=com&gt;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: &lt;&lt;&lt; dnPrettyNormal: &lt;cn=Manager,dc=vt04a,dc=com&gt;, &lt;cn=manager,dc=vt04a,dc=com&gt;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: do_bind: version=3 dn="cn=Manager,dc=vt04a,dc=com" method=128
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: conn=61 op=0 BIND dn="cn=Manager,dc=vt04a,dc=com" method=128
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: ==&gt; bdb_bind: dn: cn=Manager,dc=vt04a,dc=com
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: bdb_dn2entry&#40;"cn=manager,dc=vt04a,dc=com"&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: =&gt; bdb_dn2id&#40;"dc=vt04a,dc=com"&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: &lt;= bdb_dn2id: get failed: DB_NOTFOUND: No matching key/data pair found &#40;-30989&#41;
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: send_ldap_result: conn=61 op=0 p=3
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: send_ldap_result: err=49 matched="" text=""
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: send_ldap_response: msgid=1 tag=97 err=49
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: conn=61 op=0 RESULT tag=97 err=49 text=
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: activity on 1 descriptor
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: daemon: activity on:
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;: 12r
Apr 18 13:41:07 ldapslave slapd&#91;5969&#93;:
&#91;root@ldapslave ~&#93;# cd /var/lib/ldap/
&#91;root@ldapslave ldap&#93;# ls
alock __db.003 DB_CONFIG log.0000000001 sn.bdb
cn.bdb __db.004 dn2id.bdb mail.bdb uid.bdb
__db.001 __db.005 gidNumber.bdb objectClass.bdb uidNumber.bdb
__db.002 __db.006 id2entry.bdb ou.bdb
&#91;root@ldapslave ldap&#93;# ldapsearch -x
# extended LDIF
#
# LDAPv3
# base &lt;&gt; with scope subtree
# filter: &#40;objectclass=*&#41;
# requesting: ALL
#
# search result
search: 2
result: 32 No such object
# numResponses: 1</pre>
</div></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55258.html#55258,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Mình đã chỉnh loglevel -1 rồi.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail log&#93;# tail /var/log/ldap
Apr 22 17:29:06 mail slapd&#91;2431&#93;: daemon: activity on:
Apr 22 17:29:06 mail slapd&#91;2431&#93;:
Apr 22 17:29:06 mail slapd&#91;2431&#93;: daemon: select: listen=7 active_threads=0 tvp=NULL
Apr 22 17:29:06 mail slapd&#91;2431&#93;: daemon: select: listen=8 active_threads=0 tvp=NULL
Apr 22 17:29:05 mail slapd&#91;2431&#93;: do_unbind
Apr 22 17:29:06 mail slapd&#91;2431&#93;: conn=5 op=2 UNBIND
Apr 22 17:29:06 mail slapd&#91;2431&#93;: connection_resched: attempting closing conn=5 sd=12
Apr 22 17:29:06 mail slapd&#91;2431&#93;: connection_close: conn=5 sd=12
Apr 22 17:29:06 mail slapd&#91;2431&#93;: daemon: removing 12
Apr 22 17:29:06 mail slapd&#91;2431&#93;: conn=5 fd=12 closed
&#91;root@mail ~&#93;# cd /var/lib/ldap/
&#91;root@mail ldap&#93;# ll
total 1016
-rw-r--r-- 1 ldap ldap 2048 Apr 22 17:05 alock
-rw------- 1 ldap ldap 8192 Apr 22 17:06 cn.bdb
-rw------- 1 ldap ldap 24576 Apr 22 16:55 __db.001
-rw------- 1 ldap ldap 278528 Apr 22 16:55 __db.002
-rw------- 1 ldap ldap 270336 Apr 22 16:55 __db.003
-rw------- 1 ldap ldap 98304 Apr 22 16:55 __db.004
-rw------- 1 ldap ldap 352256 Apr 22 16:55 __db.005
-rw------- 1 ldap ldap 24576 Apr 22 16:55 __db.006
-rw-r----- 1 root ldap 722 Feb 13 2006 DB_CONFIG
-rw------- 1 ldap ldap 8192 Apr 22 16:55 dn2id.bdb
-rw------- 1 ldap ldap 8192 Apr 22 17:06 gidNumber.bdb
-rw------- 1 ldap ldap 32768 Apr 22 16:55 id2entry.bdb
-rw------- 1 ldap ldap 10485760 Apr 22 17:06 log.0000000001
-rw------- 1 ldap ldap 8192 Apr 22 17:06 mail.bdb
-rw------- 1 ldap ldap 8192 Apr 22 17:06 objectClass.bdb
-rw------- 1 ldap ldap 8192 Apr 22 17:06 ou.bdb
drwxr-xr-x 2 root root 4096 Apr 22 17:06 replica
-rw-r--r-- 1 ldap ldap 0 Apr 22 17:06 replog
-rw-r--r-- 1 ldap ldap 0 Apr 22 17:06 replog.lock
-rw------- 1 ldap ldap 8192 Apr 22 17:06 sn.bdb
-rw------- 1 ldap ldap 8192 Apr 22 17:06 uid.bdb
-rw------- 1 ldap ldap 8192 Apr 22 17:06 uidNumber.bdb</pre>
</div><br/> Ôi chán quá làm hoài mà nó cũng vậy à. </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/55187.html#55187,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã làm theo hướng dẫn của bạn. Nhưng trong file replog ko có gì cả.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail ldap&#93;# slapd -dl -h "ldap:///"
unrecognized log level "l"
&#91;root@mail ldap&#93;# slurpd -f /etc/openldap/slapd.conf -r /var/lib/ldap/replog
&#91;root@mail ~&#93;# ldapwhoami -h ldapslave.vt04a.com -x -D "cn=Manger,dc=vt04a,dc=com" -W
Enter LDAP Password:
ldap_bind: Invalid credentials &#40;49&#41;</pre>
</div><br/> Mặc dù mình đã dùng đúng password.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/54933.html#54933,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Mình đã làm theo hướng dẫn của bạn rồi. <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail openldap&#93;# ldapwhoami -h ldapslave.vt04a.com -x -D "cn=Manager,dc=vt04a,dc=com" -W
Enter LDAP Password:
dn:cn=Manager,dc=vt04a,dc=com
Result: Success &#40;0&#41;</pre>
</div><br/> Mình coi file replog thì nó rỗng. nhưng nó vẫn chưa upate database cho slave :wink: </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/54723.html#54723,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã khởi động slurpd luôn rồi, vậy mà ko thấy slave update database. </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/9454.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/9454/54525.html#54525,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Mình đã cấu hình cho ldap master và slave, nhưng không thấy slave cập nhật database từ master. File cấu hình như sau:<br/> Master :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># vi /etc/openldap/slapd.conf
include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema
allow bind_v2
pidfile /var/run/openldap/slapd.pid
argsfile /var/run/openldap/slapd.args
replogfile /var/lib/ldap/replog
loglevel 296
password-hash {CRYPT}
access to *
by * read
database bdb
suffix "dc=vt04a,dc=com"
rootdn "cn=Manager,dc=vt04a,dc=com"
rootpw {CRYPT}frZ2fNLLQyOMY
directory /var/lib/ldap
index objectClass eq,pres
index ou,cn,mail,surname,givenname eq,pres,sub
index uidNumber,gidNumber,loginShell eq,pres
index uid,memberUid eq,pres,sub
index nisMapName,nisMapEntry eq,pres,sub
replica host=ldapslave.vt04a.com:389
binddn="cn=Manager,dc=vt04a,dc=com"
bindmethod=simple credentials=123456
# vi /etc/openldap/ldap.conf
BASE dc=vt04a,dc=com
HOST 192.168.1.5
URI ldap://mail.vt04a.com
# vi base.ldif
dn: dc=vt04a,dc=com
objectClass: top
objectClass: domain
domainComponent: vt04a
dn: cn=Manager,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalRole
cn: Manager
dn: ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Server
dn: ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Client
dn: uid=dovecot,ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: dovecot
sn: dovecot
uid: dovecot
uidNumber: 301
gidNumber: 300
homeDirectory: /home/dovecot
userPassword: {CRYPT}frj6CQnOtzq3.
mail: &lt;a href="mailto:dovecot@vt04a.com"&gt;dovecot@vt04a.com&lt;/a&gt;
ou: Server
dn: uid=trang,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: trang
sn: xuan trang
uid: trang
uidNumber: 302
gidNumber: 300
homeDirectory: /home/trang
userPassword: {CRYPT}frdadNSivpzlo
mail: &lt;a href="mailto:trang@vt04a.com"&gt;trang@vt04a.com&lt;/a&gt;
ou: Client
dn: uid=quynh,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: quynh
sn: ngoc quynh
uid: quynh
uidNumber: 303
gidNumber: 300
homeDirectory: /home/quynh
userPassword: {CRYPT}frI1Fun0wizMI
mail: &lt;a href="mailto:quynh@vt04a.com"&gt;quynh@vt04a.com&lt;/a&gt;
ou: Client
đối với file này mình add cho cả master và slave</pre>
</div><br/> Slave:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># vi /etc/openldap/slapd.conf
include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema
allow bind_v2
pidfile /var/run/openldap/slapd.pid
argsfile /var/run/openldap/slapd.args
password-hash {CRYPT}
access to *
by * read
database bdb
suffix "dc=vt04a,dc=com"
rootdn "cn=Manager,dc=vt04a,dc=com"
rootpw {CRYPT}frZ2fNLLQyOMY
directory /var/lib/ldap
index objectClass eq,pres
index ou,cn,mail,surname,givenname eq,pres,sub
index uidNumber,gidNumber,loginShell eq,pres
index uid,memberUid eq,pres,sub
index nisMapName,nisMapEntry eq,pres,sub
updatedn cn=Manager,dc=vt04a,dc=com
updateref<span class="link"> ldap://mail.vt04a.com:389/</span>
# vi /etc/openldap/ldap.conf
BASE dc=vt04a,dc=com
HOST 192.168.1.6
URI ldap://ldapslave.vt04a.com</pre>
</div><br/> Rồi sau đó mình add vào base.ldif :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>dn: uid=hoa,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: person
objectClass: organizationalPerson
objectClass: posixAccount
objectClass: inetOrgPerson
cn: hoa
sn: khanh hoa
uid: hoa
uidNumber: 304
gidNumber: 300
homeDirectory: /home/hoa
userPassword: {CRYPT}trO1Ii2Hx64jc
mail: &lt;a href="mailto:hoa@vt04a.com"&gt;hoa@vt04a.com&lt;/a&gt;
ou: Client</pre>
</div><br/> Sau đó mình ldapmodify trên máy master. Và mình dùng lệnh ldapsearch -s ở máy slave thì ko thấy record uid=hoa.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/54465.html#54465,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Cám ơn bạn nhiều lắm, đúng là mình đã thiếu dòng local_recipient_maps = .</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/53776.html#53776,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Hiện giờ mình đã cấu hình được các dịch vụ postfix, dovecot (có cả dovecot-ldap.conf) và ldap. Nhưng khi mình telnet thì bị như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@localhost openldap&#93;# telnet mail.vt04a.com 25
Trying 192.168.1.5...
Connected to mail.vt04a.com &#40;192.168.1.5&#41;.
Escape character is '^&#93;'.
220 mail.vt04a.com ESMTP Postfix Welcome to my mail
ehlo vt04a
250-mail.vt04a.com
250-PIPELINING
250-SIZE 10240000
250-VRFY
250-ETRN
250-STARTTLS
250-AUTH LOGIN PLAIN
250-AUTH=LOGIN PLAIN
250 8BITMIME
mail from: &lt;a href="mailto:trang@vt04a.com"&gt;trang@vt04a.com&lt;/a&gt;
250 Ok
rcpt to: &lt;a href="mailto:quynh@vt04a.com"&gt;quynh@vt04a.com&lt;/a&gt;
550 &lt;quynh@vt04a.com&gt;: Recipient address rejected: User unknown in local recipient table
quit
221 Bye
Connection closed by foreign host.</pre>
</div><br/> Mình không biết lí do tại sao lại như vậy?<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/53368.html#53368,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã xác thực được rồi bạn ơi. Đó là ACL của ldap đó. Cảm ơn bạn nhiều nha. ^_^</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/53206.html#53206,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Vẫn bị xác thực bị lỗi. Mình đã chỉnh lại file cấu hình như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># vi /etc/postfix/main.cf
queue_directory = /var/spool/postfix
command_directory = /usr/sbin
daemon_directory = /usr/libexec/postfix
mail_owner = postfix
myhostname = mail.vt04a.com
mydomain = vt04a.com
myorigin = $mydomain
inet_interfaces = all
mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
unknown_local_recipient_reject_code = 550
mynetworks = 192.168.1.0/24, 127.0.0.0/8
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
home_mailbox = Maildir/
smtpd_banner = $myhostname ESMTP $mail_name Welcome to my mail
debug_peer_level = 2
debugger_command =
PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin
xxgdb $daemon_directory/$process_name $process_id & sleep 5
sendmail_path = /usr/sbin/sendmail.postfix
newaliases_path = /usr/bin/newaliases.postfix
mailq_path = /usr/bin/mailq.postfix
setgid_group = postdrop
html_directory = no
manpage_directory = /usr/share/man
sample_directory = /usr/share/doc/postfix-2.3.6/samples
readme_directory = /usr/share/doc/postfix-2.3.6/README_FILES
accounts_server_host = localhost
accounts_search_base = dc=vt04a,dc=com
accounts_query_filter = &#40;&&#40;objectClass=posixAccount&#41;&#40;uid=%u&#41;&#41;
accounts_result_attribute = uid
accounts_bind = no
virtual_mailbox_base = /var/mail/
virtual_mailbox_maps = ldap:accounts
virtual_alias_maps = ldap:aliases
virtual_minimum_uid = 2001
virtual_uid_maps = static:2001
virtual_gid_maps = static:200
smtpd_sasl_auth_enable = yes
smtpd_sasl_auth_security_options = noanonymous
broken_sasl_auth_clients = yes
smtpd_recipient_restrictions = permit_sasl_authenticated, permit_mynetworks, reject_unauth_destination
# vi /etc/openldap/base.ldif
dn: dc=vt04a,dc=com
objectClass: top
objectClass: domain
domainComponent: vt04a
dn: cn=Manager,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalRole
cn: Manager
dn: ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Server
dn: ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Client
dn: uid=dovecot,ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: posixAccount
objectClass: organizationalPerson
cn: dovecot
sn: dovecot
uid: dovecot
uidNumber: 2001
gidNumber: 200
homeDirectory: /home/dovecot
userPassword: dovecot
ou: Server
dn: uid=trang,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: posixAccount
objectClass: organizationalPerson
cn: trang
sn: xuan trang
uid: trang
uidNumber: 1001
gidNumber: 100
homeDirectory: /home/trang
userPassword: trang
ou: Client
dn: uid=quynh,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: posixAccount
objectClass: organizationalPerson
cn: quynh
sn: ngoc quynh
uid: quynh
uidNumber: 1002
gidNumber: 100
homeDirectory: /home/quynh
userPassword: quynh
ou: Client
# vi /etc/openldap/slapd.conf
include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema
allow bind_v2
pidfile /var/run/openldap/slapd.pid
argsfile /var/run/openldap/slapd.args
access to *
by dn.one="ou=Server,dc=vt04a,dc=com" read
by * search
access to attrs=userPassword
by dn.one="ou=Server,dc=vt04a,dc=com" read
by self write
by anonymous auth
by * none
password-hash {CRYPT}
database ldbm
suffix "dc=vt04a,dc=com"
rootdn "cn=Manager,dc=vt04a,dc=com"
rootpw {SSHA}tomZt4pmMXrj7fJjNud+WHzYWlDi3D8M
directory /var/lib/ldap
index objectClass eq,pres
index ou,cn,mail,surname,givenname eq,pres,sub
index uidNumber,gidNumber,loginShell eq,pres
index uid,memberUid eq,pres,sub
index nisMapName,nisMapEntry eq,pres,sub
# vi /etc/openldap/ldap.conf
BASE dc=vt04a, dc=com
HOST 127.0.0.1
# vi /etc/saslauthd.conf
ldap_servers:<span class="link"> ldap://localhost</span>
ldap_search_base: dc=vt04a,dc=com
ldap_filter: &#40;&&#40;objectClass=posixAccount&#41;&#40;uid=%u&#41;&#41;</pre>
</div><br/> Không hiểu sao, khi mình dùng lệnh ldapsearch với uid=dovecot thì ko được, nhưng với cn=Manager thì được. Không biết có phải vì vậy mà khi mình xác thực user bị failed (testsaslauthd)<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># ldapsearch -x -W -D "uid=dovecot,ou=Server,dc=vt04a,dc=com" -b "uid=trang,ou=Client,dc=vt04a,dc=com"
Enter LDAP Password:
# extended LDIF
#
# LDAPv3
# base &lt;uid=trang,ou=Client,dc=vt04a,dc=com&gt; with scope subtree
# filter: &#40;objectclass=*&#41;
# requesting: ALL
#
# search result
search: 2
result: 0 Success
# numResponses: 1
&#91;root@mail ~&#93;# ldapsearch -x -W -D "cn=Manager,dc=vt04a,dc=com" -b "uid=trang,ou=Client,dc=vt04a,dc=com"
Enter LDAP Password:
# extended LDIF
#
# LDAPv3
# base &lt;uid=trang,ou=Client,dc=vt04a,dc=com&gt; with scope subtree
# filter: &#40;objectclass=*&#41;
# requesting: ALL
#
# trang, Client, vt04a.com
dn: uid=trang,ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: posixAccount
objectClass: organizationalPerson
cn: trang
sn: xuan trang
uid: trang
uidNumber: 1001
gidNumber: 100
homeDirectory: /home/trang
userPassword:: dHJhbmc=
ou: Client
# search result
search: 2
result: 0 Success
# numResponses: 2
# numEntries: 1</pre>
</div><br/> Sau đó mình vào /var/log/secure thì thấy như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># tail /var/log/secure
Apr 11 22:21:35 mail saslauthd&#91;2884&#93;: ipc_init : listening on socket: /var/run/saslauthd/mux
Apr 11 22:21:41 mail saslauthd&#91;2887&#93;: Entry not found &#40;&#40;&&#40;objectClass=posixAccount&#41;&#40;uid=trang&#41;&#41;&#41;.
Apr 11 22:21:41 mail saslauthd&#91;2887&#93;: Authentication failed for trang: User not found &#40;-6&#41;
Apr 11 22:21:41 mail saslauthd&#91;2887&#93;: do_auth : auth failure: &#91;user=trang&#93; &#91;service=imap&#93; &#91;realm=&#93; &#91;mech=ldap&#93; &#91;reason=Unknown&#93;</pre>
</div></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/52942.html#52942,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đã khởi động được dovecot rồi. Cảm ơn bạn rất nhiều. Nhưng hiện giờ mình đang gặp khó khăn với saslauthd.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail ~&#93;# testsaslauthd -u trang -p trang
0: NO "authentication failed"
&#91;root@mail ~&#93;# tail /var/log/messages
Apr 6 21:18:59 mail saslauthd&#91;2213&#93;: do_auth : auth failure: &#91;user=trang&#93; &#91;service=login&#93; &#91;realm=&#93; &#91;mech=ldap&#93; &#91;reason=Unknown&#93;
&#91;root@mail ~&#93;# vi /etc/saslauthd.conf
ldap_servers:<span class="link"> ldap://127.0.0.1</span>
ldap_search_base: dc=vt04a,dc=com
ldap_filter: &#40;&&#40;objectClass=JammMailAccount&#41;&#40;mail=%u&#41;&#40;accountActive=TRUE&#41;&#40;delete=FALSE&#41;&#41;
&#91;root@mail ~&#93;# postconf -n
alias_database = hash:/etc/aliases
alias_maps = hash:/etc/aliases
broken_sasl_auth_clients = yes
command_directory = /usr/sbin
config_directory = /etc/postfix
daemon_directory = /usr/libexec/postfix
debug_peer_level = 2
home_mailbox = Maildir/
html_directory = no
inet_interfaces = all
mail_owner = postfix
mailq_path = /usr/bin/mailq.postfix
manpage_directory = /usr/share/man
mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
mydomain = vt04a.com
myhostname = mail.vt04a.com
mynetworks = 192.168.1.0/24, 127.0.0.0/8
myorigin = $mydomain
newaliases_path = /usr/bin/newaliases.postfix
queue_directory = /var/spool/postfix
readme_directory = /usr/share/doc/postfix-2.3.6/README_FILES
sample_directory = /usr/share/doc/postfix-2.3.6/samples
sendmail_path = /usr/sbin/sendmail.postfix
setgid_group = postdrop
smtpd_banner = $myhostname ESMTP $mail_name Welcome to my mail
smtpd_recipient_restrictions = permit_sasl_authenticated, permit_mynetworks, reject_unauth_destination
smtpd_sasl_auth_enable = yes
unknown_local_recipient_reject_code = 550
virtual_alias_maps = ldap:aliases
virtual_gid_maps = static:100
virtual_mailbox_base = /home/vmail/domains/
virtual_mailbox_domains = ldap:domains
virtual_mailbox_maps = ldap:accounts
virtual_minimum_uid = 100
virtual_transport = virtual
virtual_uid_maps = static:100
~
&#91;root@mail ~&#93;# cat /etc/openldap/base.ldif
dn: dc=vt04a,dc=com
objectClass: top
objectClass: domain
domainComponent: vt04a
dn: cn=Manager,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalRole
cn: Manager
dn: ou=Server,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Server
dn: ou=Client,dc=vt04a,dc=com
objectClass: top
objectClass: organizationalUnit
ou: Client
dn: cn=dovecot,ou=Server,dc=vt04a,dc=com
objectClass: organizationalPerson
cn: dovecot
sn: dovecot
userPassword: dovecot
ou: Server
dn: cn=postfix,ou=Server,dc=vt04a,dc=com
objectClass: organizationalPerson
cn: postfix
sn: postfix
userPassword: postfix
ou: Server
dn: cn=trang,ou=Client,dc=vt04a,dc=com
objectClass: organizationalPerson
cn: trang
sn: xuan trang
userPassword: trang
ou: Client
dn: cn=quynh,ou=Client,dc=vt04a,dc=com
objectClass: organizationalPerson
cn: quynh
sn: ngoc quynh
userPassword: quynh
ou: Client</pre>
</div><br/> Mình không hiểu lí do tại sao nó lại bị như vậy nữa.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/52599.html#52599,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Đây là file dovecot-ldap-example.conf ban đầu :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># This file is opened as root, so it should be owned by root and mode 0600.
#
#<span class="link"> http://wiki.dovecot.org/AuthDatabase/LDAP</span>
#
# NOTE: If you're not using authentication binds, you'll need to give
# dovecot-auth read access to userPassword field in the LDAP server.
# With OpenLDAP this is done by modifying /etc/ldap/slapd.conf. There should
# already be something like this:
# access to attribute=userPassword
# by dn="&lt;dovecot's dn&gt;" read # add this
# by anonymous auth
# by self write
# by * none
# Space separated list of LDAP hosts to use. host:port is allowed too.
#hosts =
# LDAP URIs to use. You can use this instead of hosts list. Note that this
# setting isn't supported by all LDAP libraries.
#uris =</pre>
</div><br/> Đây là file cấu hình của mình:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># Space separated list of LDAP hosts to use. host:port is allowed too.
hosts = 127.0.0.1
# LDAP URIs to use. You can use this instead of hosts list. Note that this
# setting isn't supported by all LDAP libraries.
#uris =
# Distinguished Name - the username used to login to the LDAP server
dn = cn=Manager,dc=vt04a,dc=com
# Password for LDAP server
dnpass = 123456789
# LDAP protocol version to use. Likely 2 or 3.
ldap_version = 3
# LDAP base. %variables can be used here.
base = dc=vt04a,dc=com
# Dereference: never, searching, finding, always
deref = never
# Search scope: base, onelevel, subtree
scope = subtree</pre>
</div><br/> Còn đây là slap.conf :<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>include /etc/openldap/schema/core.schema
include /etc/openldap/schema/cosine.schema
include /etc/openldap/schema/inetorgperson.schema
include /etc/openldap/schema/nis.schema
# Allow LDAPv2 client connections. This is NOT the default.
allow bind_v2
access to attr=userPassword
by dn.one="ou=Server,dc=vt04a,dc=com" read
by self write
by anonymous auth
by * none
access to *
by dn.one="ou=Server,dc=vt04a,dc=com" read
by * search
database bdb
suffix "dc=vt04a,dc=com"
rootdn "cn=Manager,dc=vt04a,dc=com"
rootpw {SSHA}tomZt4pmMXrj7fJjNud+WHzYWlDi3D8Mdirectory /var/lib/ldap
# Indices to maintain for this database
index objectClass eq,pres
index ou,cn,mail,surname,givenname eq,pres,sub
index uidNumber,gidNumber,loginShell eq,pres
index uid,memberUid eq,pres,sub
index nisMapName,nisMapEntry eq,pres,sub</pre>
</div></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8974.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8974/52276.html#52276,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mình đang xây dựng hệ thống mail server với postfix+dovecot+ldap đều là gói rpm cả. Hiện giờ mình đang dùng FC 5. Với:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@mail dovecot&#93;# dovecot -c /etc/dovecot-ldap.conf
Error: Error in configuration file /etc/dovecot-ldap.conf line 13: Unknown setting: hosts
&#91;root@mail ~&#93;# postconf -m
btree
cidr
environ
hash
ldap
nis
pcre
proxy
regexp
static
unix
&#91;root@mail ~&#93;# dovecot --build-options
Build options: ioloop=poll inotify ipv6 openssl mysql postgresql
Passdb: checkpassword ldap pam passwd passwd-file shadow sql
Userdb: checkpassword ldap passwd passwd-file sql static</pre>
</div><br/> Khi mình khởi động dịch vụ dovecot thì dịch vụ này bị lỗi. Mình không biết tại sao nó lại bị như vậy? Các bạn giúp mình với (càng nhanh càng tốt) . Thanks<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8411.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8411/49163.html#49163,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Bạn có thể nói chi tiết được ko? Bạn nói chung chung quá làm mình khó hình dung. File cấu hình postfix của mình đã đúng chưa, nó có sai gì ko?</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/8411.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/8411/49025.html#49025,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">File cấu hình postfix của mình như sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;root@vt04a ~&#93;# postconf -n
alias_database = hash:/etc/aliases
alias_maps = hash:/etc/aliases
command_directory = /usr/sbin
config_directory = /etc/postfix
daemon_directory = /usr/libexec/postfix
debug_peer_level = 2
html_directory = no
inet_interfaces = all
mail_owner = postfix
mailq_path = /usr/bin/mailq.postfix
manpage_directory = /usr/share/man
mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain
mydomain = vt04a.dyndns.org
myhostname = vt04a.dyndns.org
myorigin = $mydomain
newaliases_path = /usr/bin/newaliases.postfix
queue_directory = /var/spool/postfix
readme_directory = /usr/share/doc/postfix-2.2.8/README_FILES
sample_directory = /usr/share/doc/postfix-2.2.8/samples
sendmail_path = /usr/sbin/sendmail.postfix
setgid_group = postdrop
unknown_local_recipient_reject_code = 550</pre>
</div><br/><br/> Khi mình gửi mail từ nội bộ ra ngoài internet thì được, nhưng lại không thể nhận mail từ bên ngoài internet vào nội bộ. Mặc dù mình đã nat port 25 rồi . Khi mình telnet vào máy mail server là vt04a.dyndns.org ở 1 máy có địa chỉ IP khác thì postfix vẫn không hoạt động:<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>telnet vt04a.dyndns.org 25</pre>
</div><br/> Nhưng khi telnet vào địa chỉ local của mail server :<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>telnet 192.168.1.5 25
S: 220 vt04a.dyndns.org ESMTP Postfix Welcome to my mail
C: EHLO vt04a.dyndns.org
S: 250-vt04a.dyndns.org
S: 250-PIPELINING
S: 250-SIZE 10240000
S: 250-VRFY
S: 250-ETRN
S: 250-XVERP
S: 250 8BITMIME
C: QUIT
S: 221 Bye</pre>
</div><br/> Các bạn có thể cho mình biết lí do tại sao bị như vậy ko?<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/6064.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/6064/36732.html#36732,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"> IMAP ServeIMAP Serverr<br/> ●Internet Message Access Protocol<br/> ●Provides temporary and longterm<br/> storage and<br/> retrieval of mail<br/> ●More sophisticated than POP3<br/> ●Provides folders for organizing and archiving<br/> ●Supported by most mail clients<br/> ●Examples: Qmail, Courier IMAP<br/> ●RFC 3501 defines IMAP4rev1<br/><br/><br/> Mình đọc từ tài liệu đó, nó là file power point. Thanks pnco và conmale rất nhiều. </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/6064.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/6064/36076.html#36076,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tại vì mình đọc 1 số tài liệu nó nói qmail không phải là MTA, nên mình mới hỏi cho chắc ăn đó mà. </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/6064.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/6064/35867.html#35867,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Mình cám ơn conmale rất nhiều. Mục đích của mình là xây dựng 1 hệ thống mail (linux) cho công ty. Theo một số tài liệu mà mình đọc được về mail cho linux, mình được biết như sau:<br/> sendmail, postfix và exim cùng 1 loại với nhau và là MTA ( Mail Transfer Agent), còn qmail thì nó là 1 IMAP Server, và procmail là MDA (Mail Delivery Agent, nó là 1 bộ lọc mail) . Nhưng hiện nay tài liệu nói về exim rất ít, bạn có thể cho mình biết ưu điểm và khuyết điểm exim được không? Với lại mình muốn hỏi là hiện nay đa phần điều dùng POP3 rất ít khi dùng IMAP, vậy theo bạn thì mình nên dùng POP3 hay IMAP, mặc dù IMAP hay hơn POP3 rất nhiều. Thanks </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/6064.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/6064/35557.html#35557,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Hiện giờ mình đang tìm hiểu về mail cho linux. Cho mình hỏi : qmail, postfix, sendmail, cái nào được sử dụng nhiều nhất trong thực tế hiện nay, đồng thời ưu và nhược điểm của từng loại đó? </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/3996.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/3996/23469.html#23469,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Hiện giờ mình đang nghiên cứu về cơ chế xác thực Ldap kết hợp với Kerberos V ở hệ điều hành Linux. Nhưng mình làm hoài mà không được. Nếu chỉ dùng Ldap xác thực theo kiểm đơn giản thì mình xác thực được. Nhưng khi kết hợp Ldap và Kerberos V, mình khởi động dịch vụ ldap bằng lệnh service ldap start --&gt; Fail. Bạn nào đã từng làm thành công Ldap + Kerberos, thì hãy giúp mình với. Thanks</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/3265.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/3265/19241.html#19241,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">LDAP thích hợp với những cơ sở dữ liệu vừa và lớn. Nó tối ưu cho việc truy cập dữ liệu (đọc và tìm kiếm) hơn là update dữ liệu (viết). Nhưng nói đòi hỏi người quản trị phải biết nhiều chương trình khác. Nó rất phức tạp bạn à. Nó có thể dùng cho Windown và Linux nữa.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/21.html">Thảo luận việc định hướng</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/3301.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/3301/19237.html#19237,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Trường Hoa Sen dạy rất chất lượng nhưng học phí mắc lắm bạn ơi!</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
				
        <!-- END OF POST LISTING -->
			
				

			
      </table>
		
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>					
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						&nbsp;
						</span>
					</td>

					<td valign="middle" align="right">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/listByUser/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/130102' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" selected="selected">1</option>	
								<option value="2" >2</option>	
						</select>
						
							<a href="/hvaonline/posts/listByUser/30/130102.html">
								<img src="/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 2" title="Page 2"/>
							</a>
						
						<a href="/hvaonline/posts/listByUser/30/130102.html">
							<img src="/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (2)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
				</tr>
				
				<tr>
					<td colspan="3"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
				</tr>			
			</table>
		</td>
	</tr>
</table>


	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.html" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
