<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Messages posted by meomeo1133, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Messages posted by meomeo1133 - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript">
<!--

function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}

-->
</script>

<table cellspacing="0" cellpadding="10" width="98%" align="center" border="0">
	<tr>
		<td class="bodyline">
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					<td valign="middle" align="left" colspan="2">
						<span class="maintitle"><a href="/hvaonline/posts/listByUser/284993.html" name="top" class="maintitle" id="top">Messages posted by: meomeo1133</a></span>
						&nbsp;<a href="/hvaonline/rss/showPostsByUser/284993.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML" /></a>
					</td>
				</tr>
			</table>
			
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						<a href="/hvaonline/user/profile/284993.html">Profile for meomeo1133</a> 
            			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"><a href="/hvaonline/posts/listByUser/284993.html">Messages posted by meomeo1133</a>
						</span>
					</td>
										
					<td valign="middle" align="right">
						<span class="nav">[ number of posts not being displayed on this page: <span class="moderator">0</span> ]</span>
					</td>
				</tr>
			</table>

			
      <table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
        <tr>
          <th height="26" nowrap="nowrap" class="thleft">&nbsp;</th>
        </tr>

				
        <!-- POST LISTING -->
         
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280737.html#280737,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Chặn hơn cả tháng mà tụi nó vẫn gửi request liên tục <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"><br/> Load average lúc nào cũng từ 1~2 (tài nguyên server không đủ, nên giờ load web lúc nào cũng mất 5~10s)<br/><br/> Mở varnishstat ra xem thì thấy:<br/><br/> <blockquote><br/> 0+00:20:15<br/> Hitrate ratio: 9 9 9<br/> Hitrate avg: 0.3596 0.3596 0.3596<br/><br/> 88452 63.97 72.80 client_conn - Client connections accepted<br/> 90445 64.97 74.44 client_req - Client requests received<br/> 88450 64.97 72.80 s_sess - Total Sessions<br/> 90445 64.97 74.44 s_req - Total Requests<br/> 87518 64.97 72.03 sess_closed - Session Closed<br/> &nbsp;
</blockquote><br/><br/> 20 phút mà tận 90k req, closed hết 87k theo bộ lọc....<br/><br/> Capture header thì thấy vào ào ạt<br/> <blockquote><br/> GET /gui-thong-tin-tu-van-phap-luat/view/form.html HTTP/1.0\r\n<br/> Request Method: GET<br/> Request URI: /gui-thong-tin-tu-van-phap-luat/view/form.html<br/> Request Version: HTTP/1.0<br/> Host: xxxxxxxxxx.com\r\n<br/> Keep-Alive: 300\r\n<br/> Connection: keep-alive\r\n<br/> User-Agent: Mozilla/4.0 (compatible; DepSpid/5.0x; +http://about.h21c1ie8.net) \r\n<br/> Referer: 993r4fd.biz\r\n<br/> \r\n<br/> &nbsp;
</blockquote><br/><br/> Haizzzz, giờ phải làm sao đây.... <img src="/hvaonline/images/smilies/b4028a94b255f1e2b9bb6e172b05f60b.gif" border="0" alt="smilie" align="absbottom"><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280616.html#280616,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">somenuchi wrote:</cite><br>
<blockquote>Mấy cái request dạng này đều có điểm chung nhât định. Theo như log bạn gửi lên thì nó đều chứa referer từ một site không có thực nào đó. Bạn có thể dựa vào điểm này để loại bỏ các request bất hợp lệ. VD như chỉ cho những request nào có referer được phép thì mới được truy cập, tất cả các dạng khác thì deny.<br/> Ngoài ra bạn có thể tìm thêm một số đặc điểm nhận dạng khác để kết hợp, giảm thiểu tình trạng chặn nhầm.<br/> &nbsp;
</blockquote><br/><br/> Theo cách này thì có phải là e lọc các referer không có <b>http://</b> phải không ạ? <img src="/hvaonline/images/smilies/e746f170e2a60a973f6f1b2abdbfa5a7.gif" border="0" alt="smilie" align="absbottom"><br/> A có thể cho e 1 rule ví dụ để lọc các referer như vậy không ạ?<br/> Chân thành cảm ơn anh!!!<br/><br/> Update: Hiện tại thêm 1 rule lọc referer vào varnish như sau:<br/> <blockquote><br/> if (req.http.referer && req.http.referer !~ "http(s)?:\\") {<br/> return (error);<br/> }<br/> &nbsp;
</blockquote><br/><br/> Kết quả khả thi là chặn hết các request theo dạng trên ở varnish... <img src="/hvaonline/images/smilies/0ed54260213d71c024f0140fc341b79b.gif" border="0" alt="smilie" align="absbottom"><br/> Nhưng e vẫn sợ là mình chặn nhầm người sử dụng thực sự. Có cú pháp nào hay hơn không nhỉ???</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280502.html#280502,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">somenuchi wrote:</cite><br>
<blockquote>Nếu cứ có keep-alive mà chặn thì bạn sẽ chặn nhầm rất nhiều trường hợp.<br/> Chỉ keep-alive không thôi thì không đủ để coi đó là dấu hiệu DDoS.&nbsp;
</blockquote><br/><br/> Đó là cách tạm thời để chặn mấy cái packets cố tình phá hoại... <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"><br/> Cho nó chạy đến tầng apache là server không chịu nổi.<br/> Nhưng với cách này thì packet tạm thời nó chạy ào ào vào và bị chặn bởi proxy mà không cách nào chặn được ngoài iptables.<br/> Tìm cách thực thi script trên varnish thì không thấy có tài liệu nào đề cập.<br/> Vẫn đang tìm kiếm...</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280485.html#280485,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Hic, dạo này diễn đàn sao ít người tư vấn dùm quá... <img src="/hvaonline/images/smilies/0ed54260213d71c024f0140fc341b79b.gif" border="0" alt="smilie" align="absbottom"><br/><br/> Hôm nay tiếp tục cài wireshark vào capture http header của mấy cái request đó thì thấy như sau:<br/><br/> <blockquote><br/> Request Method: GET<br/> Request URI: /tin-tuc/luat-nha-dat/2296-lam-sao-hoan-cong-nha-xay-dung-sai-phep.html<br/> Request Version: HTTP/1.0<br/> Host: www.xxxxxxxxxxx.com\r\n<br/> <font color='red'>Keep-Alive: 300\r\n</font><br/> Connection: keep-alive\r\n<br/> User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1;<span class="link"> http://www.changedetection.com/bot.html</span> ) \r\n<br/> Referer: 4ytxb96c.net\r\n<br/> &nbsp;
</blockquote><br/><br/> Dựng ngay varnish và thêm 1 cái rule<br/> <blockquote><br/> if (req.http.Keep-Alive) {<br/> return (error);<br/> }<br/> &nbsp;
</blockquote><br/><br/> Vậy cho e hỏi hầu hết các browser đều không gửi kèm đoạn header này phải không ạ, lỡ giết nhầm thì khổ... <img src="/hvaonline/images/smilies/246ed95454d12f21d9fc0259316b750d.gif" border="0" alt="smilie" align="absbottom"> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280461.html#280461,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">somenuchi wrote:</cite><br>
<blockquote>Nếu bạn không ngại thay đổi cấu trúc website thì cách đơn giản và khá phổ biến sau đây có thể xử lý được:<br/> B1: Chuyển toàn bộ source code vào thư mục mới (new_folder) nằm dưới thư mục cũ.<br/> B2: Tại thư mục cũ tạo một file index.html có nhiệm vụ khi người dùng click vào đường link thì sẽ wwwect vào thư mục mới.<br/> Cách này hơi bất tiện cho người truy cập web nhưng khá đơn giản. Apache sẽ chỉ trả ra 1 file html do đó tải sever sẽ không tăng đáng kể. Trong trường hợp của bạn thì sẽ có hiệu quả.<br/><br/> &nbsp;
</blockquote><br/><br/> Cảm ơn cách của bạn nhưng cách này không ổn.<br/> Chuyển folder đồng nghĩa với việc SEO của site bị mất hết.<br/> Với lại e muốn tìm cách chặn ngày từ tầng ngoài trước khi vào đến apache... <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom"> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/8.html">Thảo luận bảo mật</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/45600.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/45600/280448.html#280448,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Chào các anh chị<br/> Em xin nói trước là e là tay ngang nên trình độ của e còn hạn chế. Secure server thì toàn học lóm là chính.<br/> E xin trình bày tình trạng hiện tại:<br/><br/> 1. Server<br/> <blockquote><br/> Processor Name Intel(R) Xeon(TM) CPU 2.80GHz (x4)<br/> Vendor ID GenuineIntel<br/> Processor Speed (MHz) 2787.471<br/><br/> Total Memory 4025548 kB<br/><br/> Service đang chạy:<br/> Apache 2.4.7<br/> DirectAdmin<br/> Exim<br/> MySQL<br/> dovecot<br/> pure-ftpd<br/> Php<br/> &nbsp;
</blockquote><br/><br/> Server e chủ yếu là share hosting tầm khoảng 25 websites<br/> Hiện tại 1 có 1 trang nhận hàng loạt request như sau:<br/> <blockquote><br/> 175.139.162.92 - - [25/Apr/2014:20:06:24 +0700] &quot;GET / HTTP/1.1&quot; 200 17789 &quot;x513o3eq9cbe58.com&quot; &quot;Mozilla/3.0 (Slurp/si; <a href="mailto:slurp@inktomi.com">slurp@inktomi.com</a>;<span class="link"> http://www.kst3ps699631.com/slurp.html</span>)&quot;<br/> 186.208.74.24 - - [25/Apr/2014:20:06:26 +0700] &quot;GET / HTTP/1.1&quot; 200 17788 &quot;sf2c0ksxe5c.info&quot; &quot;Mozilla/4.0 (compatible; MSIE 5.5; AOL 4.0; Windows 98; GoBeez<span class="link"> www.293252za9p1chx.com</span>))&quot;<br/> 175.139.162.92 - - [25/Apr/2014:20:06:28 +0700] &quot;GET / HTTP/1.1&quot; 200 17789 &quot;29u05lmb4.biz&quot; &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.7) Gecko/20060909 Firefox/1.5.0.7 SnapPreviewBot&quot;<br/> 92.226.121.140 - - [25/Apr/2014:20:06:31 +0700] &quot;GET / HTTP/1.1&quot; 200 17789 &quot;528t9ehy2.net&quot; &quot;Mozilla/5.0 (compatible; Konqueror/2.0.1; X11); Supports MD5-Digest; Supports gzip encoding&quot;<br/> 175.139.162.92 - - [25/Apr/2014:20:06:33 +0700] &quot;GET /gui-thong-tin-tu-van-phap-luat/view/form.html HTTP/1.1&quot; 200 16734 &quot;z885369a7.biz&quot; &quot;Mozilla/4.76 [en] (X11; U; FreeBSD 4.4-STABLE i386)&quot;<br/> &nbsp;
</blockquote><br/><br/> E cố search 1 số thông tin về công cụ ddos này thì không ra, e chỉ đoán là 1 dạng botnet nào đó.<br/> Hiện tại thì tầm khoảng &gt; 300 ip đánh vào hằng ngày.<br/> Trước đây thì e build <b>Apache ở dạng prefork </b>và<b> PHP chạy ở mod_suphp</b> nên bị đánh vào là server chết đứ đừ.<br/><br/> E có học theo cách a conmale dựng mod_security và dử dụng file 1 file block.sh để lọc IP và chặn bằng iptables như sau:<br/> <blockquote><br/> SecAction &quot;phase:1,t:none,pass,nolog,initcol:global=global,initcol:ip=%{remote_addr}&quot;<br/> SecRule REQUEST_URI &quot;^/$&quot; &quot;nolog,phase:1,setvar:ip.ddos=+1,deprecatevar:ip.ddos=30/60,expirevar:ip.ddos=120&quot;<br/> SecRule IP<img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom">DOS &quot;@gt 5&quot; &quot;phase:1,log,msg:'DDoS_from_%{REMOTE_ADDR}',exec:/path/to/blocker.sh&quot;<br/> &nbsp;
</blockquote><br/> Ngoài ra e còn chuyển apache về chế độ event, php về fastcgi<br/><br/> Cách này thì tạm thời hiệu quả<br/> <blockquote><br/> Số pkg vào ở port 80: 2046K<br/> Số pkg chặn lại ở ipt_recent: 27M<br/> &nbsp;
</blockquote><br/> Server load time ở mức 1~5%<br/> Nhưng lỡ e mà restart lại cái iptables thì số record lưu trong ipt_recent mất sạch. Một lượng package lại tràn vào, lúc này apache & php sẽ return error 500.<br/> Điều đó có nghĩa là mod_security không thể thực thi tiếp được. <img src="/hvaonline/images/smilies/0ed54260213d71c024f0140fc341b79b.gif" border="0" alt="smilie" align="absbottom"><br/><br/> Vậy e xin các anh chỉ bảo cách để chặn hiệu quả hơn.<br/> Cảm ơn mọi người.</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
				
        <!-- END OF POST LISTING -->
			
				

			
      </table>
		
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>					
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						&nbsp;
						</span>
					</td>

					<td valign="middle" align="right"></td>
				</tr>
				
				<tr>
					<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
				</tr>			
			</table>
		</td>
	</tr>
</table>


	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
