<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 

<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="description" content="HVA discussion board">
<meta name="keywords" content="Messages posted by tranvanminh, jforum, jforum java, jforum forum, forum java, java jforum, java forum, forum, rafael steil, bulletin board, java bb, javabb, hva, hvaonline, hvazone, hvaforum">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="robots" content="index,follow">
<meta name="rating" content="general">
<style type="text/css">
<!-- 
@import url( "/hvaonline/templates/viet/styles/style.css");
-->
</style>
<style type="text/css">
<!--
@import url("/hvaonline/templates/viet/styles/en_US.css");
-->
</style>
<title>Messages posted by tranvanminh - .:: HVAOnline ::.</title>

</head>
<body class="en_US">


<!--
Original theme from phpBB (http://www.phpbb.com) subSilver
Created by subBlue design
http://www.subBlue.com
Modifications by JForum Team 
Extended and customised by HVA Team
Added more features and Black Silver theme designed by HVA
-->
<table width="100%" border="0" cols="2">
	<tr align="right">
		<td class="copyright">
			English
			| 
			<a href="/hvaonline/jforum.html?module=forums&amp;action=setLang&amp;lang=vi_VN" rel="nofollow">Vietnamese</a>
		</td>
	</tr>
</table>
<table width="100%" border="0">
	<tr>
		<td>
			<table cellspacing="0" cellpadding="0" width="100%" border="0">
				<tr>			
        <td>&nbsp;
			</td>
		
        <td width="100%" align="center" valign="middle">
						<p><a href="" title="[Logo]">
								<img src="/hvaonline/templates/viet/images/hvabanner-final.gif" alt="banner" />
							<br>
            				</a><span class="maintitle"></span>
						</p>
          <table cellspacing="0" cellpadding="2" border="0">
							<tr>
								
              <td valign="top" nowrap="nowrap" align="center">
			  						<a href="/hvaonline/forums/rule.html"><img src="/hvaonline/templates/viet/images/icon_mini_rule.gif" alt="[Rule]" title="[Rule]"></a>
									<a id="rule" class="topmenu" href="/hvaonline/forums/rule.html">Rules</a>&nbsp;
									
									<a class="topmenu" href="/hvaonline/forums/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_groups.gif" alt="[Home]" title="[Home]"></a>
										<a id="backtosite" class="topmenu" href="/hvaonline/forums/list.html">Main Forum</a>&nbsp;

										<a class="topmenu" href="/hvaonline/portal/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_portal.gif" alt="[Portal]" title="[Portal]"></a>
										<a id="portalsite" class="topmenu" href="/hvaonline/portal/list.html">Portal</a>&nbsp;&nbsp;
									<br>
									
										<a href="/hvaonline/user/list.html"><img src="/hvaonline/templates/viet/images/icon_mini_members.gif" alt="[Members]" title="[Members]"></a>
										<a id="users" class="topmenu" href="/hvaonline/user/list.html">Member Listing</a>&nbsp;
										
										<a href="/hvaonline/forums/stats.html"><img src="/hvaonline/templates/viet/images/icon_mini_stats.gif" alt="[Statistics]" title="[Statistics]"></a>
										<a id="stats" class="topmenu" href="/hvaonline/forums/stats.html">Statistics</a>&nbsp;
										
										<a href="/hvaonline/search/filters.html"><img src="/hvaonline/templates/viet/images/icon_mini_search.gif" alt="[Search]" title="[Search]"></a>
										<span class="mainmenu"><a id="search" class="topmenu" href="/hvaonline/search/filters.html"><b>Search</b></a>&nbsp;
									
										<a href="/book/"><img src="/hvaonline/templates/viet/images/icon_mini_book.gif" alt="[Reading Room]" title="[Reading Room]"></a> 
										<a class="topmenu" href="/hvaonline/readingRoom/list.html">Reading Room</a>&nbsp;

									
									<span class="topmenu"> 
										

	
										<br>
											<a id="register" class="topmenu" href="/hvaonline/user/insert.html"><img src="/hvaonline/templates/viet/images/icon_mini_register.gif" border="0" alt="[Register]" title="[Register]"> 
												Register</a>&nbsp;&nbsp;</span>
											<img src="/hvaonline/templates/viet/images/icon_mini_login.gif" border="0" alt="[Login]" title="[Login]"> 
											<strong>Login</strong> [&nbsp;
											<a id="login" class="topmenu" href="/hvaonline/user/login.html">http</a>&nbsp;
											|
											<a id="logins" class="topmenu" href="https://www.hvaonline.net/hvaonline/user/logins.html">https </a>&nbsp;]</span>
								</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td>

<script type="text/javascript" src="/hvaonline/templates/viet/js/post_show.js"></script>
<script type="text/javascript" src="/hvaonline/templates/viet/js/post.js"></script>
<script type="text/javascript">
<!--

function showEmail(beforeAt, afterAt)
{
	return beforeAt + "@" + afterAt;
}

var starOn=new Image();
starOn.src="/hvaonline/templates/viet/images/star_on.gif";

var starOff=new Image();
starOff.src="/hvaonline/templates/viet/images/star_off.gif";

function writeStars(q, postId)
{
	for (var i = 0; i < 5; i++) {
		var name = "star" + postId + "_" + i;
		document.write("<img name='" + name + "' alt='*' />");
		document.images[name].src = q > i ? starOn.src : starOff.src;
	}
}

function addBookmark(relationType, relationId)
{
	var w = window.open('/hvaonline/bookmarks/insert/' + relationType + '/' + relationId + '.html', 'bookmark_add', 'width="700", height="100", scrollbars="no"');
	w.focus();
}

function supportAjax()
{
	if (typeof(AjaxUtils) != 'undefined') {
		if (window.ActiveXObject) {
			var r = new ActiveXObject("Microsoft.XMLHTTP");
			return r != undefined;
		}
		else if (window.XMLHttpRequest) {
			return true;
		}
	}

	return false;
}

-->
</script>

<table cellspacing="0" cellpadding="10" width="98%" align="center" border="0">
	<tr>
		<td class="bodyline">
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					<td valign="middle" align="left" colspan="2">
						<span class="maintitle"><a href="/hvaonline/posts/listByUser/25267.html" name="top" class="maintitle" id="top">Messages posted by: tranvanminh</a></span>
						&nbsp;<a href="/hvaonline/rss/showPostsByUser/25267.html"><img src="/hvaonline/templates/viet/images/xml_button.gif" border="0" alt="XML" /></a>
					</td>
				</tr>
			</table>
			
			<table cellspacing="2" cellpadding="2" width="100%" border="0">
				<tr>
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						<a href="/hvaonline/user/profile/25267.html">Profile for tranvanminh</a> 
            			<img src="/hvaonline/templates/viet/images/en_US/arrow.gif"><a href="/hvaonline/posts/listByUser/25267.html">Messages posted by tranvanminh</a>
						</span>
					</td>
										
					<td valign="middle" align="right">
						<span class="nav">[ number of posts not being displayed on this page: <span class="moderator">7</span> ]</span>
					</td>
				</tr>
			</table>

			
      <table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
        <tr>
          <th height="26" nowrap="nowrap" class="thleft">&nbsp;</th>
        </tr>

				
        <!-- POST LISTING -->
         
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/2115.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/2115/10766.html#10766,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Chào mừng bạn đến với ``vũ điệu Samba`` trong ``Lễ hội.. Chim cánh chụt``!<br/> Bạn có biết gần đây ``vũ điệu`` này đã có sự chuyển biến lớn hay không? Bạn đã biết, đã nghe hay đã ``vọoc`` những chức năng mới của Samba 3.0 chưa? Nếu chưa thì hãy thử nhé! Tôi sẽ cùng thử với các bạn trong bài viết này!<br/><br/><br/> Như các bạn đã biết, Samba đã có một vị trí nhất định, một phần không thể thiếu trong các Distribution của giới mã mở, như Red Hat Enterprise Linux（RHEL） 3.0 Fedora Core, và trong nhiều Distributio khác.<br/><br/> Nếu bạn yêu thích *nix, bạn đã từng sử dụng Samba 2.2x thì bạn có có nghĩ đến việc nâng cấp lên phiên bản Samba 3.0 mới mẽ, với nhiều tính năng rất ``ăn tiền`` này chưa?<br/><br/> Cho dù bạn đang quản trị một mạng lớn, hay chỉ là một Iter bình thường, hoặc thậm chí là là người mới mò mẫm, mới đặt chân vào thế giới Samba thì bạn đừng do dự, hãy thử đi rồi bạn sẽ thấy thú vị với những khám phá của mình. Bạn cũng đừng lo nếu mình đang ``sở hữu`` vốn kiến thức ``tiếng Anh.. thầy chạy`` không thể sờ mó, gậm nhấm được cái mớ chỉ toàn chữ là chữ của đám Anglo Sắc xông ``mắc toi`` kia! Bởi vì những gì bạn được đọc bên dưới được viết bằng thứ ngôn ngữ mà bất cứ người Việt (không mù chữ) nào cũng có thể đọc và có thể hiểu được! greensmile.gif<br/><br/> Ơ kê, bắt đầu nào quý vị!<br/><br/><br/> 1. ``Điểm mặt`` những chức năng mới trong Samba 3.0<br/><br/> 1.1. Internationalization<br/><br/> 1.2. SWAT Internationalization<br/><br/> 1.3. Unicode Support: Xử lý thông tin bằng UCS-2 (Unicode base)<br/> Windows 2000／XP／Windows Server 2003<br/><br/> 1.4. Kết hợp với Active Directory<br/> Đuợc hỗ trợ xác thực (authentication) của Kerberos nên tương thích với Active Directory (Windows 2000 trở lên)<br/><br/> 1.5. Mở rộng chức năng Winbind<br/><br/> Có thệ quản lý LDAP server trên mapping tables userID + Groups<br/><br/> 1.6. Hỗ trợ nhóm toàn cụ Arbitrarry (Arbitrary Global Group support)<br/><br/> 1.7. Hỗ trợ tính năng Attestation database<br/> smbpasswd, và nhiều chưc năng Attestation có chất luợng bảo mật cao khác.<br/><br/> 1.8. Mở rộng an ninh cho SMB -<br/> SMB signature; mã hóa cho security channel, và có sự phố hợp với nhiều chức năng bảo mật cao của Windows<br/><br/> 1.9. Mở rộng, làm phong phú thêm các Command cho các tính đồ chuộng gõ bàn phím hơn là rê chuột.<br/><br/> ===============================<br/><br/> <b>2. Cấu hình cho Samba 3.0</b><br/><br/> Phần này giới thiệu cơ bản cách cấu hình của Samba - nếu bạn đã từng ``làm việc`` với Samba 2.x bạn sẽ nhận ra nhiều cái ``lối cũ ta về`` á! Tuy nhiên, Samba 3.0 có rất nhiều chức năng mới, hoặc đã được nâng cấp, sửa đổi nên các bạn cũng cần lưu ý.<br/><br/> Như đã đề cập ở phần giới thiệu, Samba 3.0 được tích hợp trong các distribution của *nix nên khi bạn cài đặt các Dis này thì mặc định các bạn đã có tùy chọn xử lý với Samba.<br/><br/> Ngoài ra, các bạn có thể download bản Samba mới nhất ở đây:<span class="link"> http://us1.samba.org/samba/</span><br/><br/> Đây là phiên bản mới nhất (Samba 3.0.6) và được sử dụng cho bài viết này. Bạnbạn có thể tùy chọn download các gói RPM, Tar, SRPM để cài đặt. Bài này tôi dùng SRPM, và GNU Libiconv để thực hiện cài đặt.<br/><br/><br/> cd /usr/src/redhat/SRPMS/<br/> rpm --rebuild libiconv-1.8-1.src.rpm<br/> rpm --rebuild samba-3.0.6.src.rpm<br/><br/> Khi thực hiện rebluild, hệ thống của bạn sẽ tiến hành biên dịch Samba - bạn phải có các packages như GCC , LDAP , Kerberos để thi hành biên dịch. Nếu thực hiện rebuild thành công, trong /usr/src/redhat/RPM/RPMS/i386 sẽ có file RPM -- &gt; Còn không nhanh chân dùng file này để mà cài với đặt! <img src="/hvaonline/images/smilies/575eda61e93c7ad9d05928580213fd9b.gif" border="0" alt="smilie" align="absbottom"><br/><br/> Ah há, nếu bạn nào có ``Coca Cola``, á lộn, có APT, bạn cụng có thể dùng chúng để để download và cài đặt cho nhanh nhanh hơn tí! greenbiggrin.gif<br/><br/><br/> apt-get update<br/> apt-get install locales<br/> apt-get install samba<br/><br/><br/> Nếu như 2 cách trên bạn không thể dùng đuợc, hoặc bạn muốn sử dụng bản Samba mới nhất này vì lý do gì đó thì bạn có thể complier Samba từ source. Muốn cài đặt Samba, như đã nó trên, bạn cần cài đặt GNU Libiconv. Để sử dụng Attestation Database hoặc AD Domain support thì bạn cần cài LADP và Kerberos.<br/><br/><br/> <b>Tiến trình cài cài đặt Samba có thể mô tả như sau:</b><br/><br/> Nếu bạn không muốn nhận các thông báo lỗi (error message) khi cấu hình Samba thì cần chọn các Options:<br/><br/> --with-libiconv=<br/> : GNU libiconv install dir<br/><br/> --with-pam : Hữu hiệu hóa PAM<br/><br/> --with-ads : Active Directory<br/><br/> --with-ldapsam : support Attestation LDAP<br/><br/> cd samba-3.0.6source<br/><br/> ./configure --with-libiconv=/usr/local --with-automount --with-smbmount --with-pam --with-pam_smbpass --with-ldapsam --with-syslog --with-quotas --with-utmp --with-winbind --with-ldap --with-ads --with-smbwrapper<br/><br/> $ make<br/> $ su<br/> # make install<br/><br/><br/><br/> Unicode Support （UCS-2、UTF-8）<br/><br/> <b>/etc/smb.conf</b><br/><br/> <blockquote><br/> [global]<br/> unix charset = UTF-8<br/> dos charset = UTF-8<br/> display charset = UTF-8<br/><br/><br/> unix charset = Nhưng char chạy trên Unix filesystem<br/><br/> dos charset =Nhưng char chạy trên Windows<br/><br/> display charset = Những chat chạy trên SWAT<br/><br/><br/> Tham gia Active Directory<br/><br/> Khi sử dụng Kerberos Attestation, Samba 3.0 có thể tham gia Active Drectory trên Windows .<br/><br/> Thí dụ bạn có những yếu tố như sau:<br/><br/> DCOS ： Windows Server 2000 (DC= Domain control )<br/> FQDN ： thanbai.w2000ad1.minh.com<br/> Directory domain ： W2000AD1.MINH.COM<br/> Samba 3.0.3 PC ： 777 (computer name )<br/><br/> &nbsp;
</blockquote><br/><br/> Cách cấu hình /etc/krb5.conf<br/> <blockquote><br/><br/> [realms]<br/> W2000AD1.MINH.COM = { # Active domain name<br/> kdc = thanbai.w2000ad1.minh.com # Dc host<br/> }<br/><br/> [domain_realm]<br/> .thanbai.w2000ad1.minh.com = W2000AD1.MINH.COM<br/><br/> thanbai.w2000ad1.minh.com = W2000AD1.MINH.COM<br/> # DNS domain name và Kerberos Realm<br/><br/> &nbsp;
</blockquote><br/><br/> đồng thời trong file /etc/smb.conf bạn cấu hình như sau<br/> <blockquote><br/> [global]<br/> workgroup W2000AD1 &lt;- Net BIOS name<br/> realm = W2000AD1.MINH.COM<br/> security = ADS&nbsp;
</blockquote><br/><br/> Chuẩn bị xong, ta bắt đầu tham gia vô Active Directory:<br/><br/> kinit <a href="mailto:administrator@W2000AD1.MINH.COM">administrator@W2000AD1.MINH.COM</a> &lt;--- Nhập chữ IN<br/> Password for <a href="mailto:administrator@W2000AD1.MINH.COM">administrator@W2000AD1.MINH.COM</a>: &lt;--- Nhập Password cũa Administrator<br/><br/><br/> Kau khi login thành công, bạn dùng cmd:<br/><br/> net ads join<br/><br/> Joined...<br/><br/> cái ni chắc bạn đã thấy rồi......<br/><br/> Support of an attestation database<br/><br/> Tiếp theo tôi xin giới thiệu một trong các tính năng hay ho của Samba là hỗ trợ nhiều chức năng bảo mật tốt cho auth database.<br/><br/><br/> Default attestation modules<br/><br/> smbpasswd : (default)<br/> tdbsam : Databse dạng TDB<br/> ldapsam : Set URL LDAP server<br/><br/> example config<br/><br/> [global]<br/> passdb backend = ldapsam:ldap://ldap.minh.com smbpasswd<br/><br/><br/><br/> pdbedit command<br/> cmd này dùng cho ta quản lý acount như add user , modify user ,<br/><br/><br/> pdbedit -u 777 -v<br/><br/><br/> Unix username: 777<br/> NT username:<br/> Account Flags: [U ]<br/> User SID: S-1-5-21-3899892270-3850540773-3613385630-12000<br/> Primary Group SID: S-1-5-21-3899892270-3850540773-3613385630-10201<br/> Full Name:<br/> Home Directory: \777<br/> HomeDir Drive: G:<br/> Logon Script:<br/> Profile Path: \777profile<br/> Domain: SAMBA30<br/> Account desc:<br/> Workstations:<br/> .............<br/> ..............<br/> .............<br/><br/><br/><br/><br/> <b>Mỏ rộng security cho SMB</b><br/><br/> Samba protocol đuợc mỡ rộng và có rất nhiều chức năng năng cao bảo mật cho samba.<br/><br/> Một số tính năng mới của Samba3.0:<br/><br/> encrypt passwords、client plaintextauth<br/><br/> lanman auth、client lanman auth<br/><br/> ntlm auth、client ntlmv2auth<br/><br/> ntlmv2 auth、client ntlmv2auth<br/><br/> server signing、client signin<br/><br/> server schannel、client schannel<br/><br/> disable netbios<br/><br/><br/> <b>Global group support in NT domain</b><br/><br/> Trong Samba 2.2 chỉ có hỗ trợ Domain Admins và Domain Users, nhưng đối với samba3.0.x thì hoàn toàn đuợc cải thiện trong vấn đề này, samba3.0.x có thể dùng tất cả domain trong Windows<br/><br/> Bạn có thể dùng command net groupsmap để cấu trúc global group. Khi dùng net groupsmap command cần có sự phối họp của *nix groups, bạn có thể mapping hoặc make một *nix group dành cho bên *nix<br/><br/><br/> Phối hợp Domain Admins và *nix omadm group<br/><br/> <blockquote><br/> # net groupmap modify NTgroup=`Domain Admins` UNIXgroup=domadm<br/><br/> # net groupmap add NTgroup=`Samba 1` UNIXgroup=samba1 type=d<br/><br/> No rid or sid specified, choosing algorithmic mapping<br/> Successully added group Samba 1 to the mapping db<br/><br/><br/> <b>check setting</b><br/><br/> # net groupmap list<br/><br/> Domain Admins (S-1-5-21-3665834988-2389521404-3181922140-512) - &gt; domadm<br/> Domain Guests (S-1-5-21-3665834988-2389521404-3181922140-514) - &gt; -1<br/> ...............................<br/> ..........................<br/> ...........................<br/> ......................<br/> .....................<br/><br/> Samba 1 (S-1-5-21-2348584241-585622575-4239557047-1000) - &gt; samba1<br/> con số là SID&nbsp;
</blockquote><br/><br/> ==========<br/><br/> <b>3. Tổng kết</b><br/><br/> Còn rất nhiều chức năng tôi không nêu trong bài viết đuợc trong khuôn khổ giới hạn của bài viết này. Hy vọng có thời gian để bổ túch thêm trong các version tíep theo của bài này ngõ hầu giúp các bạn có nguồn tài liệu bằng Việt ngữ để có thể tìm hiểu, học hỏi, nâng cao thêm kiến thức về Samba.<br/><br/> <b>4. Các tài liệu tham khảo </b><br/><br/> Active Directory<br/><br/><span class="link"> /forum/showtopic_3...tml#entry206869</span><br/><br/> LDAP<br/><br/><span class="link"> http://www.gracion.com/server/whatldap.html</span><br/><br/> SWAT<br/><br/><span class="link"> http://www.sjoerd-visser.demon.nl/net-linux/swat.html</span><br/><br/> Các site khác:<br/><br/><span class="link"> http://us1.samba.org/samba/docs/</span><br/><br/><span class="link"> http://samba.sernet.de/</span><br/><br/><span class="link"> http://www.ifn.ing.tu-bs.de/ifn/sonst/samba-vms.html</span><br/><br/><span class="link"> http://www.osnews.com/story.php?news_id=6684</span><br/><br/> 777-Diemxua<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/2110.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/2110/10752.html#10752,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><b>Snort với ACID+MySQL</b><br/><br/> <b>Intro</b><br/><br/> Snort đối với một số người thì nó chỉ là “mất bò mới lo làm chuồng.” Đối vơi tôi thì nó là một cái dụng cụ có ích cho việc làm của mình. Ý tôi là nói khong phải chỉ nhất thiết dành cho việc tìm kiếm, ngăn ngừa hackers, mà nó có thể dành cho việc tìm kiếm những nguyên nhân đang gây ra một chuyện rắc rối nào đó dễ dàng hơn.<br/><br/><br/> Ví dụ như ngày hôm qua cái server có thay đổi một chút làm cho nó không chạy tốt. Tôi có thể nhìn vô Snort log mà biết ai đã xử dụng VNC, telnet, ssh, Terminal Services, PCAnywhere, vv… vô máy đó. Mặc dù không nhất thiết là người này đã làm gì sai, nhưng mình có thể rút ngắn được thời gian tìm ra nguyên nhân bằng cách này.<br/><br/><br/> Hoặc là một hôm tôi tìm thấy có người sử dụng formmail.cgi (version cũ) để gửi spam emails. Snort phát hiện ra IP nào đang bị tấn công và máy đó được chỉnh lại ngay lập tức.<br/><br/><br/> Cho dù firewall có thể ngăn chặn đuoc một số tấn công từ ngòai vào. Tôi vẫn chạy Snort ở trong LAN. Virus/trojans có thể vô bằng nhiều cách khác như emails, web sites, downloads. Snort có thể phát hiện một số lớn.<br/><br/><br/> <b>Installing </b><br/><br/><br/> Tôi sẽ không đi sâu vào chuyện cài đặt này. Tôi chỉ trình bày qua sơ trên Debian thôi. Nhưng bạn cần nhớ là khi cài Snort từ source thì cần phải có –with-mysql. Trong đây, tôi cho rằng MySQL đã đuoc cài sẵn.<br/><br/><br/> <b>MySQL:</b><br/><br/> 1. Cần database cho Snort.<br/><br/> mysql&gt; create database snort;<br/> <b><br/> SNORT:</b><br/><br/><br/> Cài đặt Snort trên Debian:<br/><br/><br/> <blockquote> apt-get install snort-mysql&nbsp;
</blockquote><br/><br/> Bạn phải trả lời một số câu hỏi sau:<br/><br/> 1. Do you want to continue? [Y/n] Y<br/><br/> 2. When should snort be started? boot<br/><br/> 3. On which interface should Snort listen? Eth0<br/><br/> 4. Please enter the address range that Snort will listen on? blank<br/><br/> 5. Should I disable the promiscous mode? No<br/><br/> 6. Should snort's rules testing order be changed to Pass|Alert|Log? No<br/><br/> 7. If you want to specify custom options to 'snort', please specify them here: blank<br/><br/> 8. Who should receive the daily statistics mails? root<br/><br/> 9. An alert needs to appear more than this times to go to the stats. 1<br/><br/> Cài đặt Snort trên Fedora hoặc Mandrake:<br/><br/> <span class="link"> http://www.snort.org/dl/binaries/linux/</span><br/><br/> <b>ACID</b>: Acid cần có Apache+PHP đã được cài sẵn.<br/><br/><br/><br/> Cài đặt Acid trên Debian:<br/><br/> apt-get install acidlab<br/><br/> Which web server would you like to reconfigure automatically? apache<br/><br/> Which database would you like to use? mysql<br/><br/> Alert database name: snort<br/><br/> Alert database hostname: localhost<br/><br/> Alert database user: root<br/><br/> Alert database password: &lt;password&gt;<br/><br/> Archive database hostname: localhost<br/><br/> Archive database user: root<br/><br/> Archive database password: &lt;password&gt;<br/><br/> Cài đặt Acid trên Fedora hoặc Mandrake:<br/><br/><span class="link"> http://dag.wieers.com/packages/php-acid/</span><br/><br/> <b><br/> Configuration</b><br/><br/><br/> Tìm cái snort.conf. Trong Debian thì bạn sẽ thấy nó ở trong <b>/etc/snort/snort.con</b>f. Trong đó bạn sẽ tìm thấy dòng chữ này:<br/><br/><br/> <blockquote>output database: log, mysql, user=username password=ilikelinux dbname=snort host=localhost&nbsp;
</blockquote><br/><br/><br/> Nếu có ‘#’ ở đằng trước thì xóa nó đi.<br/><br/><br/> <b>Running Snort</b><br/><br/><br/> Truoc khi chạy Snort, MySQL cần được chạy trước.<br/><br/><br/> <b>/etc/init.d/mysql start</b><br/><br/><br/> Sau đó chạy Snort<br/><br/><br/> <b>/etc/init.d/snort start</b><br/><br/><br/> Nếu bạn muốn nhìn alerts trong console thì tìm trong /var/log/snort/alert<br/><br/> <blockquote>tail –f /var/log/snort/alert&nbsp;
</blockquote><br/><br/> Còn nếu bạn muốn nhìn trong browser thì vô<span class="link"> http://yourdomain.com/acid</span><br/><br/><br/> Bạn sẽ thấy những thông báo của Snort trên browser.<br/><br/><br/> <b>Conclusion</b><br/><br/> Những thông báo này sẽ có thể làm bạn giật mình. Đừng quá lo lắng. Snort thông báo khá chi tiết và đôi khi có thông báo sai lầm (false alarm). Vì vậy, bạn phải cần hiểu rõ là những thông báo nào mình nên nhìn sâu thêm và lọai bỏ đi cái không cần chú ý đến. Tất cả những gì bạn cần sửa đổi sau khi cài đặt là hòan tòan ở trong /etc/snort. Bạn có thể xóa bỏ những rules bạn không muốn thông báo bằng cách edit <b>/etc/snort/*rules</b><br/><br/><br/> Questions/Comments<br/><br/> <a href="mailto:foobar@infinipress.com">foobar@infinipress.com</a></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/2109.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/2109/10747.html#10747,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">vsftpd - very secure file transfer daemon<br/><br/> -------------------------------------------------<br/><br/> Làm thế nào khi muốn chạy ftp server mà không muốn FTP user có login shell, system account và dạo chơi trên cái HDD của server ? chroot ? quá phức tạp.<br/> Câu trả lời là vsftpd và virtual user<br/><br/> <b>Yêu cầu:</b><br/> ----------<br/> Cần có Linux PAM module.<br/><br/> Cài đặt PAM Modules:<br/> ---------------------------<br/> Download tại kernel.org<br/><br/> chairuou@slackware10:~/download$ wget<span class="link"> http://www.kernel.org/pub/linux/libs/pam/pre/library/Linux-PAM-0.77.tar.gz</span><br/><br/> Giải nén:<br/><br/> chairuou@slackware10:~/download$ tar zxvf Linux-PAM-0.77.tar.gz<br/> chairuou@slackware10:~/download/Linux-PAM-0.77$ ./configure<br/> chairuou@slackware10:~/download/Linux-PAM-0.77$ make<br/> chairuou@slackware10:~/download/Linux-PAM-0.77$ make install<br/><br/> kiểm tra lại:<br/><br/> chairuou@slackware10:~/download/Linux-PAM-0.77$ ls -l /lib/security<br/><br/> <b>Cài đặt vsftpd:</b><br/> ------------------<br/><br/> Download tại<span class="link"> ftp://vsftpd.beasts.org/users/cevans/vs</span> … 0.1.tar.gz<br/> Tạo user để chạy vsftpd<br/><br/> root@slackware10:~/useradd -d /no/where -s /bin/false nobody<br/><br/> Tạo thư mục /usr/share/empty<br/><br/> root@slackware10:~/mkdir /usr/share/empty<br/><br/> <b>Giải nén:</b><br/><br/> chairuou@slackware10:~/download/tar zxvf vsftpd-2.0.1.tar.gz<br/> chairuou@slackware10:~/download/cd vsftpd-2.0.1<br/> chairuou@slackware10:~/download/vsftpd-2.0.1/make<br/> chairuou@slackware10:~/download/vsftpd-2.0.1/su<br/> root@slackware10:~/download/vsftpd-2.0.1/make install<br/> root@slackware10:~/download/vsftpd-2.0.1/cp vsftpd.conf /etc/vsftpd.conf<br/><br/> <b>Cài đặt virtual user:</b><br/> -----------------------<br/><br/> root@slackware10:/#useradd my_ftp -s /bin/false -d /var/ftp_pub<br/> root@slackware10:/#passwd my_ftp my_password<br/> root@slackware10:/#vi /etc/vsftpd.conf<br/><br/> <blockquote>#----------------------<br/> # vsftpd config file<br/> #----------------------<br/> anonymous_enable=NO # turn off anonymous login<br/> local_enable=YES # turn on local user account login, need for mapping virtual user<br/> write_enable=YES # user writeable<br/> anon_upload_enable=NO # no anonymous upload<br/> anon_mkdir_write_enable=NO # no anonymous MAKE DIR<br/> anon_other_write_enable=NO # anonymous write disable<br/> chroot_local_user=YES # local user chroot<br/> guest_enable=YES # required for virtual user<br/> guest_username=my_ftp # real user using for mapping virtually<br/> listen=YES # don't use inetd/xinetd to run<br/> listen_port=21 # FTP Port<br/> pasv_min_port=30000 # Min/Max port to use in PASS mode<br/> pasv_max_port=30999<br/> virtual_use_local_privs=YES # required for virtuall user mapping permission from real user<br/> xferlog_enable=YES # Log related settings<br/> vsftpd_log_file=/var/log/vsftpd.log&nbsp;
</blockquote><br/><br/> <b>Tạo virtual user database</b><br/> ------------------------------<br/> Cần tạo 1 file text với cấu trúc như sau :<br/><br/> <blockquote>user<br/> password<br/> user<br/> password&nbsp;
</blockquote><br/><br/> Ví dụ:<br/> -------<br/><br/> $vi vuser.txt<br/> <blockquote>ftp1<br/> password1<br/> ftp2<br/> password2&nbsp;
</blockquote><br/><br/> Dùng lệnh sau:<br/><br/> root@slackware10:/#db_load -T -t hash -f vuser.txt /etc/vsftpd_login.db<br/> root@slackware10:/#chmod 600 /etc/vsftpd_login.db<br/><br/><br/> Tạo 1 file vsftpd.pam có nội dung như sau:<br/><br/> <blockquote>auth required /lib/security/pam_userdb.so db=/etc/vsftpd_login<br/> account required /lib/security/pam_userdb.so db=/etc/vsftpd_login<br/> &nbsp;
</blockquote><br/> Sau đó copy file này vào /etc/pam.d<br/> Mã:<br/><br/> root@slackware10:/#cp vsftpd.pam /etc/pam.d/ftp<br/><br/> ---------------------------------------<br/><br/> Tác giả : chairuou<br/> Nguồn :<span class="link"> http://forum.vnoss.org/viewtopic.php?id=240</span><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/2059.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/2059/10476.html#10476,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody">Gỏ lệnh : <i>rpm --import public.gpg.key</i> thử xem ?<br/><br/> Khi cài đặt chương trình chỉ cần gỏ<br/> <i>yum install package-name</i></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/2053.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/2053/10452.html#10452,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">http://hvaonline.net/hvaonline/posts/list/110.html<br/><br/> - xem các bài giới thiệu tổng quát về linux<br/><br/> Thân</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1833.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1833/10069.html#10069,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">anhxa wrote:</cite><br>
<blockquote> Cảm ơn bạn nhìu...<br/> Nhân tiện cho mình hỏi thêm:<br/> <font color='violet'>1/</font> đoạn <font color='red'>code</font> sau:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#include &lt;stdio.h&gt;
#include &lt;conio.h&gt;
main &#40;&#41;
{ int n, i, s = 0;
clrscr &#40;&#41;;
printf&#40;"\nCho gia tri n = "&#41;; scanf&#40;"%d", &n&#41;;
for &#40;i = 0; i &lt;= n; i++&#41; s += i;
printf&#40;"\nKet qua: %d", s&#41;;
getch &#40;&#41;;
return 0;
}</pre>
</div><br/><br/> Mình không hiểu là tại sao lại phải cần khai báo: <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>int s = 0;</pre>
</div><br/> &nbsp;
</blockquote><br/><br/> Vì cuối dòng for (i = 0; i &lt;= n; i++) bạn có dùng <b>s += i</b> ,<br/> khúc này cùng nghĩa với <b>s = s + i </b> , từ đây nếu không khai báo int s =0 thì nó sẽ không hiểu s là bao nhiêu để + với i .<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>2/ Các bạn cho mình hỏi ý nghĩa 2 đoạn code sau:
a += b++</pre>
</div><br/><br/> <font color='red'>a +=</font> là cộng cái gì đó (bên phải )cho a (nó cũng giống như câu hỏi đâu trên của bạn )<br/> <font color='red'>b++</font> là cộng thêm 1 cho b sau khi đánh giá .<br/> <font color='red'>++b</font> là cộng thêm 1 cho b trước khi đánh giá .<br/><br/><br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/5.html">Góp ý và Hỏi đáp thắc mắc chung</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1836.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1836/10054.html#10054,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Đã giải thích quá rành mạch , xin phép được đóng topic .<br/><br/> Lý do - Không chịu đọc nội qui và vi phạm nội qui .<br/><br/><br/> ps :Tham gia hoạt động vào đâu cũng thế trước tiên bạn cần phải đọc nội quy của nơi bạn tham gia .<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/5.html">Góp ý và Hỏi đáp thắc mắc chung</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1968.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1968/9993.html#9993,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><p></p>
<cite class="blockquote">cigcof wrote:</cite><br>
<blockquote>Đây là ý kiến chủ quan của mình thôi. Mình nhận thấy HVA là một diễn đàn với lượng thành viên và bài viết cực lớn. Nhiều khi mình muốn <b>tìm kiếm theo User</b>. ( Chẳng hạn các bài viết của anh Conmale) thì potay. Mong lắm !!!&nbsp;
</blockquote><br/><br/> Bấm vào nick của thành viên nào muốn xem rồi vào link " Messages posted by xxx"<br/><br/> ví dụ của bạn :<br/><span class="link"> http://hvaonline.net/hvaonline/posts/listByUser/67588.html</span></span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1965.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1965/9962.html#9962,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">bmuht_gpj.76252_a9753dd0257efecf683ccbc63f641a2a/6/8/6002/daolpu/enilnoavh/052.831.141.302//:ptth<br/> <b>Cài đặt nhanh và cấu hình qmail + vpopmail+procmail + daemontools </b><br/><br/> Bài viết này dành cho những bạn reinstall qmail và các thiết bị quản lý qmail .<br/> thực hiện theo quá trình trong bài viết bạn có thể sử dụng được qmail , vpopmail , procmail , daemontools nhanh chóng mà không cần phải đi kiếm link hoặc các patch và đọc documents . tuy nhiên ý nghĩa của từng chương trình và lệnh sẽ không có dính kèm giải thích nào . nếu bạn chưa cài đặt qmail lần nào xin đọc bài viết &quot;Qmail as a Mail Gateway&quot; để biết thêm chi tiếc và cơ cấu cu. thể của qmail tại các link sau .<br/><br/> Phần 1 :<span class="link"> /hvaonline/posts/list/119.html</span><br/> Phần 2 :<span class="link"> /hvaonline/posts/list/120.html</span><br/> Phần 3 :<span class="link"> /hvaonline/posts/list/121.html</span><br/> Phần 4 :<span class="link"> /hvaonline/posts/list/122.html</span><br/><br/><br/> <b>1. Qmail </b><br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/qmail-1.03.tar.gz</span><br/> <b>2. Tcpserver </b><br/><span class="link"> ftp://ftp.jp.qmail.org/qmail/ucspi-tcp-0.88.tar.gz</span><br/> <b>3. Vpopmail</b><br/><span class="link"> http://www.inter7.com/index.php?page=vpopmail</span><br/> <b>qmail-smtpd-relay-reject</b><br/><span class="link"> http://www.qmail.org/qmail-smtpd-relay-reject</span><br/> <b>4. Patch files </b><br/><span class="link"> http://www.qmail.org/rpms/</span><br/> <b>5. Procmail</b><br/><span class="link"> http://www.procmail.org/</span><br/> <b>6. daemontools</b><br/><span class="link"> http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</span><br/><br/> <b>Tạo các thư mục cần thiết cho qmail </b><br/><br/> [root ]# mkdir /var/qmail<br/> [root ]# groupadd -g 710 nofiles<br/> [root ]# useradd -M -u 710 -g nofiles -s /bin/false -d /var/qmail/alias alias<br/> [root ]# useradd -M -u 711 -g nofiles -s /bin/false -d /var/qmail qmaild<br/> [root ]# useradd -M -u 712 -g nofiles -s /bin/false -d /var/qmail qmaill<br/> [roott]# useradd -M -u 713 -g nofiles -s /bin/false -d /var/qmail qmailp<br/> [root ]# groupadd -g 711 qmail<br/> [root ]# useradd -M -u 714 -g qmail -s /bin/false -d /var/qmail qmailq<br/> [root ]# useradd -M -u 715 -g qmail -s /bin/false -d /var/qmail qmailr<br/> [root ]# useradd -M -u 716 -g qmail -s /bin/false -d /var/qmail qmails<br/><br/> <b>Vpopmail User and group </b><br/> [root ]# groupadd -g 721 vchkpw<br/> [root ]# useradd -g vchkpw -u 721 vpopmail -M -s /bin/false<br/> [root ]# mkdir /home/vpopmail<br/> [root ]# chown vpopmail:vchkpw /home/vpopmail<br/><br/><br/> <b>Patch and compile qmail</b><br/> [root src]# tar zxvf qmail-1.03.tar.gz<br/> [root src]# cd qmail-1.03<br/> [root src]# wget<span class="link"> http://www.qmail.org/rpms/patches/qmail-1.03.errno.patch</span><br/> [root src]# wget<span class="link"> http://www.qmail.org/qmail-smtpd-relay-reject</span><br/> [root qmail-1.03]# patch -p1 &lt; ../qmail-smtpd-relay-reject<br/> [root qmail-1.03]# patch -p1 &lt; ../qmail-1.03.errno.patch<br/> [root qmail-1.03]# make setup check<br/> [root qmail-1.03]# ./config-fast <font color='red'>mail.example.jp</font><br/><br/><br/> <b>Cài đặt tcpserver </b><br/><br/> # tar xvfz ../ucspi-tcp-0.88.tar.gz<br/> # cd ucspi-tcp-0.88/<br/> #wget<span class="link"> http://www.qmail.org/rpms/patches/ucspi-tcp-0.88.errno.patch</span><br/> #patch -p1 &lt; ucspi-tcp-0.88.errno.patch<br/> patching file error.h<br/> # make setup check<br/><br/><br/> <b>Cài đặt vpopmail</b><br/><br/> [root src]# tar zxvf vpopmail-5.3.20.tar.gz<br/> [root src]# cd vpopmail-5.3.20<br/> [rootvpopmail-5.3.20]#./configure \<br/> --enable-roaming-users=y \<br/> --enable-relay-clear-minutes=10 \<br/> --enable-tcpserver-file=/home/vpopmail/etc/tcp.smtp \<br/> --enable-logging=y \<br/> [root vpopmail-5.3.20]# make<br/> [root vpopmail-5.3.20]# make install-strip<br/><br/> Khi chạy configure nếu bị <font color='red'>error </font><br/> <blockquote>configure: error: Unable to find your tcp.smtp file, specify --enable-tcpserver-path=/full/path/to/tcp.smtp&nbsp;
</blockquote><br/><br/> dùng lệnh sau để giải quyết<br/> <font color='red'># cp /etc/tcpserver/tcp.smtp /home/vpopmail/etc/</font><br/><br/> <b>Create virtual domain for vpopmail</b><br/><br/> [root etc]# cd /home/vpopmail/bin<br/> [root bin]# <font color='red'>./vadddomain example.jp</font><br/> Please enter password for postmaster:<br/> enter password again:<br/><br/> your virtual domain was create into /home/vpopmail/domains/example.jp<br/><br/> <b>Tạo default domain cho vpopmail </b><br/> # echo 'example.jp' &gt;<font color='red'> /home/vpopmail/etc/defaultdomain</font><br/><br/> <b>Create user for vpopmail</b><br/><br/> [root bin]# <font color='red'>./vadduser <a href="mailto:test@example.jp">test@example.jp</a></font><br/> Please enter password for <a href="mailto:test@example.jp">test@example.jp</a>:<font color='red'>*****</font><br/> enter password again:<font color='red'>******</font><br/><br/> <b>POP before SMTP</b><br/><br/> Create file tcp.smtp.cdb for access control<br/><br/> # touch /home/vpopmail/etc/tcp.smtp<br/><br/> File : /home/vpopmail/etc/tcp.smtp<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>127.:allow,RELAYCLIENT=&quot;&quot;</pre>
</div><br/><br/> [root etc]# tcprules /home/vpopmail/etc/tcp.smtp.cdb <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/home/vpopmail/etc/tcp.smtp.tmp &lt; /home/vpopmail/etc/tcp.smtp</pre>
</div><br/><br/> [root etc]# crontab -e<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>0,10,20,30,40,50 * * * * /home/vpopmail/bin/clearopensmtp 2&gt;&1 &gt; /dev/null</pre>
</div><br/><br/><br/> <b>Cài đặt Daemontools </b><br/><br/> # mkdir -p /package<br/> # chmod 755 /package<br/> # chmod +t /package<br/><br/> # cd /package<br/> # wget<span class="link"> http://cr.yp.to/daemontools/daemontools-0.76.tar.gz</span><br/> # tar xvpfz daemontools-0.76.tar.gz<br/> # cd daemontools-0.76/src<br/> # wget<span class="link"> http://www.qmail.org/rpms/patches/daemontools-0.76.errno.patch</span><br/> # patch -p1 &lt; daemontools-0.76.errno.patch<br/> (error.h)<br/> # cd admin/daemontools-0.76<br/> # ./package/install<br/><br/> <blockquote>Creating /service...<br/> Adding svscanboot to inittab...<br/> init should start svscan now.&nbsp;
</blockquote><br/><br/> chương trình sẽ tự động thêm dòng sau vào /etc/initab để khi khởi động linux svscan có thể tự động chạy .<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>SV:123456:respawn:/usr/local/bin/svscanboot</pre>
</div><br/><br/><br/> <b>Tạo directory cho svscan </b><br/><br/> # mkdir -p /var/service<br/> # chmod 0755 /var/service<br/><br/> File : <b>/usr/local/bin/svscanboot</b> ( không cần thay đổi các dấu <font color='red'>.......</font>)<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#!/bin/sh
# WARNING: This file was auto-generated. Do not edit!
PATH=:/usr/local/bin:/usr/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/X11R6/bin
exec &lt;/dev/null
exec &gt;/dev/null
exec 2&gt;/dev/null
svc -dx /var/service/* /var/service/*/log
env - PATH=$PATH svscan /var/service 2&gt;&1 | \
env - PATH=$PATH readproctitle service errors: .........................&#40;kéo dài &#41;</pre>
</div><br/><br/><br/> <b>Cấu hình cho daemontools</b> : setup chương trình cho deamontơols giám sát<br/><br/> mkdir -p /var/qmail/supervise/<font color='red'>qmail</font><br/> mkdir /var/qmail/supervise/<font color='red'>pop3d</font><br/> mkdir /var/qmail/supervise/<font color='red'>smtpd</font><br/> chmod +t /var/qmail/supervise/<font color='red'>qmail</font><br/> chmod +t /var/qmail/supervise/<font color='red'>pop3d</font><br/> chmod +t /var/qmail/supervise/<font color='red'>smtpd</font><br/><br/> File : <b>/var/qmail/supervise/qmail/run</b><br/> # cp /usr/local/src/qmail-1.03/home /var/qmail/supervise/qmail/run<br/><br/> Chuyển file rc của qmail từ <font color='red'>./Mailbox t</font>hành <font color='red'>./Maildir/</font> (/var/qmail/rc)<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#!/bin/sh
# Using splogger to send the log through syslog.
# Using qmail-local to deliver messages to ~/Mailbox by default.
exec env - PATH=&quot;/var/qmail/bin:$PATH&quot; \
qmail-start ./Maildir/ splogger qmail</pre>
</div><br/><br/> File : <b>/var/qmail/supervise/smtpd/run</b><br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#!/bin/bash
#
# smtpd/run : qmail-smtpd starting script
#
exec env - PATH=&quot;/var/qmail/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot; \
/usr/local/bin/tcpserver -v -x /home/vpopmail/etc/tcp.smtp.cdb -R -H -l0 -u `id -u qmaild` -g `id -g qmaild` 0 smtp \
/var/qmail/bin/qmail-smtpd 2&gt;&1</pre>
</div><br/><br/> Tạo quyền thi hành cho file run<br/> # chmod +x /var/qmail/supervise/smtpd/run<br/><br/> file : <b>/var/qmail/supervise/pop3d/run</b><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>#!/bin/bash
#
# pop3d/run : qmail-pop3d starting script
#
exec env - PATH=&quot;/var/qmail/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin&quot; \
tcpserver -v -x /etc/tcpserver/tcp.pop3.cdb -R -H 0 pop3 qmail-popup mail.example.jp \
/home/vpopmail/bin/vchkpw \
qmail-pop3d Maildir 2&gt;&1</pre>
</div><br/><br/> Tạo quyền thi hành cho file run<br/> # chmod +x /var/qmail/supervise/pop3d/run<br/><br/> Tạo symlink<br/> # ln -s /var/qmail/supervise/qmail /var/service/qmail<br/> # ln -s /var/qmail/supervise/smtpd /var/service/smtpd<br/> # ln -s /var/qmail/supervise/pop3d /var/service/pop3d<br/><br/> Khỏi động lại init để enable svscan bằng lệnh sau<br/> # kill -HUP 1<br/><br/> Kiểm tra các service có hoạt động hay không<br/> <font color='red'># svstat /var/service/*</font><br/> /var/service/pop3d: up (pid 5021) <font color='red'>4 seconds</font><br/> /var/service/qmail: up (pid 5022) <font color='red'>4 seconds</font><br/> /var/service/smtpd: up (pid 5023) <font color='red'>4 seconds</font><br/><br/> <font color='red'>*</font> up seconds chỉ báo <font color='red'>0 </font>hay <font color='red'>1</font> thì check lại permission của run scripts hoặc syntax của chúng .<br/><br/> <b>Qmail configuration </b><br/> /var/qmail/control/locals<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>localhost &#40;add&#41;
mail.example.jp
example.jp &#40;add&#41;</pre>
</div><br/><br/> /var/qmail/control/rcpthosts<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>localhost &#40;add&#41;
mail.example.jp
example.jp &#40;add&#41;</pre>
</div><br/><br/><br/> <b>Start up scirpt cho qmail</b><br/><br/> <blockquote>#!/bin/sh<br/><br/> [ -f /var/qmail/rc ] || exit 0<br/> PATH=$PATH:/var/qmail/bin:/usr/local/bin<br/><br/> case &quot;$1&quot; in<br/> start)<br/> echo -n &quot;Starting... qmail&quot;<br/> csh -cf '/var/qmail/rc &'<br/><br/> ################ SMTP #####################<br/><br/> /usr/local/bin/tcpserver -H -R -l <font color='red'>mail.example.jp</font> -v \<br/> -x /home/vpopmail/etc/tcp.smtp.cdb -u 711 -g 710 0 smtp \<br/> /var/qmail/bin/qmail-smtpd 2&gt;&1 | /var/qmail/bin/splogger smtpd 2 &<br/><br/> ################ POP #####################<br/><br/> /usr/local/bin/tcpserver -H -R -l <font color='red'>mail.example.jp</font> -v 0 pop3 \<br/> /var/qmail/bin/qmail-popup <font color='red'>mail.example.jp </font>/home/vpopmail/bin/vchkpw \<br/> /var/qmail/bin/qmail-pop3d Maildir 2&gt;&1 | /var/qmail/bin/splogger pop3d 2 &<br/><br/> touch /var/lock/qmail<br/> ;;<br/> stop)<br/> echo &quot;Shutting down qmail.&quot;<br/> PID=`/bin/ps -aefw | grep qmail | awk '{print $2}'`<br/> if [ ! -z &quot;$PID&quot; ] ; then<br/> /bin/kill ${PID} 1&gt; /dev/null 2&gt;&1<br/> fi<br/> rm -f /var/lock/qmail<br/> ;;<br/> *)<br/> echo &quot;Usage: &quot;$0&quot; {start|stop}&quot;<br/> exit 1<br/> esac<br/> exit 0&nbsp;
</blockquote><br/><br/> [root init.d]# chmod +x qmail<br/> [root init.d]# cd ../rc3.d/<br/> [root rc3.d]# ln -s ../init.d/qmail S84qmail<br/><br/> <i>Check process tree </i><br/><br/> <blockquote><br/> <u><b>pstree -ah</b></u><br/><br/> |-svscanboot /usr/local/bin/svscanboot<br/> | |-readproctitle service errors: ...<br/> | `-svscan /var/service<br/> | |-supervise qmail<br/> | | `-qmail-send<br/> | | |-qmail-clean<br/> | | |-qmail-lspawn ./Maildir/<br/> | | |-qmail-rspawn<br/> | | `-splogger qmail<br/> | |-supervise smtpd<br/> | | `-tcpserver -v -x /home/vpopmail/etc/tcp.smtp.cdb -R -H -l0 -u ...&nbsp;
</blockquote><br/><br/> <b>Remove sendmail </b><br/><br/> [root root]# rm /usr/lib/sendmail<br/> [root root]# rm /usr/sbin/sendmail<br/> [root root]# ln -s /var/qmail/bin/sendmail /usr/sbin/sendmail<br/> [root root]# ln -s /var/qmail/bin/sendmail /usr/lib/sendmail<br/><br/> <b>Install procmail</b><br/><br/> # cd /usr/local/src<br/> # tar xfvz procmail-3.21.tar.gz<br/> # cd procmail-3.21<br/> # make<br/> # make install<br/> # make install-suid<br/><br/> Tạo file .qmail vào <i>~vpopmail/domains/example.jp/777/.qmail</i> với nội dung sau<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>| /usr/bin/procmail -m ./.procmailrc</pre>
</div><br/><br/> chú ý khi thêm vào không được thêm <font color='red'>space</font> vào trước dấu <font color='red'>|</font> .<br/><br/><br/> Tại file .procmailrc vào <i>~vpopmail/domains/example.jp/777/.procmailrc</i> với nội dung sau<br/><br/> <blockquote>PATH=/usr/bin:/bin:/usr/local/bin<br/> HOME=/var/vpopmail/domains/<font color='red'>example.jp</font>/777<br/> MAILDIR=$HOME/Maildir<br/> DEFAULT=$HOME/Maildir/<br/> LOGFILE=$MAILDIR/procmail.log<br/> LOCKFILE=$MAILDIR/procmail.lock<br/><br/> &nbsp;
</blockquote><br/><br/> =================================<br/><br/> <font color='green'>06/07/25</font> :<br/> Thêm bước patch error cho qmail<br/> Thêm bước patch cho tcpserver (ucspi-tcp-0.88.errno.patch )<br/><br/> <font color='green'>06/07/27</font> :<br/> Chỉnh sửa và thêm chi tiếc cấu hình daemontools<br/> Sửa đổi start up script cho qmail<br/><br/> Tác giả : 777<br/> Nguồn : www.vnhacker.org<br/><br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1563.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1563/7423.html#7423,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><b>Sử dụng SYSLINUX làm bootloader</b><br/><br/> April 13th 2006<br/><br/> Để tạo một đĩa (đĩa mềm hay CD) khởi động Linux, bạn cần phải ghi nhân Linux (Linux kernel) lên sector 0 của đĩa, hoặc dùng các chương trình bootloader như LILO, GRUB để đọc Linux kernel vào bộ nhớ. Tôi chưa sử dụng GRUB, nhưng với cách ghi thẳng Linux kernel lên sector 0 hay dùng LILO thì chúng ta cần phải làm một số việc như copy Linux kernel, sau đó thiết lập thông số ramdisk word và cuối cùng là copy root filesytem lên đĩa.<br/><br/> SYSLINUX là một chương trình bootloader và tiện ích giúp ta làm toàn bộ các công việc trên một cách đơn giản chỉ với một dòng lệnh. Việc tạo một đĩa CD khởi động cũng đơn giản hơn rất nhiều khi sử dụng SYSLINUX. SYSLINUX được sử dụng trong rất nhiều các hệ thống Linux trên đĩa mềm phổ biến, cũng như trong các bản phân phối Linux (như đĩa cài đặt Fedora Core). Nếu khi khởi động một hệ thống Linux bằng đĩa mềm hay CD mà bạn thấy đầu tiên hiện ra dòng chữ SYSLINUX (với đĩa mềm) hay ISOLINUX (với CD) thì tức là hệ thống đó sử dụng SYSLINUX làm bootloader. Ngoài ra SYSLINUX còn có thể sử dụng cho network booting (với tên gọi PXELINUX).<br/> Đặc điểm của SYSLINUX<br/><br/> SYSLINUX chỉ có thể khởi động Linux từ một đĩa sử dụng hệ thống file FAT. Do đó nó chỉ thích hợp để khởi động hệ thống Linux với các file kernel và root filesystem ghi trên đĩa mềm hay CD, chứ không thích hợp dùng để khởi động một hệ thống Linux cài đặt trên ổ cứng (thường sử dụng hệ thống file ext2 hay ext3).<br/><br/> Lưu ý rằng điều này không có nghĩa là hệ thống Linux của bạn phải ghi trên FAT filesystem. Chỉ là yêu cầu về đĩa chứa file kernel và root filesystem. Sau khi Linux kernel đã được load lên, nó có thể hoạt động với bất kỳ hệ thống file nào mà nó hỗ trợ (được thiết lập khi biên dịch kernel).<br/> Cơ bản về cách tạo đĩa khởi động Linux với SYSLINUX<br/><br/> Để tạo một đĩa khởi động Linux dùng SYSLINUX làm bootloader, cần chuẩn bị file nhân Linux (là file bzImage thu được khi compile kernel bằng lênh make bzImage, thường có tên là bzImage, vmlinuz hay kernel.bzi ...), một file chứa root filesystem (thường được nén lại và đặt tên là initrd.gz), một file cấu hình SYSLINUX trong đó báo cho bootloader biết tên của file nhân Linux và root filesystem. Dĩ nhiên là còn cần có chương trình syslinux để cài đặt bootloader hay chương trình mkisofs để tạo CD image. Hai chương trình này thường được cài sẵn trong nhiều hệ thống Linux (như Fedora Core hay RedHat).<br/><br/> Cách tạo file nhân Linux hay file chứa root filesystem nằm ngoài phạm vi bài viết giới thiệu về SYSLINUX. Xem như bạn đã biết cách tạo hai file đó (nếu không thì chưa thể nghĩ đến việc làm đĩa khởi động Linux làm gì). Việc duy nhất còn lại phải chuẩn bị là tạo file cấu hình cho SYSLINUX, một công việc tương đối đơn giản. Khi có 3 file này là có thể sử dụng SYSLINUX để làm đĩa khởi động.<br/><br/> <b>Cơ bản về file cấu hình SYSLINUX</b><br/><br/> File này có tên là syslinux.cfg. Một file syslinux.cfg điển hình như sau:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre># Đặt giá trị này thành 0 nếu bạn muốn bỏ qua dấu nhắc lúc khởi động.
# Dấu nhắc cho phép bạn lựa chọn nhiều cấu hình khởi động khác nhau
# bằng cách gõ tên của cấu hình đó tại dấu nhắc
# &#40;đã được định nghĩa sẵn trong file syslinux.cfg&#41;
PROMPT 1
# Cấu hình khởi động mặc định.
# Nếu bạn ấn ENTER tại dấu nhắc lúc khởi động &#40;mà không nhập tên cấu hình&#41;,
# cấu hình mặc định sẽ được sử dụng.
DEFAULT cauhinh1
LABEL cauhinh1
KERNEL vmlinuz
APPEND initrd=initrd.gz root=/dev/ram0 init=/rc
LABEL cauhinh2
KERNEL vmlinuz
APPEND initrd=initrd.gz root=/dev/ram0 init=/rc vga=0x301
LABEL chỉ tên cấu hình, KERNEL báo cho SYSLINUX biết phải load file nhân Linux nào, APPEND thêm các thông số truyền cho nhân kernel.
Nếu chỉ có một cấu hình duy nhất, thì file syslinux.cfg có thể chỉ đơn giản như sau:
DEFAULT vmlinuz initrd=initrd.gz root=/dev/ram0 init=/rc</pre>
</div><br/><br/> Tạo đĩa mềm khởi động Linux<br/><br/> Chép 3 file kernel, root filesystem, syslinux.cfg vào đĩa mềm rồi gõ lệnh:<br/> syslinux /dev/fd0<br/> (giả sử đĩa mềm là /dev/fd0).<br/> Tạo đĩa CD khởi động Linux<br/><br/> Dùng chương trình mkisofs để tạo một CD image của đĩa khởi động Linux. Sau đó dùng một chương trình burn CD (trên Fedora Core có thể dùng k3b) để burn file này vào đĩa.<br/><br/> Tạo một thư mục bất kỳ, rồi chép 3 file: nhân linux, file chứa root filesystem và file cấu hình (giống file <b>syslinux.cfg</b> như ở trên, nhưng đặt tên là<b> isolinux.cfg</b>). Sau đó chép thêm một file tên là isolinux.bin vào trong thư mục này. File này nằm trong package syslinux, có thể download về từ trang web của syslinux.<br/><br/> Vào trong thư mục này rồi gõ lệnh sau:<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>mkisofs -o ../output.iso -b isolinux.bin -c boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table .</pre>
</div><br/> Lệnh này sẽ tạo ra một file CD image tên là output.iso nằm ởparent directory của thư mục hiện tại. Toàn bộ các file đặt trong thư mục hiện tại (không chỉ 4 file đã được đề cập ở trên) sẽ được chép vào CD image.<br/><br/> Cú pháp của lệnh mkisofs là:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>mkisofs -o file output iso \
-b &lt;file isolinux.bin&gt; -c &lt;file boot.cat&gt; \
-no-emul-boot -boot-load-size 4 -boot-info-table \
root-of-iso-tree</pre>
</div><br/><br/> trong đó file isolinux.bin và file boot.cat phải nằm trong root-of-iso-tree và được mô tả với đường dẫn tương đối tính từ root-of-iso-tree.<br/> Toàn bộ thư mục root-of-iso-tree là cấu trúc file và thư mục của CD muốn tạo, sẽ được chép vào CD image.<br/><br/> <b>Tham khảo:</b><br/><br/> * Trang web của SYSLINUX<span class="link"> http://syslinux.zytor.com/index.php</span><br/> * Tạo đĩa khởi động Linux<span class="link"> http://www.tldp.org/HOWTO/Bootdisk-HOWTO/x70</span><br/><br/><br/> Trần Trung Thành : vnhacker.org</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1560.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1560/7413.html#7413,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><b>uClibc và BusyBox</b><br/><br/> October 28th 2005<br/> uClibc<br/><br/> uClibc là một thư viện C có thể được dùng để phát triển phần mềm cho các hệ thống Linux nhỏ (ví dụ như embedded Linux system).<br/><br/> Thư viện C được sử dụng trên Linux là thư viện GNU C (glibc). Khi viết một chương trình C và compile với glibc, chương trình của bạn sẽ được link tới các file thư viện của glibc để sử dụng các hàm của chúng. Nếu bạn tự tạo ra một hệ thống Linux cho mình, để chạy được chương trình đã compile với glibc, bạn phải copy tất cả các file thư viện cần thiết vào hệ thống của mình. Điều này không dễ dàng với các hệ thống bị hạn chế không gian lưu trữ, ví dụ như một hệ thống Linux chứa trên đĩa mềm, do file thư viện glibc có dung lượng rất lớn.<br/><br/> uClibc là một thư viện có kích thước nhỏ hơn rất nhiều so với glibc, và có chức năng gần đầy đủ so với glibc. Có thể nói uClibc tương thích với glibc, nên phần lớn các chương trình viết để compile với glibc có thể compile được với uClibc. Sử dụng uClibc thay thế cho glibc khi bạn muốn tạo ra một hệ thống chạy Linux mà nó không đủ sức chứa các file thư viện cần thiết của glibc.<br/><br/> <b>BusyBox</b><br/><br/> Khi tạo một hệ thống Linux, thường bạn cần có các chương trình tiện ích như shell, các chương trình làm việc với file... Các chương trình tiện ích chuẩn của GNU có kích thước lớn, nhiều khi không tiện để đưa vào các hệ thống bị giới hạn không gian lưu trữ và bộ nhớ. BusyBox cung cấp hầu hết các chương trình tiện ích đó, nhưng có đặc điểm là được thiết kế để có kích thước nhỏ và sử dụng ít tài nguyên hệ thống.<br/><br/> Thực ra, BusyBox là sự tích hợp các tiện ích phổ dụng của Linux vào trong một file thực thi (executable file) duy nhất, và nó có kích thước rất nhỏ.<br/><br/> BusyBox có thể được compile với uClibc.<br/><br/> <b>Kết hợp uClibc và BusyBox</b><br/><br/> Khi tự tạo ra một hệ thống Linux, bạn phải copy vào hệ thống đầy đủ các file thư viện mà các chương trình bạn sẽ sử dụng cần tới (để biết một chương trình cần những thư viện nào, sử dụng lệnh ldd). Ngồi liệt kê ra các thư viện cần thiết cho các chương trình đó khá nhàm chán và dễ gây nhầm lẫn. uClibc và BusyBox có thể giúp bạn tránh được việc này. uClibc đủ nhỏ để đưa lên một hệ thống Linux chạy trên đĩa mềm, và BusyBox là một file duy nhất chứa tất cả các tiện ích bạn cần đến. Hơn nữa, đi kèm mã nguồn của uClibc và BusyBox là tiện ích tự cài đặt chúng lên file system của hệ thống Linux, nên sẽ đỡ cho bạn nhiều công sức.<br/><br/> Cho tới phiên bản 0.9.21 của uClibc, bạn dùng lệnh make PREFIX=&lt;prefix&gt; install_target để cài đặt uClibc lên một Linux file system. BusyBox cũng có lệnh để cài đặt lên Linux file system (tham khảo)<br/><br/> Tuy nhiên, sau này đã xuất hiện Buildroot, là một tiện ích giúp bạn tạo ra môi trường để sử dụng uClibc (gọi là uClibc toolchain), đồng thời tạo ra Linux root filesystem với uClibc và BusyBox được cài đặt sẵn. Dưới đây sẽ giới thiệu cách sử dụng Buildroot.<br/><br/> <b>Sử dụng Buildroot</b><br/><br/> Buildroot được sử dụng để tạo ra môi trường giúp bạn compile chương trình với uClibc, đồng thời tạo sẵn một Linux root filesystem chứa thư viện uClibc và tiện ích BusyBox để bạn có thể sử dụng nếu muốn tạo ra hệ thống Linux của riêng mình.<br/><br/> <b>1. Download buildroot</b><br/><br/> Buildroot có thể download từ homepage, hoặc sử dụng svn tool trên hệ thống Linux của bạn (nếu có) bằng cách gõ lệnh:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>svn co<span class="link"> svn://uclibc.org/trunk/buildroot</span></pre>
</div><br/><br/> <b>2. Sử dụng Buildroot</b><br/><br/> Cấu hình Buildroot<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>make menuconfig</pre>
</div><br/><br/> Bạn có thể thiết lập cấu hình cho uClibc và BusyBox, cũng như root filesystem mà Buildroot sẽ tạo ra, nhưng lần đầu tiên, có lẽ nên để tất cả theo mặc định (tôi có thay đổi một số thiết lập là ... và ... thì không sao, như một số thay đổi khác có thể gây ra lỗi khi chạy Buildroot lần đầu tiên).<br/><br/> Chạy Buildroot<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>make</pre>
</div><br/><br/> Buildroot sẽ download các mã nguồn cần thiết, tiến hành compile, cài đặt, cũng như tạo ra hệ thống root filesystem cho bạn. Việc này mất khá nhiều thời gian.<br/> Nếu mọi việc kết thúc êm đẹp, bạn sẽ có một uClibc toolchain dùng để compile các chương trình C, và một root fileystem được chứa trong file root_fsXXX (XXX là cái gì gì đó). Dùng lệnh mount với tham số -o loop để mount file này vào một thư mục nào đó, bạn có thể xem bên trong nó có những gì <img src="/hvaonline/images/smilies/b5e9b4f86ce43ca65bd79c894c4a924c.gif" border="0" alt="smilie" align="absbottom"><br/><br/> Chú ý: Ở thời điểm hiện tại (Ngày 28 tháng 10 năm 2005), tôi không thể chạy được Buildroot khi khởi động Fedora Core 3 với kernel support SMP. Luôn bị lỗi khi compile file nào đó (không nhớ) liên quan đến pthread. Nếu khởi động FC3 với kernel không support SMP thì OK.<br/><br/> <b>3. Cấu hình root filesystem</b><br/><br/> Nếu nhìn vào trong root file system mà Buildroot đã tạo ra (chứa trong file root_fsXXX), bạn sẽ thấy có nhiều thứ có thể không cần thiết (quá nhiều device entry trong thư mục dev, các file cấu hình trong etc, một đống terminfo trong usr/share/terminfo). Bạn có thể giảm bớt những thứ này, cũng như thêm các file mà mình muốn.<br/><br/> Để thêm/bớt các device entry trong dev, sửa file target/generic/device_table.txt<br/><br/> Để xóa bớt các file không cần thiết trong etc, usr/share/, vào trong thư mục target/generic/target_skeleton/ và xóa chúng. Có thể thêm các file vào các thư mục có sẵn trong target_skeleton.<br/><br/> Để tạo lại root filesystem, chạy make Buildroot (nhớ umount nếu đang mount file root_fsXXX).<br/><br/> <b>4. Cấu hình uClibc</b><br/><br/> Bạn có thể muốn cấu hình lại uClibc (thêm/bớt một số tính năng cho thư viện uClibc). Vào thư mục toolchain_build_XXX/uClibc/, chạy make menuconfig, cấu hình nó. Sau đó copy file .config vào thư mục toolchain/uClibc/uClibc.config và chạy make Buildroot lại.<br/><br/> <b>5. Cấu hình BusyBox</b><br/><br/> BusyBox đã được cài đặt vào root filesystem có thể có nhiều tiện ích không cần thiết, bạn muốn bỏ đi hoặc muốn thêm các tiện ích khác (mà BusyBox có nhưng chưa được cài đặt). Vào build_XXX/busybox/, chạy make menuconfig, cấu hình BusyBox. Sau đó copy file .config vào thư mục package/busybox/busybox.config và chạy make Buildroot lại.<br/><br/> Reference<br/><br/> * uClibc :<span class="link"> http://www.uclibc.org/</span><br/> * BusyBox :<span class="link"> http://busybox.net/</span><br/> * Buildroot :<span class="link"> http://buildroot.uclibc.org/</span><br/><br/><br/> Trần Trung Thành - vnhacker.org</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1546.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1546/7364.html#7364,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><b>Tăng cường an ninh cho hệ thống Linux (Phần 2) </b><br/><br/><br/> Tiếp theo phần 1<br/><br/><br/> <b><br/> AN TOÀN CHO CÁC GIAO DỊCH TRÊN MẠNG</b><br/><br/> Có rất nhiều dịch vụ mạng truyền thống giao tiếp thông qua giao thức văn bản không mã hoá, như TELNET, FTP, RLOGIN, HTTP, POP3. Trong các giao dịch giữa người dùng với máy chủ, tất cả các thông tin dạng gói được truyền qua mạng dưới hình thức văn bản không được mã hoá. Các gói tin này có thể dễ dàng bị chặn và sao chép ở một điểm nào đó trên đường đi. Việc giải mã các gói tin này rất dễ dàng, cho phép lấy được các thông tin như tên người dùng, mật khẩu và các thông tin quan trọng khác. Việc sử dụng các giao dịch mạng được mã hoá khiến cho việc giải mã thông tin trở nên khó hơn và giúp bạn giữ an toàn các thông tin quan trọng. Các kỹ thuật thông dụng hiện nay là IPSec, SSL, TLS, SASL và PKI.<br/><br/> Quản trị từ xa là một tính năng hấp dẫn của các hệ thống UNIX. Người quản trị mạng có thể dễ dàng truy nhập vào hệ thống từ bất kỳ nơi nào trên mạng thông qua các giao thức thông dụng như telnet, rlogin. Một số công cụ quản trị từ xa được sử dụng rộng rãi như linuxconf, webmin cũng dùng giao thức không mã hoá. Việc thay thế tất cả các dịch vụ mạng dùng giao thức không mã hoá bằng giao thức có mã hoá là rất khó. Tuy nhiên, bạn nên cung cấp việc truy cập các dịch vụ truyền thống như HTTP/POP3 thông qua SSL, cũng như thay thế các dịch vụ telnet, rlogin bằng SSH.<br/><br/> <b>LINUX FIREWALL</b><br/><br/> An toàn hệ thống luôn luôn là một vấn đề sống còn của mạng máy tính và firewall là một thành phần cốt yếu cho việc đảm bảo an ninh.<br/><br/> Một firewall là một tập hợp các qui tắc, ứng dụng và chính sách đảm bảo cho người dùng truy cập các dịch vụ mạng trong khi mạng bên trong vẫn an toàn đối với các kẻ tấn công từ Internet hay từ các mạng khác. Có hai loại kiến trúc firewall cơ bản là : Proxy/Application firewall và filtering gateway firewall. Hầu hết các hệ thống firewall hiện đại là loại lai (hybrid) của cả hai loại trên.<br/><br/> Nhiều công ty và nhà cung cấp dịch vụ Internet sử dụng máy chủ Linux như một Internet gateway. Những máy chủ này thường phục vụ như máy chủ mail, web, ftp, hay dialup. Hơn nữa, chúng cũng thường hoạt động như các firewall, thi hành các chính sách kiểm soát giữa Internet và mạng của công ty. Khả năng uyển chuyển khiến cho Linux thu hút như là một thay thế cho những hệ điều hành thương mại.<br/><br/> Tính năng firewall chuẩn được cung cấp sẵn trong kernel của Linux được xây dựng từ hai thành phần : ipchains và IP Masquerading.<br/><br/> Linux IP Firewalling Chains là một cơ chế lọc gói tin IP. Những tính năng của IP Chains cho phép cấu hình máy chủ Linux như một filtering gateway/firewall dễ dàng. Một thành phần quan trọng khác của nó trong kernel là IP Masquerading, một tính năng chuyển đổi địa chỉ mạng (network address translation- NAT) mà có thể che giấu các địa chỉ IP thực của mạng bên trong.<br/><br/> Để sử dụng ipchains, bạn cần thiết lập một tập các luật mà qui định các kết nối được cho phép hay bị cấm. Ví dụ:<br/><br/> # Cho phép các kết nối web tới Web Server của bạn<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/sbin/ipchains -A your_chains_rules -s 0.0.0.0/0 www -d 192.16.0.100 1024: -j ACCEPT</pre>
</div><br/><br/> # Cho phép các kết nối từ bên trong tới các Web Server bên ngoài<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/sbin/ipchains -A your_chains_rules -s 192.168.0.0/24 1024: -d 0.0.0.0/0 www -j ACCEPT</pre>
</div><br/><br/> # Từ chối truy cập tất cả các dịch vu khác<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>/sbin/ipchains -P your_chains_rules input DENY</pre>
</div><br/><br/> Ngoài ra, bạn có thể dùng các sản phẩm firewall thương mại như Check Point FireWall-1, Phoenix Adaptive Firewall, Gateway Guardian, XSentry Firewall, Raptor, ... hay rất nhiều các phiên bản miễn phí, mã nguồn mở cho Linux như T.Rex Firewall, Dante, SINUS, TIS Firewall Toolkit, ...<br/> <b><br/> DÙNG CÔNG CỤ DÒ TÌM ĐỂ KHẢO SÁT HỆ THỐNG</b><br/><br/> Thâm nhập vào một hệ thống bất kỳ nào cũng cần có sự chuẩn bị. Hacker phải xác định ra máy đích và tìm xem những port nào đang mở trước khi hệ thống có thể bị xâm phạm. Quá trình này thường được thực hiện bởi các công cụ dò tìm (scanning tool), kỹ thuật chính để tìm ra máy đích và các port đang mở trên đó. Dò tìm là bước đầu tiên hacker sẽ sử dụng trước khi thực hiện tấn công. Bằng cách sử dụng các công cụ dò tìm như Nmap, hacker có thể rà khắp các mạng để tìm ra các máy đích có thể bị tấn công. Một khi xác định được các máy này, kẻ xâm nhập có thể dò tìm các port đang lắng nghe. Nmap cũng sử dụng một số kỹ thuật cho phép xác định khá chính xác loại máy đang kiểm tra.<br/><br/> Bằng cách sử dụng những công cụ của chính các hacker thường dùng, người qun trị hệ thống có thể nhìn vào hệ thống của mình từ góc độ của các hacker và giúp tăng cường tính an toàn của hệ thống. Có rất nhiều công cụ dò tìm có thể sử dụng như: Nmap, strobe, sscan, SATAN, ...<br/><br/> <b>Dưới đây là một ví dụ sử dụng Nmap:</b><br/> <blockquote><br/> # nmap -sS -O 192.168.1.200<br/> Starting nmap V. 2.54 by Fyodor (fyodor@dhp.com, www.insecure.org/nmap/)<br/> Interesting ports on comet (192.168.1.200):<br/> Port State Protocol Service<br/> 7 open tcp echo<br/> 19 open tcp chargen<br/> 21 open tcp ftp<br/> ...<br/> TCP Sequence Prediction: Class=random positive increments<br/> Difficulty=17818 (Worthy challenge)<br/> Remote operating system guess: Linux 2.2.13<br/> Nmap run completed -- 1 IP address (1 host up) scanned in 5 seconds<br/> &nbsp;
</blockquote><br/> Tuy nhiên, sử dụng các công cụ này không thể thay thế cho một người quản trị có kiến thức. Bởi vì việc dò tìm thường dự báo một cuộc tấn công, các site nên ưu tiên cho việc theo dõi chúng. Với các công cụ dò tìm, các nhà quản trị hệ thống mạng có thể phát hiện ra những gì mà các hacker có thể thấy khi dò trên hệ thống của mình.<br/><br/><br/> <b>PHÁT HIỆN SỰ XÂM NHẬP QUA MẠNG</b><br/><br/> Nếu hệ thống của bạn có kết nối vào internet, bạn có thể trở thành một mục tiêu bị dò tìm các lỗ hổng về bảo mật. Mặc dù hệ thống của bạn có ghi nhận điều này hay không thì vẫn không đủ để xác định và phát hiện việc dò tìm này. Một vấn đề cần quan tâm khác là các cuộc tấn công gây ngừng dịch vụ (Denial of Services - DoS), làm thế nào để ngăn ngừa, phát hiện và đối phó với chúng nếu bạn không muốn hệ thống của bạn ngưng trệ.<br/><br/> Hệ thống phát hiện xâm nhập qua mạng (Network Intrusion Detection System - NIDS) theo dõi các thông tin truyền trên mạng và phát hiện nếu có hacker đang cố xâm nhập vào hệ thống (hoặc gây gây ra một vụ tấn công DoS). Một ví dụ điển hình là hệ thống theo dõi số lượng lớn các yêu cầu kết nối TCP đến nhiều port trên một máy nào đó, do vậy có thể phát hiện ra nếu có ai đó đang thử một tác vụ dò tìm TCP port. Một NIDS có thể chạy trên máy cần theo dõi hoặc trên một máy độc lập theo dõi toàn bộ thông tin trên mạng.<br/><br/> Các công cụ có thể được kết hợp để tạo một hệ thống phát hiện xâm nhập qua mạng. Chẳng hạn dùng tcpwrapper để điều khiển, ghi nhận các dịch vụ đã được đăng ký. Các chương trình phân tích nhật ký hệ thống, như swatch, có thể dùng để xác định các tác vụ dò tìm trên hệ thống. Và điều quan trọng nhất là các công cụ có thể phân tích các thông tin trên mạng để phát hiện các tấn công DoS hoặc đánh cắp thông tin như tcpdump, ethereal, ngrep, NFR (Network Flight Recorder), PortSentry, Sentinel, Snort, ...<br/><br/> Khi hiện thực một hệ thống phát hiện xâm nhập qua mạng bạn cần phải lưu tâm đến hiệu suất của hệ thống cũng như các chính sách bảo đảm sự riêng tư.<br/><br/> <b>KIỂM TRA KHẢ NĂNG BỊ XÂM NHẬP</b><br/><br/> Kiểm tra khả năng bị xâm nhập liên quan đến việc xác định và sắp xếp các lỗ hổng an ninh trong hệ thống bằng cách dùng một số công cụ kiểm tra. Nhiều công cụ kiểm tra cũng có khả năng khai thác một số lỗ hổng tìm thấy để làm rõ quá trình thâm nhập trái phép sẽ được thực hiện như thế nào. Ví dụ, một lỗi tràn bộ đệm của chương trình phục vụ dịch vụ FTP có thể dẫn đến việc thâm nhập vào hệ thống với quyền ‘root’. Nếu người quản trị mạng có kiến thức về kiểm tra khả năng bị xâm nhập trước khi nó xảy ra, họ có thể tiến hành các tác vụ để nâng cao mức độ an ninh của hệ thống mạng.<br/><br/> Có rất nhiều các công cụ mạng mà bạn có thể sử dụng trong việc kiểm tra khả năng bị xâm nhập. Hầu hết các quá trình kiểm tra đều dùng ít nhất một công cụ tự động phân tích các lỗ hổng an ninh. Các công cụ này thăm dò hệ thống để xác định các dịch vụ hiện có. Thông tin lấy từ các dịch vụ này sẽ được so sánh với cơ sở dữ liệu các lỗ hổng an ninh đã được tìm thấy trước đó.<br/><br/> Các công cụ thường được sử dụng để thực hiện các kiểm tra loại này là ISS Scanner, Cybercop, Retina, Nessus, cgiscan, CIS, ...<br/><br/> Kiểm tra khả năng bị xâm nhập cần được thực hiện bởi những người có trách nhiệm một cách cẩn thận. Sự thiếu kiến thức và sử dụng sai cách có thể sẽ dẫn đến hậu quả nghiêm trọng không thể lường trước được.<br/><br/> <b>ĐỐI PHÓ KHI HỆ THỐNG CỦA BẠN BỊ TẤN CÔNG</b><br/><br/> Gần đây, một loạt các vụ tấn công nhắm vào các site của những công ty lớn như Yahoo!, Buy.com, E-Bay, Amazon và CNN Interactive gây ra những thiệt hại vô cùng nghiêm trọng. Những tấn công này là dạng tấn công gây ngừng dịch vụ "Denial-Of-Service" mà được thiết kế để làm ngưng hoạt động của một mạng máy tính hay một website bằng cách gửi liên tục với số lượng lớn các dữ liệu tới mục tiêu tấn công khiến cho hệ thống bị tấn công bị ngừng hoạt động, điều này tương tự như hàng trăm người cùng gọi không ngừng tới 1 số điện thoại khiến nó liên tục bị bận.<br/><br/> Trong khi không thể nào tránh được mọi nguy hiểm từ các cuộc tấn công, chúng tôi khuyên bạn một số bước mà bạn nên theo khi bạn phát hiện ra rằng hệ thống của bạn bị tấn công. Chúng tôi cũng đưa ra một số cách để giúp bạn bảo đảm tính hiệu qủa của hệ thống an ninh và những bước bạn nên làm để giảm rủi ro và có thể đối phó với những cuộc tấn công.<br/><br/> Nếu phát hiện ra rằng hệ thống của bạn đang bị tấn công, hãy bình tĩnh. Sau đây là những bước bạn nên làm:<br/><br/> Tập hợp 1 nhóm để đối phó với sự tấn công:<br/> - Nhóm này phải bao gồm những nhân viên kinh nghiệm, những người mà có thể giúp hình thành một kế hoạch hành động đối phó với sự tấn công.<br/><br/> Dựa theo chính sách và các quy trình thực hiện về an ninh của công ty, sử dụng các bước thích hợp khi thông báo cho mọi người hay tổ chức về cuộc tấn công.<br/> Tìm sự giúp đỡ từ nhà cung cấp dịch vụ Internet và cơ quan phụ trách về an ninh máy tính:<br/> - Liên hệ nhà cung cấp dịch vụ Internet của bạn để thông báo về cuộc tấn công. Có thể nhà cung cấp dịch vụ Internet của bạn sẽ chặn đứng được cuộc tấn công.<br/><br/> - Liên hệ cơ quan phụ trách về an ninh máy tính để thông báo về cuộc tấn công<br/><br/> Tạm thời dùng phương thức truyền thông khác (chẳng hạn như qua điện thoại) khi trao đổi thông tin để đảm bo rằng kẻ xâm nhập không thể chặn và lấy được thông tin.<br/> Ghi lại tất cả các hoạt động của bạn (chẳng hạn như gọi điện thoại, thay đổi file, ...)<br/> Theo dõi các hệ thống quan trọng trong qúa trình bị tấn công bằng các phần mềm hay dịch vụ phát hiện sự xâm nhập (intrusion detection software/services). Điều này có thể giúp làm giảm nhẹ sự tấn công cũng như phát hiện những dấu hiệu của sự tấn công thực sự hay chỉ là sự quấy rối nhằm đánh lạc hướng sự chú ý của bạn(chẳng hạn một tấn công DoS với dụng ý làm sao lãng sự chú ý của bạn trong khi thực sự đây là một cuộc tấn công nhằm xâm nhập vào hệ thống của bạn).<br/> - Sao chép lại tất cả các files mà kẻ xâm nhập để lại hay thay đổi (như những đoạn mã chương trình, log file, ...)<br/><br/> Liên hệ nhà chức trách để báo cáo về vụ tấn công.<br/><br/><br/> Những bước bạn nên làm để giảm rủi ro và đối phó với sự tấn công trong tương lai :<br/><br/> Xây dựng và trao quyền cho nhóm đối phó với sự tấn công<br/> Thi hành kiểm tra an ninh và đánh giá mức độ rủi ro của hệ thống<br/> Cài đặt các phần mềm an toàn hệ thống phù hợp để giảm bớt rủi ro<br/> Nâng cao khả năng của mình về an toàn máy tính<br/> Các bước kiểm tra để giúp bạn bảo đảm tính hiệu quả của hệ thống an ninh<br/><br/> Kiểm tra hệ thống an ninh mới cài đặt : chắc chắn tính đúng đắn của chính sách an ninh hiện có và cấu hình chuẩn của hệ thống.<br/> Kiểm tra tự động thường xuyên : để khám phá sự “viếng thăm” của những hacker hay những hành động sai trái của nhân viên trong công ty.<br/> Kiểm tra ngẫu nhiên: để kiểm tra chính sách an ninh và những tiêu chuẩn, hoặc kiểm tra sự hiện hữu của những lỗ hổng đã được phát hiện (chẳng hạn những lỗi được thông báo từ nhà cung cấp phần mềm)<br/> Kiểm tra hằng đêm những file quan trọng: để đánh giá sự toàn vẹn của những file và cơ sở dữ liệu quan trọng<br/> Kiểm tra các tài khoản người dùng: để phát hiện các tài khoản không sử dụng, không tồn tại, ...<br/> Kiểm tra định kỳ để xác định trạng thái hiện tại của hệ thống an ninh của bạn<br/><br/><br/> <b>BẠN CÓ THỂ XEM THÊM THÔNG TIN TẠI</b><br/><br/> Các trung tâm giúp đối phó tai nạn trên Internet<br/><br/><span class="link"> http://www.cert.org</span><br/><span class="link"> http://www.first.org</span><br/><span class="link"> http://ciac.llnl.gov/</span><br/><span class="link"> http://www.cert.dfn.de/eng/csir/europe/certs.html</span><br/> Một số website về an toàn máy tính<br/><br/><span class="link"> http://www.cs.purdue.edu/coast/</span><br/><span class="link"> http://www.linuxsecurity.com</span><br/><span class="link"> http://www.securityportal.com</span><br/><span class="link"> http://www.tno.nl/instit/fel/intern/wkinfsec.html</span><br/><span class="link"> http://www.icsa.net</span><br/><span class="link"> http://www.sans.org</span><br/><span class="link"> http://www.iss.com</span><br/><span class="link"> http://www.securityfocus.com</span><br/> Thông tin về an toàn từ nhà cung cấp<br/><br/><span class="link"> http://www.calderasystems.com/news/security/</span><br/><span class="link"> http://www.debian.org/security/</span><br/><span class="link"> http://www.redhat.com/cgi-bin/support/</span><br/> Một số sách về an toàn máy tính<br/><br/> Actually Useful Internet Security Techniques by Larry J. Hughes Jr.<br/> Applied Cryptography: Protocols, Algorithms and Source Code in C by Bruce Schneier<br/> Building Internet Firewall by Brent Chapman & Elizabeth D. Zwicky<br/> Cisco IOS Network Security by Mike Kaeo<br/> Firewalls and Internet Security by Bill Cheswick & Steve Bellovin<br/> Halting the Hacker: A practical Guide To Computer Security by Donal L. Pipkin<br/> Intrusion Detection: An Introduction to Internet Surveillance, Correlation, Traps, Trace Back and Response by Edward G. Amoroso<br/> Intrusion Detection: Network Security Beyond the Firewall by Terry Escamilla<br/> Linux Security by Jonh S. Flowers<br/><br/><br/> prof - hvaonline</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1545.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1545/7363.html#7363,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><b>Tăng cường an ninh cho hệ thống Linux (Phần 1) </b><br/><br/> Linux đã tạo ra một sự bùng nổ trong lĩnh vực tin học và ngày càng trở nên phổ biến hiện nay. Rất nhiều các công ty, tổ chức trên thế giới chấp nhận Linux như là một platform cho sản phẩm của họ, cũng như nhiều công ty, ISPs sử dụng máy chủ Linux như là các Internet gateway. Vấn đề an toàn an ninh cho hệ thống Linux ngày càng trở nên quan trọng và bức thiết hơn. Tài liệu này sẽ cho bạn một cái nhìn tổng quát về an toàn hệ thống và những hướng dẫn giúp tăng cường mức độ an toàn cho hệ thống Linux của bạn. (Tài liệu này được báo cáo tại hội thảo Linux Việt Nam vào tháng 12/2000 nên có một số phần đã cũ so với hiện nay.)<br/><br/><br/><br/> <b>GIỚI THIỆU</b><br/><br/> Cùng với sự phát triển không ngừng của truyền thông kỹ thuật số, Internet và sự phát triển nhảy vọt của nền công nghiệp phần mềm, bảo mật máy tính là một vấn đề ngày càng trở nên quan trọng. Cần phải hiểu rằng không có hệ thống máy tính nào là an toàn tuyệt đối. Tất cả những gì bạn có thể làm là giúp cho hệ thống của bạn trở nên an toàn hơn.<br/><br/> Kể từ khi Linux được phát triển một cách rộng rãi và nhanh chóng, đặc biệt là trong các giao dịch kinh doanh quan trọng, an ninh là một vấn đề quyết định sự sống còn của Linux. Với hàng trăm công cụ bảo vệ sẵn có, người dùng Linux được trang bị tốt hơn để ngăn chặn và duy trì một hệ thống an toàn. Linux không những hoạt động tốt mà còn có những tính năng và sản phẩm liên quan cho phép xây dựng một môi trường tương đối an toàn.<br/><br/> <b>NHỮNG NGUY CƠ AN NINH TRÊN LINUX</b><br/><br/> Linux và các ứng dụng trên nó có thể không ít các lỗ hổng an ninh hơn những hệ điều hành khác. Theo quan điểm của một số chuyên gia máy tính, Linux có tính an toàn cao hơn các hệ điều hành của Microsoft, vì các sản phẩm của Microsoft không được xem xét kỹ lưỡng và chặt chẽ bằng các sản phẩm mã nguồn mở như Linux. Hơn nữa, Linux dường như là "miễn nhiễm" với virus máy tính (hiện tại đã có xuất hiện một vài loại virus hoạt động trên môi trường Linux nhưng không ảnh hưởng gì mấy đến người dùng Linux). Nhưng một hệ thống Linux được cấu hình không tốt sẽ tệ hơn nhiều so với một hệ thống Microsoft được cấu hình tốt !!! Khi có được một chính sách an ninh tốt và hệ thống được cấu hình theo đúng chính sách đó thì sẽ giúp bạn tạo được một hệ thống an toàn (ở mức mà chính sách của bạn đưa ra).<br/><br/> Nhưng sự an toàn không phải là thứ có thể đạt được như một mục tiêu cuối cùng. Đúng hơn đó là tập hợp của những cách cài đặt, vận hành và bảo trì một hệ điều hành, mạng máy tính, ... Nó phụ thuộc vào các hoạt động hàng ngày của hệ thống, người dùng và người quản trị. Bạn phải bắt đầu từ một nền tảng ban đầu và từ đó cải thiện tính an toàn của hệ thống của bạn nhiều nhất có thể được mà vẫn đảm bảo các hoạt động bình thường của hệ thống.<br/><br/> <b>XEM XÉT CHÍNH SÁCH AN NINH CỦA BẠN</b><br/><br/> Kết nối vào Inernet là nguy hiểm cho hệ thống mạng của bạn với mức an toàn thấp. Từ những vấn đề trong các dịch vụ TCP/IP truyền thống, tính phức tạp của việc cấu hình máy chủ, các lỗ hổng an ninh bên trong quá trình phát triển phần mềm và nhiều nhân tố khác góp phần làm cho những hệ thống máy chủ không được chuẩn bị chu đáo có thể bị xâm nhập và luôn tồn tại những nguy cơ tiềm tàng về vấn đề an toàn trong đó.<br/><br/> Mục đích của một chính sách an toàn hệ thống là quyết định một tổ chức sẽ phải làm như thế nào để bảo vệ chính nó. Để có được một chính sách an ninh hiệu quả, người xây dựng các chính sách này phải hiểu và có thể kết hợp tất cả các thông tin, yêu cầu, ...<br/><br/> Khi một tình huống xảy ra nằm ngoài dự kiến, chẳng hạn một sự xâm nhập trái phép vào hệ thống của bạn, câu hỏi lớn nhất là "sẽ phải làm gì đây ?"<br/><br/> Không may là có hàng triệu câu trả lời khác nhau cho câu hỏi đó. Nếu một người mà chưa từng phải đối phó với một kẻ xâm nhập trước đây thì kẻ xâm nhập có thể dễ dàng biến mất vì các dấu vết đã trở nên qúa cũ và không còn hữu ích nữa.<br/><br/> Những sai sót trong chính sách an ninh không chỉ liên quan đến những kẻ xâm nhập, mà còn liên quan đến những vấn đề bình thường như thời tiết, thiên tai, cháy, nổ, hư hỏng thiết bị,... Do vậy, việc thiết lập một chính sách an ninh tốt cho việc giải quyết những sự cố phải được lên kế hoạch kỹ lưỡng, được xem xét và chứng nhận bởi người có quyền hạn trong công ty.<br/><br/> Một chính sách an ninh tốt nên bao gồm các vấn đề sau :<br/><br/> Chính sách phục hồi dữ liệu khi có sự cố<br/> Chính sách phục hồi hệ thống trong trường hợp hư hỏng thiết bị<br/> Chính sách, cách thức điều tra những kẻ xâm nhập trái phép<br/> Chính sách, cách thức điều tra khi công ty bị cáo buộc xâm nhập vào các hệ thống khác<br/> Cách thức, quy trình và nơi thông báo sự xâm nhập trái phép từ bên ngoài hay gây ra bởi các nhân viên của mình.<br/> Chính sách an ninh về mặt vật lý của hệ thống<br/> ...<br/><br/> Bạn có thể nhờ tư vấn của các công ty, tổ chức làm dịch vụ tư vấn về an toàn máy tính để giúp bạn xây dụng một chính sách an ninh tốt. Các công ty này có các chuyên gia về an toàn máy tính, họ có sẵn các biểu mẫu chính sách an ninh nên có thể thiết lập nhanh chóng các chính sách mà bao gồm tất cả các mặt trong việc an toàn hệ thống máy tính.<br/><br/> <b>TĂNG CƯỜNG AN NINH CHO KERNEL<br/> </b><br/> Mặc dù thừa hưởng những đặc tính của hệ thống UNIX và khá an ninh hơn một số hệ điều hành khác, hệ thống GNU/Linux hiện nay vẫn tồn tại những nhược điểm sau:<br/><br/> Quyền của user ‘root’ có thể bị lạm dụng. User ‘root’ có thể dễ dàng thay đổi bất kỳ điều gì trên hệ thống.<br/> Nhiều file hệ thống có thể dễ dàng bị sửa đổi. Nhiều file hệ thống quan trọng như /bin/login có thể bị sửa đổi bởi hacker để cho phép đăng nhập không cần mật khẩu. Nhưng những file loại này lại hiếm khi nào thay đổi trừ phi khi nâng cấp hệ thống.<br/> Các module có thể được dùng để chặn kernel. “Loadable Kernel Module” là một thiết kế tốt để tăng cường tính uyển chuyển, linh hoạt cho kernel. Nhưng sau khi một module được nạp vào kernel, nó sẽ trở thành một phần của kernel và có thể hoạt động như kernel nguyên thủy. Vì vậy, các chưng trình mục đích xấu có thể được viết dạng module và nạp vào kernel, rồi sau đó hoạt động như một virus.<br/> Các process không được bảo vệ. Các process như web server có thể trở thành mục tiêu bị tấn công của hacker sau khi thâm nhập hệ thống.<br/> Để cải thiện tính an ninh cho các server Linux, chúng ta cần có một kernel an toàn hơn. Điều này có thể thực hiện được bằng cách sửa đổi kernel nguyên thuỷ bằng các ‘patch’ tăng cường tính an ninh cho hệ thống. Các patch này có các tính năng chính yếu sau:<br/><br/> Bảo vệ – bảo vệ các file hệ thống quan trọng khỏi sự thay đổi ngay cả với user root. Bảo vệ các process quan trọng khỏi bị ngừng bởi lệnh ‘kill’. Chặn các tác vụ truy cập IO mức thấp (RAW IO) của các chương trình không được phép.<br/> Phát hiện – Phát hiện và cảnh báo với người quản trị khi server bị scan. Cũng như khi có các tác vụ trên hệ thống vi phạm các luật (rules) định trước.<br/> Đối phó – Khi phát hiện sự vi phạm trên hệ thống, các ghi nhận chi tiết sẽ được thực hiện cũng như có thể ngừng lập tức phiên làm việc gây ra<br/> Một vài công cụ sửa đổi kernel được sử dụng rộng rãi là LIDS (Linux Intrusion Detection System), Medusa, ...<br/> <b><br/> AN TOÀN CHO CÁC GIAO DỊCH TRÊN MẠNG</b><br/><br/> Có rất nhiều dịch vụ mạng truyền thống giao tiếp thông qua giao thức văn bản không mã hoá, như TELNET, FTP, RLOGIN, HTTP, POP3. Trong các giao dịch giữa người dùng với máy chủ, tất cả các thông tin dạng gói được truyền qua mạng dưới hình thức văn bản không được mã hoá. Các gói tin này có thể dễ dàng bị chặn và sao chép ở một điểm nào đó trên đường đi. Việc giải mã các gói tin này rất dễ dàng, cho phép lấy được các thông tin như tên người dùng, mật khẩu và các thông tin quan trọng khác. Việc sử dụng các giao dịch mạng được mã hoá khiến cho việc giải mã thông tin trở nên khó hơn và giúp bạn giữ an toàn các thông tin quan trọng. Các kỹ thuật thông dụng hiện nay là IPSec, SSL, TLS, SASL và PKI.<br/><br/> Quản trị từ xa là một tính năng hấp dẫn của các hệ thống UNIX. Người quản trị mạng có thể dễ dàng truy nhập vào hệ thống từ bất kỳ nơi nào trên mạng thông qua các giao thức thông dụng như telnet, rlogin. Một số công cụ quản trị từ xa được sử dụng rộng rãi như linuxconf, webmin cũng dùng giao thức không mã hoá. Việc thay thế tất cả các dịch vụ mạng dùng giao thức không mã hoá bằng giao thức có mã hoá là rất khó. Tuy nhiên, bạn nên cung cấp việc truy cập các dịch vụ truyền thống như HTTP/POP3 thông qua SSL, cũng như thay thế các dịch vụ telnet, rlogin bằng SSH.<br/><br/><br/> prof - hvaonline</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1543.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1543/7361.html#7361,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><b>Sử dụng virtual host (tên ảo) trong Apache</b><br/><br/> Người dùng sử dụng tên ảo với mục đích chạy được nhiều tên (hostnames) khác nhau trên một máy chủ. Có hai loại tên ảo có thể sử dụng trong Apache: cách dựa vào tên (name-based virtual host) và cách dựa vào IP (IP-based virtual host).<br/><br/> Sử dụng tên ảo bằng cách dựa vào tên có lợi điểm là bạn chỉ cần dùng một địa chỉ IP cho tất cá các tên.<br/><br/> Điều quan trọng là bạn phải khai báo tất cả các tên bạn muốn dùng với Apache trong máy chủ DNS trước. Nếu bạn chỉ khai báo thoải mái các tên khác nhau trong httpd.conf (hay apache.conf) mà trong máy chủ DNS không hề có thông tin của các tên thì người dùng sẽ không thấy được trang web của bạn. Cái điểm yếu của việc sử dụng tên ảo dựa vào tên là bạn không thể xài SSL <span class="link"> https://</span>) cho tất cả các tên vì SSL yêu cầu mỗi tên phải có riêng một IP trong khi sử dụng tên ảo dựa vào tên thì bạn chỉ có một IP duy nhất cho nhiều tên khác nhau.<br/><br/> Ví dụ cụ thể:<br/><br/> vnlinux.org có địa chỉ là 24.153.136.146. Tại sao mình biết? Chỉ việc gõ host vnlinux.org thì bạn sẽ thấy trả lời giống bên dưới:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rhs@gw rhs $ host vnlinux.org
vnlinux.org has address 24.153.136.146</pre>
</div><br/><br/> Mỗi lần ghé thăm trang web vnlinux.org, thì người dùng có thể gõ<span class="link"> http://www.vnlinux.org</span> hay<span class="link"> http://vnlinux.org</span> sẽ đều thấy cả hai địa chỉ khác nhau nhưng nội dung thì như nhau. Tại sao vậy? Nếu bạn gõ host www.vnlinux.org thì bạn sẽ thấy trả lời là<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rhs@gw rhs $ host www.vnlinux.org
www.vnlinux.org is an alias for vnlinux.org.</pre>
</div><br/><br/> Lý do là vì mình đã khai báo trong DNS record, www.vnlinux.org sẽ là alias (hay còn gọi là CNAME khi thiết lập máy chủ DNS) của vnlinux.org Bên dưới là những hàng mình lấy ra từ tập tin db.vnlinux.org của máy chủ DNS<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>vnlinux.org. IN A 24.153.136.146
www.vnlinux.org. IN CNAME vnlinux.org.</pre>
</div><br/><br/> Trong httpd.conf (hay apache.conf), mình khai báo ServerName www.vnlinux.org<br/> Ví dụ trên chỉ đơn thuần giải thích cách dùng CNAME cho trang web .<br/><br/> Kế tiếp mình sẽ giải thích cách cấu hình dns và apache cho việc sử dụng tên ảo dựa vào tên (name-based virtual host).<br/> Ví dụ trên bạn cũng đã thấy www.vnlinux.org có IP là 24.153.136.146 Mình cũng đã có những trang web sau cùng có chung IP với vnlinux.org bằng cách sử dụng tên ảo dựa vào tên.<br/> howto.vnlinux.org<br/> i18n.vnlinux.org<br/> dịchthuật.vnlinux.org *<br/> Bên dưới là kết quả của lệnh host cho những tên phía trên.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rhs@gw rhs $ host howto.vnlinux.org
howto.vnlinux.org has address 24.153.136.146</pre>
</div><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rhs@gw rhs $ host i18n.vnlinux.org
i18n.vnlinux.org has address 24.153.136.146</pre>
</div><br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>rhs@gw rhs $ host xn--dchthut-5p4c4j.vnlinux.org
xn--dchthut-5p4c4j.vnlinux.org has address 24.153.136.146</pre>
</div><br/><br/> * xn--dchthut-5p4c4j là punycode format cho dịchthuật<br/> Xem thêm về punycode bằng cách nhấn đây<span class="link"> http://search.yahoo.com/search?ei=UTF-8&fr=sfp&p=punycode</span><br/><br/> Thông tin khai báo cho DNS (Nhớ khởi động lại máy chủ DNS):<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>howto.vnlinux.org. IN A 24.153.136.146
i18n.vnlinux.org. IN A 24.153.136.146
xn--dchthut-5p4c4j.vnlinux.org. IN A 24.153.136.146</pre>
</div><br/> Thông tin khai báo trong httpd.conf (hay apache.conf hay VHost.conf...)<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>NameVirtualHost 24.153.136.146:80
&#40;VirtualHost 24.153.136.146:80&#41;
ServerAdmin &lt;a href="mailto:me@here.com"&gt;me@here.com&lt;/a&gt;
DocumentRoot /Nơi/các/tập/tin/nằm/trong/htdocs
ServerName www.vnlinux.org
ErrorLog logs/VietLUG_error_log
CustomLog logs/VietLUG_access_log common
DirectoryIndex index.html
RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^{TRACE|TRACK}
RewriteRule .* - &#91;F&#93;
&#40;/VirtualHost&#41;</pre>
</div><br/><br/> Thay () với &lt;&gt; trước và sau chữ VirtualHost. Đừng quên thay hàng đầu phía trên.<br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#40;VirtualHost 24.153.136.146:80&#41;
ServerAdmin &lt;a href="mailto:me@here.com"&gt;me@here.com&lt;/a&gt;
DocumentRoot /Nơi/các/tập/tin/nằm/trong/htdocs
ServerName xn--dchthut-5p4c4j.vnlinux.org
ErrorLog logs/dichthuat_error_log
CustomLog logs/dichthuat_access_log common
DirectoryIndex index.html
RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^{TRACE|TRACK}
RewriteRule .* - &#91;F&#93;
&#40;/VirtualHost&#41;</pre>
</div><br/><br/> Thay () với &lt;&gt; trước và sau chữ VirtualHost. Đừng quên thay hàng đầu phía trên.<br/><br/> Làm y chang như trên cho hai tên howto và i18n. Sau khi khai báo các hàng trên, bạn phải khởi động lại apache.<br/><br/> Lưu ý: những dòng trên là những khai báo căn bản trong httpd.conf. Tùy vào nhu cầu phục vụ trang web mà bạn rất có thể cần thêm bớt các giá trị tùy thích<br/><br/> Nếu bạn đã khai báo trong DNS và apache đầy đủ mà vẫn không thấy các tên ảo hoạt động, rất có thể bạn phải chờ trong vòng một ngày (hoặc sớm hơn, hoặc lâu hơn) để DNS records chứa những thông tin bạn vừa thành lập được cập nhật.<br/><br/> Muốn kiểm tra ngay lập tức xem các tên ảo đã được thiết lập đúng chưa bạn có thể gõ httpd -S (hay apache -S)<br/><br/> Bài viết trên đã hướng dẫn cách thiết lập dns và apache cần thiết cho việc sử dụng tên ảo dựa vào tên (name-based virtual host). Bạn có thể đọc thêm tài liệu của Apache tại đây với hướng dẫn cách sử dụng tên ảo dựa trên IP (IP-based virtual host) và các ví dụ phức tạp hơn<br/><br/> Larry - vnLinux</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1542.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1542/7360.html#7360,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><b>Ứng dụng tập tin htaccess trên máy chủ Apache </b><br/><br/> Bạn đã từng nghe về tập tin .htaccess trên các máy chủ hệ Unix (FreeBSD, Linux, Solaris, True64...)? Bạn biết rằng tập tin này có thể điều khiển được khá nhiều thứ, thậm chí thay đổi được cả thiết lập mặc định của máy chủ Apache<span class="link"> http://apache.org/.</span> Thế nhưng bạn đã tận dụng được bao nhiêu lệnh trong tập tin này để làm cho website của mình mạnh mẽ, an toàn hơn?<br/><br/> Trong bài viết tổng hợp này, tác giả sẽ cùng bạn nghiên cứu, ứng dụng một số lệnh thông dụng nhất để thực hiện các tác vụ bảo vệ, điều khiển website theo ý bạn muốn. Nào, xin mời bạn!<br/><br/> <b>Tạo trang báo lỗi mang màu sắc cá nhân</b><br/><br/> Trong quá trình làm việc với client, nếu có lỗi xảy ra (ví dụ như không tìm thấy tập tin) thì Apache sẽ báo lỗi bằng một trang có sẵn hiển thị mã số của lỗi đó, rất không đẹp và khó hiểu.<br/><br/> Với .haccess thì bạn có thể tự tạo các trang báo lỗi hay hơn. Để làm được điều này thì trong tập tin .htaccess bạn thêm dòng sau:<br/><br/> <b>ErrorDocument mã số lỗi /trangloi.html</b><br/><br/> Trong đó mã số lỗi là mã số của lỗi phát sinh, sau đây là những lỗi hay gặp:<br/><br/> <blockquote>- 401 - Authorization Required (cần password để truy nhập)<br/> - 400 - Bad request (Lỗi do yêu cầu)<br/> - 403 - Forbidden (không được vào)<br/> - 500 - Internal Server Error (lỗi server)<br/> - 404 - Wrong page (lỗi trang, không tìm thấy...)&nbsp;
</blockquote><br/><br/> còn trangloi.html là trang web mà bạn muốn hiển thị khi lỗi phát sinh, có thể đưa vào tập tin này nội dung hay đồ hoạ gì tùy bạn, chẳng hạn liên kết trở về trang chính của trang web. Ví dụ: ErrorDocument 404/trangloi.html hoặc: ErrorDocument500/loi/500.html<br/><br/> Bây giờ bạn hãy tải (upload) 2 tập tin .htaccess và trangloi.html lên hosting của mình.<br/><br/> <b>Chống ăn cắp băng thông (bandwidth)</b><br/><br/> Thông thường những dịch vụ lưu trữ web chỉ cung cấp cho bạn một lượng dữ liệu luân chuyển (data transfer) nhất định hàng tháng và khi bạn sử dụng hết lượng dữ liệu này, website của bạn sẽ tự động bị đóng cửa. Bạn sẽ phải trả thêm tiền cho lượng băng thông vượt quá hoặc phải buộc lòng chờ đến tháng sau.<br/><br/> Nếu hình ảnh, dữ liệu, … của bạn bị các website khác “ăn trộm” (bằng các thủ thuật đơn giản) làm cho lượng dữ liệu luân chuyển của bạn tăng lên, thì có nghĩa là bạn sẽ phải trả tiền cho cái mà bạn không sử dụng. Sử dụng tập tin .htaccess là một giải pháp hoàn hảo, để ngăn chặn việc sử dụng hình ảnh trái phép trên website của bạn. Bạn chỉ việc đưa vào tập tin .htaccess nội dung sau :<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://&#40;www\.&#41;?trangweb\.com/.*$ &#91;NC&#93;
RewriteRule \.&#40;gif|jpg&#41;$ - &#91;F&#93;</pre>
</div><br/><br/> Ở đoạn mã trên tôi sử dụng module Rewrite của máy chủ Apache, bạn chỉ việc thay đổi trangweb.com thành địa chỉ website của mình.<br/><br/> Có thể sử dụng một hình ảnh nào đó cảnh cáo những kẻ “ăn trộm” băng thông, bạn dùng dòng lệnh sau:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://&#40;www\.&#41;?trangweb\.com/.*$ &#91;NC&#93;
RewriteRule \.&#40;gif|jpg&#41;$<span class="link"> http://www.trangweb.com/diehotlinker.jpg</span> &#91;R,L&#93;</pre>
</div><br/><br/> <b>Không cho hiện danh sách tập tin trong thư mục</b><br/><br/> Trong trường hợp một thư mục nào đó không có tập tin index hoặc default, Apache sẽ hiển thị một danh sách liệt kê những tập tin có trong thư mục đó. Tuy nhiên nếu đây là những tài liệu nhạy cảm, bạn không muốn người khác thấy, hãy thêm lệnh sau vào tập tin .htaccess<br/><br/> Options –Indexes<br/> <b><br/> Thay thế trang index</b><br/><br/> Thông thường khi truy nhập vào một trang web, Apache sẽ tìm tập tin index.htm hoặc default.htm trả kết quả về cho trình duyệt, bạn có thể dùng .htaccess thay đổi mặc định này.<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>DirectoryIndex index.php index .php3 messagebrd.pl index.html index.htm</pre>
</div><br/><br/> Với dòng lệnh này thì tất cả các tập tin được liệt kê sẽ được tìm theo thứ tự khi có yêu cầu tới thư mục hiện hành, trang nào được tìm thấy đầu tiên sẽ thành trang index của thư mục.<br/><br/> <b>Cấm/hạn chế IP truy nhập</b><br/><br/> Một số người muốn làm ngập (flood) trang web của bạn, việc cần làm là ngăn cấm những IP của những người này truy nhập vào trang web, bạn thêm đoạn mã sau vào .htaccess: deny from 203.262.110.20; cho phép IP truy nhập: allow from 203.262.110.20.<br/><br/> Nếu bạn chỉ viết IP dưới dạng: 203.262.110 thì sẽ cấm tất cả IP trong dải từ 203.262.110.1 đến 203.262.110.254.<br/><br/> Sử dụng dòng lệnh sau: Deny from all sẽ cấm tất cả mọi truy nhập đến các trang web trong thư mục, tuy nhiên các tập tin trong đó vẫn có thể được sử dụng từ bên ngoài thông qua các lệnh dạng require hay include (trong lập trình PHP), có thể xem thêm mã nguồn của PHPBB forum,IBF... để hiểu rõ hơn.<br/><br/> <b>Tự động chuyển đến địa chỉ mới (Redirection)</b><br/><br/> Bạn chuyển trang web của mình đến địa chỉ mới nhưng không phải ai cũng biết điều này, wwwect truy nhập từ xa một cách đơn giản bằng lệnh sau:<br/><br/> Redirect/olddirectory<span class="link"> http://www.trangwebmoi.com/thumucmoi</span> ;<br/><br/> <b>Tuỳ biến đuôi tập tin</b><br/><br/> Thông thường, tuỳ thuộc vào ngôn ngữ lập trình web mà bạn sử dụng tập tin sẽ có phần mở rộng khác nhau như: html, htm, asp, aspx, php, cgi, …Tuy nhiên nếu sử dụng .htaccess bạn có thể tác động vào máy chủ Apache, Apache sẽ gọi đến tập tin của bạn và trả về cho trình duyệt web của người dùng với phần mở rộng do bạn quy định trong .htaccess. Bạn sử dụng đoạn lệnh sau trong tập tin .htaccess:<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>RewriteEngine on
RewriteRule &#40;.*&#41;\.dll$ $1.html</pre>
</div><br/><br/> Html là phần mở rộng thực sự của những tập tin trên website, dll là phần mở rộng do bạn lựa chọn. Lưu ý trong liên kết trên trang web, bạn phải gọi đúng đường dẫn đến tập tin với phần mở rộng mới (ở trên là dll), ví dụ<span class="link"> http://www.trangweb.com/in</span> dex.dll<br/><br/> Lưu ý khi sử dụng tập tin .htaccess:<br/><br/> - Chỉ áp dụng trên máy chủ Apache đã bật chế độ .htaccess, nếu chưa bạn hãy thử liên hệ với nhà cung cấp dich vụ hosting.<br/><br/> - Để tạo ra tập tin này bạn có thể sử dụng ngay chương trình Notepad của Windows: chọn chế độ save as với tên .htaccess, nhưng khi lưu nhớ bỏ đuôi txt.<br/><br/> -.htaccess chỉ có tác dụng đối với những tập tin ngang hàng (trong cùng thư mục với nó) hoặc thư mục con. Với thư mục, nó chỉ có tác dụng trong thư mục chứa nó và thư mục con, còn vô tác dụng với thư mục mẹ (parent directory).<br/><br/> - Bạn có thể dùng một số chương trình FTP (Leaf FTP, WS FTP, Cute FTP) để tải tập tin .htaccess lên hosting của mình với chế độ ASCII, nếu nó không hoạt động bạn thử CHMOD với giá trị 644.<br/><br/> Hoàng Nghĩa Hạnh </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1450.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1450/7235.html#7235,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><blockquote><br/> <blockquote> Cách anh dùng là chỉ cho database service lắng nghe trên localhost (127.0.0.1). Để truy cập trực tiếp vào database, anh dùng SSH và tạo tunnel đến cổng dịch vụ của database ở 127.0.0.1. Bên ngoài có muốn connect vào cũng không được vì database service không "LISTEN" trên IP nào khác ngoài loopback IP<br/> &nbsp;
</blockquote><br/><br/> Pó tay với anh luôn , khi nghĩ ra đến cách làm này Để truy cập trực tiếp vào database, anh dùng SSH và tạo tunnel đến cổng dịch vụ của database ở 127.0.0.1 &nbsp;
</blockquote><br/><br/> Thấy anh conmale và nhiều huynh nhắc vụ tunnel nhưng trên hva chưa có thảo luận gì về vụ này , thêm vào đó có vẻ anh thích vụ này nên em đã viết 1 bài về linux tunnel tại <span class="link"> http://hvaonline.net/hvaonline/posts/list/1522.html</span> để anh em có thêm đề tài bàn tán :wink:<br/><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1522.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1522/7229.html#7229,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Apr 15th 2006<br/><br/> <b>Table of Contents</b><br/><br/> 1 . First<br/> 2 . Install<br/> 3 . Configuration<br/> 4 . Use<br/> 5 . Reference<br/><br/> <font size='+1'><b>First :</b></font><br/> Khi sử dụng môi trường net của trường hoặc của công ty chúng ta gặp không ít khó khăn . bài viết này sẽ giới thiệu cho bạn đọc sử dụng chương trình httptunnel để khắc phục những giới hạn trong các môi trường đó .<br/> bài viết sẽ chú trọng việc tạo tunnel khi client nằm sau proxy của các môi trường như trên và để tránh khỏi những giới hạn từ proxy của các môi trường đó .<br/><br/><br/> <b><i>Mô hình tunnel trong bài viết : </i></b><br/> bmuht_fig.76252_9917744031946595406781be0c952956/6/8/6002/daolpu/enilnoavh/ten.murofavh.www//:ptth<br/><br/><br/> Ngoài httptunnel , còn có rất nhiều loại tunnel trên linux như<br/><br/> * stone<span class="link"> http://www.gcd.org/sengoku/stone/</span><br/> * Zebedee<span class="link"> http://www.winton.org.uk/zebedee/</span><br/> * stunnel<span class="link"> http://stunnel.mirt.net/</span><br/> * sslwrap<span class="link"> http://www.quiltaholic.com/rickk/sslwrap/</span><br/> * OpenSSH<span class="link"> http://www.openssh.org/</span><br/><br/> Ngoài httptunnel cá nhân tôi rất thích sử dụng chương trình tưunel stone , trong thời gian tới tôi sẽ viết bài giới thiệu cách sử dụng của <b>stone</b> .<br/><br/> <b><font size='+1'>2 . Install</font> (from readme in package)</b><br/> <blockquote><br/> 1. `cd' to the directory containing the package's source code and type<br/><br/> `./configure' to configure the package for your system. If you're<br/><br/> using `csh' on an old version of System V, you might need to type<br/><br/> `sh ./configure' instead to prevent `csh' from trying to execute<br/><br/> `configure' itself.<br/><br/> Running `configure' takes awhile. While running, it prints some<br/><br/> messages telling which features it is checking for.<br/><br/> 2. Type `make' to compile the package.<br/><br/> 3. Optionally, type `make check' to run any self-tests that come with<br/><br/> the package.<br/><br/> 4. Type `make install' to install the programs and any data files and<br/><br/> documentation.<br/><br/> 5. You can remove the program binaries and object files from the<br/><br/> source code directory by typing `make clean'. To also remove the<br/><br/> files that `configure' created (so you can compile the package for<br/><br/> a different kind of computer), type `make distclean'. There is<br/><br/> also a `make maintainer-clean' target, but that is intended mainly<br/><br/> for the package's developers. If you use it, you may have to get<br/><br/> all sorts of other programs in order to regenerate files that came<br/><br/> with the distribution.&nbsp;
</blockquote><br/><br/> <font size='+1'><b>3 . Configuration</b></font><br/><br/> Trên server bên ngoài bạn dùng lệnh<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$hts -F localhost:22 8888</pre>
</div><br/><br/> Trên windows từ xa bạn dùng lệnh sau để establish connection với server<br/><br/> <blockquote>$ htc -F 2222 -P ccproxy2.company.ac.jp:10080 221.222.222.22:8888&nbsp;
</blockquote><br/><br/> * -P ccproxy2.company.ac.jp:10080 là proxy<br/><br/> * 221.222.222.22:8888 là máy chủ của mình đã config bước trên server bên ngoài<br/><br/> <font size='+1'><b> 4 . Use </b></font><br/><br/> <b>Cách kết nối đến tunnel server trên linux </b><br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>&#91;inhost&#93;$ ssh -p 2222 -l username localhost</pre>
</div><br/> * username là user của bạn trong server (outside)<br/><br/> * localhost là host server của bạn<br/><br/> <b>Cách kết nối đến tunnel server trên windows</b><br/><br/> Download client của httptunnel trên nền Windows tại .<br/><span class="link"> http://userpages.umbc.edu/~tmoses1/hypertunnelNT.zip</span><br/><br/> giải nén và khởi động chương trình trên DOS và dùng lệnh .<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$ htc -F 2222 -P ccproxy2.company.ac.jp:10080 221.222.222.22:8888</pre>
</div><br/><br/> sau đó dùng chương trình putty (hoặc các chương trình giống putty) kết nối đến server<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>Địa chỉ : localhost
Port : 8888</pre>
</div><br/><br/> -----------------------<br/><br/> Có vài người bạn tôi có làm theo hướng dẫn như bị thất bại . tôi xin đưa ra những trường họp thường xãy ra và giải pháp của chúng .<br/><br/> <b>1 . Firewall chưa mở .</b><br/><br/> giải pháp : Allow các packet đi vào từ port 8888<br/><br/> <b>2 . Trong hosts.alllow không set allow 127.0.0.1 .</b><br/><br/> giải pháp : mở file /etc/hosts.alllow và thêm vào như sau<br/><br/> All : 127.0.0.1<br/><br/> <b>3. Chỉ định tunnel server sai địa chỉ của sshd daemon .</b><br/><br/> phần giới thiệu trên tôi đã viết là<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$hts -F localhost:22 8888</pre>
</div><br/><br/> nếu bạn không biết được ssh deamon đang listen tại đia chị nào , trong trường họp này , mở file /etc/ssh/sshd_config kiếm đến dòng<br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>ListenAddress 192.168.11.5:22</pre>
</div><br/><br/> từ địa chỉ trên , ta đã xác thực được ssh daemon listen trên địa chỉ 192.168.11.5 và port 22 , từ đó , ta có thể đổi lại server của httptunnel listen trên địa chỉ này với dòng lệnh sau để cho tương ứng .<br/><br/><br/> <span class="quotetxt"><b>Code:</b></span><br/>
<div class="coded"">
<pre>$hts -F 192.168.11.5:22 8888</pre>
</div><br/> <b><br/><br/> <font size='+1'>5 . Reference</b></font><br/><br/> Official home page :<br/><span class="link"> http://www.nocrew.org/software/httptunnel.html</span><br/> FAQ :<br/><span class="link"> http://www.nocrew.org/software/httptunnel/faq.html</span><br/> Other sites :<br/><span class="link"> http://www.hirochan.org/freebsd/setup/httptunnel.html</span> (copy mô hình trên)<br/><br/><br/> Tác giả : 777<br/> Nguồn : vnhacker.org</span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1121.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1121/7133.html#7133,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><font color='red'>Cảnh cáo bạn conan1212 lần thứ 1 về việc phát ngôn đã kích trong bài trả lời . </font><br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1450.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1450/6934.html#6934,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"> <blockquote>Ví tớ không hiễu ở điểm, có rất nhiều dịch vụ đang chạy trên hệ điều hành Linux nhưng không biết dịch vụ nào quan trọng và dịch vụ nào không quan trọng, chĩ biết mấy cái dịch vụ của webserver . Các dịch vụ này nếu bật lên mà các dịch vụ này có lỗ hỗng thì hacker họ khai thác như thế nào vào các dịch vụ này <b>Vậy giả sử hacker họ dùng sniffer để nghe lén mạng chẳng hạn thì trên linux họ dùng công cụ gì để làm điều này, tớ đọc tài lệu họ bảo các dịch vụ này rsh, rcp, telnet và rlogin phải Off vì khi truyền nó không được mã hoá như ssh . Họ bảo mình off mà mình không biết tại sao nó off thì ... tức lắm . Xin cho tớ biết một công cụ sniffer mà anh em thường dùng </b>(câu hỏi phụ :mrgreen .&nbsp;
</blockquote><br/> Anh dùng tcpdump xem ... cách dùng thì đọc bài ký sự của anh conmale xong là anh biết dùng ngay <img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom"><br/><br/> <blockquote> Bài toán thứ 4 : Cái này thì mình học hỏi anh em sau vậy, xét về mặt cấu hình cho nó thì tớ thấy 1.x nó cấu hình dễ dàng hơn 2.x còn các mặt khác thì học hỏi anh em sau vậy . &nbsp;
</blockquote><br/><br/> Nói 1 cách tổng quát thì em nhận định 1.x và 2.x mổi cái có điểm mạnh / điểm yếu của nó (về mặt tính năng ) cho nên khi anh chọn 1 trong 2 thì nên chọn version <b>theo mục đích của anh</b> thì sau này dể phát triển theo hướng của anh hơn . (dạo này không theo dõi tin nên không chắc nó có kết họp và mở rổng tính năng hay không , anh tham khảo thêm trong trang chủ của nó nha )<br/><br/> Hẹn gặp anh tại thread : Cấu hình Apache :lol:<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1450.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1450/6873.html#6873,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"><blockquote> 3. Nếu các bài toán của G.A phải đồng thời thoả mãn thì cách giải quyết của 777 chưa hợp lý lắm vì sau bài toán 1, thì sẽ không thoả mãn bài toán 3 vì user Trường không được cấp shell&nbsp;
</blockquote><br/><br/> á !!! đau quá đừng chọt mà :lol: nhột ..... nhột ......<br/><br/> đúng là tôi không đọc kĩ bài 3 . mà đọc cũng không hiểu từ <b>ứng dụng của apache chỉ định cái gì của apache</b> nên không tiện trả lời ............ ok vậy thì xét lại đã <img src="/hvaonline/images/smilies/8f173d0eaffc4b90c0c0361b8f37cc17.gif" border="0" alt="smilie" align="absbottom"><br/><br/> <blockquote> - Bài toán thứ 3 : Mình có các user ở trên, mình muốn thiết lập cho user Trường được phép chạy các ứng dụng từ root ví dụ như chạy ứng dụng của webserver và 2 user còn lại thì không được phép sử dụng ứng dụng webserver này . &nbsp;
</blockquote><br/><br/> Miển cưỡng trả lời thì ..... nếu không cho Trường sài ssh mà có thể "chạy apache" thì không được rồi, vì lấy gì để chạy ứng dụng apache dưới quyền user Trường đây ?<br/><br/> ps :<br/> Bài 5 củng không đọc kĩ nên trả lời sai bét may quá .. chưa ai nhìn ... edit thôi :lol: mà tôi thấy có vài điểm mâu thuẩn tại câu trả lời trên của bạn giti nhưng nói dài dòng sợ thầy "choáng" mất ...... đành đợi thầy ra bài vào chấm điểm và díp kịp xong rồi tính tiếp vậy :wink:<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/23.html">Thảo luận hệ điều hành Windows</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1036.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1036/6862.html#6862,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody">Em cũng sài GAIM đây anh .. nhưng mà của thàng Win chuối quá không tài nào thay đổi được kích thước của nó , không hiển thị được tv có dấu , lại không dùng được emo <img src="/hvaonline/images/smilies/40af9ca5d4af4f53bc05e0396f2436f0.gif" border="0" alt="smilie" align="absbottom"><br/><br/> anh có tuyệt chiêu gì chỉ em với<br/> <img src="/hvaonline/images/smilies/85f758dd90f8f9d2587ecc9d55b16cf3.gif" border="0" alt="smilie" align="absbottom"><br/><br/> ---------<br/> good job ! Mr zorro :wink: </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1450.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1450/6854.html#6854,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row2" valign="top">
			<span class="postbody"> Bổ sung thêm cho trả lời của bạn giti<br/><br/> <blockquote>Mình có 3 user sau : user A ứng với tên là Phúc, B ứng với tên là Trường, C ứng với tên là An và 1 tài khoản root.<br/> - Bài toán đưa ra như sau mình là account root mình muốn thiết lập user A này được quyền truy cập, sử dụng SSH, 2 user còn lại không được quyền sử dụng, truy cập SSH .&nbsp;
</blockquote><br/><br/> Khi add user anh dùng lệnh như sau<br/><br/> Case 1 : Cấp quyền sử dụng shell<br/> <font color='yellow'>useradd -s /bin/bash Phuc</font><br/><br/> Case 2 : Không cấp quyền sử dụng shell<br/> <font color='yellow'>useradd -s /bin/false Truong</font><br/><br/> <blockquote>- Bài toán thứ 2 : khi cài đặt một server xong, những dịch vụ nào mình cần chú ý mục đích bảo mật cho các dịch vụ này bây giờ và về sau nhằm tránh bị khai thác . Server này dự định làm webserver chĩ chạy các ứng dụng như apache, mysql .&nbsp;
</blockquote><br/><br/> Muốn thực hiện vấn đề này anh cần phải tắt hết tất cả những service không cần thiết .<br/><br/> Ví dụ cụ thể - nếu như server của anh chỉ chạy MySQl và Apache thì chỉ cần turn on các service như sau là "đủ để chạy" .<br/><br/> [minh@tech minh]$ chkconfig --list | grep 3:on<br/> <font color='yellow'>syslog </font> 0:off 1:off 2:on 3:on 4:on 5:on 6:off<br/> <font color='yellow'>network </font> 0:off 1:off 2:on 3:on 4:on 5:on 6:off<br/> <font color='yellow'>random </font> 0:off 1:off 2:on 3:on 4:on 5:on 6:off<br/> <font color='yellow'>sshd </font> 0:off 1:off 2:off 3:on 4:off 5:on 6:off<br/> <font color='yellow'>anacron</font> 0:off 1:off 2:on 3:on 4:on 5:on 6:off<br/> <font color='yellow'>crond</font> 0:off 1:off 2:on 3:on 4:on 5:on 6:off<br/> <font color='yellow'>mysql </font> 0:off 1:off 2:off 3:on 4:off 5:off 6:off<br/><br/> Tham khảo về chkconfig tại đây .<br/><span class="link"> http://www.mediacollege.com/cgi-bin/man/page.cgi?topic=chkconfig</span><br/><br/> sau khi hoàng tất việc này anh chỉ còn việc cấu hình apache và mysql cho hoàng chỉnh là xong . còn về việc cấu hình nó làm sao cho tốt thì phục thưộc vào anh service cái gì trên các application đó . cần nhất là phải đọc nát hết manual của nó :lol:<br/><br/><br/><br/> <blockquote> - Bài toán thứ 5 liên quan đến Mysql : Ví dụ mình có một hosting địa chĩ IP sau 10.1.32.4 (địa chĩ IP này cho đại, đừng quan tâm đến nó) chứa database của diễn đàn Invision Power Board và một hosting khác có địa chỉ IP sau 10.1.36.5 và ở hosting này chứa sourcecode của Invision (cả hai host này đều đặt không cùng server và không có CPANEL để quản lý) . Câu hỏi đặt ra, làm thế nào để sử dụng kết nối database từ xa, tức là IP 10.1.36.5 này kết nối với database của hosting 10.1.32.4 . Trong Invision thì mình biết chĩnh sửa cấu hình, nhưng còn trên hệ điều hành Linux thì việc cấu hình này ra sao (mình chĩ quan tâm đến cấu hình cho mysql ở server như thế nào, không quan tâm đến sourcecode của diễn đàn) &nbsp;
</blockquote><br/><br/> # mysql -h 10.1.32.4 -u truong -p<br/> Enter pass :<br/><br/> để thực hiện lệnh trên cần phải tạo user / pass / permission trước / (xem manual của mysql ) sau đó vào sửa file của diễn đàn thành .<br/><br/> host : 10.1.32.4<br/> user : truong<br/> pass : xxxx<br/><br/> và thêm rule vào firewall để có thể access từ remote . </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
	
					
        <tr>		
          <td class="postInfo">
			<table width="100%">				
              <tr>								
                <td align="left" >
				<span class="topmenu"><a href="/hvaonline/forums/show/24.html">Thảo luận hệ điều hành *nix</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/list/1334.html">Empty</a></span>
				<span class="topmenu"><img src="/hvaonline/templates/viet/images/en_US/arrow.gif">&nbsp;<a href="/hvaonline/posts/preList/1334/6254.html#6254,">Go to message</a></span>
              </tr>
			</table>
			</td>
        </tr>

        <tr>
        <!-- Message -->
          	<td class="row1" valign="top">
			<span class="postbody"><b>Nội dung</b><br/><br/> 1. Giới thiệu<br/> 2. Cấu hình SNMP<br/> 3. Tham khảo<br/><br/> <b>Giới thiệu</b><br/><br/> SNMP: Simple Network Management Protocol<br/><br/> <b>Cấu hình SNMP</b><br/><br/> Phần 1: Cài đặt snmp<br/><br/> Cài những gói net-snmp, net-snmp-utils<br/><br/> Cho người dùng FC:<br/><br/> <b># yum install net-snmp net-snmp-utils</b><br/><br/> <b>Phần 2: Cấu hình</b><br/><br/> Chỉnh sửa file cấu hình <b>snmpd.conf</b> (FC user: /etc/snmp/snmpd.conf)<br/> <blockquote><br/> ###########################################<br/> # Access Control (Quyền truy nhập thông tin)<br/> ###########################################<br/> # First, map the community name "public" into a "security name"<br/> # thay "MậtkhẩuSNMP" bằng một chuỗi ký tự<br/> com2sec local localhost MậtkhẩuSNMP<br/> com2sec myLAN 192.168.1.0/24 MậtkhẩuSNMP<br/><br/> # Second, map the security name into a group name:<br/> # RWGroup: quyền đọc/viết (Read, Write)<br/> # ROGroup: chỉ có quyền đọc (Read Only)<br/> group RWGroup v1 local<br/> group RWGroup v2c local<br/> group RWGroup usm local<br/> group ROGroup v1 myLAN<br/> group ROGroup v2c myLAN<br/> group ROGroup usm myLAN<br/><br/> # Third, create a view for us to let the group have rights to:<br/> view all included .1 80<br/><br/> # Finally, grant the group read-only access to the systemview view.<br/> # group context sec.model sec.level prefix read write notif<br/> access ROGroup "" any noauth exact all none none<br/> access RWGroup "" any noauth exact all all none<br/><br/> ##############################<br/> # System contact information<br/> ##############################<br/> syslocation Công ty XXX<br/> syscontact Admin &lt;email@domain.name&gt;<br/><br/> #######################################<br/> # disk checks (kiểm tra dung lượng HDD)<br/> #######################################<br/> # báo lỗi nếu / partition còn ít hơn 100 MB, /var còn ít hơn 500 MB<br/> disk / 100000<br/> disk /var 500000<br/><br/> ############################################<br/> # load average checks (kiểm tra tải của CPU)<br/> ############################################<br/> # báo lỗi nếu vượt mức trung bình sau đây (1, 5, 15 phút)<br/> # load [1MAX=12.0] [5MAX=13.0] [15MAX=14.0]<br/> load 12 13 14&nbsp;
</blockquote><br/><br/> <b>Phần 3: Khởi động snmpd</b><br/><br/> Cho người dùng FC<br/><br/> // tự động chạy mỗi khi bật máy<br/> <b> # chkconfig --level 3 snmpd on</b><br/> // khởi động cho lần đầu tiên<br/> <b> # /etc/init.d/snmpd start</b><br/><br/> <b>Phần 4: Kiểm tra hoạt động</b><br/><br/> Sử dụng lệnh snmpwalk để xem một số thông tin hệ thống<br/> <blockquote><br/> // -----------------------------------<br/> // phần memory còn thừa (chưa sử dụng)<br/> $snmpwalk -v 1 -c MậtkhẩuSNMP localhost .1.3.6.1.4.1.2021.4.6.0<br/> // kết quả: 120 MB RAM chưa sử dụng<br/> UCD-SNMP-MIB::memAvailReal.0 = INTEGER: 120400<br/><br/> // -----------------------------------<br/> // dung lượng HDD, / partition<br/> $ snmpwalk -v 1 -c MậtkhẩuSNMP localhost .1.3.6.1.4.1.2021.9.1.9.1<br/> // kết quả: đã sử dụng 13%<br/> UCD-SNMP-MIB::dskPercent.1 = INTEGER: 13<br/><br/> // -----------------------------------<br/> // số user đang login vào hệ thống<br/> $ snmpwalk -v 1 -c MậtkhẩuSNMP localhost hrSystemNumUsers.0<br/> // có 70 users<br/> HOST-RESOURCES-MIB::hrSystemNumUsers.0 = Gauge32: 70<br/><br/> // -----------------------------------<br/> // số TCP connection đang mở<br/> $ snmpwalk -v 1 -c MậtkhẩuSNMP localhost .1.3.6.1.2.1.6.9.0<br/> // có 123 open connections<br/> TCP-MIB::tcpCurrEstab.0 = Gauge32: 123&nbsp;
</blockquote><br/><br/> <b>Tham khảo, thông tin thêm</b><br/><br/> 1. Xem MIB tree: Mbrowse is an SNMP MIB browser based on GTK and net-snmp. It is released under the GPL.<br/><br/><br/> James Nguyen.<br/> </span>
				
        <!-- Attachments -->
			</td>
        </tr>
		
					
        <tr>		
          <td class="spacerow" height="1"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
        </tr>
				
        <!-- END OF POST LISTING -->
			
				

			
      </table>
		
			<table cellspacing="2" cellpadding="2" width="100%" align="center" border="0">
				<tr>					
					
					<td valign="middle" align="left" colspan="0">
						<span class="nav">
						&nbsp;
						</span>
					</td>

					<td valign="middle" align="right">					
		<table cellspacing="0" cellpadding="0" border="0">
		<tr>			  
			<td nowrap="nowrap" align="right">
				<form action="" name="p" id="p" accept-charset="UTF-8"> 
					
					<span class="gensmall">Go to Page:&nbsp;</span>
					
						<a href="/hvaonline/posts/listByUser/25267.html">
							<img src="/hvaonline/templates/viet/images/icon_first_page.gif" width="8" height="9" alt="First Page" title="First Page"/>
						</a>
								<a href="/hvaonline/posts/listByUser/300/25267.html">
									<img src="/hvaonline/templates/viet/images/icon_prev_page.gif" width="5" height="9" alt="Page 11" title="Page 11"/>
								</a>
							
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/330/25267.html">12</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/360/25267.html">13</a></span>
								<span class="gensmall"><a href="/hvaonline/posts/listByUser/390/25267.html">14</a></span>
							
					
						<select onchange="if(this.options[this.selectedIndex].value > 0){ document.location = '/hvaonline/posts/listByUser/'+ ( (this.options[this.selectedIndex].value - 1) * 30)  + '/25267' + '.html'; }" name="select2">
							<option value="-1" selected="selected">---</option>		
							
								<option value="1" >1</option>	
								<option value="2" >2</option>	
								<option value="3" >3</option>	
								<option value="4" >4</option>	
								<option value="5" >5</option>	
								<option value="6" >6</option>	
								<option value="7" >7</option>	
								<option value="8" >8</option>	
								<option value="9" >9</option>	
								<option value="10" >10</option>	
								<option value="11" >11</option>	
								<option value="12" >12</option>	
								<option value="13" >13</option>	
								<option value="14" >14</option>	
								<option value="15" selected="selected">15</option>	
								<option value="16" >16</option>	
								<option value="17" >17</option>	
						</select>
						
							<a href="/hvaonline/posts/listByUser/450/25267.html">
								<img src="/hvaonline/templates/viet/images/icon_next_page.gif" width="5" height="9" alt="Page 16" title="Page 16"/>
							</a>
						
						<a href="/hvaonline/posts/listByUser/480/25267.html">
							<img src="/hvaonline/templates/viet/images/icon_last_page.gif" width="8" height="9" alt="Last Page" title="Last Page (17)"/>
						</a>
				</form>
			</td>
		</tr>
		</table>
</td>
				</tr>
				
				<tr>
					<td colspan="3"><img src="/hvaonline/templates/viet/images/spacer.gif" alt="" width="1" height="1" /></td>
				</tr>			
			</table>
		</td>
	</tr>
</table>


	<tr>	
		<td align="center">
		<br>
					</td>
	</tr>

	<tr>
		<td align="center">
			<span class="copyright">Powered by JForum - Extended by <a href="MailTo:lienlac@hvaonline.net">HVAOnline</a><br>
			&nbsp;hvaonline.net&nbsp; | &nbsp;hvaforum.net&nbsp; | &nbsp;hvazone.net&nbsp; | &nbsp;hvanews.net&nbsp; | &nbsp;vnhacker.org<br>
			1999 - 2013 &copy;
			v2012|0504|218|
		  </span>
	  </td>
	</tr>
<iframe src="/hvaonline/templates/ping_session.html" height="0" width="0" frameborder="0" scrolling="no"></iframe>
</body>
</html>
